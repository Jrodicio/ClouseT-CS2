var BR=Object.defineProperty,jR=Object.defineProperties;var $R=Object.getOwnPropertyDescriptors;var hu=Object.getOwnPropertySymbols;var mI=Object.prototype.hasOwnProperty,gI=Object.prototype.propertyIsEnumerable;var pI=(t,e,n)=>e in t?BR(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,M=(t,e)=>{for(var n in e||={})mI.call(e,n)&&pI(t,n,e[n]);if(hu)for(var n of hu(e))gI.call(e,n)&&pI(t,n,e[n]);return t},se=(t,e)=>jR(t,$R(e));var Of=(t,e)=>{var n={};for(var r in t)mI.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&hu)for(var r of hu(t))e.indexOf(r)<0&&gI.call(t,r)&&(n[r]=t[r]);return n};var ht=null,fu=!1,Lf=1,HR=null,Qt=Symbol("SIGNAL");function Q(t){let e=ht;return ht=t,e}function pu(){return ht}var mu={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function gu(t){if(fu)throw new Error("");if(ht===null)return;ht.consumerOnSignalRead(t);let e=ht.producersTail;if(e!==void 0&&e.producer===t)return;let n,r=ht.recomputing;if(r&&(n=e!==void 0?e.nextProducer:ht.producers,n!==void 0&&n.producer===t)){ht.producersTail=n,n.lastReadVersion=t.version;return}let i=t.consumersTail;if(i!==void 0&&i.consumer===ht&&(!r||qR(i,ht)))return;let o=Eo(ht),s={producer:t,consumer:ht,nextProducer:n,prevConsumer:i,lastReadVersion:t.version,nextConsumer:void 0};ht.producersTail=s,e!==void 0?e.nextProducer=s:ht.producers=s,o&&II(t,s)}function yI(){Lf++}function vI(t){if(!(Eo(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===Lf)){if(!t.producerMustRecompute(t)&&!vu(t)){kf(t);return}t.producerRecomputeValue(t),kf(t)}}function Ff(t){if(t.consumers===void 0)return;let e=fu;fu=!0;try{for(let n=t.consumers;n!==void 0;n=n.nextConsumer){let r=n.consumer;r.dirty||zR(r)}}finally{fu=e}}function Vf(){return ht?.consumerAllowSignalWrites!==!1}function zR(t){t.dirty=!0,Ff(t),t.consumerMarkedDirty?.(t)}function kf(t){t.dirty=!1,t.lastCleanEpoch=Lf}function yu(t){return t&&_I(t),Q(t)}function _I(t){t.producersTail=void 0,t.recomputing=!0}function Uf(t,e){Q(e),t&&EI(t)}function EI(t){t.recomputing=!1;let e=t.producersTail,n=e!==void 0?e.nextProducer:t.producers;if(n!==void 0){if(Eo(t))do n=Bf(n);while(n!==void 0);e!==void 0?e.nextProducer=void 0:t.producers=void 0}}function vu(t){for(let e=t.producers;e!==void 0;e=e.nextProducer){let n=e.producer,r=e.lastReadVersion;if(r!==n.version||(vI(n),r!==n.version))return!0}return!1}function Qs(t){if(Eo(t)){let e=t.producers;for(;e!==void 0;)e=Bf(e)}t.producers=void 0,t.producersTail=void 0,t.consumers=void 0,t.consumersTail=void 0}function II(t,e){let n=t.consumersTail,r=Eo(t);if(n!==void 0?(e.nextConsumer=n.nextConsumer,n.nextConsumer=e):(e.nextConsumer=void 0,t.consumers=e),e.prevConsumer=n,t.consumersTail=e,!r)for(let i=t.producers;i!==void 0;i=i.nextProducer)II(i.producer,i)}function Bf(t){let e=t.producer,n=t.nextProducer,r=t.nextConsumer,i=t.prevConsumer;if(t.nextConsumer=void 0,t.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!Eo(e)){let o=e.producers;for(;o!==void 0;)o=Bf(o)}return n}function Eo(t){return t.consumerIsAlwaysLive||t.consumers!==void 0}function wI(t){HR?.(t)}function qR(t,e){let n=e.producersTail;if(n!==void 0){let r=e.producers;do{if(r===t)return!0;if(r===n)break;r=r.nextProducer}while(r!==void 0)}return!1}function CI(t,e){return Object.is(t,e)}function GR(){throw new Error}var TI=GR;function DI(t){TI(t)}function jf(t){TI=t}var WR=null;function $f(t,e){let n=Object.create(_u);n.value=t,e!==void 0&&(n.equal=e);let r=()=>bI(n);return r[Qt]=n,wI(n),[r,s=>Ys(n,s),s=>SI(n,s)]}function bI(t){return gu(t),t.value}function Ys(t,e){Vf()||DI(t),t.equal(t.value,e)||(t.value=e,KR(t))}function SI(t,e){Vf()||DI(t),Ys(t,e(t.value))}var _u=se(M({},mu),{equal:CI,value:void 0,kind:"signal"});function KR(t){t.version++,yI(),Ff(t),WR?.(t)}function Hf(t){let e=Q(null);try{return t()}finally{Q(e)}}function ae(t){return typeof t=="function"}function Io(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Eu=Io(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Js(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var ct=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(ae(r))try{r()}catch(o){e=o instanceof Eu?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{AI(o)}catch(s){e=e??[],s instanceof Eu?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Eu(e)}}add(e){var n;if(e&&e!==this)if(this.closed)AI(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Js(n,e)}remove(e){let{_finalizers:n}=this;n&&Js(n,e),e instanceof t&&e._removeParent(this)}};ct.EMPTY=(()=>{let t=new ct;return t.closed=!0,t})();var zf=ct.EMPTY;function Iu(t){return t instanceof ct||t&&"closed"in t&&ae(t.remove)&&ae(t.add)&&ae(t.unsubscribe)}function AI(t){ae(t)?t():t.unsubscribe()}var ln={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var wo={setTimeout(t,e,...n){let{delegate:r}=wo;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=wo;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function wu(t){wo.setTimeout(()=>{let{onUnhandledError:e}=ln;if(e)e(t);else throw t})}function Zs(){}var RI=qf("C",void 0,void 0);function NI(t){return qf("E",void 0,t)}function MI(t){return qf("N",t,void 0)}function qf(t,e,n){return{kind:t,value:e,error:n}}var Ei=null;function Co(t){if(ln.useDeprecatedSynchronousErrorHandling){let e=!Ei;if(e&&(Ei={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=Ei;if(Ei=null,n)throw r}}else t()}function xI(t){ln.useDeprecatedSynchronousErrorHandling&&Ei&&(Ei.errorThrown=!0,Ei.error=t)}var Ii=class extends ct{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Iu(e)&&e.add(this)):this.destination=JR}static create(e,n,r){return new Yn(e,n,r)}next(e){this.isStopped?Wf(MI(e),this):this._next(e)}error(e){this.isStopped?Wf(NI(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Wf(RI,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},QR=Function.prototype.bind;function Gf(t,e){return QR.call(t,e)}var Kf=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Cu(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Cu(r)}else Cu(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Cu(n)}}},Yn=class extends Ii{constructor(e,n,r){super();let i;if(ae(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&ln.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Gf(e.next,o),error:e.error&&Gf(e.error,o),complete:e.complete&&Gf(e.complete,o)}):i=e}this.destination=new Kf(i)}};function Cu(t){ln.useDeprecatedSynchronousErrorHandling?xI(t):wu(t)}function YR(t){throw t}function Wf(t,e){let{onStoppedNotification:n}=ln;n&&wo.setTimeout(()=>n(t,e))}var JR={closed:!0,next:Zs,error:YR,complete:Zs};var To=typeof Symbol=="function"&&Symbol.observable||"@@observable";function dn(t){return t}function Qf(...t){return Yf(t)}function Yf(t){return t.length===0?dn:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var de=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=XR(n)?n:new Yn(n,r,i);return Co(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=PI(r),new r((i,o)=>{let s=new Yn({next:a=>{try{n(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[To](){return this}pipe(...n){return Yf(n)(this)}toPromise(n){return n=PI(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function PI(t){var e;return(e=t??ln.Promise)!==null&&e!==void 0?e:Promise}function ZR(t){return t&&ae(t.next)&&ae(t.error)&&ae(t.complete)}function XR(t){return t&&t instanceof Ii||ZR(t)&&Iu(t)}function eN(t){return ae(t?.lift)}function _e(t){return e=>{if(eN(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Te(t,e,n,r,i){return new Jf(t,e,n,r,i)}var Jf=class extends Ii{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};var OI=Io(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Be=(()=>{class t extends de{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Tu(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new OI}next(n){Co(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Co(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Co(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?zf:(this.currentObservers=null,o.push(n),new ct(()=>{this.currentObservers=null,Js(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new de;return n.source=this,n}}return t.create=(e,n)=>new Tu(e,n),t})(),Tu=class extends Be{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:zf}};var Ge=class extends Be{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Zf={now(){return(Zf.delegate||Date).now()},delegate:void 0};var Xs=class extends Be{constructor(e=1/0,n=1/0,r=Zf){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){let{isStopped:n,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;n||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let n=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){let{_bufferSize:e,_timestampProvider:n,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=n.now(),a=0;for(let u=1;u<r.length&&r[u]<=s;u+=2)a=u;a&&r.splice(0,a+1)}}};var Rt=new de(t=>t.complete());function kI(t){return t&&ae(t.schedule)}function LI(t){return t[t.length-1]}function FI(t){return ae(LI(t))?t.pop():void 0}function Mr(t){return kI(LI(t))?t.pop():void 0}function UI(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(h){try{l(r.next(h))}catch(p){s(p)}}function u(h){try{l(r.throw(h))}catch(p){s(p)}}function l(h){h.done?o(h.value):i(h.value).then(a,u)}l((r=r.apply(t,e||[])).next())})}function VI(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function wi(t){return this instanceof wi?(this.v=t,this):new wi(t)}function BI(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(y){return function(b){return Promise.resolve(b).then(y,p)}}function a(y,b){r[y]&&(i[y]=function(R){return new Promise(function(A,k){o.push([y,R,A,k])>1||u(y,R)})},b&&(i[y]=b(i[y])))}function u(y,b){try{l(r[y](b))}catch(R){g(o[0][3],R)}}function l(y){y.value instanceof wi?Promise.resolve(y.value.v).then(h,p):g(o[0][2],y)}function h(y){u("next",y)}function p(y){u("throw",y)}function g(y,b){y(b),o.shift(),o.length&&u(o[0][0],o[0][1])}}function jI(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof VI=="function"?VI(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,u){s=t[o](s),i(a,u,s.done,s.value)})}}function i(o,s,a,u){Promise.resolve(u).then(function(l){o({value:l,done:a})},s)}}var Du=t=>t&&typeof t.length=="number"&&typeof t!="function";function bu(t){return ae(t?.then)}function Su(t){return ae(t[To])}function Au(t){return Symbol.asyncIterator&&ae(t?.[Symbol.asyncIterator])}function Ru(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function tN(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Nu=tN();function Mu(t){return ae(t?.[Nu])}function xu(t){return BI(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield wi(n.read());if(i)return yield wi(void 0);yield yield wi(r)}}finally{n.releaseLock()}})}function Pu(t){return ae(t?.getReader)}function Le(t){if(t instanceof de)return t;if(t!=null){if(Su(t))return nN(t);if(Du(t))return rN(t);if(bu(t))return iN(t);if(Au(t))return $I(t);if(Mu(t))return oN(t);if(Pu(t))return sN(t)}throw Ru(t)}function nN(t){return new de(e=>{let n=t[To]();if(ae(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function rN(t){return new de(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function iN(t){return new de(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,wu)})}function oN(t){return new de(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function $I(t){return new de(e=>{aN(t,e).catch(n=>e.error(n))})}function sN(t){return $I(xu(t))}function aN(t,e){var n,r,i,o;return UI(this,void 0,void 0,function*(){try{for(n=jI(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function Nt(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function Ou(t,e=0){return _e((n,r)=>{n.subscribe(Te(r,i=>Nt(r,t,()=>r.next(i),e),()=>Nt(r,t,()=>r.complete(),e),i=>Nt(r,t,()=>r.error(i),e)))})}function ku(t,e=0){return _e((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function HI(t,e){return Le(t).pipe(ku(e),Ou(e))}function zI(t,e){return Le(t).pipe(ku(e),Ou(e))}function qI(t,e){return new de(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function GI(t,e){return new de(n=>{let r;return Nt(n,e,()=>{r=t[Nu](),Nt(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>ae(r?.return)&&r.return()})}function Lu(t,e){if(!t)throw new Error("Iterable cannot be null");return new de(n=>{Nt(n,e,()=>{let r=t[Symbol.asyncIterator]();Nt(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function WI(t,e){return Lu(xu(t),e)}function KI(t,e){if(t!=null){if(Su(t))return HI(t,e);if(Du(t))return qI(t,e);if(bu(t))return zI(t,e);if(Au(t))return Lu(t,e);if(Mu(t))return GI(t,e);if(Pu(t))return WI(t,e)}throw Ru(t)}function Ze(t,e){return e?KI(t,e):Le(t)}function he(...t){let e=Mr(t);return Ze(t,e)}function Xf(t,e){let n=ae(t)?t:()=>t,r=i=>i.error(n());return new de(e?i=>e.schedule(r,0,i):r)}function Fu(t){return!!t&&(t instanceof de||ae(t.lift)&&ae(t.subscribe))}var Ci=Io(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function Re(t,e){return _e((n,r)=>{let i=0;n.subscribe(Te(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:cN}=Array;function uN(t,e){return cN(e)?t(...e):t(e)}function QI(t){return Re(e=>uN(t,e))}var{isArray:lN}=Array,{getPrototypeOf:dN,prototype:hN,keys:fN}=Object;function YI(t){if(t.length===1){let e=t[0];if(lN(e))return{args:e,keys:null};if(pN(e)){let n=fN(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function pN(t){return t&&typeof t=="object"&&dN(t)===hN}function JI(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function ep(...t){let e=Mr(t),n=FI(t),{args:r,keys:i}=YI(t);if(r.length===0)return Ze([],e);let o=new de(mN(r,e,i?s=>JI(i,s):dn));return n?o.pipe(QI(n)):o}function mN(t,e,n=dn){return r=>{ZI(e,()=>{let{length:i}=t,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)ZI(e,()=>{let l=Ze(t[u],e),h=!1;l.subscribe(Te(r,p=>{o[u]=p,h||(h=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function ZI(t,e,n){t?Nt(n,t,e):e()}function XI(t,e,n,r,i,o,s,a){let u=[],l=0,h=0,p=!1,g=()=>{p&&!u.length&&!l&&e.complete()},y=R=>l<r?b(R):u.push(R),b=R=>{o&&e.next(R),l++;let A=!1;Le(n(R,h++)).subscribe(Te(e,k=>{i?.(k),o?y(k):e.next(k)},()=>{A=!0},void 0,()=>{if(A)try{for(l--;u.length&&l<r;){let k=u.shift();s?Nt(e,s,()=>b(k)):b(k)}g()}catch(k){e.error(k)}}))};return t.subscribe(Te(e,y,()=>{p=!0,g()})),()=>{a?.()}}function Et(t,e,n=1/0){return ae(e)?Et((r,i)=>Re((o,s)=>e(r,o,i,s))(Le(t(r,i))),n):(typeof e=="number"&&(n=e),_e((r,i)=>XI(r,i,t,n)))}function ew(t=1/0){return Et(dn,t)}function tw(){return ew(1)}function Do(...t){return tw()(Ze(t,Mr(t)))}function ea(t){return new de(e=>{Le(t()).subscribe(e)})}function Nn(t,e){return _e((n,r)=>{let i=0;n.subscribe(Te(r,o=>t.call(e,o,i++)&&r.next(o)))})}function ta(t){return _e((e,n)=>{let r=null,i=!1,o;r=e.subscribe(Te(n,void 0,void 0,s=>{o=Le(t(s,ta(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function Vu(t,e){return ae(e)?Et(t,e,1):Et(t,1)}function tp(t){return _e((e,n)=>{let r=!1;e.subscribe(Te(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function Jn(t){return t<=0?()=>Rt:_e((e,n)=>{let r=0;e.subscribe(Te(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function nw(t=gN){return _e((e,n)=>{let r=!1;e.subscribe(Te(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function gN(){return new Ci}function np(t){return _e((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function Zn(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Nn((i,o)=>t(i,o,r)):dn,Jn(1),n?tp(e):nw(()=>new Ci))}function Uu(t){return t<=0?()=>Rt:_e((e,n)=>{let r=[];e.subscribe(Te(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function rw(t={}){let{connector:e=()=>new Be,resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=t;return o=>{let s,a,u,l=0,h=!1,p=!1,g=()=>{a?.unsubscribe(),a=void 0},y=()=>{g(),s=u=void 0,h=p=!1},b=()=>{let R=s;y(),R?.unsubscribe()};return _e((R,A)=>{l++,!p&&!h&&g();let k=u=u??e();A.add(()=>{l--,l===0&&!p&&!h&&(a=rp(b,i))}),k.subscribe(A),!s&&l>0&&(s=new Yn({next:q=>k.next(q),error:q=>{p=!0,g(),a=rp(y,n,q),k.error(q)},complete:()=>{h=!0,g(),a=rp(y,r),k.complete()}}),Le(R).subscribe(s))})(o)}}function rp(t,e,...n){if(e===!0){t();return}if(e===!1)return;let r=new Yn({next:()=>{r.unsubscribe(),t()}});return Le(e(...n)).subscribe(r)}function ip(t,e,n){let r,i=!1;return t&&typeof t=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:n}=t:r=t??1/0,rw({connector:()=>new Xs(r,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function op(...t){let e=Mr(t);return _e((n,r)=>{(e?Do(t,n,e):Do(t,n)).subscribe(r)})}function Mn(t,e){return _e((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(Te(r,u=>{i?.unsubscribe();let l=0,h=o++;Le(t(u,h)).subscribe(i=Te(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Ti(t){return _e((e,n)=>{Le(t).subscribe(Te(n,()=>n.complete(),Zs)),!n.closed&&e.subscribe(n)})}function It(t,e,n){let r=ae(t)||e||n?{next:t,error:e,complete:n}:t;return r?_e((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(Te(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):dn}var sp;function Bu(){return sp}function xn(t){let e=sp;return sp=t,e}var iw=Symbol("NotFound");function bo(t){return t===iw||t?.name==="\u0275NotFound"}var Gu="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",z=class extends Error{code;constructor(e,n){super(Ro(e,n)),this.code=e}};function EN(t){return`NG0${Math.abs(t)}`}function Ro(t,e){return`${EN(t)}${e?": "+e:""}`}function Ce(t){for(let e in t)if(t[e]===Ce)return e;throw Error("")}function er(t){if(typeof t=="string")return t;if(Array.isArray(t))return`[${t.map(er).join(", ")}]`;if(t==null)return""+t;let e=t.overriddenName||t.name;if(e)return`${e}`;let n=t.toString();if(n==null)return""+n;let r=n.indexOf(`
`);return r>=0?n.slice(0,r):n}function Ip(t,e){return t?e?`${t} ${e}`:t:e||""}var IN=Ce({__forward_ref__:Ce});function Wu(t){return t.__forward_ref__=Wu,t.toString=function(){return er(this())},t}function Mt(t){return wp(t)?t():t}function wp(t){return typeof t=="function"&&t.hasOwnProperty(IN)&&t.__forward_ref__===Wu}function W(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function No(t){return{providers:t.providers||[],imports:t.imports||[]}}function aa(t){return wN(t,Ku)}function Cp(t){return aa(t)!==null}function wN(t,e){return t.hasOwnProperty(e)&&t[e]||null}function CN(t){let e=t?.[Ku]??null;return e||null}function cp(t){return t&&t.hasOwnProperty($u)?t[$u]:null}var Ku=Ce({\u0275prov:Ce}),$u=Ce({\u0275inj:Ce}),K=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,n){this._desc=e,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=W({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Tp(t){return t&&!!t.\u0275providers}var Dp=Ce({\u0275cmp:Ce}),bp=Ce({\u0275dir:Ce}),Sp=Ce({\u0275pipe:Ce}),Ap=Ce({\u0275mod:Ce}),ra=Ce({\u0275fac:Ce}),Ai=Ce({__NG_ELEMENT_ID__:Ce}),ow=Ce({__NG_ENV_ID__:Ce});function Rp(t){return Qu(t,"@NgModule"),t[Ap]||null}function Or(t){return Qu(t,"@Component"),t[Dp]||null}function Np(t){return Qu(t,"@Directive"),t[bp]||null}function uw(t){return Qu(t,"@Pipe"),t[Sp]||null}function Qu(t,e){if(t==null)throw new z(-919,!1)}function ca(t){return typeof t=="string"?t:t==null?"":String(t)}function lw(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():ca(t)}var dw=Ce({ngErrorCode:Ce}),TN=Ce({ngErrorMessage:Ce}),DN=Ce({ngTokenPath:Ce});function Mp(t,e){return hw("",-200,e)}function Yu(t,e){throw new z(-201,!1)}function hw(t,e,n){let r=new z(e,t);return r[dw]=e,r[TN]=t,n&&(r[DN]=n),r}function bN(t){return t[dw]}var up;function fw(){return up}function wt(t){let e=up;return up=t,e}function xp(t,e,n){let r=aa(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&8)return null;if(e!==void 0)return e;Yu(t,"")}var SN={},Di=SN,AN="__NG_DI_FLAG__",lp=class{injector;constructor(e){this.injector=e}retrieve(e,n){let r=bi(n)||0;try{return this.injector.get(e,r&8?null:Di,r)}catch(i){if(bo(i))return i;throw i}}};function RN(t,e=0){let n=Bu();if(n===void 0)throw new z(-203,!1);if(n===null)return xp(t,void 0,e);{let r=NN(e),i=n.retrieve(t,r);if(bo(i)){if(r.optional)return null;throw i}return i}}function re(t,e=0){return(fw()||RN)(Mt(t),e)}function x(t,e){return re(t,bi(e))}function bi(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function NN(t){return{optional:!!(t&8),host:!!(t&1),self:!!(t&2),skipSelf:!!(t&4)}}function dp(t){let e=[];for(let n=0;n<t.length;n++){let r=Mt(t[n]);if(Array.isArray(r)){if(r.length===0)throw new z(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],u=MN(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(re(i,o))}else e.push(re(r))}return e}function MN(t){return t[AN]}function xr(t,e){let n=t.hasOwnProperty(ra);return n?t[ra]:null}function Ju(t,e){t.forEach(n=>Array.isArray(n)?Ju(n,e):e(n))}function Pp(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function ua(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function pw(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let o=i-2;t[i]=t[o],i--}t[e]=n,t[e+1]=r}}function mw(t,e,n){let r=Mo(t,e);return r>=0?t[r|1]=n:(r=~r,pw(t,r,e,n)),r}function Zu(t,e){let n=Mo(t,e);if(n>=0)return t[n|1]}function Mo(t,e){return xN(t,e,1)}function xN(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}var Ri={},Yt=[],Ni=new K(""),Op=new K("",-1),kp=new K(""),ia=class{get(e,n=Di){if(n===Di){let i=hw("",-201);throw i.name="\u0275NotFound",i}return n}};function Mi(t){return{\u0275providers:t}}function gw(t){return Mi([{provide:Ni,multi:!0,useValue:t}])}function yw(...t){return{\u0275providers:Lp(!0,t),\u0275fromNgModule:!0}}function Lp(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return Ju(e,s=>{let a=s;Hu(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&vw(i,o),n}function vw(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];Fp(i,o=>{e(o,r)})}}function Hu(t,e,n,r){if(t=Mt(t),!t)return!1;let i=null,o=cp(t),s=!o&&Or(t);if(!o&&!s){let u=t.ngModule;if(o=cp(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=t}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)Hu(l,e,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{Ju(o.imports,h=>{Hu(h,e,n,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&vw(l,e)}if(!a){let l=xr(i)||(()=>new i);e({provide:i,useFactory:l,deps:Yt},i),e({provide:kp,useValue:i,multi:!0},i),e({provide:Ni,useValue:()=>re(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let l=t;Fp(u,h=>{e(h,l)})}}else return!1;return i!==t&&t.providers!==void 0}function Fp(t,e){for(let n of t)Tp(n)&&(n=n.\u0275providers),Array.isArray(n)?Fp(n,e):e(n)}var PN=Ce({provide:String,useValue:Ce});function _w(t){return t!==null&&typeof t=="object"&&PN in t}function ON(t){return!!(t&&t.useExisting)}function kN(t){return!!(t&&t.useFactory)}function zu(t){return typeof t=="function"}var la=new K(""),ju={},sw={},ap;function da(){return ap===void 0&&(ap=new ia),ap}var ut=class{},Si=class extends ut{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,fp(e,s=>this.processProvider(s)),this.records.set(Op,So(void 0,this)),i.has("environment")&&this.records.set(ut,So(void 0,this));let o=this.records.get(la);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(kp,Yt,{self:!0}))}retrieve(e,n){let r=bi(n)||0;try{return this.get(e,Di,r)}catch(i){if(bo(i))return i;throw i}}destroy(){na(this),this._destroyed=!0;let e=Q(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Q(e)}}onDestroy(e){return na(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){na(this);let n=xn(this),r=wt(void 0),i;try{return e()}finally{xn(n),wt(r)}}get(e,n=Di,r){if(na(this),e.hasOwnProperty(ow))return e[ow](this);let i=bi(r),o,s=xn(this),a=wt(void 0);try{if(!(i&4)){let l=this.records.get(e);if(l===void 0){let h=BN(e)&&aa(e);h&&this.injectableDefInScope(h)?l=So(hp(e),ju):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l,i)}let u=i&2?da():this.parent;return n=i&8&&n===Di?null:n,u.get(e,n)}catch(u){let l=bN(u);throw l===-200||l===-201?new z(l,null):u}finally{wt(a),xn(s)}}resolveInjectorInitializers(){let e=Q(null),n=xn(this),r=wt(void 0),i;try{let o=this.get(Ni,Yt,{self:!0});for(let s of o)s()}finally{xn(n),wt(r),Q(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(er(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=Mt(e);let n=zu(e)?e:Mt(e&&e.provide),r=FN(e);if(!zu(e)&&e.multi===!0){let i=this.records.get(n);i||(i=So(void 0,ju,!0),i.factory=()=>dp(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n,r){let i=Q(null);try{if(n.value===sw)throw Mp(er(e));return n.value===ju&&(n.value=sw,n.value=n.factory(void 0,r)),typeof n.value=="object"&&n.value&&UN(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{Q(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=Mt(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function hp(t){let e=aa(t),n=e!==null?e.factory:xr(t);if(n!==null)return n;if(t instanceof K)throw new z(204,!1);if(t instanceof Function)return LN(t);throw new z(204,!1)}function LN(t){if(t.length>0)throw new z(204,!1);let n=CN(t);return n!==null?()=>n.factory(t):()=>new t}function FN(t){if(_w(t))return So(void 0,t.useValue);{let e=Ew(t);return So(e,ju)}}function Ew(t,e,n){let r;if(zu(t)){let i=Mt(t);return xr(i)||hp(i)}else if(_w(t))r=()=>Mt(t.useValue);else if(kN(t))r=()=>t.useFactory(...dp(t.deps||[]));else if(ON(t))r=(i,o)=>re(Mt(t.useExisting),o!==void 0&&o&8?8:void 0);else{let i=Mt(t&&(t.useClass||t.provide));if(VN(t))r=()=>new i(...dp(t.deps));else return xr(i)||hp(i)}return r}function na(t){if(t.destroyed)throw new z(205,!1)}function So(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function VN(t){return!!t.deps}function UN(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function BN(t){return typeof t=="function"||typeof t=="object"&&t.ngMetadataName==="InjectionToken"}function fp(t,e){for(let n of t)Array.isArray(n)?fp(n,e):n&&Tp(n)?fp(n.\u0275providers,e):e(n)}function Tt(t,e){let n;t instanceof Si?(na(t),n=t):n=new lp(t);let r,i=xn(n),o=wt(void 0);try{return e()}finally{xn(i),wt(o)}}function Iw(){return fw()!==void 0||Bu()!=null}var fn=0,Z=1,ce=2,Xe=3,Jt=4,Zt=5,xo=6,Po=7,Ve=8,nr=9,Pn=10,Pe=11,Oo=12,Vp=13,xi=14,Vt=15,Pi=16,Oi=17,ki=18,ha=19,Up=20,Xn=21,Xu=22,fa=23,Ut=24,el=25,Li=26,We=27,ww=1,Bp=6,kr=7,pa=8,ma=9,Ue=10;function rr(t){return Array.isArray(t)&&typeof t[ww]=="object"}function pn(t){return Array.isArray(t)&&t[ww]===!0}function jp(t){return(t.flags&4)!==0}function Lr(t){return t.componentOffset>-1}function tl(t){return(t.flags&1)===1}function Fi(t){return!!t.template}function ko(t){return(t[ce]&512)!==0}function Vi(t){return(t[ce]&256)===256}var Cw="svg",Tw="math";function Xt(t){for(;Array.isArray(t);)t=t[fn];return t}function $p(t,e){return Xt(e[t])}function mn(t,e){return Xt(e[t.index])}function ga(t,e){return t.data[e]}function Dw(t,e){return t[e]}function Hp(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}function gn(t,e){let n=e[t];return rr(n)?n:n[fn]}function nl(t){return(t[ce]&128)===128}function bw(t){return pn(t[Xe])}function On(t,e){return e==null?null:t[e]}function zp(t){t[Oi]=0}function qp(t){t[ce]&1024||(t[ce]|=1024,nl(t)&&va(t))}function Sw(t,e){for(;t>0;)e=e[xi],t--;return e}function ya(t){return!!(t[ce]&9216||t[Ut]?.dirty)}function rl(t){t[Pn].changeDetectionScheduler?.notify(8),t[ce]&64&&(t[ce]|=1024),ya(t)&&va(t)}function va(t){t[Pn].changeDetectionScheduler?.notify(0);let e=Pr(t);for(;e!==null&&!(e[ce]&8192||(e[ce]|=8192,!nl(e)));)e=Pr(e)}function Gp(t,e){if(Vi(t))throw new z(911,!1);t[Xn]===null&&(t[Xn]=[]),t[Xn].push(e)}function Aw(t,e){if(t[Xn]===null)return;let n=t[Xn].indexOf(e);n!==-1&&t[Xn].splice(n,1)}function Pr(t){let e=t[Xe];return pn(e)?e[Xe]:e}function Rw(t){return t[Po]??=[]}function Nw(t){return t.cleanup??=[]}var fe={lFrame:qw(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var pp=!1;function Mw(){return fe.lFrame.elementDepthCount}function xw(){fe.lFrame.elementDepthCount++}function Wp(){fe.lFrame.elementDepthCount--}function Pw(){return fe.bindingsEnabled}function Ow(){return fe.skipHydrationRootTNode!==null}function Kp(t){return fe.skipHydrationRootTNode===t}function Qp(){fe.skipHydrationRootTNode=null}function Ee(){return fe.lFrame.lView}function xt(){return fe.lFrame.tView}function ft(t){return fe.lFrame.contextLView=t,t[Ve]}function pt(t){return fe.lFrame.contextLView=null,t}function yn(){let t=Yp();for(;t!==null&&t.type===64;)t=t.parent;return t}function Yp(){return fe.lFrame.currentTNode}function kw(){let t=fe.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Lo(t,e){let n=fe.lFrame;n.currentTNode=t,n.isParent=e}function Jp(){return fe.lFrame.isParent}function Lw(){fe.lFrame.isParent=!1}function Zp(){return pp}function Xp(t){let e=pp;return pp=t,e}function Fw(){let t=fe.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function Vw(t){return fe.lFrame.bindingIndex=t}function Ui(){return fe.lFrame.bindingIndex++}function Uw(t){let e=fe.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function Bw(){return fe.lFrame.inI18n}function jw(t,e){let n=fe.lFrame;n.bindingIndex=n.bindingRootIndex=t,il(e)}function $w(){return fe.lFrame.currentDirectiveIndex}function il(t){fe.lFrame.currentDirectiveIndex=t}function Hw(t){let e=fe.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function em(t){fe.lFrame.currentQueryIndex=t}function jN(t){let e=t[Z];return e.type===2?e.declTNode:e.type===1?t[Zt]:null}function tm(t,e,n){if(n&4){let i=e,o=t;for(;i=i.parent,i===null&&!(n&1);)if(i=jN(o),i===null||(o=o[xi],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=fe.lFrame=zw();return r.currentTNode=e,r.lView=t,!0}function ol(t){let e=zw(),n=t[Z];fe.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function zw(){let t=fe.lFrame,e=t===null?null:t.child;return e===null?qw(t):e}function qw(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function Gw(){let t=fe.lFrame;return fe.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var nm=Gw;function sl(){let t=Gw();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Ww(t){return(fe.lFrame.contextLView=Sw(t,fe.lFrame.contextLView))[Ve]}function Fr(){return fe.lFrame.selectedIndex}function Vr(t){fe.lFrame.selectedIndex=t}function al(){let t=fe.lFrame;return ga(t.tView,t.selectedIndex)}function Kw(){return fe.lFrame.currentNamespace}var Qw=!0;function cl(){return Qw}function ul(t){Qw=t}function mp(t,e=null,n=null,r){let i=rm(t,e,n,r);return i.resolveInjectorInitializers(),i}function rm(t,e=null,n=null,r,i=new Set){let o=[n||Yt,yw(t)];return r=r||(typeof t=="object"?void 0:er(t)),new Si(o,e||da(),r||null,i)}var hn=class t{static THROW_IF_NOT_FOUND=Di;static NULL=new ia;static create(e,n){if(Array.isArray(e))return mp({name:""},n,e,"");{let r=e.name??"";return mp({name:r},e.parent,e.providers,r)}}static \u0275prov=W({token:t,providedIn:"any",factory:()=>re(Op)});static __NG_ELEMENT_ID__=-1},Ke=new K(""),vn=(()=>{class t{static __NG_ELEMENT_ID__=$N;static __NG_ENV_ID__=n=>n}return t})(),gp=class extends vn{_lView;constructor(e){super(),this._lView=e}get destroyed(){return Vi(this._lView)}onDestroy(e){let n=this._lView;return Gp(n,e),()=>Aw(n,e)}};function $N(){return new gp(Ee())}var Yw=!1,Ur=(()=>{class t{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new Ge(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new de(n=>{n.next(!1),n.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=W({token:t,providedIn:"root",factory:()=>new t})}return t})(),yp=class extends Be{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,Iw()&&(this.destroyRef=x(vn,{optional:!0})??void 0,this.pendingTasks=x(Ur,{optional:!0})??void 0)}emit(e){let n=Q(null);try{super.next(e)}finally{Q(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof ct&&e.add(a),a}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(n)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},Ct=yp;function qu(...t){}function im(t){let e,n;function r(){t=qu;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function om(t){return queueMicrotask(()=>t()),()=>{t=qu}}var sm="isAngularZone",oa=sm+"_ID",HN=0,Fe=class t{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Ct(!1);onMicrotaskEmpty=new Ct(!1);onStable=new Ct(!1);onError=new Ct(!1);constructor(e){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=Yw}=e;if(typeof Zone>"u")throw new z(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,GN(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(sm)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new z(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new z(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,zN,qu,qu);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},zN={};function am(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function qN(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){im(()=>{t.callbackScheduled=!1,vp(t),t.isCheckStableRunning=!0,am(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),vp(t)}function GN(t){let e=()=>{qN(t)},n=HN++;t._inner=t._inner.fork({name:"angular",properties:{[sm]:!0,[oa]:n,[oa+n]:!0},onInvokeTask:(r,i,o,s,a,u)=>{if(WN(u))return r.invokeTask(o,s,a,u);try{return aw(t),r.invokeTask(o,s,a,u)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),cw(t)}},onInvoke:(r,i,o,s,a,u,l)=>{try{return aw(t),r.invoke(o,s,a,u,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!KN(u)&&e(),cw(t)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,vp(t),am(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function vp(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function aw(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function cw(t){t._nesting--,am(t)}var sa=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Ct;onMicrotaskEmpty=new Ct;onStable=new Ct;onError=new Ct;run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function WN(t){return Jw(t,"__ignore_ng_zone__")}function KN(t){return Jw(t,"__scheduler_tick__")}function Jw(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var tr=class{_console=console;handleError(e){this._console.error("ERROR",e)}},en=new K("",{factory:()=>{let t=x(Fe),e=x(ut),n;return r=>{t.runOutsideAngular(()=>{e.destroyed&&!n?setTimeout(()=>{throw r}):(n??=e.get(tr),n.handleError(r))})}}}),Zw={provide:Ni,useValue:()=>{let t=x(tr,{optional:!0})},multi:!0},QN=new K("",{factory:()=>{let t=x(Ke).defaultView;if(!t)return;let e=x(en),n=o=>{e(o.reason),o.preventDefault()},r=o=>{o.error?e(o.error):e(new Error(o.message,{cause:o})),o.preventDefault()},i=()=>{t.addEventListener("unhandledrejection",n),t.addEventListener("error",r)};typeof Zone<"u"?Zone.root.run(i):i(),x(vn).onDestroy(()=>{t.removeEventListener("error",r),t.removeEventListener("unhandledrejection",n)})}});function cm(){return Mi([gw(()=>void x(QN))])}function ir(t,e){let[n,r,i]=$f(t,e?.equal),o=n,s=o[Qt];return o.set=r,o.update=i,o.asReadonly=Xw.bind(o),o}function Xw(){let t=this[Qt];if(t.readonlyFn===void 0){let e=()=>this();e[Qt]=t,t.readonlyFn=e}return t.readonlyFn}var Ao=class{},_a=new K("",{factory:()=>!0});var um=new K("");var lm=(()=>{class t{static \u0275prov=W({token:t,providedIn:"root",factory:()=>new _p})}return t})(),_p=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let n=e.zone,r=this.queues.get(n);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let n=e.zone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[n,r]of this.queues)n===null?e||=this.flushQueue(r):e||=n.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let n=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,n=!0,r.run());return n}},Ep=class{[Qt];constructor(e){this[Qt]=e}destroy(){this[Qt].destroy()}};function Bt(t){return Hf(t)}function Aa(t){return{toString:t}.toString()}function iM(t){return typeof t=="function"}function AC(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}var ml=class{previousValue;currentValue;firstChange;constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}},Ml=(()=>{let t=()=>RC;return t.ngInherit=!0,t})();function RC(t){return t.type.prototype.ngOnChanges&&(t.setInput=sM),oM}function oM(){let t=MC(this),e=t?.current;if(e){let n=t.previous;if(n===Ri)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function sM(t,e,n,r,i){let o=this.declaredInputs[r],s=MC(t)||aM(t,{previous:Ri,current:null}),a=s.current||(s.current={}),u=s.previous,l=u[o];a[o]=new ml(l&&l.currentValue,n,u===Ri),AC(t,e,i,n)}var NC="__ngSimpleChanges__";function MC(t){return t[NC]||null}function aM(t,e){return t[NC]=e}var eC=[];var De=function(t,e=null,n){for(let r=0;r<eC.length;r++){let i=eC[r];i(t,e,n)}},Ie=(function(t){return t[t.TemplateCreateStart=0]="TemplateCreateStart",t[t.TemplateCreateEnd=1]="TemplateCreateEnd",t[t.TemplateUpdateStart=2]="TemplateUpdateStart",t[t.TemplateUpdateEnd=3]="TemplateUpdateEnd",t[t.LifecycleHookStart=4]="LifecycleHookStart",t[t.LifecycleHookEnd=5]="LifecycleHookEnd",t[t.OutputStart=6]="OutputStart",t[t.OutputEnd=7]="OutputEnd",t[t.BootstrapApplicationStart=8]="BootstrapApplicationStart",t[t.BootstrapApplicationEnd=9]="BootstrapApplicationEnd",t[t.BootstrapComponentStart=10]="BootstrapComponentStart",t[t.BootstrapComponentEnd=11]="BootstrapComponentEnd",t[t.ChangeDetectionStart=12]="ChangeDetectionStart",t[t.ChangeDetectionEnd=13]="ChangeDetectionEnd",t[t.ChangeDetectionSyncStart=14]="ChangeDetectionSyncStart",t[t.ChangeDetectionSyncEnd=15]="ChangeDetectionSyncEnd",t[t.AfterRenderHooksStart=16]="AfterRenderHooksStart",t[t.AfterRenderHooksEnd=17]="AfterRenderHooksEnd",t[t.ComponentStart=18]="ComponentStart",t[t.ComponentEnd=19]="ComponentEnd",t[t.DeferBlockStateStart=20]="DeferBlockStateStart",t[t.DeferBlockStateEnd=21]="DeferBlockStateEnd",t[t.DynamicComponentStart=22]="DynamicComponentStart",t[t.DynamicComponentEnd=23]="DynamicComponentEnd",t[t.HostBindingsUpdateStart=24]="HostBindingsUpdateStart",t[t.HostBindingsUpdateEnd=25]="HostBindingsUpdateEnd",t})(Ie||{});function cM(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=RC(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function uM(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),u&&(t.viewHooks??=[]).push(-n,u),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),h!=null&&(t.destroyHooks??=[]).push(n,h)}}function dl(t,e,n){xC(t,e,3,n)}function hl(t,e,n,r){(t[ce]&3)===n&&xC(t,e,n,r)}function dm(t,e){let n=t[ce];(n&3)===e&&(n&=16383,n+=1,t[ce]=n)}function xC(t,e,n,r){let i=r!==void 0?t[Oi]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(t[Oi]+=65536),(a<o||o==-1)&&(lM(t,n,e,u),t[Oi]=(t[Oi]&4294901760)+u+2),u++}function tC(t,e){De(Ie.LifecycleHookStart,t,e);let n=Q(null);try{e.call(t)}finally{Q(n),De(Ie.LifecycleHookEnd,t,e)}}function lM(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=t[s];i?t[ce]>>14<t[Oi]>>16&&(t[ce]&3)===e&&(t[ce]+=16384,tC(a,o)):tC(a,o)}var Vo=-1,wa=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,n,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=n,this.injectImpl=r}};function dM(t){return(t.flags&8)!==0}function hM(t){return(t.flags&16)!==0}function fM(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{let o=i,s=n[++r];mM(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function pM(t){return t===3||t===4||t===6}function mM(t){return t.charCodeAt(0)===64}function xl(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?nC(t,n,i,null,e[++r]):nC(t,n,i,null,null))}}return t}function nC(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){i!==null&&(t[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),i!==null&&t.splice(o++,0,i)}function PC(t){return t!==Vo}function gl(t){return t&32767}function gM(t){return t>>16}function yl(t,e){let n=gM(t),r=e;for(;n>0;)r=r[xi],n--;return r}var vm=!0;function vl(t){let e=vm;return vm=t,e}var yM=256,OC=yM-1,kC=5,vM=0,kn={};function _M(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Ai)&&(r=n[Ai]),r==null&&(r=n[Ai]=vM++);let i=r&OC,o=1<<i;e.data[t+(i>>kC)]|=o}function LC(t,e){let n=FC(t,e);if(n!==-1)return n;let r=e[Z];r.firstCreatePass&&(t.injectorIndex=e.length,hm(r.data,t),hm(e,null),hm(r.blueprint,null));let i=Vm(t,e),o=t.injectorIndex;if(PC(i)){let s=gl(i),a=yl(i,e),u=a[Z].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function hm(t,e){t.push(0,0,0,0,0,0,0,0,e)}function FC(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function Vm(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=$C(i),r===null)return Vo;if(n++,i=i[xi],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Vo}function EM(t,e,n){_M(t,e,n)}function VC(t,e,n){if(n&8||t!==void 0)return t;Yu(e,"NodeInjector")}function UC(t,e,n,r){if(n&8&&r===void 0&&(r=null),(n&3)===0){let i=t[nr],o=wt(void 0);try{return i?i.get(e,r,n&8):xp(e,r,n&8)}finally{wt(o)}}return VC(r,e,n)}function BC(t,e,n,r=0,i){if(t!==null){if(e[ce]&2048&&!(r&2)){let s=DM(t,e,n,r,kn);if(s!==kn)return s}let o=jC(t,e,n,r,kn);if(o!==kn)return o}return UC(e,n,r,i)}function jC(t,e,n,r,i){let o=CM(n);if(typeof o=="function"){if(!tm(e,t,r))return r&1?VC(i,n,r):UC(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&8))Yu(n);else return s}finally{nm()}}else if(typeof o=="number"){let s=null,a=FC(t,e),u=Vo,l=r&1?e[Vt][Zt]:null;for((a===-1||r&4)&&(u=a===-1?Vm(t,e):e[a+8],u===Vo||!iC(r,!1)?a=-1:(s=e[Z],a=gl(u),e=yl(u,e)));a!==-1;){let h=e[Z];if(rC(o,a,h.data)){let p=IM(a,e,n,s,r,l);if(p!==kn)return p}u=e[a+8],u!==Vo&&iC(r,e[Z].data[a+8]===l)&&rC(o,a,e)?(s=h,a=gl(u),e=yl(u,e)):a=-1}}return i}function IM(t,e,n,r,i,o){let s=e[Z],a=s.data[t+8],u=r==null?Lr(a)&&vm:r!=s&&(a.type&3)!==0,l=i&1&&o===a,h=wM(a,s,n,u,l);return h!==null?_m(e,s,h,a,i):kn}function wM(t,e,n,r,i){let o=t.providerIndexes,s=e.data,a=o&1048575,u=t.directiveStart,l=t.directiveEnd,h=o>>20,p=r?a:a+h,g=i?a+h:l;for(let y=p;y<g;y++){let b=s[y];if(y<u&&n===b||y>=u&&b.type===n)return y}if(i){let y=s[u];if(y&&Fi(y)&&y.type===n)return u}return null}function _m(t,e,n,r,i){let o=t[n],s=e.data;if(o instanceof wa){let a=o;if(a.resolving){let y=lw(s[n]);throw Mp(y)}let u=vl(a.canSeeViewProviders);a.resolving=!0;let l=s[n].type||s[n],h,p=a.injectImpl?wt(a.injectImpl):null,g=tm(t,r,0);try{o=t[n]=a.factory(void 0,i,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&cM(n,s[n],e)}finally{p!==null&&wt(p),vl(u),a.resolving=!1,nm()}}return o}function CM(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Ai)?t[Ai]:void 0;return typeof e=="number"?e>=0?e&OC:TM:e}function rC(t,e,n){let r=1<<t;return!!(n[e+(t>>kC)]&r)}function iC(t,e){return!(t&2)&&!(t&1&&e)}var Bi=class{_tNode;_lView;constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return BC(this._tNode,this._lView,e,bi(r),n)}};function TM(){return new Bi(yn(),Ee())}function Pl(t){return Aa(()=>{let e=t.prototype.constructor,n=e[ra]||Em(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[ra]||Em(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Em(t){return wp(t)?()=>{let e=Em(Mt(t));return e&&e()}:xr(t)}function DM(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[ce]&2048&&!ko(s);){let a=jC(o,s,n,r|2,kn);if(a!==kn)return a;let u=o.parent;if(!u){let l=s[Up];if(l){let h=l.get(n,kn,r);if(h!==kn)return h}u=$C(s),s=s[xi]}o=u}return i}function $C(t){let e=t[Z],n=e.type;return n===2?e.declTNode:n===1?t[Zt]:null}function bM(){return Um(yn(),Ee())}function Um(t,e){return new Bm(mn(t,e))}var Bm=(()=>{class t{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=bM}return t})();function HC(t){return(t.flags&128)===128}var jm=(function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t})(jm||{}),zC=new Map,SM=0;function AM(){return SM++}function RM(t){zC.set(t[ha],t)}function Im(t){zC.delete(t[ha])}var oC="__ngContext__";function Uo(t,e){rr(e)?(t[oC]=e[ha],RM(e)):t[oC]=e}function qC(t){return WC(t[Oo])}function GC(t){return WC(t[Jt])}function WC(t){for(;t!==null&&!pn(t);)t=t[Jt];return t}var NM;function $m(t){NM=t}var Ol=new K("",{factory:()=>MM}),MM="ng";var kl=new K(""),Ra=new K("",{providedIn:"platform",factory:()=>"unknown"});var Ll=new K("",{factory:()=>x(Ke).body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var KC="r";var QC="di";var YC=!1,JC=new K("",{factory:()=>YC});var xM=(t,e,n,r)=>{};function PM(t,e,n,r){xM(t,e,n,r)}function Hm(t){return(t.flags&32)===32}var OM=()=>null;function ZC(t,e,n=!1){return OM(t,e,n)}function XC(t,e){let n=t.contentQueries;if(n!==null){let r=Q(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=t.data[s];em(o),a.contentQueries(2,e[s],s)}}}finally{Q(r)}}}function wm(t,e,n){em(0);let r=Q(null);try{e(t,n)}finally{Q(r)}}function eT(t,e,n){if(jp(e)){let r=Q(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=t.data[s];if(a.contentQueries){let u=n[s];a.contentQueries(1,u,s)}}}finally{Q(r)}}}var En=(function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t[t.ExperimentalIsolatedShadowDom=4]="ExperimentalIsolatedShadowDom",t})(En||{});var _l=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Gu})`}};function zm(t){return t instanceof _l?t.changingThisBreaksApplicationSecurity:t}function tT(t,e){let n=nT(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${Gu})`)}return n===e}function nT(t){return t instanceof _l&&t.getTypeName()||null}var kM=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function rT(t){return t=String(t),t.match(kM)?t:"unsafe:"+t}function LM(t,e){return t.createText(e)}function FM(t,e,n){t.setValue(e,n)}function iT(t,e,n){return t.createElement(e,n)}function El(t,e,n,r,i){t.insertBefore(e,n,r,i)}function oT(t,e,n){t.appendChild(e,n)}function sC(t,e,n,r,i){r!==null?El(t,e,n,r,i):oT(t,e,n)}function sT(t,e,n,r){t.removeChild(null,e,n,r)}function VM(t,e,n){t.setAttribute(e,"style",n)}function UM(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function aT(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&fM(t,e,r),i!==null&&UM(t,e,i),o!==null&&VM(t,e,o)}var qm=(function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t})(qm||{});function et(t){let e=BM();return e?e.sanitize(qm.URL,t)||"":tT(t,"URL")?zm(t):rT(ca(t))}function BM(){let t=Ee();return t&&t[Pn].sanitizer}function cT(t){return t instanceof Function?t():t}function jM(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}var uT="ng-template";function $M(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&jM(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(Gm(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function Gm(t){return t.type===4&&t.value!==uT}function HM(t,e,n){let r=t.type===4&&!n?uT:t.value;return e===r}function zM(t,e,n){let r=4,i=t.attrs,o=i!==null?WM(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!_n(r)&&!_n(u))return!1;if(s&&_n(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!HM(t,u,n)||u===""&&e.length===1){if(_n(r))return!1;s=!0}}else if(r&8){if(i===null||!$M(t,i,u,n)){if(_n(r))return!1;s=!0}}else{let l=e[++a],h=qM(u,i,Gm(t),n);if(h===-1){if(_n(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(_n(r))return!1;s=!0}}}}return _n(r)||s}function _n(t){return(t&1)===0}function qM(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return KM(e,t)}function GM(t,e,n=!1){for(let r=0;r<e.length;r++)if(zM(t,e[r],n))return!0;return!1}function WM(t){for(let e=0;e<t.length;e++){let n=t[e];if(pM(n))return e}return t.length}function KM(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function aC(t,e){return t?":not("+e.trim()+")":e}function QM(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!_n(s)&&(e+=aC(o,i),i=""),r=s,o=o||!_n(r);n++}return i!==""&&(e+=aC(o,i)),e}function YM(t){return t.map(QM).join(",")}function JM(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!_n(i))break;i=o}r++}return n.length&&e.push(1,...n),e}var Fn={};function Wm(t,e,n,r,i,o,s,a,u,l,h){let p=We+r,g=p+i,y=ZM(p,g),b=typeof l=="function"?l():l;return y[Z]={type:t,blueprint:y,template:n,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:b,incompleteFirstPass:!1,ssrId:h}}function ZM(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:Fn);return n}function XM(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=Wm(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function Km(t,e,n,r,i,o,s,a,u,l,h){let p=e.blueprint.slice();return p[fn]=i,p[ce]=r|4|128|8|64|1024,(l!==null||t&&t[ce]&2048)&&(p[ce]|=2048),zp(p),p[Xe]=p[xi]=t,p[Ve]=n,p[Pn]=s||t&&t[Pn],p[Pe]=a||t&&t[Pe],p[nr]=u||t&&t[nr]||null,p[Zt]=o,p[ha]=AM(),p[xo]=h,p[Up]=l,p[Vt]=e.type==2?t[Vt]:p,p}function ex(t,e,n){let r=mn(e,t),i=XM(n),o=t[Pn].rendererFactory,s=Qm(t,Km(t,i,null,lT(n),r,e,null,o.createRenderer(r,n),null,null,null));return t[e.index]=s}function lT(t){let e=16;return t.signals?e=4096:t.onPush&&(e=64),e}function dT(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function Qm(t,e){return t[Oo]?t[Vp][Jt]=e:t[Oo]=e,t[Vp]=e,e}function F(t=1){hT(xt(),Ee(),Fr()+t,!1)}function hT(t,e,n,r){if(!r)if((e[ce]&3)===3){let o=t.preOrderCheckHooks;o!==null&&dl(e,o,n)}else{let o=t.preOrderHooks;o!==null&&hl(e,o,0,n)}Vr(n)}var Fl=(function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t})(Fl||{});function Cm(t,e,n,r){let i=Q(null);try{let[o,s,a]=t.inputs[n],u=null;(s&Fl.SignalBased)!==0&&(u=e[o][Qt]),u!==null&&u.transformFn!==void 0?r=u.transformFn(r):a!==null&&(r=a.call(e,r)),t.setInput!==null?t.setInput(e,u,r,n,o):AC(e,u,o,r)}finally{Q(i)}}var Ln=(function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t})(Ln||{}),tx;function Ym(t,e){return tx(t,e)}var ji=new Set,Jm=(function(t){return t[t.CHANGE_DETECTION=0]="CHANGE_DETECTION",t[t.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",t})(Jm||{}),Na=new K(""),cC=new Set;function Gi(t){cC.has(t)||(cC.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var fT=(()=>{class t{impl=null;execute(){this.impl?.execute()}static \u0275prov=W({token:t,providedIn:"root",factory:()=>new t})}return t})();var pT=new K("",{factory:()=>({queue:new Set,isScheduled:!1,scheduler:null,injector:x(ut)})});function mT(t,e,n){let r=t.get(pT);if(Array.isArray(e))for(let i of e)r.queue.add(i),n?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),n?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(t)}function nx(t,e){let n=t.get(pT);if(e.detachedLeaveAnimationFns){for(let r of e.detachedLeaveAnimationFns)n.queue.delete(r);e.detachedLeaveAnimationFns=void 0}}function rx(t,e){for(let[n,r]of e)mT(t,r.animateFns)}function uC(t,e,n,r){let i=t?.[Li]?.enter;e!==null&&i&&i.has(n.index)&&rx(r,i)}function Fo(t,e,n,r,i,o,s,a){if(i!=null){let u,l=!1;pn(i)?u=i:rr(i)&&(l=!0,i=i[fn]);let h=Xt(i);t===0&&r!==null?(uC(a,r,o,n),s==null?oT(e,r,h):El(e,r,h,s||null,!0)):t===1&&r!==null?(uC(a,r,o,n),El(e,r,h,s||null,!0)):t===2?lC(a,o,n,p=>{sT(e,h,l,p)}):t===3&&lC(a,o,n,()=>{e.destroyNode(h)}),u!=null&&gx(e,t,n,u,o,r,s)}}function ix(t,e){gT(t,e),e[fn]=null,e[Zt]=null}function ox(t,e,n,r,i,o){r[fn]=i,r[Zt]=e,Ul(t,r,n,1,i,o)}function gT(t,e){e[Pn].changeDetectionScheduler?.notify(9),Ul(t,e,e[Pe],2,null,null)}function sx(t){let e=t[Oo];if(!e)return fm(t[Z],t);for(;e;){let n=null;if(rr(e))n=e[Oo];else{let r=e[Ue];r&&(n=r)}if(!n){for(;e&&!e[Jt]&&e!==t;)rr(e)&&fm(e[Z],e),e=e[Xe];e===null&&(e=t),rr(e)&&fm(e[Z],e),n=e&&e[Jt]}e=n}}function Zm(t,e){let n=t[ma],r=n.indexOf(e);n.splice(r,1)}function Vl(t,e){if(Vi(e))return;let n=e[Pe];n.destroyNode&&Ul(t,e,n,3,null,null),sx(e)}function fm(t,e){if(Vi(e))return;let n=Q(null);try{e[ce]&=-129,e[ce]|=256,e[Ut]&&Qs(e[Ut]),ux(t,e),cx(t,e),e[Z].type===1&&e[Pe].destroy();let r=e[Pi];if(r!==null&&pn(e[Xe])){r!==e[Xe]&&Zm(r,e);let i=e[ki];i!==null&&i.detachView(t)}Im(e)}finally{Q(n)}}function lC(t,e,n,r){let i=t?.[Li];if(i==null||i.leave==null||!i.leave.has(e.index))return r(!1);t&&ji.add(t),mT(n,()=>{if(i.leave&&i.leave.has(e.index)){let s=i.leave.get(e.index),a=[];if(s){for(let u=0;u<s.animateFns.length;u++){let l=s.animateFns[u],{promise:h}=l();a.push(h)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(a),ax(t,r)}else t&&ji.delete(t),r(!1)},i)}function ax(t,e){let n=t[Li]?.running;if(n){n.then(()=>{t[Li].running=void 0,ji.delete(t),e(!0)});return}e(!1)}function cx(t,e){let n=t.cleanup,r=e[Po];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let a=n[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[n[s+1]];n[s].call(a)}r!==null&&(e[Po]=null);let i=e[Xn];if(i!==null){e[Xn]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[fa];if(o!==null){e[fa]=null;for(let s of o)s.destroy()}}function ux(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof wa)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];De(Ie.LifecycleHookStart,a,u);try{u.call(a)}finally{De(Ie.LifecycleHookEnd,a,u)}}else{De(Ie.LifecycleHookStart,i,o);try{o.call(i)}finally{De(Ie.LifecycleHookEnd,i,o)}}}}}function lx(t,e,n){return dx(t,e.parent,n)}function dx(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[fn];if(Lr(r)){let{encapsulation:i}=t.data[r.directiveStart+r.componentOffset];if(i===En.None||i===En.Emulated)return null}return mn(r,n)}function hx(t,e,n){return px(t,e,n)}function fx(t,e,n){return t.type&40?mn(t,n):null}var px=fx,dC;function Xm(t,e,n,r){let i=lx(t,r,e),o=e[Pe],s=r.parent||e[Zt],a=hx(s,r,e);if(i!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)sC(o,i,n[u],a,!1);else sC(o,i,n,a,!1);dC!==void 0&&dC(o,r,e,n,i)}function Ea(t,e){if(e!==null){let n=e.type;if(n&3)return mn(e,t);if(n&4)return Tm(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return Ea(t,r);{let i=t[e.index];return pn(i)?Tm(-1,i):Xt(i)}}else{if(n&128)return Ea(t,e.next);if(n&32)return Ym(e,t)()||Xt(t[e.index]);{let r=yT(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Pr(t[Vt]);return Ea(i,r)}else return Ea(t,e.next)}}}return null}function yT(t,e){if(e!==null){let r=t[Vt][Zt],i=e.projection;return r.projection[i]}return null}function Tm(t,e){let n=Ue+t+1;if(n<e.length){let r=e[n],i=r[Z].firstChild;if(i!==null)return Ea(r,i)}return e[kr]}function eg(t,e,n,r,i,o,s){for(;n!=null;){let a=r[nr];if(n.type===128){n=n.next;continue}let u=r[n.index],l=n.type;if(s&&e===0&&(u&&Uo(Xt(u),r),n.flags|=2),!Hm(n))if(l&8)eg(t,e,n.child,r,i,o,!1),Fo(e,t,a,i,u,n,o,r);else if(l&32){let h=Ym(n,r),p;for(;p=h();)Fo(e,t,a,i,p,n,o,r);Fo(e,t,a,i,u,n,o,r)}else l&16?mx(t,e,r,n,i,o):Fo(e,t,a,i,u,n,o,r);n=s?n.projectionNext:n.next}}function Ul(t,e,n,r,i,o){eg(n,r,t.firstChild,e,i,o,!1)}function mx(t,e,n,r,i,o){let s=n[Vt],u=s[Zt].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];Fo(e,t,n[nr],i,h,r,o,n)}else{let l=u,h=s[Xe];HC(r)&&(l.flags|=128),eg(t,e,l,h,i,o,!0)}}function gx(t,e,n,r,i,o,s){let a=r[kr],u=Xt(r);a!==u&&Fo(e,t,n,o,a,i,s);for(let l=Ue;l<r.length;l++){let h=r[l];Ul(h[Z],h,t,e,o,a)}}function yx(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:Ln.DashCase;i==null?t.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Ln.Important),t.setStyle(n,r,i,o))}}function vT(t,e,n,r,i){let o=Fr(),s=r&2;try{Vr(-1),s&&e.length>We&&hT(t,e,We,!1);let a=s?Ie.TemplateUpdateStart:Ie.TemplateCreateStart;De(a,i,n),n(r,i)}finally{Vr(o);let a=s?Ie.TemplateUpdateEnd:Ie.TemplateCreateEnd;De(a,i,n)}}function _T(t,e,n){Tx(t,e,n),(n.flags&64)===64&&Dx(t,e,n)}function tg(t,e,n=mn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(e,t):t[s];t[i++]=a}}}function vx(t,e,n,r){let o=r.get(JC,YC)||n===En.ShadowDom||n===En.ExperimentalIsolatedShadowDom,s=t.selectRootElement(e,o);return _x(s),s}function _x(t){Ex(t)}var Ex=()=>null;function Ix(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function wx(t,e,n,r,i,o){let s=e[Z];if(ng(t,s,e,n,r)){Lr(t)&&Cx(e,t.index);return}t.type&3&&(n=Ix(n)),ET(t,e,n,r,i,o)}function ET(t,e,n,r,i,o){if(t.type&3){let s=mn(t,e);r=o!=null?o(r,t.value||"",n):r,i.setProperty(s,n,r)}else t.type&12}function Cx(t,e){let n=gn(e,t);n[ce]&16||(n[ce]|=64)}function Tx(t,e,n){let r=n.directiveStart,i=n.directiveEnd;Lr(n)&&ex(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||LC(n,e);let o=n.initialInputs;for(let s=r;s<i;s++){let a=t.data[s],u=_m(e,t,s,n);if(Uo(u,e),o!==null&&Nx(e,s-r,u,a,n,o),Fi(a)){let l=gn(n.index,e);l[Ve]=_m(e,t,s,n)}}}function Dx(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=$w();try{Vr(o);for(let a=r;a<i;a++){let u=t.data[a],l=e[a];il(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&bx(u,l)}}finally{Vr(-1),il(s)}}function bx(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function Sx(t,e){let n=t.directiveRegistry,r=null;if(n)for(let i=0;i<n.length;i++){let o=n[i];GM(e,o.selectors,!1)&&(r??=[],Fi(o)?r.unshift(o):r.push(o))}return r}function Ax(t,e,n,r,i,o){let s=mn(t,e);Rx(e[Pe],s,o,t.value,n,r,i)}function Rx(t,e,n,r,i,o,s){if(o==null)t.removeAttribute(e,i,n);else{let a=s==null?ca(o):s(o,r||"",i);t.setAttribute(e,i,a,n)}}function Nx(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let u=s[a],l=s[a+1];Cm(r,n,u,l)}}function IT(t,e,n,r,i){let o=We+n,s=e[Z],a=i(s,e,t,r,n);e[o]=a,Lo(t,!0);let u=t.type===2;return u?(aT(e[Pe],a,t),(Mw()===0||tl(t))&&Uo(a,e),xw()):Uo(a,e),cl()&&(!u||!Hm(t))&&Xm(s,e,a,t),t}function wT(t){let e=t;return Jp()?Lw():(e=e.parent,Lo(e,!1)),e}function Mx(t,e){let n=t[nr];if(!n)return;let r;try{r=n.get(en,null)}catch{r=null}r?.(e)}function ng(t,e,n,r,i){let o=t.inputs?.[r],s=t.hostDirectiveInputs?.[r],a=!1;if(s)for(let u=0;u<s.length;u+=2){let l=s[u],h=s[u+1],p=e.data[l];Cm(p,n[l],h,i),a=!0}if(o)for(let u of o){let l=n[u],h=e.data[u];Cm(h,l,r,i),a=!0}return a}function xx(t,e){let n=gn(e,t),r=n[Z];Px(r,n);let i=n[fn];i!==null&&n[xo]===null&&(n[xo]=ZC(i,n[nr])),De(Ie.ComponentStart);try{rg(r,n,n[Ve])}finally{De(Ie.ComponentEnd,n[Ve])}}function Px(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function rg(t,e,n){ol(e);try{let r=t.viewQuery;r!==null&&wm(1,r,n);let i=t.template;i!==null&&vT(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[ki]?.finishViewCreation(t),t.staticContentQueries&&XC(t,e),t.staticViewQueries&&wm(2,t.viewQuery,n);let o=t.components;o!==null&&Ox(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[ce]&=-5,sl()}}function Ox(t,e){for(let n=0;n<e.length;n++)xx(t,e[n])}function ig(t,e,n,r){let i=Q(null);try{let o=e.tView,a=t[ce]&4096?4096:16,u=Km(t,o,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];u[Pi]=l;let h=t[ki];return h!==null&&(u[ki]=h.createEmbeddedView(o)),rg(o,u,n),u}finally{Q(i)}}function Ca(t,e){return!e||e.firstChild===null||HC(t)}function Ta(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let o=e[n.index];o!==null&&r.push(Xt(o)),pn(o)&&CT(o,r);let s=n.type;if(s&8)Ta(t,e,n.child,r);else if(s&32){let a=Ym(n,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=yT(e,n);if(Array.isArray(a))r.push(...a);else{let u=Pr(e[Vt]);Ta(u[Z],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function CT(t,e){for(let n=Ue;n<t.length;n++){let r=t[n],i=r[Z].firstChild;i!==null&&Ta(r[Z],r,i,e)}t[kr]!==t[fn]&&e.push(t[kr])}function TT(t){if(t[el]!==null){for(let e of t[el])e.impl.addSequence(e);t[el].length=0}}var DT=[];function kx(t){return t[Ut]??Lx(t)}function Lx(t){let e=DT.pop()??Object.create(Vx);return e.lView=t,e}function Fx(t){t.lView[Ut]!==t&&(t.lView=null,DT.push(t))}var Vx=se(M({},mu),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{va(t.lView)},consumerOnSignalRead(){this.lView[Ut]=this}});function Ux(t){let e=t[Ut]??Object.create(Bx);return e.lView=t,e}var Bx=se(M({},mu),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{let e=Pr(t.lView);for(;e&&!bT(e[Z]);)e=Pr(e);e&&qp(e)},consumerOnSignalRead(){this.lView[Ut]=this}});function bT(t){return t.type!==2}function ST(t){if(t[fa]===null)return;let e=!0;for(;e;){let n=!1;for(let r of t[fa])r.dirty&&(n=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=n&&!!(t[ce]&8192)}}var jx=100;function AT(t,e=0){let r=t[Pn].rendererFactory,i=!1;i||r.begin?.();try{$x(t,e)}finally{i||r.end?.()}}function $x(t,e){let n=Zp();try{Xp(!0),Dm(t,e);let r=0;for(;ya(t);){if(r===jx)throw new z(103,!1);r++,Dm(t,1)}}finally{Xp(n)}}function Hx(t,e,n,r){if(Vi(e))return;let i=e[ce],o=!1,s=!1;ol(e);let a=!0,u=null,l=null;o||(bT(t)?(l=kx(e),u=yu(l)):pu()===null?(a=!1,l=Ux(e),u=yu(l)):e[Ut]&&(Qs(e[Ut]),e[Ut]=null));try{zp(e),Vw(t.bindingStartIndex),n!==null&&vT(t,e,n,2,r);let h=(i&3)===3;if(!o)if(h){let y=t.preOrderCheckHooks;y!==null&&dl(e,y,null)}else{let y=t.preOrderHooks;y!==null&&hl(e,y,0,null),dm(e,0)}if(s||zx(e),ST(e),RT(e,0),t.contentQueries!==null&&XC(t,e),!o)if(h){let y=t.contentCheckHooks;y!==null&&dl(e,y)}else{let y=t.contentHooks;y!==null&&hl(e,y,1),dm(e,1)}Gx(t,e);let p=t.components;p!==null&&MT(e,p,0);let g=t.viewQuery;if(g!==null&&wm(2,g,r),!o)if(h){let y=t.viewCheckHooks;y!==null&&dl(e,y)}else{let y=t.viewHooks;y!==null&&hl(e,y,2),dm(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Xu]){for(let y of e[Xu])y();e[Xu]=null}o||(TT(e),e[ce]&=-73)}catch(h){throw o||va(e),h}finally{l!==null&&(Uf(l,u),a&&Fx(l)),sl()}}function RT(t,e){for(let n=qC(t);n!==null;n=GC(n))for(let r=Ue;r<n.length;r++){let i=n[r];NT(i,e)}}function zx(t){for(let e=qC(t);e!==null;e=GC(e)){if(!(e[ce]&2))continue;let n=e[ma];for(let r=0;r<n.length;r++){let i=n[r];qp(i)}}}function qx(t,e,n){De(Ie.ComponentStart);let r=gn(e,t);try{NT(r,n)}finally{De(Ie.ComponentEnd,r[Ve])}}function NT(t,e){nl(t)&&Dm(t,e)}function Dm(t,e){let r=t[Z],i=t[ce],o=t[Ut],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&vu(o)),s||=!1,o&&(o.dirty=!1),t[ce]&=-9217,s)Hx(r,t,r.template,t[Ve]);else if(i&8192){let a=Q(null);try{ST(t),RT(t,1);let u=r.components;u!==null&&MT(t,u,1),TT(t)}finally{Q(a)}}}function MT(t,e,n){for(let r=0;r<e.length;r++)qx(t,e[r],n)}function Gx(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Vr(~i);else{let o=i,s=n[++r],a=n[++r];jw(s,o);let u=e[o];De(Ie.HostBindingsUpdateStart,u);try{a(2,u)}finally{De(Ie.HostBindingsUpdateEnd,u)}}}}finally{Vr(-1)}}function og(t,e){let n=Zp()?64:1088;for(t[Pn].changeDetectionScheduler?.notify(e);t;){t[ce]|=n;let r=Pr(t);if(ko(t)&&!r)return t;t=r}return null}function xT(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function PT(t,e){let n=Ue+e;if(n<t.length)return t[n]}function Bl(t,e,n,r=!0){let i=e[Z];if(Wx(i,e,t,n),r){let s=Tm(n,t),a=e[Pe],u=a.parentNode(t[kr]);u!==null&&ox(i,t[Zt],a,e,u,s)}let o=e[xo];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function OT(t,e){let n=Da(t,e);return n!==void 0&&Vl(n[Z],n),n}function Da(t,e){if(t.length<=Ue)return;let n=Ue+e,r=t[n];if(r){let i=r[Pi];i!==null&&i!==t&&Zm(i,r),e>0&&(t[n-1][Jt]=r[Jt]);let o=ua(t,Ue+e);ix(r[Z],r);let s=o[ki];s!==null&&s.detachView(o[Z]),r[Xe]=null,r[Jt]=null,r[ce]&=-129}return r}function Wx(t,e,n,r){let i=Ue+r,o=n.length;r>0&&(n[i-1][Jt]=e),r<o-Ue?(e[Jt]=n[i],Pp(n,Ue+r,e)):(n.push(e),e[Jt]=null),e[Xe]=n;let s=e[Pi];s!==null&&n!==s&&kT(s,e);let a=e[ki];a!==null&&a.insertView(t),rl(e),e[ce]|=128}function kT(t,e){let n=t[ma],r=e[Xe];if(rr(r))t[ce]|=2;else{let i=r[Xe][Vt];e[Vt]!==i&&(t[ce]|=2)}n===null?t[ma]=[e]:n.push(e)}var $i=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,n=e[Z];return Ta(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n}get context(){return this._lView[Ve]}set context(e){this._lView[Ve]=e}get destroyed(){return Vi(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Xe];if(pn(e)){let n=e[pa],r=n?n.indexOf(this):-1;r>-1&&(Da(e,r),ua(n,r))}this._attachedToViewContainer=!1}Vl(this._lView[Z],this._lView)}onDestroy(e){Gp(this._lView,e)}markForCheck(){og(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ce]&=-129}reattach(){rl(this._lView),this._lView[ce]|=128}detectChanges(){this._lView[ce]|=1024,AT(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new z(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=ko(this._lView),n=this._lView[Pi];n!==null&&!e&&Zm(n,this._lView),gT(this._lView[Z],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new z(902,!1);this._appRef=e;let n=ko(this._lView),r=this._lView[Pi];r!==null&&!n&&kT(r,this._lView),rl(this._lView)}};function jl(t,e,n,r,i){let o=t.data[e];if(o===null)o=Kx(t,e,n,r,i),Bw()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=kw();o.injectorIndex=s===null?-1:s.injectorIndex}return Lo(o,!0),o}function Kx(t,e,n,r,i){let o=Yp(),s=Jp(),a=s?o:o&&o.parent,u=t.data[e]=Yx(t,a,n,e,r,i);return Qx(t,u,o,s),u}function Qx(t,e,n,r){t.firstChild===null&&(t.firstChild=e),n!==null&&(r?n.child==null&&e.parent!==null&&(n.child=e):n.next===null&&(n.next=e,e.prev=n))}function Yx(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return Ow()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,fieldIndex:-1,customControlIndex:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function Jx(t){let e=t[Bp]??[],r=t[Xe][Pe],i=[];for(let o of e)o.data[QC]!==void 0?i.push(o):Zx(o,r);t[Bp]=i}function Zx(t,e){let n=0,r=t.firstChild;if(r){let i=t.data[KC];for(;n<i;){let o=r.nextSibling;sT(e,r,!1),r=o,n++}}}var Xx=()=>null,e1=()=>null;function bm(t,e){return Xx(t,e)}function LT(t,e,n){return e1(t,e,n)}var FT=class{},$l=class{},Sm=class{resolveComponentFactory(e){throw new z(917,!1)}},Ma=class{static NULL=new Sm},Hi=class{};var VT=(()=>{class t{static \u0275prov=W({token:t,providedIn:"root",factory:()=>null})}return t})();var fl={},Am=class{injector;parentInjector;constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){let i=this.injector.get(e,fl,r);return i!==fl||n===fl?i:this.parentInjector.get(e,n,r)}};function Il(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=Ip(i,a);else if(o==2){let u=a,l=e[++s];r=Ip(r,u+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function xa(t,e=0){let n=Ee();if(n===null)return re(t,e);let r=yn();return BC(r,n,Mt(t),e)}function t1(t,e,n,r,i){let o=r===null?null:{"":-1},s=i(t,n);if(s!==null){let a=s,u=null,l=null;for(let h of s)if(h.resolveHostDirectives!==null){[a,u,l]=h.resolveHostDirectives(s);break}i1(t,e,n,a,o,u,l)}o!==null&&r!==null&&n1(n,r,o)}function n1(t,e,n){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new z(-301,!1);r.push(e[i],o)}}function r1(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function i1(t,e,n,r,i,o,s){let a=r.length,u=null;for(let g=0;g<a;g++){let y=r[g];u===null&&Fi(y)&&(u=y,r1(t,n,g)),EM(LC(n,e),t,y.type)}l1(n,t.data.length,a),u?.viewProvidersResolver&&u.viewProvidersResolver(u);for(let g=0;g<a;g++){let y=r[g];y.providersResolver&&y.providersResolver(y)}let l=!1,h=!1,p=dT(t,e,a,null);a>0&&(n.directiveToIndex=new Map);for(let g=0;g<a;g++){let y=r[g];if(n.mergedAttrs=xl(n.mergedAttrs,y.hostAttrs),s1(t,n,e,p,y),u1(p,y,i),s!==null&&s.has(y)){let[R,A]=s.get(y);n.directiveToIndex.set(y.type,[p,R+n.directiveStart,A+n.directiveStart])}else(o===null||!o.has(y))&&n.directiveToIndex.set(y.type,p);y.contentQueries!==null&&(n.flags|=4),(y.hostBindings!==null||y.hostAttrs!==null||y.hostVars!==0)&&(n.flags|=64);let b=y.type.prototype;!l&&(b.ngOnChanges||b.ngOnInit||b.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),l=!0),!h&&(b.ngOnChanges||b.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),h=!0),p++}o1(t,n,o)}function o1(t,e,n){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=t.data[r];if(n===null||!n.has(i))hC(0,e,i,r),hC(1,e,i,r),pC(e,r,!1);else{let o=n.get(i);fC(0,e,o,r),fC(1,e,o,r),pC(e,r,!0)}}}function hC(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;t===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),UT(e,o)}}function fC(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;t===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),UT(e,s)}}function UT(t,e){e==="class"?t.flags|=8:e==="style"&&(t.flags|=16)}function pC(t,e,n){let{attrs:r,inputs:i,hostDirectiveInputs:o}=t;if(r===null||!n&&i===null||n&&o===null||Gm(t)){t.initialInputs??=[],t.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let u=r[a];if(u===0){a+=4;continue}else if(u===5){a+=2;continue}else if(typeof u=="number")break;if(!n&&i.hasOwnProperty(u)){let l=i[u];for(let h of l)if(h===e){s??=[],s.push(u,r[a+1]);break}}else if(n&&o.hasOwnProperty(u)){let l=o[u];for(let h=0;h<l.length;h+=2)if(l[h]===e){s??=[],s.push(l[h+1],r[a+1]);break}}a+=2}t.initialInputs??=[],t.initialInputs.push(s)}function s1(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=xr(i.type,!0)),s=new wa(o,Fi(i),xa,null);t.blueprint[r]=s,n[r]=s,a1(t,e,r,dT(t,n,i.hostVars,Fn),i)}function a1(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;c1(s)!=a&&s.push(a),s.push(n,r,o)}}function c1(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function u1(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Fi(e)&&(n[""]=t)}}function l1(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function BT(t,e,n,r,i,o,s,a){let u=e[Z],l=u.consts,h=On(l,s),p=jl(u,t,n,r,h);return o&&t1(u,e,p,On(l,a),i),p.mergedAttrs=xl(p.mergedAttrs,p.attrs),p.attrs!==null&&Il(p,p.attrs,!1),p.mergedAttrs!==null&&Il(p,p.mergedAttrs,!0),u.queries!==null&&u.queries.elementStart(u,p),p}function jT(t,e){uM(t,e),jp(e)&&t.queries.elementEnd(e)}function d1(t,e,n,r,i,o){let s=e.consts,a=On(s,i),u=jl(e,t,n,r,a);if(u.mergedAttrs=xl(u.mergedAttrs,u.attrs),o!=null){let l=On(s,o);u.localNames=[];for(let h=0;h<l.length;h+=2)u.localNames.push(l[h],-1)}return u.attrs!==null&&Il(u,u.attrs,!1),u.mergedAttrs!==null&&Il(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function h1(t,e,n){return t[e]=n}function Br(t,e,n){if(n===Fn)return!1;let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function pl(t,e,n){return function r(i){let o=Lr(t)?gn(t.index,e):e;og(o,5);let s=e[Ve],a=mC(e,s,n,i),u=r.__ngNextListenerFn__;for(;u;)a=mC(e,s,u,i)&&a,u=u.__ngNextListenerFn__;return a}}function mC(t,e,n,r){let i=Q(null);try{return De(Ie.OutputStart,e,n),n(r)!==!1}catch(o){return Mx(t,o),!1}finally{De(Ie.OutputEnd,e,n),Q(i)}}function $T(t,e,n,r,i,o,s,a){let u=tl(t),l=!1,h=null;if(!r&&u&&(h=p1(e,n,o,t.index)),h!==null){let p=h.__ngLastListenerFn__||h;p.__ngNextListenerFn__=s,h.__ngLastListenerFn__=s,l=!0}else{let p=mn(t,n),g=r?r(p):p;PM(n,g,o,a);let y=i.listen(g,o,a);if(!f1(o)){let b=r?R=>r(Xt(R[t.index])):t.index;HT(b,e,n,o,a,y,!1)}}return l}function f1(t){return t.startsWith("animation")||t.startsWith("transition")}function p1(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=e[Po],u=i[o+2];return a&&a.length>u?a[u]:null}typeof s=="string"&&(o+=2)}return null}function HT(t,e,n,r,i,o,s){let a=e.firstCreatePass?Nw(e):null,u=Rw(n),l=u.length;u.push(i,o),a&&a.push(r,t,l,(l+1)*(s?-1:1))}function gC(t,e,n,r,i,o){let s=e[n],a=e[Z],l=a.data[n].outputs[r],p=s[l].subscribe(o);HT(t.index,a,e,i,o,p,!0)}var Rm=Symbol("BINDING");var wl=class extends Ma{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=Or(e);return new Bo(n,this.ngModule)}};function m1(t){return Object.keys(t).map(e=>{let[n,r,i]=t[e],o={propName:n,templateName:e,isSignal:(r&Fl.SignalBased)!==0};return i&&(o.transform=i),o})}function g1(t){return Object.keys(t).map(e=>({propName:t[e],templateName:e}))}function y1(t,e,n){let r=e instanceof ut?e:e?.injector;return r&&t.getStandaloneInjector!==null&&(r=t.getStandaloneInjector(r)||r),r?new Am(n,r):n}function v1(t){let e=t.get(Hi,null);if(e===null)throw new z(407,!1);let n=t.get(VT,null),r=t.get(Ao,null);return{rendererFactory:e,sanitizer:n,changeDetectionScheduler:r,ngReflect:!1}}function _1(t,e){let n=zT(t);return iT(e,n,n==="svg"?Cw:n==="math"?Tw:null)}function zT(t){return(t.selectors[0][0]||"div").toLowerCase()}var Bo=class extends $l{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=m1(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=g1(this.componentDef.outputs),this.cachedOutputs}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=YM(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!n}create(e,n,r,i,o,s){De(Ie.DynamicComponentStart);let a=Q(null);try{let u=this.componentDef,l=E1(r,u,s,o),h=y1(u,i||this.ngModule,e),p=v1(h),g=p.rendererFactory.createRenderer(null,u),y=r?vx(g,r,u.encapsulation,h):_1(u,g),b=s?.some(yC)||o?.some(k=>typeof k!="function"&&k.bindings.some(yC)),R=Km(null,l,null,512|lT(u),null,null,p,g,h,null,ZC(y,h,!0));R[We]=y,ol(R);let A=null;try{let k=BT(We,R,2,"#host",()=>l.directiveRegistry,!0,0);aT(g,y,k),Uo(y,R),_T(l,R,k),eT(l,k,R),jT(l,k),n!==void 0&&w1(k,this.ngContentSelectors,n),A=gn(k.index,R),R[Ve]=A[Ve],rg(l,R,null)}catch(k){throw A!==null&&Im(A),Im(R),k}finally{De(Ie.DynamicComponentEnd),sl()}return new Cl(this.componentType,R,!!b)}finally{Q(a)}}};function E1(t,e,n,r){let i=t?["ng-version","21.0.6"]:JM(e.selectors[0]),o=null,s=null,a=0;if(n)for(let h of n)a+=h[Rm].requiredVars,h.create&&(h.targetIdx=0,(o??=[]).push(h)),h.update&&(h.targetIdx=0,(s??=[]).push(h));if(r)for(let h=0;h<r.length;h++){let p=r[h];if(typeof p!="function")for(let g of p.bindings){a+=g[Rm].requiredVars;let y=h+1;g.create&&(g.targetIdx=y,(o??=[]).push(g)),g.update&&(g.targetIdx=y,(s??=[]).push(g))}}let u=[e];if(r)for(let h of r){let p=typeof h=="function"?h:h.type,g=Np(p);u.push(g)}return Wm(0,null,I1(o,s),1,a,u,null,null,null,[i],null)}function I1(t,e){return!t&&!e?null:n=>{if(n&1&&t)for(let r of t)r.create();if(n&2&&e)for(let r of e)r.update()}}function yC(t){let e=t[Rm].kind;return e==="input"||e==="twoWay"}var Cl=class extends FT{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,n,r){super(),this._rootLView=n,this._hasInputBindings=r,this._tNode=ga(n[Z],We),this.location=Um(this._tNode,n),this.instance=gn(this._tNode.index,n)[Ve],this.hostView=this.changeDetectorRef=new $i(n,void 0),this.componentType=e}setInput(e,n){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let i=this._rootLView,o=ng(r,i[Z],i,e,n);this.previousInputValues.set(e,n);let s=gn(r.index,i);og(s,1)}get injector(){return new Bi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function w1(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null&&o.length?Array.from(o):null)}}var Pa=(()=>{class t{static __NG_ELEMENT_ID__=C1}return t})();function C1(){let t=yn();return D1(t,Ee())}var T1=Pa,qT=class extends T1{_lContainer;_hostTNode;_hostLView;constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Um(this._hostTNode,this._hostLView)}get injector(){return new Bi(this._hostTNode,this._hostLView)}get parentInjector(){let e=Vm(this._hostTNode,this._hostLView);if(PC(e)){let n=yl(e,this._hostLView),r=gl(e),i=n[Z].data[r+8];return new Bi(i,n)}else return new Bi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=vC(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-Ue}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=bm(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,Ca(this._hostTNode,s)),a}createComponent(e,n,r,i,o,s,a){let u=e&&!iM(e),l;if(u)l=n;else{let A=n||{};l=A.index,r=A.injector,i=A.projectableNodes,o=A.environmentInjector||A.ngModuleRef,s=A.directives,a=A.bindings}let h=u?e:new Bo(Or(e)),p=r||this.parentInjector;if(!o&&h.ngModule==null){let k=(u?p:this.parentInjector).get(ut,null);k&&(o=k)}let g=Or(h.componentType??{}),y=bm(this._lContainer,g?.id??null),b=y?.firstChild??null,R=h.create(p,i,b,o,s,a);return this.insertImpl(R.hostView,l,Ca(this._hostTNode,y)),R}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(bw(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[Xe],l=new qT(u,u[Zt],u[Xe]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return Bl(s,i,o,r),e.attachToViewContainerRef(),Pp(pm(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=vC(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=Da(this._lContainer,n);r&&(ua(pm(this._lContainer),n),Vl(r[Z],r))}detach(e){let n=this._adjustIndex(e,-1),r=Da(this._lContainer,n);return r&&ua(pm(this._lContainer),n)!=null?new $i(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function vC(t){return t[pa]}function pm(t){return t[pa]||(t[pa]=[])}function D1(t,e){let n,r=e[t.index];return pn(r)?n=r:(n=xT(r,e,null,t),e[t.index]=n,Qm(e,n)),S1(n,e,t,r),new qT(n,t,e)}function b1(t,e){let n=t[Pe],r=n.createComment(""),i=mn(e,t),o=n.parentNode(i);return El(n,o,r,n.nextSibling(i),!1),r}var S1=N1,A1=()=>!1;function R1(t,e,n){return A1(t,e,n)}function N1(t,e,n,r){if(t[kr])return;let i;n.type&8?i=Xt(r):i=b1(e,n),t[kr]=i}var zi=class{},Hl=class{};var Tl=class extends zi{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new wl(this);constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n;let o=Rp(e);this._bootstrapComponents=cT(o.bootstrap),this._r3Injector=rm(e,n,[{provide:zi,useValue:this},{provide:Ma,useValue:this.componentFactoryResolver},...r],er(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Dl=class extends Hl{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new Tl(this.moduleType,e,[])}};var ba=class extends zi{injector;componentFactoryResolver=new wl(this);instance=null;constructor(e){super();let n=new Si([...e.providers,{provide:zi,useValue:this},{provide:Ma,useValue:this.componentFactoryResolver}],e.parent||da(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Oa(t,e,n=null){return new ba({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var M1=(()=>{class t{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=Lp(!1,n.type),i=r.length>0?Oa([r],this._injector,""):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=W({token:t,providedIn:"environment",factory:()=>new t(re(ut))})}return t})();function In(t){return Aa(()=>{let e=GT(t),n=se(M({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===jm.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(M1).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||En.Emulated,styles:t.styles||Yt,_:null,schemas:t.schemas||null,tView:null,id:""});e.standalone&&Gi("NgStandalone"),WT(n);let r=t.dependencies;return n.directiveDefs=_C(r,x1),n.pipeDefs=_C(r,uw),n.id=k1(n),n})}function x1(t){return Or(t)||Np(t)}function ka(t){return Aa(()=>({type:t.type,bootstrap:t.bootstrap||Yt,declarations:t.declarations||Yt,imports:t.imports||Yt,exports:t.exports||Yt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function P1(t,e){if(t==null)return Ri;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,a,u;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,u=i[3]||null):(o=i,s=i,a=Fl.None,u=null),n[o]=[r,a,u],e[o]=s}return n}function O1(t){if(t==null)return Ri;let e={};for(let n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function zl(t){return Aa(()=>{let e=GT(t);return WT(e),e})}function sg(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone??!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function GT(t){let e={};return{type:t.type,providersResolver:null,viewProvidersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputConfig:t.inputs||Ri,exportAs:t.exportAs||null,standalone:t.standalone??!0,signals:t.signals===!0,selectors:t.selectors||Yt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:P1(t.inputs,e),outputs:O1(t.outputs),debugInfo:null}}function WT(t){t.features?.forEach(e=>e(t))}function _C(t,e){return t?()=>{let n=typeof t=="function"?t():t,r=[];for(let i of n){let o=e(i);o!==null&&r.push(o)}return r}:null}function k1(t){let e=0,n=typeof t.consts=="function"?"":t.consts,r=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,n,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function L1(t,e,n,r,i,o,s,a){if(n.firstCreatePass){t.mergedAttrs=xl(t.mergedAttrs,t.attrs);let h=t.tView=Wm(2,t,i,o,s,n.directiveRegistry,n.pipeRegistry,null,n.schemas,n.consts,null);n.queries!==null&&(n.queries.template(n,t),h.queries=n.queries.embeddedTView(t))}a&&(t.flags|=a),Lo(t,!1);let u=F1(n,e,t,r);cl()&&Xm(n,e,u,t),Uo(u,e);let l=xT(u,e,u,t);e[r+We]=l,Qm(e,l),R1(l,t,e)}function bl(t,e,n,r,i,o,s,a,u,l,h){let p=n+We,g;if(e.firstCreatePass){if(g=jl(e,p,4,s||null,a||null),l!=null){let y=On(e.consts,l);g.localNames=[];for(let b=0;b<y.length;b+=2)g.localNames.push(y[b],-1)}}else g=e.data[p];return L1(g,t,e,n,r,i,o,u),l!=null&&tg(t,g,h),g}var F1=V1;function V1(t,e,n,r){return ul(!0),e[Pe].createComment("")}var ag=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();var cg=new K("");function Wi(t){return!!t&&typeof t.then=="function"}function ql(t){return!!t&&typeof t.subscribe=="function"}var KT=new K("");var ug=(()=>{class t{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=x(KT,{optional:!0})??[];injector=x(hn);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let o=Tt(this.injector,i);if(Wi(o))n.push(o);else if(ql(o)){let s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});n.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||t)};static \u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Gl=new K("");function QT(){jf(()=>{let t="";throw new z(600,t)})}function YT(t){return t.isBoundToModule}var U1=10;var $o=(()=>{class t{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=x(en);afterRenderManager=x(fT);zonelessEnabled=x(_a);rootEffectScheduler=x(lm);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new Be;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=x(Ur);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(Re(n=>!n))}constructor(){x(Na,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=x(ut);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){return this.bootstrapImpl(n,r)}bootstrapImpl(n,r,i=hn.NULL){return this._injector.get(Fe).run(()=>{De(Ie.BootstrapComponentStart);let s=n instanceof $l;if(!this._injector.get(ug).done){let b="";throw new z(405,b)}let u;s?u=n:u=this._injector.get(Ma).resolveComponentFactory(n),this.componentTypes.push(u.componentType);let l=YT(u)?void 0:this._injector.get(zi),h=r||u.selector,p=u.create(i,[],h,l),g=p.location.nativeElement,y=p.injector.get(cg,null);return y?.registerApplication(g),p.onDestroy(()=>{this.detachView(p.hostView),Ia(this.components,p),y?.unregisterApplication(g)}),this._loadComponent(p),De(Ie.BootstrapComponentEnd,p),p})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){De(Ie.ChangeDetectionStart),this.tracingSnapshot!==null?this.tracingSnapshot.run(Jm.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw De(Ie.ChangeDetectionEnd),new z(101,!1);let n=Q(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,Q(n),this.afterTick.next(),De(Ie.ChangeDetectionEnd)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Hi,null,{optional:!0}));let n=0;for(;this.dirtyFlags!==0&&n++<U1;){De(Ie.ChangeDetectionSyncStart);try{this.synchronizeOnce()}finally{De(Ie.ChangeDetectionSyncEnd)}}}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let n=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!ya(i))continue;let o=r&&!this.zonelessEnabled?0:1;AT(i,o),n=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}n||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>ya(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;Ia(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(n),this._injector.get(Gl,[]).forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>Ia(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new z(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||t)};static \u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Ia(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function jr(t,e,n,r){let i=Ee(),o=Ui();if(Br(i,o,e)){let s=xt(),a=al();Ax(a,i,t,e,n,r)}return jr}var Hq=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";var Nm=class{destroy(e){}updateValue(e,n){}swap(e,n){let r=Math.min(e,n),i=Math.max(e,n),o=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(e,n){this.attach(n,this.detach(e))}};function mm(t,e,n,r,i){return t===n&&Object.is(e,r)?1:Object.is(i(t,e),i(n,r))?-1:0}function B1(t,e,n,r){let i,o,s=0,a=t.length-1,u=void 0;if(Array.isArray(e)){Q(r);let l=e.length-1;for(Q(null);s<=a&&s<=l;){let h=t.at(s),p=e[s],g=mm(s,h,s,p,n);if(g!==0){g<0&&t.updateValue(s,p),s++;continue}let y=t.at(a),b=e[l],R=mm(a,y,l,b,n);if(R!==0){R<0&&t.updateValue(a,b),a--,l--;continue}let A=n(s,h),k=n(a,y),q=n(s,p);if(Object.is(q,k)){let le=n(l,b);Object.is(le,A)?(t.swap(s,a),t.updateValue(a,b),l--,a--):t.move(a,s),t.updateValue(s,p),s++;continue}if(i??=new Sl,o??=IC(t,s,a,n),Mm(t,i,s,q))t.updateValue(s,p),s++,a++;else if(o.has(q))i.set(A,t.detach(s)),a--;else{let le=t.create(s,e[s]);t.attach(s,le),s++,a++}}for(;s<=l;)EC(t,i,n,s,e[s]),s++}else if(e!=null){Q(r);let l=e[Symbol.iterator]();Q(null);let h=l.next();for(;!h.done&&s<=a;){let p=t.at(s),g=h.value,y=mm(s,p,s,g,n);if(y!==0)y<0&&t.updateValue(s,g),s++,h=l.next();else{i??=new Sl,o??=IC(t,s,a,n);let b=n(s,g);if(Mm(t,i,s,b))t.updateValue(s,g),s++,a++,h=l.next();else if(!o.has(b))t.attach(s,t.create(s,g)),s++,a++,h=l.next();else{let R=n(s,p);i.set(R,t.detach(s)),a--}}}for(;!h.done;)EC(t,i,n,t.length,h.value),h=l.next()}for(;s<=a;)t.destroy(t.detach(a--));i?.forEach(l=>{t.destroy(l)})}function Mm(t,e,n,r){return e!==void 0&&e.has(r)?(t.attach(n,e.get(r)),e.delete(r),!0):!1}function EC(t,e,n,r,i){if(Mm(t,e,r,n(r,i)))t.updateValue(r,i);else{let o=t.create(r,i);t.attach(r,o)}}function IC(t,e,n,r){let i=new Set;for(let o=e;o<=n;o++)i.add(r(o,t.at(o)));return i}var Sl=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let n=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(e,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,n){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,n)}else this.kvMap.set(e,n)}forEach(e){for(let[n,r]of this.kvMap)if(e(r,n),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,n)}}};function te(t,e,n,r,i,o,s,a){Gi("NgControlFlow");let u=Ee(),l=xt(),h=On(l.consts,o);return bl(u,l,t,e,n,r,i,h,256,s,a),jt}function jt(t,e,n,r,i,o,s,a){Gi("NgControlFlow");let u=Ee(),l=xt(),h=On(l.consts,o);return bl(u,l,t,e,n,r,i,h,512,s,a),jt}function ne(t,e){Gi("NgControlFlow");let n=Ee(),r=Ui(),i=n[r]!==Fn?n[r]:-1,o=i!==-1?Al(n,We+i):void 0,s=0;if(Br(n,r,t)){let a=Q(null);try{if(o!==void 0&&OT(o,s),t!==-1){let u=We+t,l=Al(n,u),h=km(n[Z],u),p=LT(l,h,n),g=ig(n,h,e,{dehydratedView:p});Bl(l,g,s,Ca(h,p))}}finally{Q(a)}}else if(o!==void 0){let a=PT(o,s);a!==void 0&&(a[Ve]=e)}}var xm=class{lContainer;$implicit;$index;constructor(e,n,r){this.lContainer=e,this.$implicit=n,this.$index=r}get $count(){return this.lContainer.length-Ue}};function $r(t,e){return e}var Pm=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,n,r){this.hasEmptyBlock=e,this.trackByFn=n,this.liveCollection=r}};function Hr(t,e,n,r,i,o,s,a,u,l,h,p,g){Gi("NgControlFlow");let y=Ee(),b=xt(),R=u!==void 0,A=Ee(),k=a?s.bind(A[Vt][Ve]):s,q=new Pm(R,k);A[We+t]=q,bl(y,b,t+1,e,n,r,i,On(b.consts,o),256),R&&bl(y,b,t+2,u,l,h,p,On(b.consts,g),512)}var Om=class extends Nm{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,n,r){super(),this.lContainer=e,this.hostLView=n,this.templateTNode=r}get length(){return this.lContainer.length-Ue}at(e){return this.getLView(e)[Ve].$implicit}attach(e,n){let r=n[xo];this.needsIndexUpdate||=e!==this.length,Bl(this.lContainer,n,e,Ca(this.templateTNode,r)),j1(this.lContainer,e)}detach(e){return this.needsIndexUpdate||=e!==this.length-1,$1(this.lContainer,e),H1(this.lContainer,e)}create(e,n){let r=bm(this.lContainer,this.templateTNode.tView.ssrId);return ig(this.hostLView,this.templateTNode,new xm(this.lContainer,n,e),{dehydratedView:r})}destroy(e){Vl(e[Z],e)}updateValue(e,n){this.getLView(e)[Ve].$implicit=n}reset(){this.needsIndexUpdate=!1}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[Ve].$index=e}getLView(e){return z1(this.lContainer,e)}};function zr(t){let e=Q(null),n=Fr();try{let r=Ee(),i=r[Z],o=r[n],s=n+1,a=Al(r,s);if(o.liveCollection===void 0){let l=km(i,s);o.liveCollection=new Om(a,r,l)}else o.liveCollection.reset();let u=o.liveCollection;if(B1(u,t,o.trackByFn,e),u.updateIndexes(),o.hasEmptyBlock){let l=Ui(),h=u.length===0;if(Br(r,l,h)){let p=n+2,g=Al(r,p);if(h){let y=km(i,p),b=LT(g,y,r),R=ig(r,y,void 0,{dehydratedView:b});Bl(g,R,0,Ca(y,b))}else i.firstUpdatePass&&Jx(g),OT(g,0)}}}finally{Q(e)}}function Al(t,e){return t[e]}function j1(t,e){if(t.length<=Ue)return;let n=Ue+e,r=t[n],i=r?r[Li]:void 0;if(r&&i&&i.detachedLeaveAnimationFns&&i.detachedLeaveAnimationFns.length>0){let o=r[nr];nx(o,i),ji.delete(r),i.detachedLeaveAnimationFns=void 0}}function $1(t,e){if(t.length<=Ue)return;let n=Ue+e,r=t[n],i=r?r[Li]:void 0;i&&i.leave&&i.leave.size>0&&(i.detachedLeaveAnimationFns=[])}function H1(t,e){return Da(t,e)}function z1(t,e){return PT(t,e)}function km(t,e){return ga(t,e)}function or(t,e,n){let r=Ee(),i=Ui();if(Br(r,i,e)){let o=xt(),s=al();wx(s,r,t,e,r[Pe],n)}return or}function wC(t,e,n,r,i){ng(e,t,n,i?"class":"style",r)}function Y(t,e,n,r){let i=Ee(),o=i[Z],s=t+We,a=o.firstCreatePass?BT(s,i,2,e,Sx,Pw(),n,r):o.data[s];if(IT(a,i,t,e,JT),tl(a)){let u=i[Z];_T(u,i,a),eT(u,a,i)}return r!=null&&tg(i,a),Y}function ie(){let t=xt(),e=yn(),n=wT(e);return t.firstCreatePass&&jT(t,n),Kp(n)&&Qp(),Wp(),n.classesWithoutHost!=null&&dM(n)&&wC(t,n,Ee(),n.classesWithoutHost,!0),n.stylesWithoutHost!=null&&hM(n)&&wC(t,n,Ee(),n.stylesWithoutHost,!1),ie}function sr(t,e,n,r){return Y(t,e,n,r),ie(),sr}function U(t,e,n,r){let i=Ee(),o=i[Z],s=t+We,a=o.firstCreatePass?d1(s,o,2,e,n,r):o.data[s];return IT(a,i,t,e,JT),r!=null&&tg(i,a),U}function B(){let t=yn(),e=wT(t);return Kp(e)&&Qp(),Wp(),B}function tt(t,e,n,r){return U(t,e,n,r),B(),tt}var JT=(t,e,n,r,i)=>(ul(!0),iT(e[Pe],r,Kw()));function Dt(){return Ee()}function mt(t,e,n){let r=Ee(),i=Ui();if(Br(r,i,e)){let o=xt(),s=al();ET(s,r,t,e,r[Pe],n)}return mt}var La="en-US";var q1=La;function ZT(t){typeof t=="string"&&(q1=t.toLowerCase().replace(/_/g,"-"))}function wn(t,e,n){let r=Ee(),i=xt(),o=yn();return G1(i,r,r[Pe],o,t,e,n),wn}function Vn(t,e,n){let r=Ee(),i=xt(),o=yn();return(o.type&3||n)&&$T(o,i,r,n,r[Pe],t,e,pl(o,r,e)),Vn}function G1(t,e,n,r,i,o,s){let a=!0,u=null;if((r.type&3||s)&&(u??=pl(r,e,o),$T(r,t,e,s,n,i,o,u)&&(a=!1)),a){let l=r.outputs?.[i],h=r.hostDirectiveOutputs?.[i];if(h&&h.length)for(let p=0;p<h.length;p+=2){let g=h[p],y=h[p+1];u??=pl(r,e,o),gC(r,e,g,y,i,u)}if(l&&l.length)for(let p of l)u??=pl(r,e,o),gC(r,e,p,i,i,u)}}function L(t=1){return Ww(t)}function ll(t,e){return t<<17|e<<2}function qi(t){return t>>17&32767}function W1(t){return(t&2)==2}function K1(t,e){return t&131071|e<<17}function Lm(t){return t|2}function jo(t){return(t&131068)>>2}function gm(t,e){return t&-131069|e<<2}function Q1(t){return(t&1)===1}function Fm(t){return t|1}function Y1(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=qi(s),u=jo(s);t[r]=n;let l=!1,h;if(Array.isArray(n)){let p=n;h=p[1],(h===null||Mo(p,h)>0)&&(l=!0)}else h=n;if(i)if(u!==0){let g=qi(t[a+1]);t[r+1]=ll(g,a),g!==0&&(t[g+1]=gm(t[g+1],r)),t[a+1]=K1(t[a+1],r)}else t[r+1]=ll(a,0),a!==0&&(t[a+1]=gm(t[a+1],r)),a=r;else t[r+1]=ll(u,0),a===0?a=r:t[u+1]=gm(t[u+1],r),u=r;l&&(t[r+1]=Lm(t[r+1])),CC(t,h,r,!0),CC(t,h,r,!1),J1(e,h,t,r,o),s=ll(a,u),o?e.classBindings=s:e.styleBindings=s}function J1(t,e,n,r,i){let o=i?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&Mo(o,e)>=0&&(n[r+1]=Fm(n[r+1]))}function CC(t,e,n,r){let i=t[n+1],o=e===null,s=r?qi(i):jo(i),a=!1;for(;s!==0&&(a===!1||o);){let u=t[s],l=t[s+1];Z1(u,e)&&(a=!0,t[s+1]=r?Fm(l):Lm(l)),s=r?qi(l):jo(l)}a&&(t[n+1]=r?Lm(i):Fm(i))}function Z1(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?Mo(t,e)>=0:!1}function Cn(t,e){return X1(t,e,null,!0),Cn}function X1(t,e,n,r){let i=Ee(),o=xt(),s=Uw(2);if(o.firstUpdatePass&&tP(o,t,s,r),e!==Fn&&Br(i,s,e)){let a=o.data[Fr()];sP(o,a,i,i[Pe],t,i[s+1]=aP(e,n),r,s)}}function eP(t,e){return e>=t.expandoStartIndex}function tP(t,e,n,r){let i=t.data;if(i[n+1]===null){let o=i[Fr()],s=eP(t,n);cP(o,r)&&e===null&&!s&&(e=!1),e=nP(i,o,e,r),Y1(i,o,e,n,s,r)}}function nP(t,e,n,r){let i=Hw(t),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=ym(null,t,e,n,r),n=Sa(n,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==i)if(n=ym(i,t,e,n,r),o===null){let u=rP(t,e,r);u!==void 0&&Array.isArray(u)&&(u=ym(null,t,e,u[1],r),u=Sa(u,e.attrs,r),iP(t,e,r,u))}else o=oP(t,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),n}function rP(t,e,n){let r=n?e.classBindings:e.styleBindings;if(jo(r)!==0)return t[qi(r)]}function iP(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[qi(i)]=r}function oP(t,e,n){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=t[o].hostAttrs;r=Sa(r,s,n)}return Sa(r,e.attrs,n)}function ym(t,e,n,r,i){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=e[a],r=Sa(r,o.hostAttrs,i),o!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function Sa(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),mw(t,s,n?!0:e[++o]))}return t===void 0?null:t}function sP(t,e,n,r,i,o,s,a){if(!(e.type&3))return;let u=t.data,l=u[a+1],h=Q1(l)?TC(u,e,n,i,jo(l),s):void 0;if(!Rl(h)){Rl(o)||W1(l)&&(o=TC(u,null,n,i,a,s));let p=$p(Fr(),n);yx(r,s,p,i,o)}}function TC(t,e,n,r,i,o){let s=e===null,a;for(;i>0;){let u=t[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,g=n[i+1];g===Fn&&(g=p?Yt:void 0);let y=p?Zu(g,r):h===r?g:void 0;if(l&&!Rl(y)&&(y=Zu(u,r)),Rl(y)&&(a=y,s))return a;let b=t[i+1];i=s?qi(b):jo(b)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(a=Zu(u,r))}return a}function Rl(t){return t!==void 0}function aP(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=er(zm(t)))),t}function cP(t,e){return(t.flags&(e?8:16))!==0}function P(t,e=""){let n=Ee(),r=xt(),i=t+We,o=r.firstCreatePass?jl(r,i,1,e,null):r.data[i],s=uP(r,n,o,e,t);n[i]=s,cl()&&Xm(r,n,s,o),Lo(o,!1)}var uP=(t,e,n,r,i)=>(ul(!0),LM(e[Pe],r));function lP(t,e,n,r=""){return Br(t,Ui(),n)?e+ca(n)+r:Fn}function Ae(t){return nt("",t),Ae}function nt(t,e,n){let r=Ee(),i=lP(r,t,e,n);return i!==Fn&&dP(r,Fr(),i),nt}function dP(t,e,n){let r=$p(e,t);FM(t[Pe],r,n)}function hP(t,e){let n=t[e];return n===Fn?void 0:n}function fP(t,e,n,r,i,o){let s=e+n;return Br(t,s,i)?h1(t,s+1,o?r.call(o,i):r(i)):hP(t,s+1)}function tn(t,e){let n=xt(),r,i=t+We;n.firstCreatePass?(r=pP(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let o=r.factory||(r.factory=xr(r.type,!0)),s,a=wt(xa);try{let u=vl(!1),l=o();return vl(u),Hp(n,Ee(),i,l),l}finally{wt(a)}}function pP(t,e){if(e)for(let n=e.length-1;n>=0;n--){let r=e[n];if(t===r.name)return r}}function nn(t,e,n){let r=t+We,i=Ee(),o=Dw(i,r);return mP(i,r)?fP(i,Fw(),e,o.transform,n,o):o.transform(n)}function mP(t,e){return t[Z].data[e].pure}var Nl=class{ngModuleFactory;componentFactories;constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},lg=(()=>{class t{compileModuleSync(n){return new Dl(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=Rp(n),o=cT(i.declarations).reduce((s,a)=>{let u=Or(a);return u&&s.push(new Bo(u)),s},[]);return new Nl(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(r){return new(r||t)};static \u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var XT=(()=>{class t{applicationErrorHandler=x(en);appRef=x($o);taskService=x(Ur);ngZone=x(Fe);zonelessEnabled=x(_a);tracing=x(Na,{optional:!0});zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new ct;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(oa):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(x(um,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()}))}notify(n){if(!this.zonelessEnabled&&n===5)return;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2;break}case 12:{this.appRef.dirtyFlags|=16;break}case 13:{this.appRef.dirtyFlags|=2;break}case 11:break;case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?om:im;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(oa+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(n),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,om(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||t)};static \u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function eD(){return[{provide:Ao,useExisting:XT},{provide:Fe,useClass:sa},{provide:_a,useValue:!0}]}function gP(){return typeof $localize<"u"&&$localize.locale||La}var Wl=new K("",{factory:()=>x(Wl,{optional:!0,skipSelf:!0})||gP()});var nD=Symbol("InputSignalNode#UNSET"),kP=se(M({},_u),{transformFn:void 0,applyValueToInputSignal(t,e){Ys(t,e)}});function rD(t,e){let n=Object.create(kP);n.value=t,n.transformFn=e?.transform;function r(){if(gu(n),n.value===nD){let i=null;throw new z(-950,i)}return n.value}return r[Qt]=n,r}function tD(t,e){return rD(t,e)}function LP(t){return rD(nD,t)}var iD=(tD.required=LP,tD);var dg=new K(""),FP=new K("");function Fa(t){return!t.moduleRef}function VP(t){let e=Fa(t)?t.r3Injector:t.moduleRef.injector,n=e.get(Fe);return n.run(()=>{Fa(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(en),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:r})}),Fa(t)){let o=()=>e.destroy(),s=t.platformInjector.get(dg);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>t.moduleRef.destroy(),s=t.platformInjector.get(dg);s.add(o),t.moduleRef.onDestroy(()=>{Ia(t.allPlatformModules,t.moduleRef),i.unsubscribe(),s.delete(o)})}return BP(r,n,()=>{let o=e.get(Ur),s=o.add(),a=e.get(ug);return a.runInitializers(),a.donePromise.then(()=>{let u=e.get(Wl,La);if(ZT(u||La),!e.get(FP,!0))return Fa(t)?e.get($o):(t.allPlatformModules.push(t.moduleRef),t.moduleRef);if(Fa(t)){let h=e.get($o);return t.rootComponent!==void 0&&h.bootstrap(t.rootComponent),h}else return UP?.(t.moduleRef,t.allPlatformModules),t.moduleRef}).finally(()=>void o.remove(s))})})}var UP;function BP(t,e,n){try{let r=n();return Wi(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t(r)),r}}var Kl=null;function jP(t=[],e){return hn.create({name:e,providers:[{provide:la,useValue:"platform"},{provide:dg,useValue:new Set([()=>Kl=null])},...t]})}function $P(t=[]){if(Kl)return Kl;let e=jP(t);return Kl=e,QT(),HP(e),e}function HP(t){let e=t.get(kl,null);Tt(t,()=>{e?.forEach(n=>n())})}var Ho=(()=>{class t{static __NG_ELEMENT_ID__=zP}return t})();function zP(t){return qP(yn(),Ee(),(t&16)===16)}function qP(t,e,n){if(Lr(t)&&!n){let r=gn(t.index,e);return new $i(r,r)}else if(t.type&175){let r=e[Vt];return new $i(r,e)}return null}function oD(t){let{rootComponent:e,appProviders:n,platformProviders:r,platformRef:i}=t;De(Ie.BootstrapApplicationStart);try{let o=i?.injector??$P(r),s=[eD(),Zw,...n||[]],a=new ba({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return VP({r3Injector:a.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{De(Ie.BootstrapApplicationEnd)}}var sD=null;function ar(){return sD}function hg(t){sD??=t}var Va=class{},Yl=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=W({token:t,factory:()=>x(aD),providedIn:"platform"})}return t})();var aD=(()=>{class t extends Yl{_location;_history;_doc=x(Ke);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ar().getBaseHref(this._doc)}onPopState(n){let r=ar().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=ar().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||t)};static \u0275prov=W({token:t,factory:()=>new t,providedIn:"platform"})}return t})();function lD(t,e){return t?e?t.endsWith("/")?e.startsWith("/")?t+e.slice(1):t+e:e.startsWith("/")?t+e:`${t}/${e}`:t:e}function cD(t){let e=t.search(/#|\?|$/);return t[e-1]==="/"?t.slice(0,e-1)+t.slice(e):t}function qr(t){return t&&t[0]!=="?"?`?${t}`:t}var Jl=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=W({token:t,factory:()=>x(WP),providedIn:"root"})}return t})(),GP=new K(""),WP=(()=>{class t extends Jl{_platformLocation;_baseHref;_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??x(Ke).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return lD(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+qr(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+qr(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+qr(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||t)(re(Yl),re(GP,8))};static \u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),zo=(()=>{class t{_subject=new Be;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(n){this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=YP(cD(uD(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+qr(r))}normalize(n){return t.stripTrailingSlash(QP(this._basePath,uD(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+qr(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+qr(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=qr;static joinWithSlash=lD;static stripTrailingSlash=cD;static \u0275fac=function(r){return new(r||t)(re(Jl))};static \u0275prov=W({token:t,factory:()=>KP(),providedIn:"root"})}return t})();function KP(){return new zo(re(Jl))}function QP(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function uD(t){return t.replace(/\/index.html$/,"")}function YP(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function JP(t,e){return new z(2100,!1)}var fg=class{createSubscription(e,n,r){return Bt(()=>e.subscribe({next:n,error:r}))}dispose(e){Bt(()=>e.unsubscribe())}},pg=class{createSubscription(e,n,r){return e.then(i=>n?.(i),i=>r?.(i)),{unsubscribe:()=>{n=null,r=null}}}dispose(e){e.unsubscribe()}},ZP=new pg,XP=new fg,Ua=(()=>{class t{_ref;_latestValue=null;markForCheckOnValueUpdate=!0;_subscription=null;_obj=null;_strategy=null;applicationErrorHandler=x(en);constructor(n){this._ref=n}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(n){if(!this._obj){if(n)try{this.markForCheckOnValueUpdate=!1,this._subscribe(n)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return n!==this._obj?(this._dispose(),this.transform(n)):this._latestValue}_subscribe(n){this._obj=n,this._strategy=this._selectStrategy(n),this._subscription=this._strategy.createSubscription(n,r=>this._updateLatestValue(n,r),r=>this.applicationErrorHandler(r))}_selectStrategy(n){if(Wi(n))return ZP;if(ql(n))return XP;throw JP(t,n)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(n,r){n===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static \u0275fac=function(r){return new(r||t)(xa(Ho,16))};static \u0275pipe=sg({name:"async",type:t,pure:!1})}return t})();var Zl=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=ka({type:t});static \u0275inj=No({})}return t})();function mg(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Ba=class{};var dD="browser";var ja=class{_doc;constructor(e){this._doc=e}manager},Xl=(()=>{class t extends ja{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i,o){return n.addEventListener(r,i,o),()=>this.removeEventListener(n,r,i,o)}removeEventListener(n,r,i,o){return n.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||t)(re(Ke))};static \u0275prov=W({token:t,factory:t.\u0275fac})}return t})(),nd=new K(""),_g=(()=>{class t{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,r){this._zone=r,n.forEach(s=>{s.manager=this});let i=n.filter(s=>!(s instanceof Xl));this._plugins=i.slice().reverse();let o=n.find(s=>s instanceof Xl);o&&this._plugins.push(o)}addEventListener(n,r,i,o){return this._findPluginFor(r).addEventListener(n,r,i,o)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new z(5101,!1);return this._eventNameToPlugin.set(n,r),r}static \u0275fac=function(r){return new(r||t)(re(nd),re(Fe))};static \u0275prov=W({token:t,factory:t.\u0275fac})}return t})(),gg="ng-app-id";function hD(t){for(let e of t)e.remove()}function fD(t,e){let n=e.createElement("style");return n.textContent=t,n}function tO(t,e,n,r){let i=t.head?.querySelectorAll(`style[${gg}="${e}"],link[${gg}="${e}"]`);if(i)for(let o of i)o.removeAttribute(gg),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&n.set(o.textContent,{usage:0,elements:[o]})}function vg(t,e){let n=e.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",t),n}var Eg=(()=>{class t{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,tO(n,r,this.inline,this.external),this.hosts.add(n.head)}addStyles(n,r){for(let i of n)this.addUsage(i,this.inline,fD);r?.forEach(i=>this.addUsage(i,this.external,vg))}removeStyles(n,r){for(let i of n)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(n,r,i){let o=r.get(n);o?o.usage++:r.set(n,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(n,this.doc)))})}removeUsage(n,r){let i=r.get(n);i&&(i.usage--,i.usage<=0&&(hD(i.elements),r.delete(n)))}ngOnDestroy(){for(let[,{elements:n}]of[...this.inline,...this.external])hD(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(n,fD(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(n,vg(r,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,r){return this.nonce&&r.setAttribute("nonce",this.nonce),n.appendChild(r)}static \u0275fac=function(r){return new(r||t)(re(Ke),re(Ol),re(Ll,8),re(Ra))};static \u0275prov=W({token:t,factory:t.\u0275fac})}return t})(),yg={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Ig=/%COMP%/g;var mD="%COMP%",nO=`_nghost-${mD}`,rO=`_ngcontent-${mD}`,iO=!0,oO=new K("",{factory:()=>iO});function sO(t){return rO.replace(Ig,t)}function aO(t){return nO.replace(Ig,t)}function gD(t,e){return e.map(n=>n.replace(Ig,t))}var wg=(()=>{class t{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;constructor(n,r,i,o,s,a,u=null,l=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.ngZone=a,this.nonce=u,this.tracingService=l,this.defaultRenderer=new $a(n,s,a,this.tracingService)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(n,r);return i instanceof td?i.applyToHost(n):i instanceof Ha&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.tracingService;switch(r.encapsulation){case En.Emulated:o=new td(u,l,r,this.appId,h,s,a,p);break;case En.ShadowDom:return new ed(u,n,r,s,a,this.nonce,p,l);case En.ExperimentalIsolatedShadowDom:return new ed(u,n,r,s,a,this.nonce,p);default:o=new Ha(u,l,r,h,s,a,p);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(n){this.rendererByCompId.delete(n)}static \u0275fac=function(r){return new(r||t)(re(_g),re(Eg),re(Ol),re(oO),re(Ke),re(Fe),re(Ll),re(Na,8))};static \u0275prov=W({token:t,factory:t.\u0275fac})}return t})(),$a=class{eventManager;doc;ngZone;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.tracingService=i}destroy(){}destroyNode=null;createElement(e,n){return n?this.doc.createElementNS(yg[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(pD(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(pD(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new z(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=yg[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=yg[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Ln.DashCase|Ln.Important)?e.style.setProperty(n,r,i&Ln.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Ln.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r,i){if(typeof e=="string"&&(e=ar().getGlobalEventTarget(this.doc,e),!e))throw new z(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,n,o)),this.eventManager.addEventListener(e,n,o,i)}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;e(n)===!1&&n.preventDefault()}}};function pD(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var ed=class extends $a{hostEl;sharedStylesHost;shadowRoot;constructor(e,n,r,i,o,s,a,u){super(e,i,o,a),this.hostEl=n,this.sharedStylesHost=u,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost&&this.sharedStylesHost.addHost(this.shadowRoot);let l=r.styles;l=gD(r.id,l);for(let p of l){let g=document.createElement("style");s&&g.setAttribute("nonce",s),g.textContent=p,this.shadowRoot.appendChild(g)}let h=r.getExternalStyles?.();if(h)for(let p of h){let g=vg(p,i);s&&g.setAttribute("nonce",s),this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost&&this.sharedStylesHost.removeHost(this.shadowRoot)}},Ha=class extends $a{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,n,r,i,o,s,a,u){super(e,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i;let l=r.styles;this.styles=u?gD(u,l):l,this.styleUrls=r.getExternalStyles?.(u)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&ji.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},td=class extends Ha{contentAttr;hostAttr;constructor(e,n,r,i,o,s,a,u){let l=i+"-"+r.id;super(e,n,r,o,s,a,u,l),this.contentAttr=sO(l),this.hostAttr=aO(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}};var rd=class t extends Va{supportsDOMEvents=!0;static makeCurrent(){hg(new t)}onAndCancel(e,n,r,i){return e.addEventListener(n,r,i),()=>{e.removeEventListener(n,r,i)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=cO();return n==null?null:uO(n)}resetBaseElement(){za=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return mg(document.cookie,e)}},za=null;function cO(){return za=za||document.head.querySelector("base"),za?za.getAttribute("href"):null}function uO(t){return new URL(t,document.baseURI).pathname}var lO=(()=>{class t{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||t)};static \u0275prov=W({token:t,factory:t.\u0275fac})}return t})(),yD=["alt","control","meta","shift"],dO={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},hO={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},vD=(()=>{class t extends ja{constructor(n){super(n)}supports(n){return t.parseEventName(n)!=null}addEventListener(n,r,i,o){let s=t.parseEventName(r),a=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ar().onAndCancel(n,s.domEventName,a,o))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=t._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),yD.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(n,r){let i=dO[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),yD.forEach(s=>{if(s!==i){let a=hO[s];a(n)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{t.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return n==="esc"?"escape":n}static \u0275fac=function(r){return new(r||t)(re(Ke))};static \u0275prov=W({token:t,factory:t.\u0275fac})}return t})();function Cg(t,e,n){let r=M({rootComponent:t,platformRef:n?.platformRef},fO(e));return oD(r)}function fO(t){return{appProviders:[...vO,...t?.providers??[]],platformProviders:yO}}function pO(){rd.makeCurrent()}function mO(){return new tr}function gO(){return $m(document),document}var yO=[{provide:Ra,useValue:dD},{provide:kl,useValue:pO,multi:!0},{provide:Ke,useFactory:gO}];var vO=[{provide:la,useValue:"root"},{provide:tr,useFactory:mO},{provide:nd,useClass:Xl,multi:!0},{provide:nd,useClass:vD,multi:!0},wg,Eg,_g,{provide:Hi,useExisting:wg},{provide:Ba,useClass:lO},[]];var _D=(()=>{class t{_doc;constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static \u0275fac=function(r){return new(r||t)(re(Ke))};static \u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var oe="primary",rc=Symbol("RouteTitle"),Ag=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Ji(t){return new Ag(t)}function AD(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=t[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function ud(t){return new Promise((e,n)=>{t.pipe(Zn()).subscribe({next:r=>e(r),error:r=>n(r)})})}function EO(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Un(t[n],e[n]))return!1;return!0}function Un(t,e){let n=t?Rg(t):void 0,r=e?Rg(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!RD(t[i],e[i]))return!1;return!0}function Rg(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function RD(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function ND(t){return t.length>0?t[t.length-1]:null}function Xi(t){return Fu(t)?t:Wi(t)?Ze(Promise.resolve(t)):he(t)}function MD(t){return Fu(t)?ud(t):Promise.resolve(t)}var IO={exact:PD,subset:OD},xD={exact:wO,subset:CO,ignored:()=>!0};function ED(t,e,n){return IO[n.paths](t.root,e.root,n.matrixParams)&&xD[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function wO(t,e){return Un(t,e)}function PD(t,e,n){if(!Qi(t.segments,e.segments)||!sd(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!PD(t.children[r],e.children[r],n))return!1;return!0}function CO(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>RD(t[n],e[n]))}function OD(t,e,n){return kD(t,e,e.segments,n)}function kD(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!Qi(i,n)||e.hasChildren()||!sd(i,n,r))}else if(t.segments.length===n.length){if(!Qi(t.segments,n)||!sd(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!OD(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!Qi(t.segments,i)||!sd(t.segments,i,r)||!t.children[oe]?!1:kD(t.children[oe],e,o,r)}}function sd(t,e,n){return e.every((r,i)=>xD[n](t[i].parameters,r.parameters))}var Dn=class{root;queryParams;fragment;_queryParamMap;constructor(e=new we([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Ji(this.queryParams),this._queryParamMap}toString(){return bO.serialize(this)}},we=class{segments;children;parent=null;constructor(e,n){this.segments=e,this.children=n,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ad(this)}},Gr=class{path;parameters;_parameterMap;constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=Ji(this.parameters),this._parameterMap}toString(){return FD(this)}};function TO(t,e){return Qi(t,e)&&t.every((n,r)=>Un(n.parameters,e[r].parameters))}function Qi(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function DO(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===oe&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==oe&&(n=n.concat(e(i,r)))}),n}var ic=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=W({token:t,factory:()=>new Wr,providedIn:"root"})}return t})(),Wr=class{parse(e){let n=new Mg(e);return new Dn(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${qa(e.root,!0)}`,r=RO(e.queryParams),i=typeof e.fragment=="string"?`#${SO(e.fragment)}`:"";return`${n}${r}${i}`}},bO=new Wr;function ad(t){return t.segments.map(e=>FD(e)).join("/")}function qa(t,e){if(!t.hasChildren())return ad(t);if(e){let n=t.children[oe]?qa(t.children[oe],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==oe&&r.push(`${i}:${qa(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=DO(t,(r,i)=>i===oe?[qa(t.children[oe],!1)]:[`${i}:${qa(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[oe]!=null?`${ad(t)}/${n[0]}`:`${ad(t)}/(${n.join("//")})`}}function LD(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function id(t){return LD(t).replace(/%3B/gi,";")}function SO(t){return encodeURI(t)}function Ng(t){return LD(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function cd(t){return decodeURIComponent(t)}function ID(t){return cd(t.replace(/\+/g,"%20"))}function FD(t){return`${Ng(t.path)}${AO(t.parameters)}`}function AO(t){return Object.entries(t).map(([e,n])=>`;${Ng(e)}=${Ng(n)}`).join("")}function RO(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${id(n)}=${id(i)}`).join("&"):`${id(n)}=${id(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var NO=/^[^\/()?;#]+/;function Tg(t){let e=t.match(NO);return e?e[0]:""}var MO=/^[^\/()?;=#]+/;function xO(t){let e=t.match(MO);return e?e[0]:""}var PO=/^[^=?&#]+/;function OO(t){let e=t.match(PO);return e?e[0]:""}var kO=/^[^&#]+/;function LO(t){let e=t.match(kO);return e?e[0]:""}var Mg=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new we([],{}):new we([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[oe]=new we(e,n)),r}parseSegment(){let e=Tg(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new z(4009,!1);return this.capture(e),new Gr(cd(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=xO(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=Tg(this.remaining);i&&(r=i,this.capture(r))}e[cd(n)]=cd(r)}parseQueryParam(e){let n=OO(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=LO(this.remaining);s&&(r=s,this.capture(r))}let i=ID(n),o=ID(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Tg(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new z(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=oe);let s=this.parseChildren();n[o??oe]=Object.keys(s).length===1&&s[oe]?s[oe]:new we([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new z(4011,!1)}};function VD(t){return t.segments.length>0?new we([],{[oe]:t}):t}function UD(t){let e={};for(let[r,i]of Object.entries(t.children)){let o=UD(i);if(r===oe&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new we(t.segments,e);return FO(n)}function FO(t){if(t.numberOfChildren===1&&t.children[oe]){let e=t.children[oe];return new we(t.segments.concat(e.segments),e.children)}return t}function Ko(t){return t instanceof Dn}function BD(t,e,n=null,r=null,i=new Wr){let o=jD(t);return $D(o,e,n,r,i)}function jD(t){let e;function n(o){let s={};for(let u of o.children){let l=n(u);s[u.outlet]=l}let a=new we(o.url,s);return o===t&&(e=a),a}let r=n(t.root),i=VD(r);return e??i}function $D(t,e,n,r,i){let o=t;for(;o.parent;)o=o.parent;if(e.length===0)return Dg(o,o,o,n,r,i);let s=VO(e);if(s.toRoot())return Dg(o,o,new we([],{}),n,r,i);let a=UO(s,o,t),u=a.processChildren?Wa(a.segmentGroup,a.index,s.commands):zD(a.segmentGroup,a.index,s.commands);return Dg(o,a.segmentGroup,u,n,r,i)}function ld(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Ya(t){return typeof t=="object"&&t!=null&&t.outlets}function wD(t,e,n){t||="\u0275";let r=new Dn;return r.queryParams={[t]:e},n.parse(n.serialize(r)).queryParams[t]}function Dg(t,e,n,r,i,o){let s={};for(let[l,h]of Object.entries(r??{}))s[l]=Array.isArray(h)?h.map(p=>wD(l,p,o)):wD(l,h,o);let a;t===e?a=n:a=HD(t,e,n);let u=VD(UD(a));return new Dn(u,s,i)}function HD(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=HD(o,e,n)}),new we(t.segments,r)}var dd=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&ld(r[0]))throw new z(4003,!1);let i=r.find(Ya);if(i&&i!==ND(r))throw new z(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function VO(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new dd(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new dd(n,e,r)}var Go=class{segmentGroup;processChildren;index;constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function UO(t,e,n){if(t.isAbsolute)return new Go(e,!0,0);if(!n)return new Go(e,!1,NaN);if(n.parent===null)return new Go(n,!0,0);let r=ld(t.commands[0])?0:1,i=n.segments.length-1+r;return BO(n,i,t.numberOfDoubleDots)}function BO(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new z(4005,!1);i=r.segments.length}return new Go(r,!1,i-o)}function jO(t){return Ya(t[0])?t[0].outlets:{[oe]:t}}function zD(t,e,n){if(t??=new we([],{}),t.segments.length===0&&t.hasChildren())return Wa(t,e,n);let r=$O(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new we(t.segments.slice(0,r.pathIndex),{});return o.children[oe]=new we(t.segments.slice(r.pathIndex),t.children),Wa(o,0,i)}else return r.match&&i.length===0?new we(t.segments,{}):r.match&&!t.hasChildren()?xg(t,e,n):r.match?Wa(t,0,i):xg(t,e,n)}function Wa(t,e,n){if(n.length===0)return new we(t.segments,{});{let r=jO(n),i={};if(Object.keys(r).some(o=>o!==oe)&&t.children[oe]&&t.numberOfChildren===1&&t.children[oe].segments.length===0){let o=Wa(t.children[oe],e,n);return new we(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=zD(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new we(t.segments,i)}}function $O(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let s=t.segments[i],a=n[r];if(Ya(a))break;let u=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!TD(u,l,s))return o;r+=2}else{if(!TD(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function xg(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if(Ya(o)){let u=HO(o.outlets);return new we(r,u)}if(i===0&&ld(n[0])){let u=t.segments[e];r.push(new Gr(u.path,CD(n[0]))),i++;continue}let s=Ya(o)?o.outlets[oe]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&ld(a)?(r.push(new Gr(s,CD(a))),i+=2):(r.push(new Gr(s,{})),i++)}return new we(r,{})}function HO(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=xg(new we([],{}),0,r))}),e}function CD(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function TD(t,e,n){return t==n.path&&Un(e,n.parameters)}var Ka="imperative",rt=(function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t})(rt||{}),zt=class{id;url;constructor(e,n){this.id=e,this.url=n}},Zi=class extends zt{type=rt.NavigationStart;navigationTrigger;restoredState;constructor(e,n,r="imperative",i=null){super(e,n),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},cr=class extends zt{urlAfterRedirects;type=rt.NavigationEnd;constructor(e,n,r){super(e,n),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},bt=(function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t[t.Aborted=4]="Aborted",t})(bt||{}),Ja=(function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t})(Ja||{}),Bn=class extends zt{reason;code;type=rt.NavigationCancel;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},ur=class extends zt{reason;code;type=rt.NavigationSkipped;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}},Qo=class extends zt{error;target;type=rt.NavigationError;constructor(e,n,r,i){super(e,n),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Za=class extends zt{urlAfterRedirects;state;type=rt.RoutesRecognized;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},hd=class extends zt{urlAfterRedirects;state;type=rt.GuardsCheckStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},fd=class extends zt{urlAfterRedirects;state;shouldActivate;type=rt.GuardsCheckEnd;constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},pd=class extends zt{urlAfterRedirects;state;type=rt.ResolveStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},md=class extends zt{urlAfterRedirects;state;type=rt.ResolveEnd;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},gd=class{route;type=rt.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},yd=class{route;type=rt.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},vd=class{snapshot;type=rt.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},_d=class{snapshot;type=rt.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ed=class{snapshot;type=rt.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Id=class{snapshot;type=rt.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Xa=class{},Yo=class{url;navigationBehaviorOptions;constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function zO(t){return!(t instanceof Xa)&&!(t instanceof Yo)}function qO(t,e){return t.providers&&!t._injector&&(t._injector=Oa(t.providers,e,`Route: ${t.path}`)),t._injector??e}function Tn(t){return t.outlet||oe}function GO(t,e){let n=t.filter(r=>Tn(r)===e);return n.push(...t.filter(r=>Tn(r)!==e)),n}function Xo(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var wd=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Xo(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new es(this.rootInjector)}},es=(()=>{class t{rootInjector;contexts=new Map;constructor(n){this.rootInjector=n}onChildOutletCreated(n,r){let i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new wd(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static \u0275fac=function(r){return new(r||t)(re(ut))};static \u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Cd=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=Pg(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=Pg(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=Og(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Og(e,this._root).map(n=>n.value)}};function Pg(t,e){if(t===e.value)return e;for(let n of e.children){let r=Pg(t,n);if(r)return r}return null}function Og(t,e){if(t===e.value)return[e];for(let n of e.children){let r=Og(t,n);if(r.length)return r.unshift(e),r}return[]}var Ht=class{value;children;constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function qo(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var ec=class extends Cd{snapshot;constructor(e,n){super(e),this.snapshot=n,Bg(this,e)}toString(){return this.snapshot.toString()}};function qD(t){let e=WO(t),n=new Ge([new Gr("",{})]),r=new Ge({}),i=new Ge({}),o=new Ge({}),s=new Ge(""),a=new jn(n,r,o,s,i,oe,t,e.root);return a.snapshot=e.root,new ec(new Ht(a,[]),e)}function WO(t){let e={},n={},r={},o=new Yi([],e,r,"",n,oe,t,null,{});return new tc("",new Ht(o,[]))}var jn=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,n,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(Re(l=>l[rc]))??he(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Re(e=>Ji(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Re(e=>Ji(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Td(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:M(M({},e.params),t.params),data:M(M({},e.data),t.data),resolve:M(M(M(M({},t.data),e.data),i?.data),t._resolvedData)}:r={params:M({},t.params),data:M({},t.data),resolve:M(M({},t.data),t._resolvedData??{})},i&&WD(i)&&(r.resolve[rc]=i.title),r}var Yi=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[rc]}constructor(e,n,r,i,o,s,a,u,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Ji(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Ji(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},tc=class extends Cd{url;constructor(e,n){super(n),this.url=e,Bg(this,n)}toString(){return GD(this._root)}};function Bg(t,e){e.value._routerState=t,e.children.forEach(n=>Bg(t,n))}function GD(t){let e=t.children.length>0?` { ${t.children.map(GD).join(", ")} } `:"";return`${t.value}${e}`}function bg(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Un(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Un(e.params,n.params)||t.paramsSubject.next(n.params),EO(e.url,n.url)||t.urlSubject.next(n.url),Un(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function kg(t,e){let n=Un(t.params,e.params)&&TO(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||kg(t.parent,e.parent))}function WD(t){return typeof t.title=="string"||t.title===null}var KD=new K(""),oc=(()=>{class t{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=oe;activateEvents=new Ct;deactivateEvents=new Ct;attachEvents=new Ct;detachEvents=new Ct;routerOutletData=iD();parentContexts=x(es);location=x(Pa);changeDetector=x(Ho);inputBinder=x(Ad,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new z(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new z(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new z(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new z(4013,!1);this._activatedRoute=n;let i=this.location,s=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new Lg(n,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||t)};static \u0275dir=zl({type:t,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Ml]})}return t})(),Lg=class{route;childContexts;parent;outletData;constructor(e,n,r,i){this.route=e,this.childContexts=n,this.parent=r,this.outletData=i}get(e,n){return e===jn?this.route:e===es?this.childContexts:e===KD?this.outletData:this.parent.get(e,n)}},Ad=new K("");var jg=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275cmp=In({type:t,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&sr(0,"router-outlet")},dependencies:[oc],encapsulation:2})}return t})();function $g(t){let e=t.children&&t.children.map($g),n=e?se(M({},t),{children:e}):M({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==oe&&(n.component=jg),n}function KO(t,e,n){let r=nc(t,e._root,n?n._root:void 0);return new ec(r,e)}function nc(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=QO(t,e,n);return new Ht(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>nc(t,a)),s}}let r=YO(e.value),i=e.children.map(o=>nc(t,o));return new Ht(r,i)}}function QO(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return nc(t,r,i);return nc(t,r)})}function YO(t){return new jn(new Ge(t.url),new Ge(t.params),new Ge(t.queryParams),new Ge(t.fragment),new Ge(t.data),t.outlet,t.component,t)}var Jo=class{redirectTo;navigationBehaviorOptions;constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},QD="ngNavigationCancelingError";function Dd(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=Ko(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=YD(!1,bt.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function YD(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[QD]=!0,n.cancellationCode=e,n}function JO(t){return JD(t)&&Ko(t.url)}function JD(t){return!!t&&t[QD]}var ZO=(t,e,n,r)=>Re(i=>(new Fg(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),Fg=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),bg(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=qo(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=qo(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=qo(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=qo(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Id(o.value.snapshot))}),e.children.length&&this.forwardEvent(new _d(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(bg(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),bg(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},bd=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Wo=class{component;route;constructor(e,n){this.component=e,this.route=n}};function XO(t,e,n){let r=t._root,i=e?e._root:null;return Ga(r,i,n,[r.value])}function ek(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function ts(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!Cp(t)?t:e.get(t):r}function Ga(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=qo(e);return t.children.forEach(s=>{tk(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Qa(a,n.getContext(s),i)),i}function tk(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=nk(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new bd(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Ga(t,e,a?a.children:null,r,i):Ga(t,e,n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Wo(a.outlet.component,s))}else s&&Qa(e,a,i),i.canActivateChecks.push(new bd(r)),o.component?Ga(t,null,a?a.children:null,r,i):Ga(t,null,n,r,i);return i}function nk(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!Qi(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Qi(t.url,e.url)||!Un(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!kg(t,e)||!Un(t.queryParams,e.queryParams);case"paramsChange":default:return!kg(t,e)}}function Qa(t,e,n){let r=qo(t),i=t.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Qa(s,e.children.getContext(o),n):Qa(s,null,n):Qa(s,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new Wo(e.outlet.component,i)):n.canDeactivateChecks.push(new Wo(null,i)):n.canDeactivateChecks.push(new Wo(null,i))}function sc(t){return typeof t=="function"}function rk(t){return typeof t=="boolean"}function ik(t){return t&&sc(t.canLoad)}function ok(t){return t&&sc(t.canActivate)}function sk(t){return t&&sc(t.canActivateChild)}function ak(t){return t&&sc(t.canDeactivate)}function ck(t){return t&&sc(t.canMatch)}function ZD(t){return t instanceof Ci||t?.name==="EmptyError"}var od=Symbol("INITIAL_VALUE");function Zo(){return Mn(t=>ep(t.map(e=>e.pipe(Jn(1),op(od)))).pipe(Re(e=>{for(let n of e)if(n!==!0){if(n===od)return od;if(n===!1||uk(n))return n}return!0}),Nn(e=>e!==od),Jn(1)))}function uk(t){return Ko(t)||t instanceof Jo}function XD(t){return t.aborted?he(void 0).pipe(Jn(1)):new de(e=>{let n=()=>{e.next(),e.complete()};return t.addEventListener("abort",n),()=>t.removeEventListener("abort",n)})}function eb(t){return Ti(XD(t))}function lk(t,e){return Et(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?he(se(M({},n),{guardsResult:!0})):dk(s,r,i,t).pipe(Et(a=>a&&rk(a)?hk(r,o,t,e):he(a)),Re(a=>se(M({},n),{guardsResult:a})))})}function dk(t,e,n,r){return Ze(t).pipe(Et(i=>yk(i.component,i.route,n,e,r)),Zn(i=>i!==!0,!0))}function hk(t,e,n,r){return Ze(e).pipe(Vu(i=>Do(pk(i.route.parent,r),fk(i.route,r),gk(t,i.path,n),mk(t,i.route,n))),Zn(i=>i!==!0,!0))}function fk(t,e){return t!==null&&e&&e(new Ed(t)),he(!0)}function pk(t,e){return t!==null&&e&&e(new vd(t)),he(!0)}function mk(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return he(!0);let i=r.map(o=>ea(()=>{let s=Xo(e)??n,a=ts(o,s),u=ok(a)?a.canActivate(e,t):Tt(s,()=>a(e,t));return Xi(u).pipe(Zn())}));return he(i).pipe(Zo())}function gk(t,e,n){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>ek(s)).filter(s=>s!==null).map(s=>ea(()=>{let a=s.guards.map(u=>{let l=Xo(s.node)??n,h=ts(u,l),p=sk(h)?h.canActivateChild(r,t):Tt(l,()=>h(r,t));return Xi(p).pipe(Zn())});return he(a).pipe(Zo())}));return he(o).pipe(Zo())}function yk(t,e,n,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return he(!0);let s=o.map(a=>{let u=Xo(e)??i,l=ts(a,u),h=ak(l)?l.canDeactivate(t,e,n,r):Tt(u,()=>l(t,e,n,r));return Xi(h).pipe(Zn())});return he(s).pipe(Zo())}function vk(t,e,n,r,i){let o=e.canLoad;if(o===void 0||o.length===0)return he(!0);let s=o.map(a=>{let u=ts(a,t),l=ik(u)?u.canLoad(e,n):Tt(t,()=>u(e,n)),h=Xi(l);return i?h.pipe(eb(i)):h});return he(s).pipe(Zo(),tb(r))}function tb(t){return Qf(It(e=>{if(typeof e!="boolean")throw Dd(t,e)}),Re(e=>e===!0))}function _k(t,e,n,r,i){let o=e.canMatch;if(!o||o.length===0)return he(!0);let s=o.map(a=>{let u=ts(a,t),l=ck(u)?u.canMatch(e,n):Tt(t,()=>u(e,n)),h=Xi(l);return i?h.pipe(eb(i)):h});return he(s).pipe(Zo(),tb(r))}var Ki=class nb extends Error{segmentGroup;constructor(e){super(),this.segmentGroup=e||null,Object.setPrototypeOf(this,nb.prototype)}},Vg=class rb extends Error{urlTree;constructor(e){super(),this.urlTree=e,Object.setPrototypeOf(this,rb.prototype)}};function Ek(t){throw new z(4e3,!1)}function Ik(t){throw YD(!1,bt.GuardRejected)}var wk=class{urlSerializer;urlTree;constructor(e,n){this.urlSerializer=e,this.urlTree=n}async lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return r;if(i.numberOfChildren>1||!i.children[oe])throw Ek(`${e.redirectTo}`);i=i.children[oe]}}async applyRedirectCommands(e,n,r,i,o){let s=await Ck(n,i,o);if(s instanceof Dn)throw new Vg(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if(s[0]==="/")throw new Vg(a);return a}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new Dn(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new we(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new z(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}};function Ck(t,e,n){if(typeof t=="string")return Promise.resolve(t);let r=t,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:u,params:l,data:h,title:p}=e;return ud(Xi(Tt(n,()=>r({params:l,data:h,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:u,title:p}))))}var Ug={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Tk(t,e,n,r,i,o){let s=ib(t,e,n);return s.matched?(r=qO(e,r),_k(r,e,n,i,o).pipe(Re(a=>a===!0?s:M({},Ug)))):he(s)}function ib(t,e,n){if(e.path==="**")return Dk(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?M({},Ug):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||AD)(n,t,e);if(!i)return M({},Ug);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?M(M({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function Dk(t){return{matched:!0,parameters:t.length>0?ND(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function DD(t,e,n,r){return n.length>0&&Ak(t,n,r)?{segmentGroup:new we(e,Sk(r,new we(n,t.children))),slicedSegments:[]}:n.length===0&&Rk(t,n,r)?{segmentGroup:new we(t.segments,bk(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new we(t.segments,t.children),slicedSegments:n}}function bk(t,e,n,r){let i={};for(let o of n)if(Rd(t,e,o)&&!r[Tn(o)]){let s=new we([],{});i[Tn(o)]=s}return M(M({},r),i)}function Sk(t,e){let n={};n[oe]=e;for(let r of t)if(r.path===""&&Tn(r)!==oe){let i=new we([],{});n[Tn(r)]=i}return n}function Ak(t,e,n){return n.some(r=>Rd(t,e,r)&&Tn(r)!==oe)}function Rk(t,e,n){return n.some(r=>Rd(t,e,r))}function Rd(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function Nk(t,e,n){return e.length===0&&!t.children[n]}var Mk=class{};async function xk(t,e,n,r,i,o,s="emptyOnly",a){return new Ok(t,e,n,r,i,s,o,a).recognize()}var Pk=31,Ok=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;abortSignal;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,n,r,i,o,s,a,u){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.abortSignal=u,this.applyRedirects=new wk(this.urlSerializer,this.urlTree)}noMatchError(e){return new z(4002,`'${e.segmentGroup}'`)}async recognize(){let e=DD(this.urlTree.root,[],[],this.config).segmentGroup,{children:n,rootSnapshot:r}=await this.match(e),i=new Ht(r,n),o=new tc("",i),s=BD(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}async match(e){let n=new Yi([],Object.freeze({}),Object.freeze(M({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),oe,this.rootComponentType,null,{});try{return{children:await this.processSegmentGroup(this.injector,this.config,e,oe,n),rootSnapshot:n}}catch(r){if(r instanceof Vg)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Ki?this.noMatchError(r):r}}async processSegmentGroup(e,n,r,i,o){if(r.segments.length===0&&r.hasChildren())return this.processChildren(e,n,r,o);let s=await this.processSegment(e,n,r,r.segments,i,!0,o);return s instanceof Ht?[s]:[]}async processChildren(e,n,r,i){let o=[];for(let u of Object.keys(r.children))u==="primary"?o.unshift(u):o.push(u);let s=[];for(let u of o){let l=r.children[u],h=GO(n,u),p=await this.processSegmentGroup(e,h,l,u,i);s.push(...p)}let a=ob(s);return kk(a),a}async processSegment(e,n,r,i,o,s,a){for(let u of n)try{return await this.processSegmentAgainstRoute(u._injector??e,n,u,r,i,o,s,a)}catch(l){if(l instanceof Ki||ZD(l))continue;throw l}if(Nk(r,i,o))return new Mk;throw new Ki(r)}async processSegmentAgainstRoute(e,n,r,i,o,s,a,u){if(Tn(r)!==s&&(s===oe||!Rd(i,o,r)))throw new Ki(i);if(r.redirectTo===void 0)return this.matchSegmentAgainstRoute(e,i,r,o,s,u);if(this.allowRedirects&&a)return this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s,u);throw new Ki(i)}async expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s,a){let{matched:u,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:g}=ib(n,i,o);if(!u)throw new Ki(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>Pk&&(this.allowRedirects=!1));let y=new Yi(o,l,Object.freeze(M({},this.urlTree.queryParams)),this.urlTree.fragment,bD(i),Tn(i),i.component??i._loadedComponent??null,i,SD(i)),b=Td(y,a,this.paramsInheritanceStrategy);if(y.params=Object.freeze(b.params),y.data=Object.freeze(b.data),this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let R=await this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,y,e),A=await this.applyRedirects.lineralizeSegments(i,R);return this.processSegment(e,r,n,A.concat(g),s,!1,a)}async matchSegmentAgainstRoute(e,n,r,i,o,s){if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let a=await ud(Tk(n,r,i,e,this.urlSerializer,this.abortSignal));if(r.path==="**"&&(n.children={}),!a?.matched)throw new Ki(n);e=r._injector??e;let{routes:u}=await this.getChildConfig(e,r,i),l=r._loadedInjector??e,{parameters:h,consumedSegments:p,remainingSegments:g}=a,y=new Yi(p,h,Object.freeze(M({},this.urlTree.queryParams)),this.urlTree.fragment,bD(r),Tn(r),r.component??r._loadedComponent??null,r,SD(r)),b=Td(y,s,this.paramsInheritanceStrategy);y.params=Object.freeze(b.params),y.data=Object.freeze(b.data);let{segmentGroup:R,slicedSegments:A}=DD(n,p,g,u);if(A.length===0&&R.hasChildren()){let le=await this.processChildren(l,u,R,y);return new Ht(y,le)}if(u.length===0&&A.length===0)return new Ht(y,[]);let k=Tn(r)===o,q=await this.processSegment(l,u,R,A,k?oe:o,!0,y);return new Ht(y,q instanceof Ht?[q]:[])}async getChildConfig(e,n,r){if(n.children)return{routes:n.children,injector:e};if(n.loadChildren){if(n._loadedRoutes!==void 0)return{routes:n._loadedRoutes,injector:n._loadedInjector};if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);if(await ud(vk(e,n,r,this.urlSerializer,this.abortSignal))){let o=await this.configLoader.loadChildren(e,n);return n._loadedRoutes=o.routes,n._loadedInjector=o.injector,o}throw Ik(n)}return{routes:[],injector:e}}};function kk(t){t.sort((e,n)=>e.value.outlet===oe?-1:n.value.outlet===oe?1:e.value.outlet.localeCompare(n.value.outlet))}function Lk(t){let e=t.value.routeConfig;return e&&e.path===""}function ob(t){let e=[],n=new Set;for(let r of t){if(!Lk(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=ob(r.children);e.push(new Ht(r.value,i))}return e.filter(r=>!n.has(r))}function bD(t){return t.data||{}}function SD(t){return t.resolve||{}}var Fk=new K("",{factory:()=>xk});function Vk(t,e,n,r,i,o,s){let a=t.get(Fk);return Et(u=>he(u).pipe(Mn(l=>a(t,e,n,r,l.extractedUrl,i,o,s)),Re(({state:l,tree:h})=>se(M({},u),{targetSnapshot:l,urlAfterRedirects:h}))))}function Uk(t,e){return Et(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return he(n);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of sb(u))s.add(l);let a=0;return Ze(s).pipe(Vu(u=>o.has(u)?Bk(u,r,t,e):(u.data=Td(u,u.parent,t).resolve,he(void 0))),It(()=>a++),Uu(1),Et(u=>a===s.size?he(n):Rt))})}function sb(t){let e=t.children.map(n=>sb(n)).flat();return[t,...e]}function Bk(t,e,n,r){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!WD(i)&&(o[rc]=i.title),ea(()=>(t.data=Td(t,t.parent,n).resolve,jk(o,t,e,r).pipe(Re(s=>(t._resolvedData=s,t.data=M(M({},t.data),s),null)))))}function jk(t,e,n,r){let i=Rg(t);if(i.length===0)return he({});let o={};return Ze(i).pipe(Et(s=>$k(t[s],e,n,r).pipe(Zn(),It(a=>{if(a instanceof Jo)throw Dd(new Wr,a);o[s]=a}))),Uu(1),Re(()=>o),ta(s=>ZD(s)?Rt:Xf(s)))}function $k(t,e,n,r){let i=Xo(e)??r,o=ts(t,i),s=o.resolve?o.resolve(e,n):Tt(i,()=>o(e,n));return Xi(s)}function Sg(t){return Mn(e=>{let n=t(e);return n?Ze(n).pipe(Re(()=>e)):he(e)})}var Hg=(()=>{class t{buildTitle(n){let r,i=n.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===oe);return r}getResolvedTitleForRoute(n){return n.data[rc]}static \u0275fac=function(r){return new(r||t)};static \u0275prov=W({token:t,factory:()=>x(ab),providedIn:"root"})}return t})(),ab=(()=>{class t extends Hg{title;constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||t)(re(_D))};static \u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),ac=new K("",{factory:()=>({})}),cc=new K(""),cb=(()=>{class t{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=x(lg);async loadComponent(n,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return Promise.resolve(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=(async()=>{try{let o=await MD(Tt(n,()=>r.loadComponent())),s=await db(lb(o));return this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s,s}finally{this.componentLoaders.delete(r)}})();return this.componentLoaders.set(r,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Promise.resolve({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let i=(async()=>{try{let o=await ub(r,this.compiler,n,this.onLoadEndListener);return r._loadedRoutes=o.routes,r._loadedInjector=o.injector,o}finally{this.childrenLoaders.delete(r)}})();return this.childrenLoaders.set(r,i),i}static \u0275fac=function(r){return new(r||t)};static \u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();async function ub(t,e,n,r){let i=await MD(Tt(n,()=>t.loadChildren())),o=await db(lb(i)),s;o instanceof Hl||Array.isArray(o)?s=o:s=await e.compileModuleAsync(o),r&&r(t);let a,u,l=!1;return Array.isArray(s)?(u=s,l=!0):(a=s.create(n).injector,u=a.get(cc,[],{optional:!0,self:!0}).flat()),{routes:u.map($g),injector:a}}function Hk(t){return t&&typeof t=="object"&&"default"in t}function lb(t){return Hk(t)?t.default:t}async function db(t){return t}var Nd=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=W({token:t,factory:()=>x(zk),providedIn:"root"})}return t})(),zk=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static \u0275fac=function(r){return new(r||t)};static \u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),hb=new K("");var qk=()=>{},fb=new K(""),pb=(()=>{class t{currentNavigation=ir(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=ir(null);events=new Be;transitionAbortWithErrorSubject=new Be;configLoader=x(cb);environmentInjector=x(ut);destroyRef=x(vn);urlSerializer=x(ic);rootContexts=x(es);location=x(zo);inputBindingEnabled=x(Ad,{optional:!0})!==null;titleStrategy=x(Hg);options=x(ac,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=x(Nd);createViewTransition=x(hb,{optional:!0});navigationErrorHandler=x(fb,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>he(void 0);rootComponentType=null;destroyed=!1;constructor(){let n=i=>this.events.next(new gd(i)),r=i=>this.events.next(new yd(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;Bt(()=>{this.transitions?.next(se(M({},n),{extractedUrl:this.urlHandlingStrategy.extract(n.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r}))})}setupNavigations(n){return this.transitions=new Ge(null),this.transitions.pipe(Nn(r=>r!==null),Mn(r=>{let i=!1,o=new AbortController;return he(r).pipe(Mn(s=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",bt.SupersededByNewNavigation),Rt;this.currentTransition=r;let a=this.lastSuccessfulNavigation();this.currentNavigation.set({id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,targetBrowserUrl:typeof s.extras.browserUrl=="string"?this.urlSerializer.parse(s.extras.browserUrl):s.extras.browserUrl,trigger:s.source,extras:s.extras,previousNavigation:a?se(M({},a),{previousNavigation:null}):null,abort:()=>o.abort()});let u=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),l=s.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!u&&l!=="reload")return this.events.next(new ur(s.id,this.urlSerializer.serialize(s.rawUrl),"",Ja.IgnoredSameUrlNavigation)),s.resolve(!1),Rt;if(this.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return he(s).pipe(Mn(h=>(this.events.next(new Zi(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),h.id!==this.navigationId?Rt:Promise.resolve(h))),Vk(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy,o.signal),It(h=>{r.targetSnapshot=h.targetSnapshot,r.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation.update(g=>(g.finalUrl=h.urlAfterRedirects,g));let p=new Za(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(p)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(s.currentRawUrl)){let{id:h,extractedUrl:p,source:g,restoredState:y,extras:b}=s,R=new Zi(h,this.urlSerializer.serialize(p),g,y);this.events.next(R);let A=qD(this.rootComponentType).snapshot;return this.currentTransition=r=se(M({},s),{targetSnapshot:A,urlAfterRedirects:p,extras:se(M({},b),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(k=>(k.finalUrl=p,k)),he(r)}else return this.events.next(new ur(s.id,this.urlSerializer.serialize(s.extractedUrl),"",Ja.IgnoredByUrlHandlingStrategy)),s.resolve(!1),Rt}),It(s=>{let a=new hd(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),Re(s=>(this.currentTransition=r=se(M({},s),{guards:XO(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),r)),lk(this.environmentInjector,s=>this.events.next(s)),It(s=>{if(r.guardsResult=s.guardsResult,s.guardsResult&&typeof s.guardsResult!="boolean")throw Dd(this.urlSerializer,s.guardsResult);let a=new fd(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(a)}),Nn(s=>s.guardsResult?!0:(this.cancelNavigationTransition(s,"",bt.GuardRejected),!1)),Sg(s=>{if(s.guards.canActivateChecks.length!==0)return he(s).pipe(It(a=>{let u=new pd(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(u)}),Mn(a=>{let u=!1;return he(a).pipe(Uk(this.paramsInheritanceStrategy,this.environmentInjector),It({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(a,"",bt.NoDataFromResolver)}}))}),It(a=>{let u=new md(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(u)}))}),Sg(s=>{let a=l=>{let h=[];if(l.routeConfig?._loadedComponent)l.component=l.routeConfig?._loadedComponent;else if(l.routeConfig?.loadComponent){let p=Xo(l)??this.environmentInjector;h.push(this.configLoader.loadComponent(p,l.routeConfig).then(g=>{l.component=g}))}for(let p of l.children)h.push(...a(p));return h},u=a(s.targetSnapshot.root);return u.length===0?he(s):Ze(Promise.all(u).then(()=>s))}),Sg(()=>this.afterPreactivation()),Mn(()=>{let{currentSnapshot:s,targetSnapshot:a}=r,u=this.createViewTransition?.(this.environmentInjector,s.root,a.root);return u?Ze(u).pipe(Re(()=>r)):he(r)}),Re(s=>{let a=KO(n.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return this.currentTransition=r=se(M({},s),{targetRouterState:a}),this.currentNavigation.update(u=>(u.targetRouterState=a,u)),r}),It(()=>{this.events.next(new Xa)}),ZO(this.rootContexts,n.routeReuseStrategy,s=>this.events.next(s),this.inputBindingEnabled),Jn(1),Ti(XD(o.signal).pipe(Nn(()=>!i&&!r.targetRouterState),It(()=>{this.cancelNavigationTransition(r,o.signal.reason+"",bt.Aborted)}))),It({next:s=>{i=!0,this.currentNavigation.update(a=>(a.abort=qk,a)),this.lastSuccessfulNavigation.set(Bt(this.currentNavigation)),this.events.next(new cr(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects))),this.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{i=!0}}),Ti(this.transitionAbortWithErrorSubject.pipe(It(s=>{throw s}))),np(()=>{o.abort(),i||this.cancelNavigationTransition(r,"",bt.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),ta(s=>{if(this.destroyed)return r.resolve(!1),Rt;if(i=!0,JD(s))this.events.next(new Bn(r.id,this.urlSerializer.serialize(r.extractedUrl),s.message,s.cancellationCode)),JO(s)?this.events.next(new Yo(s.url,s.navigationBehaviorOptions)):r.resolve(!1);else{let a=new Qo(r.id,this.urlSerializer.serialize(r.extractedUrl),s,r.targetSnapshot??void 0);try{let u=Tt(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(u instanceof Jo){let{message:l,cancellationCode:h}=Dd(this.urlSerializer,u);this.events.next(new Bn(r.id,this.urlSerializer.serialize(r.extractedUrl),l,h)),this.events.next(new Yo(u.redirectTo,u.navigationBehaviorOptions))}else throw this.events.next(a),s}catch(u){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(u)}}return Rt}))}))}cancelNavigationTransition(n,r,i){let o=new Bn(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(o),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=Bt(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return n.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||t)};static \u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Gk(t){return t!==Ka}var mb=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=W({token:t,factory:()=>x(Wk),providedIn:"root"})}return t})(),Sd=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},Wk=(()=>{class t extends Sd{static \u0275fac=(()=>{let n;return function(i){return(n||(n=Pl(t)))(i||t)}})();static \u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),zg=(()=>{class t{urlSerializer=x(ic);options=x(ac,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=x(zo);urlHandlingStrategy=x(Nd);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Dn;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:n,initialUrl:r,targetBrowserUrl:i}){let o=n!==void 0?this.urlHandlingStrategy.merge(n,r):r,s=i??o;return s instanceof Dn?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:n,finalUrl:r,initialUrl:i}){r&&n?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=n):this.rawUrlTree=i}routerState=qD(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:n}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n??this.rawUrlTree)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=W({token:t,factory:()=>x(gb),providedIn:"root"})}return t})(),gb=(()=>{class t extends zg{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{n(r.url,r.state,"popstate")})})}handleRouterEvent(n,r){n instanceof Zi?this.updateStateMemento():n instanceof ur?this.commitTransition(r):n instanceof Za?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof Xa?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof Bn&&n.code!==bt.SupersededByNewNavigation&&n.code!==bt.Redirect?this.restoreHistory(r):n instanceof Qo?this.restoreHistory(r,!0):n instanceof cr&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(n)||o){let a=this.browserPageId,u=M(M({},s),this.generateNgRouterState(i,a));this.location.replaceState(n,"",u)}else{let a=M(M({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(n,"",a)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===n.finalUrl&&o===0&&(this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static \u0275fac=(()=>{let n;return function(i){return(n||(n=Pl(t)))(i||t)}})();static \u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function qg(t,e){t.events.pipe(Nn(n=>n instanceof cr||n instanceof Bn||n instanceof Qo||n instanceof ur),Re(n=>n instanceof cr||n instanceof ur?0:(n instanceof Bn?n.code===bt.Redirect||n.code===bt.SupersededByNewNavigation:!1)?2:1),Nn(n=>n!==2),Jn(1)).subscribe(()=>{e()})}var Kk={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Qk={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},rn=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=x(ag);stateManager=x(zg);options=x(ac,{optional:!0})||{};pendingTasks=x(Ur);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=x(pb);urlSerializer=x(ic);location=x(zo);urlHandlingStrategy=x(Nd);injector=x(ut);_events=new Be;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=x(mb);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=x(cc,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!x(Ad,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}eventsSubscription=new ct;subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=Bt(this.navigationTransitions.currentNavigation);if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Bn&&r.code!==bt.Redirect&&r.code!==bt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof cr)this.navigated=!0;else if(r instanceof Yo){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=M({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||Gk(i.source)},s);this.scheduleNavigation(a,Ka,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}zO(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Ka,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r,i)=>{this.navigateToSyncWithBrowser(n,i,r)})}navigateToSyncWithBrowser(n,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=M({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let a=this.parseUrl(n);this.scheduleNavigation(a,r,s,o).catch(u=>{this.disposed||this.injector.get(en)(u)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return Bt(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map($g),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=M(M({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let g=i?i.snapshot:this.routerState.snapshot.root;p=jD(g)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),p=this.currentUrlTree.root}return $D(p,n,h,l??null,this.urlSerializer)}navigateByUrl(n,r={skipLocationChange:!1}){let i=Ko(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Ka,null,r)}navigate(n,r={skipLocationChange:!1}){return Yk(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.console.warn(Ro(4018,!1)),this.urlSerializer.parse("/")}}isActive(n,r){let i;if(r===!0?i=M({},Kk):r===!1?i=M({},Qk):i=r,Ko(n))return ED(this.currentUrlTree,n,i);let o=this.parseUrl(n);return ED(this.currentUrlTree,o,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(n,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,l;s?(a=s.resolve,u=s.reject,l=s.promise):l=new Promise((p,g)=>{a=p,u=g});let h=this.pendingTasks.add();return qg(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:o,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Yk(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new z(4008,!1)}var Zk=new K("");function Gg(t,...e){return Mi([{provide:cc,multi:!0,useValue:t},[],{provide:jn,useFactory:Xk},{provide:Gl,multi:!0,useFactory:eL},e.map(n=>n.\u0275providers)])}function Xk(){return x(rn).routerState.root}function eL(){let t=x(hn);return e=>{let n=t.get($o);if(e!==n.components[0])return;let r=t.get(rn),i=t.get(tL);t.get(nL)===1&&r.initialNavigation(),t.get(rL,null,{optional:!0})?.setUpPreloading(),t.get(Zk,null,{optional:!0})?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var tL=new K("",{factory:()=>new Be}),nL=new K("",{factory:()=>1});var rL=new K("");var yb=()=>{};var Eb=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},oL=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=t[n++],s=t[n++],a=t[n++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},Ib={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,h=o>>2,p=(o&3)<<4|a>>4,g=(a&15)<<2|l>>6,y=l&63;u||(y=64,s||(g=64)),r.push(n[h],n[p],n[g],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Eb(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):oL(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let p=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||a==null||l==null||p==null)throw new Kg;let g=o<<2|a>>4;if(r.push(g),l!==64){let y=a<<4&240|l>>2;if(r.push(y),p!==64){let b=l<<6&192|p;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},Kg=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},sL=function(t){let e=Eb(t);return Ib.encodeByteArray(e,!0)},lc=function(t){return sL(t).replace(/\./g,"")},xd=function(t){try{return Ib.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function wb(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var aL=()=>wb().__FIREBASE_DEFAULTS__,cL=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},uL=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&xd(t[1]);return e&&JSON.parse(e)},Pd=()=>{try{return yb()||aL()||cL()||uL()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Yg=t=>Pd()?.emulatorHosts?.[t],Cb=t=>{let e=Yg(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Jg=()=>Pd()?.config,Zg=t=>Pd()?.[`_${t}`];var Md=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function Kr(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Od(t){return(await fetch(t,{credentials:"include"})).ok}function Tb(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=M({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[lc(JSON.stringify(n)),lc(JSON.stringify(s)),""].join(".")}var uc={};function lL(){let t={prod:[],emulator:[]};for(let e of Object.keys(uc))uc[e]?t.emulator.push(e):t.prod.push(e);return t}function dL(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}var vb=!1;function kd(t,e){if(typeof window>"u"||typeof document>"u"||!Kr(window.location.host)||uc[t]===e||uc[t]||vb)return;uc[t]=e;function n(g){return`__firebase__banner__${g}`}let r="__firebase__banner",o=lL().prod.length>0;function s(){let g=document.getElementById(r);g&&g.remove()}function a(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function u(g,y){g.setAttribute("width","24"),g.setAttribute("id",y),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function l(){let g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{vb=!0,s()},g}function h(g,y){g.setAttribute("id",y),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){let g=dL(r),y=n("text"),b=document.getElementById(y)||document.createElement("span"),R=n("learnmore"),A=document.getElementById(R)||document.createElement("a"),k=n("preprendIcon"),q=document.getElementById(k)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){let le=g.element;a(le),h(A,R);let at=l();u(q,k),le.append(q,b,A,at),document.body.appendChild(le)}o?(b.innerText="Preview backend disconnected.",q.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(q.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,b.innerText="Preview backend running in this workspace."),b.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function it(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Db(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(it())}function hL(){let t=Pd()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function bb(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Sb(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Ab(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Rb(){let t=it();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Nb(){return!hL()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Xg(){try{return typeof indexedDB=="object"}catch{return!1}}function Mb(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(n){e(n)}})}var fL="FirebaseError",qt=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=fL,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,lr.prototype.create)}},lr=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?pL(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new qt(i,a,r)}};function pL(t,e){return t.replace(mL,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var mL=/\{\$([^}]+)}/g;function xb(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function $n(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let o=t[i],s=e[i];if(_b(o)&&_b(s)){if(!$n(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function _b(t){return t!==null&&typeof t=="object"}function dc(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Pb(t,e){let n=new Qg(t,e);return n.subscribe.bind(n)}var Qg=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");gL(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Wg),i.error===void 0&&(i.error=Wg),i.complete===void 0&&(i.complete=Wg);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function gL(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Wg(){}var BJ=14400*1e3;function je(t){return t&&t._delegate?t._delegate:t}var on=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var eo="[DEFAULT]";var ey=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new Md;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){let n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(vL(e))try{this.getOrInitializeService({instanceIdentifier:eo})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=eo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=eo){return this.instances.has(e)}getOptions(e=eo){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,n){let r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);let o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:yL(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=eo){return this.component?this.component.multipleInstances?e:eo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function yL(t){return t===eo?void 0:t}function vL(t){return t.instantiationMode==="EAGER"}var Ld=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new ey(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var _L=[],pe=(function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t})(pe||{}),EL={debug:pe.DEBUG,verbose:pe.VERBOSE,info:pe.INFO,warn:pe.WARN,error:pe.ERROR,silent:pe.SILENT},IL=pe.INFO,wL={[pe.DEBUG]:"log",[pe.VERBOSE]:"log",[pe.INFO]:"info",[pe.WARN]:"warn",[pe.ERROR]:"error"},CL=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=wL[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Qr=class{constructor(e){this.name=e,this._logLevel=IL,this._logHandler=CL,this._userLogHandler=null,_L.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in pe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?EL[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,pe.DEBUG,...e),this._logHandler(this,pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,pe.VERBOSE,...e),this._logHandler(this,pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,pe.INFO,...e),this._logHandler(this,pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,pe.WARN,...e),this._logHandler(this,pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,pe.ERROR,...e),this._logHandler(this,pe.ERROR,...e)}};var TL=(t,e)=>e.some(n=>t instanceof n),Ob,kb;function DL(){return Ob||(Ob=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function bL(){return kb||(kb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var Lb=new WeakMap,ny=new WeakMap,Fb=new WeakMap,ty=new WeakMap,iy=new WeakMap;function SL(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(Hn(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&Lb.set(n,t)}).catch(()=>{}),iy.set(e,t),e}function AL(t){if(ny.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});ny.set(t,e)}var ry={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return ny.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Fb.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Hn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Vb(t){ry=t(ry)}function RL(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(Fd(this),e,...n);return Fb.set(r,e.sort?e.sort():[e]),Hn(r)}:bL().includes(t)?function(...e){return t.apply(Fd(this),e),Hn(Lb.get(this))}:function(...e){return Hn(t.apply(Fd(this),e))}}function NL(t){return typeof t=="function"?RL(t):(t instanceof IDBTransaction&&AL(t),TL(t,DL())?new Proxy(t,ry):t)}function Hn(t){if(t instanceof IDBRequest)return SL(t);if(ty.has(t))return ty.get(t);let e=NL(t);return e!==t&&(ty.set(t,e),iy.set(e,t)),e}var Fd=t=>iy.get(t);function Bb(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(t,e),a=Hn(s);return r&&s.addEventListener("upgradeneeded",u=>{r(Hn(s.result),u.oldVersion,u.newVersion,Hn(s.transaction),u)}),n&&s.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var ML=["get","getKey","getAll","getAllKeys","count"],xL=["put","add","delete","clear"],oy=new Map;function Ub(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(oy.get(e))return oy.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=xL.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||ML.includes(n)))return;let o=async function(s,...a){let u=this.transaction(s,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),i&&u.done]))[0]};return oy.set(e,o),o}Vb(t=>se(M({},t),{get:(e,n,r)=>Ub(e,n)||t.get(e,n,r),has:(e,n)=>!!Ub(e,n)||t.has(e,n)}));var ay=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(PL(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function PL(t){return t.getComponent()?.type==="VERSION"}var cy="@firebase/app",jb="0.14.6";var dr=new Qr("@firebase/app"),OL="@firebase/app-compat",kL="@firebase/analytics-compat",LL="@firebase/analytics",FL="@firebase/app-check-compat",VL="@firebase/app-check",UL="@firebase/auth",BL="@firebase/auth-compat",jL="@firebase/database",$L="@firebase/data-connect",HL="@firebase/database-compat",zL="@firebase/functions",qL="@firebase/functions-compat",GL="@firebase/installations",WL="@firebase/installations-compat",KL="@firebase/messaging",QL="@firebase/messaging-compat",YL="@firebase/performance",JL="@firebase/performance-compat",ZL="@firebase/remote-config",XL="@firebase/remote-config-compat",eF="@firebase/storage",tF="@firebase/storage-compat",nF="@firebase/firestore",rF="@firebase/ai",iF="@firebase/firestore-compat",oF="firebase",sF="12.6.0";var uy="[DEFAULT]",aF={[cy]:"fire-core",[OL]:"fire-core-compat",[LL]:"fire-analytics",[kL]:"fire-analytics-compat",[VL]:"fire-app-check",[FL]:"fire-app-check-compat",[UL]:"fire-auth",[BL]:"fire-auth-compat",[jL]:"fire-rtdb",[$L]:"fire-data-connect",[HL]:"fire-rtdb-compat",[zL]:"fire-fn",[qL]:"fire-fn-compat",[GL]:"fire-iid",[WL]:"fire-iid-compat",[KL]:"fire-fcm",[QL]:"fire-fcm-compat",[YL]:"fire-perf",[JL]:"fire-perf-compat",[ZL]:"fire-rc",[XL]:"fire-rc-compat",[eF]:"fire-gcs",[tF]:"fire-gcs-compat",[nF]:"fire-fst",[iF]:"fire-fst-compat",[rF]:"fire-vertex","fire-js":"fire-js",[oF]:"fire-js-all"};var Vd=new Map,cF=new Map,ly=new Map;function $b(t,e){try{t.container.addComponent(e)}catch(n){dr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Jr(t){let e=t.name;if(ly.has(e))return dr.debug(`There were multiple attempts to register component ${e}.`),!1;ly.set(e,t);for(let n of Vd.values())$b(n,t);for(let n of cF.values())$b(n,t);return!0}function fc(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Pt(t){return t==null?!1:t.settings!==void 0}var uF={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Yr=new lr("app","Firebase",uF);var dy=class{constructor(e,n,r){this._isDeleted=!1,this._options=M({},e),this._config=M({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new on("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Yr.create("app-deleted",{appName:this._name})}};var Zr=sF;function py(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=M({name:uy,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw Yr.create("bad-app-name",{appName:String(i)});if(n||(n=Jg()),!n)throw Yr.create("no-options");let o=Vd.get(i);if(o){if($n(n,o.options)&&$n(r,o.config))return o;throw Yr.create("duplicate-app",{appName:i})}let s=new Ld(i);for(let u of ly.values())s.addComponent(u);let a=new dy(n,r,s);return Vd.set(i,a),a}function Ud(t=uy){let e=Vd.get(t);if(!e&&t===uy&&Jg())return py();if(!e)throw Yr.create("no-app",{appName:t});return e}function bn(t,e,n){let r=aF[t]??t;n&&(r+=`-${n}`);let i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){let s=[`Unable to register library "${r}" with version "${e}":`];i&&s.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&s.push("and"),o&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),dr.warn(s.join(" "));return}Jr(new on(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var lF="firebase-heartbeat-database",dF=1,hc="firebase-heartbeat-store",sy=null;function Gb(){return sy||(sy=Bb(lF,dF,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(hc)}catch(n){console.warn(n)}}}}).catch(t=>{throw Yr.create("idb-open",{originalErrorMessage:t.message})})),sy}async function hF(t){try{let n=(await Gb()).transaction(hc),r=await n.objectStore(hc).get(Wb(t));return await n.done,r}catch(e){if(e instanceof qt)dr.warn(e.message);else{let n=Yr.create("idb-get",{originalErrorMessage:e?.message});dr.warn(n.message)}}}async function Hb(t,e){try{let r=(await Gb()).transaction(hc,"readwrite");await r.objectStore(hc).put(e,Wb(t)),await r.done}catch(n){if(n instanceof qt)dr.warn(n.message);else{let r=Yr.create("idb-set",{originalErrorMessage:n?.message});dr.warn(r.message)}}}function Wb(t){return`${t.name}!${t.options.appId}`}var fF=1024,pF=30,hy=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new fy(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{let n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=zb();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>pF){let i=gF(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){dr.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=zb(),{heartbeatsToSend:n,unsentEntries:r}=mF(this._heartbeatsCache.heartbeats),i=lc(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return dr.warn(e),""}}};function zb(){return new Date().toISOString().substring(0,10)}function mF(t,e=fF){let n=[],r=t.slice();for(let i of t){let o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),qb(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),qb(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var fy=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Xg()?Mb().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let n=await hF(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){let r=await this.read();return Hb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){let r=await this.read();return Hb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}};function qb(t){return lc(JSON.stringify({version:2,heartbeats:t})).length}function gF(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function yF(t){Jr(new on("platform-logger",e=>new ay(e),"PRIVATE")),Jr(new on("heartbeat",e=>new hy(e),"PRIVATE")),bn(cy,jb,t),bn(cy,jb,"esm2020"),bn("fire-js","")}yF("");function cS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var uS=cS,lS=new lr("auth","Firebase",cS());var qd=new Qr("@firebase/auth");function vF(t,...e){qd.logLevel<=pe.WARN&&qd.warn(`Auth (${Zr}): ${t}`,...e)}function jd(t,...e){qd.logLevel<=pe.ERROR&&qd.error(`Auth (${Zr}): ${t}`,...e)}function ti(t,...e){throw Oy(t,...e)}function to(t,...e){return Oy(t,...e)}function dS(t,e,n){let r=se(M({},uS()),{[e]:n});return new lr("auth","Firebase",r).create(e,{appName:t.name})}function pr(t){return dS(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Oy(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return lS.create(t,...e)}function X(t,e,...n){if(!t)throw Oy(e,...n)}function hr(t){let e="INTERNAL ASSERTION FAILED: "+t;throw jd(e),new Error(e)}function ni(t,e){t||hr(e)}function vy(){return typeof self<"u"&&self.location?.href||""}function _F(){return Kb()==="http:"||Kb()==="https:"}function Kb(){return typeof self<"u"&&self.location?.protocol||null}function EF(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(_F()||Sb()||"connection"in navigator)?navigator.onLine:!0}function IF(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var no=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,ni(n>e,"Short delay should be less than long delay!"),this.isMobile=Db()||Ab()}get(){return EF()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function ky(t,e){ni(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var Gd=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;hr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;hr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;hr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var wF={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var CF=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],TF=new no(3e4,6e4);function _c(t,e){return t.tenantId&&!e.tenantId?se(M({},e),{tenantId:t.tenantId}):e}async function ns(t,e,n,r,i={}){return hS(t,i,async()=>{let o={},s={};r&&(e==="GET"?s=r:o={body:JSON.stringify(r)});let a=dc(M({key:t.config.apiKey},s)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);let l=M({method:e,headers:u},o);return bb()||(l.referrerPolicy="no-referrer"),t.emulatorConfig&&Kr(t.emulatorConfig.host)&&(l.credentials="include"),Gd.fetch()(await fS(t,t.config.apiHost,n,a),l)})}async function hS(t,e,n){t._canInitEmulator=!1;let r=M(M({},wF),e);try{let i=new _y(t),o=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();let s=await o.json();if("needConfirmation"in s)throw Bd(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Bd(t,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw Bd(t,"email-already-in-use",s);if(u==="USER_DISABLED")throw Bd(t,"user-disabled",s);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw dS(t,h,l);ti(t,h)}}catch(i){if(i instanceof qt)throw i;ti(t,"network-request-failed",{message:String(i)})}}async function Ly(t,e,n,r,i={}){let o=await ns(t,e,n,r,i);return"mfaPendingCredential"in o&&ti(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function fS(t,e,n,r){let i=`${e}${n}?${r}`,o=t,s=o.config.emulator?ky(t.config,i):`${t.config.apiScheme}://${i}`;return CF.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s}var _y=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(to(this.auth,"network-request-failed")),TF.get())})}};function Bd(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=to(t,e,r);return i.customData._tokenResponse=n,i}async function DF(t,e){return ns(t,"POST","/v1/accounts:delete",e)}async function Wd(t,e){return ns(t,"POST","/v1/accounts:lookup",e)}function pc(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function pS(t,e=!1){let n=je(t),r=await n.getIdToken(e),i=Fy(r);X(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:pc(my(i.auth_time)),issuedAtTime:pc(my(i.iat)),expirationTime:pc(my(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}}function my(t){return Number(t)*1e3}function Fy(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return jd("JWT malformed, contained fewer than 3 sections"),null;try{let i=xd(n);return i?JSON.parse(i):(jd("Failed to decode base64 JWT payload"),null)}catch(i){return jd("Caught error parsing JWT payload as JSON",i?.toString()),null}}function Qb(t){let e=Fy(t);return X(e,"internal-error"),X(typeof e.exp<"u","internal-error"),X(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function gc(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof qt&&bF(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function bF({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var Ey=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){let n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;let r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};var yc=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=pc(this.lastLoginAt),this.creationTime=pc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function Kd(t){let e=t.auth,n=await t.getIdToken(),r=await gc(t,Wd(e,{idToken:n}));X(r?.users.length,e,"internal-error");let i=r.users[0];t._notifyReloadListener(i);let o=i.providerUserInfo?.length?gS(i.providerUserInfo):[],s=SF(t.providerData,o),a=t.isAnonymous,u=!(t.email&&i.passwordHash)&&!s?.length,l=a?u:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new yc(i.createdAt,i.lastLoginAt),isAnonymous:l};Object.assign(t,h)}async function mS(t){let e=je(t);await Kd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function SF(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function gS(t){return t.map(r=>{var i=r,{providerId:e}=i,n=Of(i,["providerId"]);return{providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}async function AF(t,e){let n=await hS(t,{},async()=>{let r=dc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=await fS(t,i,"/v1/token",`key=${o}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let u={method:"POST",headers:a,body:r};return t.emulatorConfig&&Kr(t.emulatorConfig.host)&&(u.credentials="include"),Gd.fetch()(s,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function RF(t,e){return ns(t,"POST","/v2/accounts:revokeToken",_c(t,e))}var mc=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){X(e.idToken,"internal-error"),X(typeof e.idToken<"u","internal-error"),X(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Qb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){X(e.length!==0,"internal-error");let n=Qb(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(X(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){let{accessToken:r,refreshToken:i,expiresIn:o}=await AF(e,n);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new t;return r&&(X(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(X(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(X(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return hr("not implemented")}};function Xr(t,e){X(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var ei=class t{constructor(o){var s=o,{uid:e,auth:n,stsTokenManager:r}=s,i=Of(s,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ey(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new yc(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){let n=await gc(this,this.stsTokenManager.getToken(this.auth,e));return X(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return pS(this,e)}reload(){return mS(this)}_assign(e){this!==e&&(X(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>M({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(se(M({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){X(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Kd(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Pt(this.auth.app))return Promise.reject(pr(this.auth));let e=await this.getIdToken();return await gc(this,DF(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return se(M({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>M({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){let r=n.displayName??void 0,i=n.email??void 0,o=n.phoneNumber??void 0,s=n.photoURL??void 0,a=n.tenantId??void 0,u=n._redirectEventId??void 0,l=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:p,emailVerified:g,isAnonymous:y,providerData:b,stsTokenManager:R}=n;X(p&&R,e,"internal-error");let A=mc.fromJSON(this.name,R);X(typeof p=="string",e,"internal-error"),Xr(r,e.name),Xr(i,e.name),X(typeof g=="boolean",e,"internal-error"),X(typeof y=="boolean",e,"internal-error"),Xr(o,e.name),Xr(s,e.name),Xr(a,e.name),Xr(u,e.name),Xr(l,e.name),Xr(h,e.name);let k=new t({uid:p,auth:e,email:i,emailVerified:g,displayName:r,isAnonymous:y,photoURL:s,phoneNumber:o,tenantId:a,stsTokenManager:A,createdAt:l,lastLoginAt:h});return b&&Array.isArray(b)&&(k.providerData=b.map(q=>M({},q))),u&&(k._redirectEventId=u),k}static async _fromIdTokenResponse(e,n,r=!1){let i=new mc;i.updateFromServerResponse(n);let o=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Kd(o),o}static async _fromGetAccountInfoResponse(e,n,r){let i=n.users[0];X(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?gS(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new mc;a.updateFromIdToken(r);let u=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new yc(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(u,l),u}};var Yb=new Map;function fr(t){ni(t instanceof Function,"Expected a class definition");let e=Yb.get(t);return e?(ni(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Yb.set(t,e),e)}var NF=(()=>{class t{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(n,r){this.storage[n]=r}async _get(n){let r=this.storage[n];return r===void 0?null:r}async _remove(n){delete this.storage[n]}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),Iy=NF;function $d(t,e,n){return`firebase:${t}:${e}:${n}`}var Qd=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=$d(this.userKey,i.apiKey,o),this.fullPersistenceKey=$d("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let n=await Wd(this.auth,{idToken:e}).catch(()=>{});return n?ei._fromGetAccountInfoResponse(this.auth,n,e):null}return ei._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new t(fr(Iy),e,r);let i=(await Promise.all(n.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l),o=i[0]||fr(Iy),s=$d(r,e.config.apiKey,e.name),a=null;for(let l of n)try{let h=await l._get(s);if(h){let p;if(typeof h=="string"){let g=await Wd(e,{idToken:h}).catch(()=>{});if(!g)break;p=await ei._fromGetAccountInfoResponse(e,g,h)}else p=ei._fromJSON(e,h);l!==o&&(a=p),o=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new t(o,e,r):(o=u[0],a&&await o._set(s,a.toJSON()),await Promise.all(n.map(async l=>{if(l!==o)try{await l._remove(s)}catch{}})),new t(o,e,r))}};function Jb(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(ES(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(yS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(wS(e))return"Blackberry";if(CS(e))return"Webos";if(vS(e))return"Safari";if((e.includes("chrome/")||_S(e))&&!e.includes("edge/"))return"Chrome";if(IS(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function yS(t=it()){return/firefox\//i.test(t)}function vS(t=it()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function _S(t=it()){return/crios\//i.test(t)}function ES(t=it()){return/iemobile/i.test(t)}function IS(t=it()){return/android/i.test(t)}function wS(t=it()){return/blackberry/i.test(t)}function CS(t=it()){return/webos/i.test(t)}function Vy(t=it()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function MF(t=it()){return Vy(t)&&!!window.navigator?.standalone}function xF(){return Rb()&&document.documentMode===10}function TS(t=it()){return Vy(t)||IS(t)||CS(t)||wS(t)||/windows phone/i.test(t)||ES(t)}function DS(t,e=[]){let n;switch(t){case"Browser":n=Jb(it());break;case"Worker":n=`${Jb(it())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Zr}/${r}`}var wy=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=o=>new Promise((s,a)=>{try{let u=e(o);s(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}};async function PF(t,e={}){return ns(t,"GET","/v2/passwordPolicy",_c(t,e))}var OF=6,Cy=class{constructor(e){let n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??OF,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){let n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var Ty=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Yd(this),this.idTokenSubscription=new Yd(this),this.beforeStateQueue=new wy(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=lS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=fr(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Qd.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let n=await Wd(this,{idToken:e}),r=await ei._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Pt(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(s=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(s,s))}):this.directlySetCurrentUser(null)}let n=await this.assertedPersistence.getCurrentUser(),r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let o=this.redirectUser?._redirectEventId,s=r?._redirectEventId,a=await this.tryRedirectSignIn(e);(!o||o===s)&&a?.user&&(r=a.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return X(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Kd(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=IF()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Pt(this.app))return Promise.reject(pr(this));let n=e?je(e):null;return n&&X(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&X(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Pt(this.app)?Promise.reject(pr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Pt(this.app)?Promise.reject(pr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(fr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=await PF(this),n=new Cy(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new lr("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){let n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await RF(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){let r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let n=e&&fr(e)||this._popupRedirectResolver;X(n,this,"argument-error"),this.redirectPersistenceManager=await Qd.create(this,[fr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let o=typeof n=="function"?n:n.next.bind(n),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(X(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof n=="function"){let u=e.addObserver(n,r,i);return()=>{s=!0,u()}}else{let u=e.addObserver(n);return()=>{s=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return X(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=DS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){let e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);let n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);let r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(Pt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&vF(`Error while retrieving App Check token: ${e.error}`),e?.token}};function Ec(t){return je(t)}var Yd=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=Pb(n=>this.observer=n)}get next(){return X(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Uy={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function kF(t){Uy=t}function LF(t){return Uy.loadJS(t)}function FF(){return Uy.gapiScript}function bS(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function SS(t,e){let n=fc(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),o=n.getOptions();if($n(o,e??{}))return i;ti(i,"already-initialized")}return n.initialize({options:e})}function VF(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(fr);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function AS(t,e,n){let r=Ec(t);X(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,o=RS(e),{host:s,port:a}=UF(e),u=a===null?"":`:${a}`,l={url:`${o}//${s}${u}/`},h=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){X(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),X($n(l,r.config.emulator)&&$n(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,Kr(s)?(Od(`${o}//${s}${u}`),kd("Auth",!0)):i||BF()}function RS(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function UF(t){let e=RS(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:Zb(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:Zb(s)}}}function Zb(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function BF(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var Jd=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return hr("not implemented")}_getIdTokenResponse(e){return hr("not implemented")}_linkToIdToken(e,n){return hr("not implemented")}_getReauthenticationResolver(e){return hr("not implemented")}};async function gy(t,e){return Ly(t,"POST","/v1/accounts:signInWithIdp",_c(t,e))}var Zd=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Dy=class extends Zd{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};async function jF(t,e){return Ly(t,"POST","/v1/accounts:signUp",_c(t,e))}var ri=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){let o=await ei._fromIdTokenResponse(e,r,i),s=Xb(r);return new t({user:o,providerId:s,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);let i=Xb(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})}};function Xb(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}async function By(t){if(Pt(t.app))return Promise.reject(pr(t));let e=Ec(t);if(await e._initializationPromise,e.currentUser?.isAnonymous)return new ri({user:e.currentUser,providerId:null,operationType:"signIn"});let n=await jF(e,{returnSecureToken:!0}),r=await ri._fromIdTokenResponse(e,"signIn",n,!0);return await e._updateCurrentUser(r.user),r}var by=class t extends qt{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function NS(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?by._fromErrorAndOperation(t,o,e,r):o})}async function $F(t,e,n=!1){let r=await gc(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ri._forOperation(t,"link",r)}async function HF(t,e,n=!1){let{auth:r}=t;if(Pt(r.app))return Promise.reject(pr(r));let i="reauthenticate";try{let o=await gc(t,NS(r,i,e,t),n);X(o.idToken,r,"internal-error");let s=Fy(o.idToken);X(s,r,"internal-error");let{sub:a}=s;return X(t.uid===a,r,"user-mismatch"),ri._forOperation(t,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&ti(r,"user-mismatch"),o}}async function zF(t,e,n=!1){if(Pt(t.app))return Promise.reject(pr(t));let r="signIn",i=await NS(t,r,e),o=await ri._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(o.user),o}async function qF(t,e){return Ly(t,"POST","/v1/accounts:signInWithCustomToken",_c(t,e))}async function jy(t,e){if(Pt(t.app))return Promise.reject(pr(t));let n=Ec(t),r=await qF(n,{token:e,returnSecureToken:!0}),i=await ri._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}function $y(t,e){return je(t).setPersistence(e)}function MS(t,e,n,r){return je(t).onIdTokenChanged(e,n,r)}function xS(t,e,n){return je(t).beforeAuthStateChanged(e,n)}function rh(t,e,n,r){return je(t).onAuthStateChanged(e,n,r)}function Hy(t){return je(t).signOut()}var Xd="__sak";var eh=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Xd,"1"),this.storage.removeItem(Xd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var GF=1e3,WF=10,KF=(()=>{class t extends eh{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=TS(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&n(r,o,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((a,u,l)=>{this.notifyListeners(a,l)});return}let i=n.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);xF()&&s!==n.newValue&&n.newValue!==n.oldValue?setTimeout(o,WF):o()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},GF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(n,r){await super._set(n,r),this.localCache[n]=JSON.stringify(r)}async _get(n){let r=await super._get(n);return this.localCache[n]=JSON.stringify(r),r}async _remove(n){await super._remove(n),delete this.localCache[n]}}return t.type="LOCAL",t})(),ih=KF;var QF=(()=>{class t extends eh{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),zy=QF;function YF(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}var JF=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(o=>o.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}async handleEvent(n){let r=n,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let u=Array.from(a).map(async h=>h(r.origin,s)),l=await YF(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function PS(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var Sy=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,u)=>{let l=PS("",20);i.port1.start();let h=setTimeout(()=>{u(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){let g=p;if(g.data.eventId===l)switch(g.data.status){case"ack":clearTimeout(h),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(g.data.response);break;default:clearTimeout(h),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}};function zn(){return window}function ZF(t){zn().location.href=t}function OS(){return typeof zn().WorkerGlobalScope<"u"&&typeof zn().importScripts=="function"}async function XF(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function eV(){return navigator?.serviceWorker?.controller||null}function tV(){return OS()?self:null}var kS="firebaseLocalStorageDb",nV=1,th="firebaseLocalStorage",LS="fbase_key",ro=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function oh(t,e){return t.transaction([th],e?"readwrite":"readonly").objectStore(th)}function rV(){let t=indexedDB.deleteDatabase(kS);return new ro(t).toPromise()}function Ay(){let t=indexedDB.open(kS,nV);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(th,{keyPath:LS})}catch(i){n(i)}}),t.addEventListener("success",async()=>{let r=t.result;r.objectStoreNames.contains(th)?e(r):(r.close(),await rV(),e(await Ay()))})})}async function eS(t,e,n){let r=oh(t,!0).put({[LS]:e,value:n});return new ro(r).toPromise()}async function iV(t,e){let n=oh(t,!1).get(e),r=await new ro(n).toPromise();return r===void 0?null:r.value}function tS(t,e){let n=oh(t,!0).delete(e);return new ro(n).toPromise()}var oV=800,sV=3,aV=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ay(),this.db)}async _withRetries(n){let r=0;for(;;)try{let i=await this._openDb();return await n(i)}catch(i){if(r++>sV)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return OS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=JF._getInstance(tV()),this.receiver._subscribe("keyChanged",async(n,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(n,r)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await XF(),!this.activeServiceWorker)return;this.sender=new Sy(this.activeServiceWorker);let n=await this.sender._send("ping",{},800);n&&n[0]?.fulfilled&&n[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(n){if(!(!this.sender||!this.activeServiceWorker||eV()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;let n=await Ay();return await eS(n,Xd,"1"),await tS(n,Xd),!0}catch{}return!1}async _withPendingWrite(n){this.pendingWrites++;try{await n()}finally{this.pendingWrites--}}async _set(n,r){return this._withPendingWrite(async()=>(await this._withRetries(i=>eS(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)))}async _get(n){let r=await this._withRetries(i=>iV(i,n));return this.localCache[n]=r,r}async _remove(n){return this._withPendingWrite(async()=>(await this._withRetries(r=>tS(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)))}async _poll(){let n=await this._withRetries(o=>{let s=oh(o,!1).getAll();return new ro(s).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:o,value:s}of n)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),oV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),FS=aV;var pZ=bS("rcb"),mZ=new no(3e4,6e4);function cV(t,e){return e?fr(e):(X(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var vc=class extends Jd{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return gy(e,this._buildIdpRequest())}_linkToIdToken(e,n){return gy(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return gy(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function uV(t){return zF(t.auth,new vc(t),t.bypassAuthState)}function lV(t){let{auth:e,user:n}=t;return X(n,e,"internal-error"),HF(n,new vc(t),t.bypassAuthState)}async function dV(t){let{auth:e,user:n}=t;return X(n,e,"internal-error"),$F(n,new vc(t),t.bypassAuthState)}var Ry=class{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){let{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let u={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return uV;case"linkViaPopup":case"linkViaRedirect":return dV;case"reauthViaPopup":case"reauthViaRedirect":return lV;default:ti(this.auth,"internal-error")}}resolve(e){ni(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ni(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var gZ=new no(2e3,1e4);var hV="pendingRedirect",Hd=new Map,Ny=class extends Ry{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Hd.get(this.auth._key());if(!e){try{let r=await fV(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Hd.set(this.auth._key(),e)}return this.bypassAuthState||Hd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}};async function fV(t,e){let n=gV(e),r=mV(t);if(!await r._isAvailable())return!1;let i=await r._get(n)==="true";return await r._remove(n),i}function pV(t,e){Hd.set(t._key(),e)}function mV(t){return fr(t._redirectPersistence)}function gV(t){return $d(hV,t.config.apiKey,t.name)}async function yV(t,e,n=!1){if(Pt(t.app))return Promise.reject(pr(t));let r=Ec(t),i=cV(r,e),s=await new Ny(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,e)),s}var vV=600*1e3,My=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!_V(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!VS(e)){let r=e.error.code?.split("auth/")[1]||"internal-error";n.onError(to(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=vV&&this.cachedEventUids.clear(),this.cachedEventUids.has(nS(e))}saveEventToCache(e){this.cachedEventUids.add(nS(e)),this.lastProcessedEventTime=Date.now()}};function nS(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function VS({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function _V(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return VS(t);default:return!1}}async function EV(t,e={}){return ns(t,"GET","/v1/projects",e)}var IV=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,wV=/^https?/;async function CV(t){if(t.config.emulator)return;let{authorizedDomains:e}=await EV(t);for(let n of e)try{if(TV(n))return}catch{}ti(t,"unauthorized-domain")}function TV(t){let e=vy(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let s=new URL(t);return s.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!wV.test(n))return!1;if(IV.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var DV=new no(3e4,6e4);function rS(){let t=zn().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function bV(t){return new Promise((e,n)=>{function r(){rS(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{rS(),n(to(t,"network-request-failed"))},timeout:DV.get()})}if(zn().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(zn().gapi?.load)r();else{let i=bS("iframefcb");return zn()[i]=()=>{gapi.load?r():n(to(t,"network-request-failed"))},LF(`${FF()}?onload=${i}`).catch(o=>n(o))}}).catch(e=>{throw zd=null,e})}var zd=null;function SV(t){return zd=zd||bV(t),zd}var AV=new no(5e3,15e3),RV="__/auth/iframe",NV="emulator/auth/iframe",MV={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},xV=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function PV(t){let e=t.config;X(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?ky(e,NV):`https://${t.config.authDomain}/${RV}`,r={apiKey:e.apiKey,appName:t.name,v:Zr},i=xV.get(t.config.apiHost);i&&(r.eid=i);let o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${dc(r).slice(1)}`}async function OV(t){let e=await SV(t),n=zn().gapi;return X(n,t,"internal-error"),e.open({where:document.body,url:PV(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:MV,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});let s=to(t,"network-request-failed"),a=zn().setTimeout(()=>{o(s)},AV.get());function u(){zn().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{o(s)})}))}var kV={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},LV=500,FV=600,VV="_blank",UV="http://localhost",nh=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function BV(t,e,n,r=LV,i=FV){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",u=se(M({},kV),{width:r.toString(),height:i.toString(),top:o,left:s}),l=it().toLowerCase();n&&(a=_S(l)?VV:n),yS(l)&&(e=e||UV,u.scrollbars="yes");let h=Object.entries(u).reduce((g,[y,b])=>`${g}${y}=${b},`,"");if(MF(l)&&a!=="_self")return jV(e||"",a),new nh(null);let p=window.open(e||"",a,h);X(p,t,"popup-blocked");try{p.focus()}catch{}return new nh(p)}function jV(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var $V="__/auth/handler",HV="emulator/auth/handler",zV=encodeURIComponent("fac");async function iS(t,e,n,r,i,o){X(t.config.authDomain,t,"auth-domain-config-required"),X(t.config.apiKey,t,"invalid-api-key");let s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Zr,eventId:i};if(e instanceof Zd){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",xb(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(o||{}))s[h]=p}if(e instanceof Dy){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(s.scopes=h.join(","))}t.tenantId&&(s.tid=t.tenantId);let a=s;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let u=await t._getAppCheckToken(),l=u?`#${zV}=${encodeURIComponent(u)}`:"";return`${qV(t)}?${dc(a).slice(1)}${l}`}function qV({config:t}){return t.emulator?ky(t,HV):`https://${t.authDomain}/${$V}`}var yy="webStorageSupport",xy=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=zy,this._completeRedirectFn=yV,this._overrideRedirectResult=pV}async _openPopup(e,n,r,i){ni(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");let o=await iS(e,n,r,vy(),i);return BV(e,o,PS())}async _openRedirect(e,n,r,i){await this._originValidation(e);let o=await iS(e,n,r,vy(),i);return ZF(o),new Promise(()=>{})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(ni(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){let n=await OV(e),r=new My(e);return n.register("authEvent",i=>(X(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(yy,{type:yy},i=>{let o=i?.[0]?.[yy];o!==void 0&&n(!!o),ti(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=CV(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return TS()||vS()||Vy()}},US=xy;var oS="@firebase/auth",sS="1.12.0";var Py=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){X(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function GV(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function WV(t){Jr(new on("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;X(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:s,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:DS(t)},l=new Ty(r,i,o,u);return VF(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Jr(new on("auth-internal",e=>{let n=Ec(e.getProvider("auth").getImmediate());return(r=>new Py(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),bn(oS,sS,GV(t)),bn(oS,sS,"esm2020")}var KV=300,QV=Zg("authIdTokenMaxAge")||KV,aS=null,YV=t=>async e=>{let n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>QV)return;let i=n?.token;aS!==i&&(aS=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function qy(t=Ud()){let e=fc(t,"auth");if(e.isInitialized())return e.getImmediate();let n=SS(t,{popupRedirectResolver:US,persistence:[FS,ih,zy]}),r=Zg("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=YV(o.toString());xS(n,s,()=>s(n.currentUser)),MS(n,a=>s(a))}}let i=Yg("auth");return i&&AS(n,`http://${i}`),n}function JV(){return document.getElementsByTagName("head")?.[0]??document}kF({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let o=to("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",JV().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});WV("Browser");var ZV="firebase",XV="12.7.0";bn(ZV,XV,"app");var BS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},jS={};var mr,Gy;(function(){var t;function e(w,v){function E(){}E.prototype=v.prototype,w.F=v.prototype,w.prototype=new E,w.prototype.constructor=w,w.D=function(C,I,D){for(var _=Array(arguments.length-2),At=2;At<arguments.length;At++)_[At-2]=arguments[At];return v.prototype[I].apply(C,_)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(w,v,E){E||(E=0);let C=Array(16);if(typeof v=="string")for(var I=0;I<16;++I)C[I]=v.charCodeAt(E++)|v.charCodeAt(E++)<<8|v.charCodeAt(E++)<<16|v.charCodeAt(E++)<<24;else for(I=0;I<16;++I)C[I]=v[E++]|v[E++]<<8|v[E++]<<16|v[E++]<<24;v=w.g[0],E=w.g[1],I=w.g[2];let D=w.g[3],_;_=v+(D^E&(I^D))+C[0]+3614090360&4294967295,v=E+(_<<7&4294967295|_>>>25),_=D+(I^v&(E^I))+C[1]+3905402710&4294967295,D=v+(_<<12&4294967295|_>>>20),_=I+(E^D&(v^E))+C[2]+606105819&4294967295,I=D+(_<<17&4294967295|_>>>15),_=E+(v^I&(D^v))+C[3]+3250441966&4294967295,E=I+(_<<22&4294967295|_>>>10),_=v+(D^E&(I^D))+C[4]+4118548399&4294967295,v=E+(_<<7&4294967295|_>>>25),_=D+(I^v&(E^I))+C[5]+1200080426&4294967295,D=v+(_<<12&4294967295|_>>>20),_=I+(E^D&(v^E))+C[6]+2821735955&4294967295,I=D+(_<<17&4294967295|_>>>15),_=E+(v^I&(D^v))+C[7]+4249261313&4294967295,E=I+(_<<22&4294967295|_>>>10),_=v+(D^E&(I^D))+C[8]+1770035416&4294967295,v=E+(_<<7&4294967295|_>>>25),_=D+(I^v&(E^I))+C[9]+2336552879&4294967295,D=v+(_<<12&4294967295|_>>>20),_=I+(E^D&(v^E))+C[10]+4294925233&4294967295,I=D+(_<<17&4294967295|_>>>15),_=E+(v^I&(D^v))+C[11]+2304563134&4294967295,E=I+(_<<22&4294967295|_>>>10),_=v+(D^E&(I^D))+C[12]+1804603682&4294967295,v=E+(_<<7&4294967295|_>>>25),_=D+(I^v&(E^I))+C[13]+4254626195&4294967295,D=v+(_<<12&4294967295|_>>>20),_=I+(E^D&(v^E))+C[14]+2792965006&4294967295,I=D+(_<<17&4294967295|_>>>15),_=E+(v^I&(D^v))+C[15]+1236535329&4294967295,E=I+(_<<22&4294967295|_>>>10),_=v+(I^D&(E^I))+C[1]+4129170786&4294967295,v=E+(_<<5&4294967295|_>>>27),_=D+(E^I&(v^E))+C[6]+3225465664&4294967295,D=v+(_<<9&4294967295|_>>>23),_=I+(v^E&(D^v))+C[11]+643717713&4294967295,I=D+(_<<14&4294967295|_>>>18),_=E+(D^v&(I^D))+C[0]+3921069994&4294967295,E=I+(_<<20&4294967295|_>>>12),_=v+(I^D&(E^I))+C[5]+3593408605&4294967295,v=E+(_<<5&4294967295|_>>>27),_=D+(E^I&(v^E))+C[10]+38016083&4294967295,D=v+(_<<9&4294967295|_>>>23),_=I+(v^E&(D^v))+C[15]+3634488961&4294967295,I=D+(_<<14&4294967295|_>>>18),_=E+(D^v&(I^D))+C[4]+3889429448&4294967295,E=I+(_<<20&4294967295|_>>>12),_=v+(I^D&(E^I))+C[9]+568446438&4294967295,v=E+(_<<5&4294967295|_>>>27),_=D+(E^I&(v^E))+C[14]+3275163606&4294967295,D=v+(_<<9&4294967295|_>>>23),_=I+(v^E&(D^v))+C[3]+4107603335&4294967295,I=D+(_<<14&4294967295|_>>>18),_=E+(D^v&(I^D))+C[8]+1163531501&4294967295,E=I+(_<<20&4294967295|_>>>12),_=v+(I^D&(E^I))+C[13]+2850285829&4294967295,v=E+(_<<5&4294967295|_>>>27),_=D+(E^I&(v^E))+C[2]+4243563512&4294967295,D=v+(_<<9&4294967295|_>>>23),_=I+(v^E&(D^v))+C[7]+1735328473&4294967295,I=D+(_<<14&4294967295|_>>>18),_=E+(D^v&(I^D))+C[12]+2368359562&4294967295,E=I+(_<<20&4294967295|_>>>12),_=v+(E^I^D)+C[5]+4294588738&4294967295,v=E+(_<<4&4294967295|_>>>28),_=D+(v^E^I)+C[8]+2272392833&4294967295,D=v+(_<<11&4294967295|_>>>21),_=I+(D^v^E)+C[11]+1839030562&4294967295,I=D+(_<<16&4294967295|_>>>16),_=E+(I^D^v)+C[14]+4259657740&4294967295,E=I+(_<<23&4294967295|_>>>9),_=v+(E^I^D)+C[1]+2763975236&4294967295,v=E+(_<<4&4294967295|_>>>28),_=D+(v^E^I)+C[4]+1272893353&4294967295,D=v+(_<<11&4294967295|_>>>21),_=I+(D^v^E)+C[7]+4139469664&4294967295,I=D+(_<<16&4294967295|_>>>16),_=E+(I^D^v)+C[10]+3200236656&4294967295,E=I+(_<<23&4294967295|_>>>9),_=v+(E^I^D)+C[13]+681279174&4294967295,v=E+(_<<4&4294967295|_>>>28),_=D+(v^E^I)+C[0]+3936430074&4294967295,D=v+(_<<11&4294967295|_>>>21),_=I+(D^v^E)+C[3]+3572445317&4294967295,I=D+(_<<16&4294967295|_>>>16),_=E+(I^D^v)+C[6]+76029189&4294967295,E=I+(_<<23&4294967295|_>>>9),_=v+(E^I^D)+C[9]+3654602809&4294967295,v=E+(_<<4&4294967295|_>>>28),_=D+(v^E^I)+C[12]+3873151461&4294967295,D=v+(_<<11&4294967295|_>>>21),_=I+(D^v^E)+C[15]+530742520&4294967295,I=D+(_<<16&4294967295|_>>>16),_=E+(I^D^v)+C[2]+3299628645&4294967295,E=I+(_<<23&4294967295|_>>>9),_=v+(I^(E|~D))+C[0]+4096336452&4294967295,v=E+(_<<6&4294967295|_>>>26),_=D+(E^(v|~I))+C[7]+1126891415&4294967295,D=v+(_<<10&4294967295|_>>>22),_=I+(v^(D|~E))+C[14]+2878612391&4294967295,I=D+(_<<15&4294967295|_>>>17),_=E+(D^(I|~v))+C[5]+4237533241&4294967295,E=I+(_<<21&4294967295|_>>>11),_=v+(I^(E|~D))+C[12]+1700485571&4294967295,v=E+(_<<6&4294967295|_>>>26),_=D+(E^(v|~I))+C[3]+2399980690&4294967295,D=v+(_<<10&4294967295|_>>>22),_=I+(v^(D|~E))+C[10]+4293915773&4294967295,I=D+(_<<15&4294967295|_>>>17),_=E+(D^(I|~v))+C[1]+2240044497&4294967295,E=I+(_<<21&4294967295|_>>>11),_=v+(I^(E|~D))+C[8]+1873313359&4294967295,v=E+(_<<6&4294967295|_>>>26),_=D+(E^(v|~I))+C[15]+4264355552&4294967295,D=v+(_<<10&4294967295|_>>>22),_=I+(v^(D|~E))+C[6]+2734768916&4294967295,I=D+(_<<15&4294967295|_>>>17),_=E+(D^(I|~v))+C[13]+1309151649&4294967295,E=I+(_<<21&4294967295|_>>>11),_=v+(I^(E|~D))+C[4]+4149444226&4294967295,v=E+(_<<6&4294967295|_>>>26),_=D+(E^(v|~I))+C[11]+3174756917&4294967295,D=v+(_<<10&4294967295|_>>>22),_=I+(v^(D|~E))+C[2]+718787259&4294967295,I=D+(_<<15&4294967295|_>>>17),_=E+(D^(I|~v))+C[9]+3951481745&4294967295,w.g[0]=w.g[0]+v&4294967295,w.g[1]=w.g[1]+(I+(_<<21&4294967295|_>>>11))&4294967295,w.g[2]=w.g[2]+I&4294967295,w.g[3]=w.g[3]+D&4294967295}r.prototype.v=function(w,v){v===void 0&&(v=w.length);let E=v-this.blockSize,C=this.C,I=this.h,D=0;for(;D<v;){if(I==0)for(;D<=E;)i(this,w,D),D+=this.blockSize;if(typeof w=="string"){for(;D<v;)if(C[I++]=w.charCodeAt(D++),I==this.blockSize){i(this,C),I=0;break}}else for(;D<v;)if(C[I++]=w[D++],I==this.blockSize){i(this,C),I=0;break}}this.h=I,this.o+=v},r.prototype.A=function(){var w=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);w[0]=128;for(var v=1;v<w.length-8;++v)w[v]=0;v=this.o*8;for(var E=w.length-8;E<w.length;++E)w[E]=v&255,v/=256;for(this.v(w),w=Array(16),v=0,E=0;E<4;++E)for(let C=0;C<32;C+=8)w[v++]=this.g[E]>>>C&255;return w};function o(w,v){var E=a;return Object.prototype.hasOwnProperty.call(E,w)?E[w]:E[w]=v(w)}function s(w,v){this.h=v;let E=[],C=!0;for(let I=w.length-1;I>=0;I--){let D=w[I]|0;C&&D==v||(E[I]=D,C=!1)}this.g=E}var a={};function u(w){return-128<=w&&w<128?o(w,function(v){return new s([v|0],v<0?-1:0)}):new s([w|0],w<0?-1:0)}function l(w){if(isNaN(w)||!isFinite(w))return p;if(w<0)return A(l(-w));let v=[],E=1;for(let C=0;w>=E;C++)v[C]=w/E|0,E*=4294967296;return new s(v,0)}function h(w,v){if(w.length==0)throw Error("number format error: empty string");if(v=v||10,v<2||36<v)throw Error("radix out of range: "+v);if(w.charAt(0)=="-")return A(h(w.substring(1),v));if(w.indexOf("-")>=0)throw Error('number format error: interior "-" character');let E=l(Math.pow(v,8)),C=p;for(let D=0;D<w.length;D+=8){var I=Math.min(8,w.length-D);let _=parseInt(w.substring(D,D+I),v);I<8?(I=l(Math.pow(v,I)),C=C.j(I).add(l(_))):(C=C.j(E),C=C.add(l(_)))}return C}var p=u(0),g=u(1),y=u(16777216);t=s.prototype,t.m=function(){if(R(this))return-A(this).m();let w=0,v=1;for(let E=0;E<this.g.length;E++){let C=this.i(E);w+=(C>=0?C:4294967296+C)*v,v*=4294967296}return w},t.toString=function(w){if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(b(this))return"0";if(R(this))return"-"+A(this).toString(w);let v=l(Math.pow(w,6));var E=this;let C="";for(;;){let I=at(E,v).g;E=k(E,I.j(v));let D=((E.g.length>0?E.g[0]:E.h)>>>0).toString(w);if(E=I,b(E))return D+C;for(;D.length<6;)D="0"+D;C=D+C}},t.i=function(w){return w<0?0:w<this.g.length?this.g[w]:this.h};function b(w){if(w.h!=0)return!1;for(let v=0;v<w.g.length;v++)if(w.g[v]!=0)return!1;return!0}function R(w){return w.h==-1}t.l=function(w){return w=k(this,w),R(w)?-1:b(w)?0:1};function A(w){let v=w.g.length,E=[];for(let C=0;C<v;C++)E[C]=~w.g[C];return new s(E,~w.h).add(g)}t.abs=function(){return R(this)?A(this):this},t.add=function(w){let v=Math.max(this.g.length,w.g.length),E=[],C=0;for(let I=0;I<=v;I++){let D=C+(this.i(I)&65535)+(w.i(I)&65535),_=(D>>>16)+(this.i(I)>>>16)+(w.i(I)>>>16);C=_>>>16,D&=65535,_&=65535,E[I]=_<<16|D}return new s(E,E[E.length-1]&-2147483648?-1:0)};function k(w,v){return w.add(A(v))}t.j=function(w){if(b(this)||b(w))return p;if(R(this))return R(w)?A(this).j(A(w)):A(A(this).j(w));if(R(w))return A(this.j(A(w)));if(this.l(y)<0&&w.l(y)<0)return l(this.m()*w.m());let v=this.g.length+w.g.length,E=[];for(var C=0;C<2*v;C++)E[C]=0;for(C=0;C<this.g.length;C++)for(let I=0;I<w.g.length;I++){let D=this.i(C)>>>16,_=this.i(C)&65535,At=w.i(I)>>>16,Tr=w.i(I)&65535;E[2*C+2*I]+=_*Tr,q(E,2*C+2*I),E[2*C+2*I+1]+=D*Tr,q(E,2*C+2*I+1),E[2*C+2*I+1]+=_*At,q(E,2*C+2*I+1),E[2*C+2*I+2]+=D*At,q(E,2*C+2*I+2)}for(w=0;w<v;w++)E[w]=E[2*w+1]<<16|E[2*w];for(w=v;w<2*v;w++)E[w]=0;return new s(E,0)};function q(w,v){for(;(w[v]&65535)!=w[v];)w[v+1]+=w[v]>>>16,w[v]&=65535,v++}function le(w,v){this.g=w,this.h=v}function at(w,v){if(b(v))throw Error("division by zero");if(b(w))return new le(p,p);if(R(w))return v=at(A(w),v),new le(A(v.g),A(v.h));if(R(v))return v=at(w,A(v)),new le(A(v.g),v.h);if(w.g.length>30){if(R(w)||R(v))throw Error("slowDivide_ only works with positive integers.");for(var E=g,C=v;C.l(w)<=0;)E=St(E),C=St(C);var I=Ye(E,1),D=Ye(C,1);for(C=Ye(C,2),E=Ye(E,2);!b(C);){var _=D.add(C);_.l(w)<=0&&(I=I.add(E),D=_),C=Ye(C,1),E=Ye(E,1)}return v=k(w,I.j(v)),new le(I,v)}for(I=p;w.l(v)>=0;){for(E=Math.max(1,Math.floor(w.m()/v.m())),C=Math.ceil(Math.log(E)/Math.LN2),C=C<=48?1:Math.pow(2,C-48),D=l(E),_=D.j(v);R(_)||_.l(w)>0;)E-=C,D=l(E),_=D.j(v);b(D)&&(D=g),I=I.add(D),w=k(w,_)}return new le(I,w)}t.B=function(w){return at(this,w).h},t.and=function(w){let v=Math.max(this.g.length,w.g.length),E=[];for(let C=0;C<v;C++)E[C]=this.i(C)&w.i(C);return new s(E,this.h&w.h)},t.or=function(w){let v=Math.max(this.g.length,w.g.length),E=[];for(let C=0;C<v;C++)E[C]=this.i(C)|w.i(C);return new s(E,this.h|w.h)},t.xor=function(w){let v=Math.max(this.g.length,w.g.length),E=[];for(let C=0;C<v;C++)E[C]=this.i(C)^w.i(C);return new s(E,this.h^w.h)};function St(w){let v=w.g.length+1,E=[];for(let C=0;C<v;C++)E[C]=w.i(C)<<1|w.i(C-1)>>>31;return new s(E,w.h)}function Ye(w,v){let E=v>>5;v%=32;let C=w.g.length-E,I=[];for(let D=0;D<C;D++)I[D]=v>0?w.i(D+E)>>>v|w.i(D+E+1)<<32-v:w.i(D+E);return new s(I,w.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Gy=jS.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.B,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,mr=jS.Integer=s}).apply(typeof BS<"u"?BS:typeof self<"u"?self:typeof window<"u"?window:{});var sh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},gr={};var Wy,e2,rs,Ky,Ic,ah,Qy,Yy,Jy;(function(){var t,e=Object.defineProperty;function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof sh=="object"&&sh];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var m=0;m<c.length-1;m++){var T=c[m];if(!(T in f))break e;f=f[T]}c=c[c.length-1],m=f[c],d=d(m),d!=m&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}i("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(c){return c||function(d){var f=[],m;for(m in d)Object.prototype.hasOwnProperty.call(d,m)&&f.push([m,d[m]]);return f}});var o=o||{},s=this||self;function a(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function u(c,d,f){return c.call.apply(c.bind,arguments)}function l(c,d,f){return l=u,l.apply(null,arguments)}function h(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var m=f.slice();return m.push.apply(m,arguments),c.apply(this,m)}}function p(c,d){function f(){}f.prototype=d.prototype,c.Z=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Ob=function(m,T,S){for(var V=Array(arguments.length-2),ue=2;ue<arguments.length;ue++)V[ue-2]=arguments[ue];return d.prototype[T].apply(m,V)}}var g=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function y(c){let d=c.length;if(d>0){let f=Array(d);for(let m=0;m<d;m++)f[m]=c[m];return f}return[]}function b(c,d){for(let m=1;m<arguments.length;m++){let T=arguments[m];var f=typeof T;if(f=f!="object"?f:T?Array.isArray(T)?"array":f:"null",f=="array"||f=="object"&&typeof T.length=="number"){f=c.length||0;let S=T.length||0;c.length=f+S;for(let V=0;V<S;V++)c[f+V]=T[V]}else c.push(T)}}class R{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return this.h>0?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function A(c){s.setTimeout(()=>{throw c},0)}function k(){var c=w;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class q{constructor(){this.h=this.g=null}add(d,f){let m=le.get();m.set(d,f),this.h?this.h.next=m:this.g=m,this.h=m}}var le=new R(()=>new at,c=>c.reset());class at{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let St,Ye=!1,w=new q,v=()=>{let c=Promise.resolve(void 0);St=()=>{c.then(E)}};function E(){for(var c;c=k();){try{c.h.call(c.g)}catch(f){A(f)}var d=le;d.j(c),d.h<100&&(d.h++,c.next=d.g,d.g=c)}Ye=!1}function C(){this.u=this.u,this.C=this.C}C.prototype.u=!1,C.prototype.dispose=function(){this.u||(this.u=!0,this.N())},C.prototype[Symbol.dispose]=function(){this.dispose()},C.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function I(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}I.prototype.h=function(){this.defaultPrevented=!0};var D=(function(){if(!s.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};s.addEventListener("test",f,d),s.removeEventListener("test",f,d)}catch{}return c})();function _(c){return/^[\s\xa0]*$/.test(c)}function At(c,d){I.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,d)}p(At,I),At.prototype.init=function(c,d){let f=this.type=c.type,m=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget,d||(f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement)),this.relatedTarget=d,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&At.Z.h.call(this)},At.prototype.h=function(){At.Z.h.call(this);let c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Tr="closure_listenable_"+(Math.random()*1e6|0),uR=0;function lR(c,d,f,m,T){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!m,this.ha=T,this.key=++uR,this.da=this.fa=!1}function Yc(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Jc(c,d,f){for(let m in c)d.call(f,c[m],m,c)}function dR(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function hE(c){let d={};for(let f in c)d[f]=c[f];return d}let fE="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function pE(c,d){let f,m;for(let T=1;T<arguments.length;T++){m=arguments[T];for(f in m)c[f]=m[f];for(let S=0;S<fE.length;S++)f=fE[S],Object.prototype.hasOwnProperty.call(m,f)&&(c[f]=m[f])}}function Zc(c){this.src=c,this.g={},this.h=0}Zc.prototype.add=function(c,d,f,m,T){let S=c.toString();c=this.g[S],c||(c=this.g[S]=[],this.h++);let V=df(c,d,m,T);return V>-1?(d=c[V],f||(d.fa=!1)):(d=new lR(d,this.src,S,!!m,T),d.fa=f,c.push(d)),d};function lf(c,d){let f=d.type;if(f in c.g){var m=c.g[f],T=Array.prototype.indexOf.call(m,d,void 0),S;(S=T>=0)&&Array.prototype.splice.call(m,T,1),S&&(Yc(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function df(c,d,f,m){for(let T=0;T<c.length;++T){let S=c[T];if(!S.da&&S.listener==d&&S.capture==!!f&&S.ha==m)return T}return-1}var hf="closure_lm_"+(Math.random()*1e6|0),ff={};function mE(c,d,f,m,T){if(m&&m.once)return yE(c,d,f,m,T);if(Array.isArray(d)){for(let S=0;S<d.length;S++)mE(c,d[S],f,m,T);return null}return f=yf(f),c&&c[Tr]?c.J(d,f,a(m)?!!m.capture:!!m,T):gE(c,d,f,!1,m,T)}function gE(c,d,f,m,T,S){if(!d)throw Error("Invalid event type");let V=a(T)?!!T.capture:!!T,ue=mf(c);if(ue||(c[hf]=ue=new Zc(c)),f=ue.add(d,f,m,V,S),f.proxy)return f;if(m=hR(),f.proxy=m,m.src=c,m.listener=f,c.addEventListener)D||(T=V),T===void 0&&(T=!1),c.addEventListener(d.toString(),m,T);else if(c.attachEvent)c.attachEvent(_E(d.toString()),m);else if(c.addListener&&c.removeListener)c.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return f}function hR(){function c(f){return d.call(c.src,c.listener,f)}let d=fR;return c}function yE(c,d,f,m,T){if(Array.isArray(d)){for(let S=0;S<d.length;S++)yE(c,d[S],f,m,T);return null}return f=yf(f),c&&c[Tr]?c.K(d,f,a(m)?!!m.capture:!!m,T):gE(c,d,f,!0,m,T)}function vE(c,d,f,m,T){if(Array.isArray(d))for(var S=0;S<d.length;S++)vE(c,d[S],f,m,T);else m=a(m)?!!m.capture:!!m,f=yf(f),c&&c[Tr]?(c=c.i,S=String(d).toString(),S in c.g&&(d=c.g[S],f=df(d,f,m,T),f>-1&&(Yc(d[f]),Array.prototype.splice.call(d,f,1),d.length==0&&(delete c.g[S],c.h--)))):c&&(c=mf(c))&&(d=c.g[d.toString()],c=-1,d&&(c=df(d,f,m,T)),(f=c>-1?d[c]:null)&&pf(f))}function pf(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[Tr])lf(d.i,c);else{var f=c.type,m=c.proxy;d.removeEventListener?d.removeEventListener(f,m,c.capture):d.detachEvent?d.detachEvent(_E(f),m):d.addListener&&d.removeListener&&d.removeListener(m),(f=mf(d))?(lf(f,c),f.h==0&&(f.src=null,d[hf]=null)):Yc(c)}}}function _E(c){return c in ff?ff[c]:ff[c]="on"+c}function fR(c,d){if(c.da)c=!0;else{d=new At(d,this);let f=c.listener,m=c.ha||c.src;c.fa&&pf(c),c=f.call(m,d)}return c}function mf(c){return c=c[hf],c instanceof Zc?c:null}var gf="__closure_events_fn_"+(Math.random()*1e9>>>0);function yf(c){return typeof c=="function"?c:(c[gf]||(c[gf]=function(d){return c.handleEvent(d)}),c[gf])}function dt(){C.call(this),this.i=new Zc(this),this.M=this,this.G=null}p(dt,C),dt.prototype[Tr]=!0,dt.prototype.removeEventListener=function(c,d,f,m){vE(this,c,d,f,m)};function vt(c,d){var f,m=c.G;if(m)for(f=[];m;m=m.G)f.push(m);if(c=c.M,m=d.type||d,typeof d=="string")d=new I(d,c);else if(d instanceof I)d.target=d.target||c;else{var T=d;d=new I(m,c),pE(d,T)}T=!0;let S,V;if(f)for(V=f.length-1;V>=0;V--)S=d.g=f[V],T=Xc(S,m,!0,d)&&T;if(S=d.g=c,T=Xc(S,m,!0,d)&&T,T=Xc(S,m,!1,d)&&T,f)for(V=0;V<f.length;V++)S=d.g=f[V],T=Xc(S,m,!1,d)&&T}dt.prototype.N=function(){if(dt.Z.N.call(this),this.i){var c=this.i;for(let d in c.g){let f=c.g[d];for(let m=0;m<f.length;m++)Yc(f[m]);delete c.g[d],c.h--}}this.G=null},dt.prototype.J=function(c,d,f,m){return this.i.add(String(c),d,!1,f,m)},dt.prototype.K=function(c,d,f,m){return this.i.add(String(c),d,!0,f,m)};function Xc(c,d,f,m){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();let T=!0;for(let S=0;S<d.length;++S){let V=d[S];if(V&&!V.da&&V.capture==f){let ue=V.listener,qe=V.ha||V.src;V.fa&&lf(c.i,V),T=ue.call(qe,m)!==!1&&T}}return T&&!m.defaultPrevented}function pR(c,d){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=l(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(d)>2147483647?-1:s.setTimeout(c,d||0)}function EE(c){c.g=pR(()=>{c.g=null,c.i&&(c.i=!1,EE(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class mR extends C{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:EE(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ps(c){C.call(this),this.h=c,this.g={}}p(Ps,C);var IE=[];function wE(c){Jc(c.g,function(d,f){this.g.hasOwnProperty(f)&&pf(d)},c),c.g={}}Ps.prototype.N=function(){Ps.Z.N.call(this),wE(this)},Ps.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var vf=s.JSON.stringify,gR=s.JSON.parse,yR=class{stringify(c){return s.JSON.stringify(c,void 0)}parse(c){return s.JSON.parse(c,void 0)}};function CE(){}function TE(){}var Os={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function _f(){I.call(this,"d")}p(_f,I);function Ef(){I.call(this,"c")}p(Ef,I);var mi={},DE=null;function eu(){return DE=DE||new dt}mi.Ia="serverreachability";function bE(c){I.call(this,mi.Ia,c)}p(bE,I);function ks(c){let d=eu();vt(d,new bE(d))}mi.STAT_EVENT="statevent";function SE(c,d){I.call(this,mi.STAT_EVENT,c),this.stat=d}p(SE,I);function _t(c){let d=eu();vt(d,new SE(d,c))}mi.Ja="timingevent";function AE(c,d){I.call(this,mi.Ja,c),this.size=d}p(AE,I);function Ls(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){c()},d)}function Fs(){this.g=!0}Fs.prototype.ua=function(){this.g=!1};function vR(c,d,f,m,T,S){c.info(function(){if(c.g)if(S){var V="",ue=S.split("&");for(let be=0;be<ue.length;be++){var qe=ue[be].split("=");if(qe.length>1){let Je=qe[0];qe=qe[1];let Rn=Je.split("_");V=Rn.length>=2&&Rn[1]=="type"?V+(Je+"="+qe+"&"):V+(Je+"=redacted&")}}}else V=null;else V=S;return"XMLHTTP REQ ("+m+") [attempt "+T+"]: "+d+`
`+f+`
`+V})}function _R(c,d,f,m,T,S,V){c.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+T+"]: "+d+`
`+f+`
`+S+" "+V})}function yo(c,d,f,m){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+IR(c,f)+(m?" "+m:"")})}function ER(c,d){c.info(function(){return"TIMEOUT: "+d})}Fs.prototype.info=function(){};function IR(c,d){if(!c.g)return d;if(!d)return null;try{let S=JSON.parse(d);if(S){for(c=0;c<S.length;c++)if(Array.isArray(S[c])){var f=S[c];if(!(f.length<2)){var m=f[1];if(Array.isArray(m)&&!(m.length<1)){var T=m[0];if(T!="noop"&&T!="stop"&&T!="close")for(let V=1;V<m.length;V++)m[V]=""}}}}return vf(S)}catch{return d}}var tu={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},RE={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},NE;function If(){}p(If,CE),If.prototype.g=function(){return new XMLHttpRequest},NE=new If;function Vs(c){return encodeURIComponent(String(c))}function wR(c){var d=1;c=c.split(":");let f=[];for(;d>0&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function Dr(c,d,f,m){this.j=c,this.i=d,this.l=f,this.S=m||1,this.V=new Ps(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ME}function ME(){this.i=null,this.g="",this.h=!1}var xE={},wf={};function Cf(c,d,f){c.M=1,c.A=ru(An(d)),c.u=f,c.R=!0,PE(c,null)}function PE(c,d){c.F=Date.now(),nu(c),c.B=An(c.A);var f=c.B,m=c.S;Array.isArray(m)||(m=[String(m)]),GE(f.i,"t",m),c.C=0,f=c.j.L,c.h=new ME,c.g=lI(c.j,f?d:null,!c.u),c.P>0&&(c.O=new mR(l(c.Y,c,c.g),c.P)),d=c.V,f=c.g,m=c.ba;var T="readystatechange";Array.isArray(T)||(T&&(IE[0]=T.toString()),T=IE);for(let S=0;S<T.length;S++){let V=mE(f,T[S],m||d.handleEvent,!1,d.h||d);if(!V)break;d.g[V.key]=V}d=c.J?hE(c.J):{},c.u?(c.v||(c.v="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,d)):(c.v="GET",c.g.ea(c.B,c.v,null,d)),ks(),vR(c.i,c.v,c.B,c.l,c.S,c.u)}Dr.prototype.ba=function(c){c=c.target;let d=this.O;d&&Ar(c)==3?d.j():this.Y(c)},Dr.prototype.Y=function(c){try{if(c==this.g)e:{let ue=Ar(this.g),qe=this.g.ya(),be=this.g.ca();if(!(ue<3)&&(ue!=3||this.g&&(this.h.h||this.g.la()||XE(this.g)))){this.K||ue!=4||qe==7||(qe==8||be<=0?ks(3):ks(2)),Tf(this);var d=this.g.ca();this.X=d;var f=CR(this);if(this.o=d==200,_R(this.i,this.v,this.B,this.l,this.S,ue,d),this.o){if(this.U&&!this.L){t:{if(this.g){var m,T=this.g;if((m=T.g?T.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(m)){var S=m;break t}}S=null}if(c=S)yo(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Df(this,c);else{this.o=!1,this.m=3,_t(12),gi(this),Us(this);break e}}if(this.R){c=!0;let Je;for(;!this.K&&this.C<f.length;)if(Je=TR(this,f),Je==wf){ue==4&&(this.m=4,_t(14),c=!1),yo(this.i,this.l,null,"[Incomplete Response]");break}else if(Je==xE){this.m=4,_t(15),yo(this.i,this.l,f,"[Invalid Chunk]"),c=!1;break}else yo(this.i,this.l,Je,null),Df(this,Je);if(OE(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ue!=4||f.length!=0||this.h.h||(this.m=1,_t(16),c=!1),this.o=this.o&&c,!c)yo(this.i,this.l,f,"[Invalid Chunked Response]"),gi(this),Us(this);else if(f.length>0&&!this.W){this.W=!0;var V=this.j;V.g==this&&V.aa&&!V.P&&(V.j.info("Great, no buffering proxy detected. Bytes received: "+f.length),xf(V),V.P=!0,_t(11))}}else yo(this.i,this.l,f,null),Df(this,f);ue==4&&gi(this),this.o&&!this.K&&(ue==4?sI(this.j,this):(this.o=!1,nu(this)))}else VR(this.g),d==400&&f.indexOf("Unknown SID")>0?(this.m=3,_t(12)):(this.m=0,_t(13)),gi(this),Us(this)}}}catch{}finally{}};function CR(c){if(!OE(c))return c.g.la();let d=XE(c.g);if(d==="")return"";let f="",m=d.length,T=Ar(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return gi(c),Us(c),"";c.h.i=new s.TextDecoder}for(let S=0;S<m;S++)c.h.h=!0,f+=c.h.i.decode(d[S],{stream:!(T&&S==m-1)});return d.length=0,c.h.g+=f,c.C=0,c.h.g}function OE(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function TR(c,d){var f=c.C,m=d.indexOf(`
`,f);return m==-1?wf:(f=Number(d.substring(f,m)),isNaN(f)?xE:(m+=1,m+f>d.length?wf:(d=d.slice(m,m+f),c.C=m+f,d)))}Dr.prototype.cancel=function(){this.K=!0,gi(this)};function nu(c){c.T=Date.now()+c.H,kE(c,c.H)}function kE(c,d){if(c.D!=null)throw Error("WatchDog timer not null");c.D=Ls(l(c.aa,c),d)}function Tf(c){c.D&&(s.clearTimeout(c.D),c.D=null)}Dr.prototype.aa=function(){this.D=null;let c=Date.now();c-this.T>=0?(ER(this.i,this.B),this.M!=2&&(ks(),_t(17)),gi(this),this.m=2,Us(this)):kE(this,this.T-c)};function Us(c){c.j.I==0||c.K||sI(c.j,c)}function gi(c){Tf(c);var d=c.O;d&&typeof d.dispose=="function"&&d.dispose(),c.O=null,wE(c.V),c.g&&(d=c.g,c.g=null,d.abort(),d.dispose())}function Df(c,d){try{var f=c.j;if(f.I!=0&&(f.g==c||bf(f.h,c))){if(!c.L&&bf(f.h,c)&&f.I==3){try{var m=f.Ba.g.parse(d)}catch{m=null}if(Array.isArray(m)&&m.length==3){var T=m;if(T[0]==0){e:if(!f.v){if(f.g)if(f.g.F+3e3<c.F)uu(f),au(f);else break e;Mf(f),_t(18)}}else f.xa=T[1],0<f.xa-f.K&&T[2]<37500&&f.F&&f.A==0&&!f.C&&(f.C=Ls(l(f.Va,f),6e3));VE(f.h)<=1&&f.ta&&(f.ta=void 0)}else vi(f,11)}else if((c.L||f.g==c)&&uu(f),!_(d))for(T=f.Ba.g.parse(d),d=0;d<T.length;d++){let be=T[d],Je=be[0];if(!(Je<=f.K))if(f.K=Je,be=be[1],f.I==2)if(be[0]=="c"){f.M=be[1],f.ba=be[2];let Rn=be[3];Rn!=null&&(f.ka=Rn,f.j.info("VER="+f.ka));let _i=be[4];_i!=null&&(f.za=_i,f.j.info("SVER="+f.za));let Rr=be[5];Rr!=null&&typeof Rr=="number"&&Rr>0&&(m=1.5*Rr,f.O=m,f.j.info("backChannelRequestTimeoutMs_="+m)),m=f;let Nr=c.g;if(Nr){let du=Nr.g?Nr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(du){var S=m.h;S.g||du.indexOf("spdy")==-1&&du.indexOf("quic")==-1&&du.indexOf("h2")==-1||(S.j=S.l,S.g=new Set,S.h&&(Sf(S,S.h),S.h=null))}if(m.G){let Pf=Nr.g?Nr.g.getResponseHeader("X-HTTP-Session-Id"):null;Pf&&(m.wa=Pf,Se(m.J,m.G,Pf))}}f.I=3,f.l&&f.l.ra(),f.aa&&(f.T=Date.now()-c.F,f.j.info("Handshake RTT: "+f.T+"ms")),m=f;var V=c;if(m.na=uI(m,m.L?m.ba:null,m.W),V.L){UE(m.h,V);var ue=V,qe=m.O;qe&&(ue.H=qe),ue.D&&(Tf(ue),nu(ue)),m.g=V}else iI(m);f.i.length>0&&cu(f)}else be[0]!="stop"&&be[0]!="close"||vi(f,7);else f.I==3&&(be[0]=="stop"||be[0]=="close"?be[0]=="stop"?vi(f,7):Nf(f):be[0]!="noop"&&f.l&&f.l.qa(be),f.A=0)}}ks(4)}catch{}}var DR=class{constructor(c,d){this.g=c,this.map=d}};function LE(c){this.l=c||10,s.PerformanceNavigationTiming?(c=s.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function FE(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function VE(c){return c.h?1:c.g?c.g.size:0}function bf(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function Sf(c,d){c.g?c.g.add(d):c.h=d}function UE(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}LE.prototype.cancel=function(){if(this.i=BE(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function BE(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.G);return d}return y(c.i)}var jE=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function bR(c,d){if(c){c=c.split("&");for(let f=0;f<c.length;f++){let m=c[f].indexOf("="),T,S=null;m>=0?(T=c[f].substring(0,m),S=c[f].substring(m+1)):T=c[f],d(T,S?decodeURIComponent(S.replace(/\+/g," ")):"")}}}function br(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let d;c instanceof br?(this.l=c.l,Bs(this,c.j),this.o=c.o,this.g=c.g,js(this,c.u),this.h=c.h,Af(this,WE(c.i)),this.m=c.m):c&&(d=String(c).match(jE))?(this.l=!1,Bs(this,d[1]||"",!0),this.o=$s(d[2]||""),this.g=$s(d[3]||"",!0),js(this,d[4]),this.h=$s(d[5]||"",!0),Af(this,d[6]||"",!0),this.m=$s(d[7]||"")):(this.l=!1,this.i=new zs(null,this.l))}br.prototype.toString=function(){let c=[];var d=this.j;d&&c.push(Hs(d,$E,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(Hs(d,$E,!0),"@"),c.push(Vs(f).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.u,f!=null&&c.push(":",String(f))),(f=this.h)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(Hs(f,f.charAt(0)=="/"?RR:AR,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",Hs(f,MR)),c.join("")},br.prototype.resolve=function(c){let d=An(this),f=!!c.j;f?Bs(d,c.j):f=!!c.o,f?d.o=c.o:f=!!c.g,f?d.g=c.g:f=c.u!=null;var m=c.h;if(f)js(d,c.u);else if(f=!!c.h){if(m.charAt(0)!="/")if(this.g&&!this.h)m="/"+m;else{var T=d.h.lastIndexOf("/");T!=-1&&(m=d.h.slice(0,T+1)+m)}if(T=m,T==".."||T==".")m="";else if(T.indexOf("./")!=-1||T.indexOf("/.")!=-1){m=T.lastIndexOf("/",0)==0,T=T.split("/");let S=[];for(let V=0;V<T.length;){let ue=T[V++];ue=="."?m&&V==T.length&&S.push(""):ue==".."?((S.length>1||S.length==1&&S[0]!="")&&S.pop(),m&&V==T.length&&S.push("")):(S.push(ue),m=!0)}m=S.join("/")}else m=T}return f?d.h=m:f=c.i.toString()!=="",f?Af(d,WE(c.i)):f=!!c.m,f&&(d.m=c.m),d};function An(c){return new br(c)}function Bs(c,d,f){c.j=f?$s(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function js(c,d){if(d){if(d=Number(d),isNaN(d)||d<0)throw Error("Bad port number "+d);c.u=d}else c.u=null}function Af(c,d,f){d instanceof zs?(c.i=d,xR(c.i,c.l)):(f||(d=Hs(d,NR)),c.i=new zs(d,c.l))}function Se(c,d,f){c.i.set(d,f)}function ru(c){return Se(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function $s(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Hs(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,SR),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function SR(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var $E=/[#\/\?@]/g,AR=/[#\?:]/g,RR=/[#\?]/g,NR=/[#\?@]/g,MR=/#/g;function zs(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function yi(c){c.g||(c.g=new Map,c.h=0,c.i&&bR(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=zs.prototype,t.add=function(c,d){yi(this),this.i=null,c=vo(this,c);let f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function HE(c,d){yi(c),d=vo(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function zE(c,d){return yi(c),d=vo(c,d),c.g.has(d)}t.forEach=function(c,d){yi(this),this.g.forEach(function(f,m){f.forEach(function(T){c.call(d,T,m,this)},this)},this)};function qE(c,d){yi(c);let f=[];if(typeof d=="string")zE(c,d)&&(f=f.concat(c.g.get(vo(c,d))));else for(c=Array.from(c.g.values()),d=0;d<c.length;d++)f=f.concat(c[d]);return f}t.set=function(c,d){return yi(this),this.i=null,c=vo(this,c),zE(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},t.get=function(c,d){return c?(c=qE(this,c),c.length>0?String(c[0]):d):d};function GE(c,d,f){HE(c,d),f.length>0&&(c.i=null,c.g.set(vo(c,d),y(f)),c.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(let m=0;m<d.length;m++){var f=d[m];let T=Vs(f);f=qE(this,f);for(let S=0;S<f.length;S++){let V=T;f[S]!==""&&(V+="="+Vs(f[S])),c.push(V)}}return this.i=c.join("&")};function WE(c){let d=new zs;return d.i=c.i,c.g&&(d.g=new Map(c.g),d.h=c.h),d}function vo(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function xR(c,d){d&&!c.j&&(yi(c),c.i=null,c.g.forEach(function(f,m){let T=m.toLowerCase();m!=T&&(HE(this,m),GE(this,T,f))},c)),c.j=d}function PR(c,d){let f=new Fs;if(s.Image){let m=new Image;m.onload=h(Sr,f,"TestLoadImage: loaded",!0,d,m),m.onerror=h(Sr,f,"TestLoadImage: error",!1,d,m),m.onabort=h(Sr,f,"TestLoadImage: abort",!1,d,m),m.ontimeout=h(Sr,f,"TestLoadImage: timeout",!1,d,m),s.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=c}else d(!1)}function OR(c,d){let f=new Fs,m=new AbortController,T=setTimeout(()=>{m.abort(),Sr(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:m.signal}).then(S=>{clearTimeout(T),S.ok?Sr(f,"TestPingServer: ok",!0,d):Sr(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(T),Sr(f,"TestPingServer: error",!1,d)})}function Sr(c,d,f,m,T){try{T&&(T.onload=null,T.onerror=null,T.onabort=null,T.ontimeout=null),m(f)}catch{}}function kR(){this.g=new yR}function iu(c){this.i=c.Sb||null,this.h=c.ab||!1}p(iu,CE),iu.prototype.g=function(){return new ou(this.i,this.h)};function ou(c,d){dt.call(this),this.H=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(ou,dt),t=ou.prototype,t.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=d,this.readyState=1,Gs(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;let d={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(d.body=c),(this.H||s).fetch(new Request(this.D,d)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,qs(this)),this.readyState=0},t.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Gs(this)),this.g&&(this.readyState=3,Gs(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof s.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;KE(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function KE(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}t.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.B.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?qs(this):Gs(this),this.readyState==3&&KE(this)}},t.Oa=function(c){this.g&&(this.response=this.responseText=c,qs(this))},t.Na=function(c){this.g&&(this.response=c,qs(this))},t.ga=function(){this.g&&qs(this)};function qs(c){c.readyState=4,c.l=null,c.j=null,c.B=null,Gs(c)}t.setRequestHeader=function(c,d){this.A.append(c,d)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function Gs(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(ou.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function QE(c){let d="";return Jc(c,function(f,m){d+=m,d+=":",d+=f,d+=`\r
`}),d}function Rf(c,d,f){e:{for(m in f){var m=!1;break e}m=!0}m||(f=QE(f),typeof c=="string"?f!=null&&Vs(f):Se(c,d,f))}function xe(c){dt.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(xe,dt);var LR=/^https?$/i,FR=["POST","PUT"];t=xe.prototype,t.Fa=function(c){this.H=c},t.ea=function(c,d,f,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():NE.g(),this.g.onreadystatechange=g(l(this.Ca,this));try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(S){YE(this,S);return}if(c=f||"",f=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var T in m)f.set(T,m[T]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(let S of m.keys())f.set(S,m.get(S));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(f.keys()).find(S=>S.toLowerCase()=="content-type"),T=s.FormData&&c instanceof s.FormData,!(Array.prototype.indexOf.call(FR,d,void 0)>=0)||m||T||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[S,V]of f)this.g.setRequestHeader(S,V);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(S){YE(this,S)}};function YE(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.o=5,JE(c),su(c)}function JE(c){c.A||(c.A=!0,vt(c,"complete"),vt(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,vt(this,"complete"),vt(this,"abort"),su(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),su(this,!0)),xe.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?ZE(this):this.Xa())},t.Xa=function(){ZE(this)};function ZE(c){if(c.h&&typeof o<"u"){if(c.v&&Ar(c)==4)setTimeout(c.Ca.bind(c),0);else if(vt(c,"readystatechange"),Ar(c)==4){c.h=!1;try{let S=c.ca();e:switch(S){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var m;if(m=S===0){let V=String(c.D).match(jE)[1]||null;!V&&s.self&&s.self.location&&(V=s.self.location.protocol.slice(0,-1)),m=!LR.test(V?V.toLowerCase():"")}f=m}if(f)vt(c,"complete"),vt(c,"success");else{c.o=6;try{var T=Ar(c)>2?c.g.statusText:""}catch{T=""}c.l=T+" ["+c.ca()+"]",JE(c)}}finally{su(c)}}}}function su(c,d){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);let f=c.g;c.g=null,d||vt(c,"ready");try{f.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Ar(c){return c.g?c.g.readyState:0}t.ca=function(){try{return Ar(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),gR(d)}};function XE(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function VR(c){let d={};c=(c.g&&Ar(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<c.length;m++){if(_(c[m]))continue;var f=wR(c[m]);let T=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let S=d[T]||[];d[T]=S,S.push(f)}dR(d,function(m){return m.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ws(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function eI(c){this.za=0,this.i=[],this.j=new Fs,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ws("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ws("baseRetryDelayMs",5e3,c),this.Za=Ws("retryDelaySeedMs",1e4,c),this.Ta=Ws("forwardChannelMaxRetries",2,c),this.va=Ws("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new LE(c&&c.concurrentRequestLimit),this.Ba=new kR,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=eI.prototype,t.ka=8,t.I=1,t.connect=function(c,d,f,m){_t(0),this.W=c,this.H=d||{},f&&m!==void 0&&(this.H.OSID=f,this.H.OAID=m),this.F=this.X,this.J=uI(this,null,this.W),cu(this)};function Nf(c){if(tI(c),c.I==3){var d=c.V++,f=An(c.J);if(Se(f,"SID",c.M),Se(f,"RID",d),Se(f,"TYPE","terminate"),Ks(c,f),d=new Dr(c,c.j,d),d.M=2,d.A=ru(An(f)),f=!1,s.navigator&&s.navigator.sendBeacon)try{f=s.navigator.sendBeacon(d.A.toString(),"")}catch{}!f&&s.Image&&(new Image().src=d.A,f=!0),f||(d.g=lI(d.j,null),d.g.ea(d.A)),d.F=Date.now(),nu(d)}cI(c)}function au(c){c.g&&(xf(c),c.g.cancel(),c.g=null)}function tI(c){au(c),c.v&&(s.clearTimeout(c.v),c.v=null),uu(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&s.clearTimeout(c.m),c.m=null)}function cu(c){if(!FE(c.h)&&!c.m){c.m=!0;var d=c.Ea;St||v(),Ye||(St(),Ye=!0),w.add(d,c),c.D=0}}function UR(c,d){return VE(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=d.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=Ls(l(c.Ea,c,d),aI(c,c.D)),c.D++,!0)}t.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;let T=new Dr(this,this.j,c),S=this.o;if(this.U&&(S?(S=hE(S),pE(S,this.U)):S=this.U),this.u!==null||this.R||(T.J=S,S=null),this.S)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var m=this.i[f];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(d+=m,d>4096){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=rI(this,T,d),f=An(this.J),Se(f,"RID",c),Se(f,"CVER",22),this.G&&Se(f,"X-HTTP-Session-Id",this.G),Ks(this,f),S&&(this.R?d="headers="+Vs(QE(S))+"&"+d:this.u&&Rf(f,this.u,S)),Sf(this.h,T),this.Ra&&Se(f,"TYPE","init"),this.S?(Se(f,"$req",d),Se(f,"SID","null"),T.U=!0,Cf(T,f,null)):Cf(T,f,d),this.I=2}}else this.I==3&&(c?nI(this,c):this.i.length==0||FE(this.h)||nI(this))};function nI(c,d){var f;d?f=d.l:f=c.V++;let m=An(c.J);Se(m,"SID",c.M),Se(m,"RID",f),Se(m,"AID",c.K),Ks(c,m),c.u&&c.o&&Rf(m,c.u,c.o),f=new Dr(c,c.j,f,c.D+1),c.u===null&&(f.J=c.o),d&&(c.i=d.G.concat(c.i)),d=rI(c,f,1e3),f.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),Sf(c.h,f),Cf(f,m,d)}function Ks(c,d){c.H&&Jc(c.H,function(f,m){Se(d,m,f)}),c.l&&Jc({},function(f,m){Se(d,m,f)})}function rI(c,d,f){f=Math.min(c.i.length,f);let m=c.l?l(c.l.Ka,c.l,c):null;e:{var T=c.i;let ue=-1;for(;;){let qe=["count="+f];ue==-1?f>0?(ue=T[0].g,qe.push("ofs="+ue)):ue=0:qe.push("ofs="+ue);let be=!0;for(let Je=0;Je<f;Je++){var S=T[Je].g;let Rn=T[Je].map;if(S-=ue,S<0)ue=Math.max(0,T[Je].g-100),be=!1;else try{S="req"+S+"_"||"";try{var V=Rn instanceof Map?Rn:Object.entries(Rn);for(let[_i,Rr]of V){let Nr=Rr;a(Rr)&&(Nr=vf(Rr)),qe.push(S+_i+"="+encodeURIComponent(Nr))}}catch(_i){throw qe.push(S+"type="+encodeURIComponent("_badmap")),_i}}catch{m&&m(Rn)}}if(be){V=qe.join("&");break e}}V=void 0}return c=c.i.splice(0,f),d.G=c,V}function iI(c){if(!c.g&&!c.v){c.Y=1;var d=c.Da;St||v(),Ye||(St(),Ye=!0),w.add(d,c),c.A=0}}function Mf(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=Ls(l(c.Da,c),aI(c,c.A)),c.A++,!0)}t.Da=function(){if(this.v=null,oI(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=Ls(l(this.Wa,this),c)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,_t(10),au(this),oI(this))};function xf(c){c.B!=null&&(s.clearTimeout(c.B),c.B=null)}function oI(c){c.g=new Dr(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var d=An(c.na);Se(d,"RID","rpc"),Se(d,"SID",c.M),Se(d,"AID",c.K),Se(d,"CI",c.F?"0":"1"),!c.F&&c.ia&&Se(d,"TO",c.ia),Se(d,"TYPE","xmlhttp"),Ks(c,d),c.u&&c.o&&Rf(d,c.u,c.o),c.O&&(c.g.H=c.O);var f=c.g;c=c.ba,f.M=1,f.A=ru(An(d)),f.u=null,f.R=!0,PE(f,c)}t.Va=function(){this.C!=null&&(this.C=null,au(this),Mf(this),_t(19))};function uu(c){c.C!=null&&(s.clearTimeout(c.C),c.C=null)}function sI(c,d){var f=null;if(c.g==d){uu(c),xf(c),c.g=null;var m=2}else if(bf(c.h,d))f=d.G,UE(c.h,d),m=1;else return;if(c.I!=0){if(d.o)if(m==1){f=d.u?d.u.length:0,d=Date.now()-d.F;var T=c.D;m=eu(),vt(m,new AE(m,f)),cu(c)}else iI(c);else if(T=d.m,T==3||T==0&&d.X>0||!(m==1&&UR(c,d)||m==2&&Mf(c)))switch(f&&f.length>0&&(d=c.h,d.i=d.i.concat(f)),T){case 1:vi(c,5);break;case 4:vi(c,10);break;case 3:vi(c,6);break;default:vi(c,2)}}}function aI(c,d){let f=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(f*=2),f*d}function vi(c,d){if(c.j.info("Error code "+d),d==2){var f=l(c.bb,c),m=c.Ua;let T=!m;m=new br(m||"//www.google.com/images/cleardot.gif"),s.location&&s.location.protocol=="http"||Bs(m,"https"),ru(m),T?PR(m.toString(),f):OR(m.toString(),f)}else _t(2);c.I=0,c.l&&c.l.pa(d),cI(c),tI(c)}t.bb=function(c){c?(this.j.info("Successfully pinged google.com"),_t(2)):(this.j.info("Failed to ping google.com"),_t(1))};function cI(c){if(c.I=0,c.ja=[],c.l){let d=BE(c.h);(d.length!=0||c.i.length!=0)&&(b(c.ja,d),b(c.ja,c.i),c.h.i.length=0,y(c.i),c.i.length=0),c.l.oa()}}function uI(c,d,f){var m=f instanceof br?An(f):new br(f);if(m.g!="")d&&(m.g=d+"."+m.g),js(m,m.u);else{var T=s.location;m=T.protocol,d=d?d+"."+T.hostname:T.hostname,T=+T.port;let S=new br(null);m&&Bs(S,m),d&&(S.g=d),T&&js(S,T),f&&(S.h=f),m=S}return f=c.G,d=c.wa,f&&d&&Se(m,f,d),Se(m,"VER",c.ka),Ks(c,m),m}function lI(c,d,f){if(d&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Aa&&!c.ma?new xe(new iu({ab:f})):new xe(c.ma),d.Fa(c.L),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function dI(){}t=dI.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function lu(){}lu.prototype.g=function(c,d){return new Ft(c,d)};function Ft(c,d){dt.call(this),this.g=new eI(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.sa&&(c?c["X-WebChannel-Client-Profile"]=d.sa:c={"X-WebChannel-Client-Profile":d.sa}),this.g.U=c,(c=d&&d.Qb)&&!_(c)&&(this.g.u=c),this.A=d&&d.supportsCrossDomainXhr||!1,this.v=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!_(d)&&(this.g.G=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new _o(this)}p(Ft,dt),Ft.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Ft.prototype.close=function(){Nf(this.g)},Ft.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.v&&(f={},f.__data__=vf(c),c=f);d.i.push(new DR(d.Ya++,c)),d.I==3&&cu(d)},Ft.prototype.N=function(){this.g.l=null,delete this.j,Nf(this.g),delete this.g,Ft.Z.N.call(this)};function hI(c){_f.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}p(hI,_f);function fI(){Ef.call(this),this.status=1}p(fI,Ef);function _o(c){this.g=c}p(_o,dI),_o.prototype.ra=function(){vt(this.g,"a")},_o.prototype.qa=function(c){vt(this.g,new hI(c))},_o.prototype.pa=function(c){vt(this.g,new fI)},_o.prototype.oa=function(){vt(this.g,"b")},lu.prototype.createWebChannel=lu.prototype.g,Ft.prototype.send=Ft.prototype.o,Ft.prototype.open=Ft.prototype.m,Ft.prototype.close=Ft.prototype.close,Jy=gr.createWebChannelTransport=function(){return new lu},Yy=gr.getStatEventTarget=function(){return eu()},Qy=gr.Event=mi,ah=gr.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},tu.NO_ERROR=0,tu.TIMEOUT=8,tu.HTTP_ERROR=6,Ic=gr.ErrorCode=tu,RE.COMPLETE="complete",Ky=gr.EventType=RE,TE.EventType=Os,Os.OPEN="a",Os.CLOSE="b",Os.ERROR="c",Os.MESSAGE="d",dt.prototype.listen=dt.prototype.J,rs=gr.WebChannel=TE,e2=gr.FetchXmlHttpFactory=iu,xe.prototype.listenOnce=xe.prototype.K,xe.prototype.getLastError=xe.prototype.Ha,xe.prototype.getLastErrorCode=xe.prototype.ya,xe.prototype.getStatus=xe.prototype.ca,xe.prototype.getResponseJson=xe.prototype.La,xe.prototype.getResponseText=xe.prototype.la,xe.prototype.send=xe.prototype.ea,xe.prototype.setWithCredentials=xe.prototype.Fa,Wy=gr.XhrIo=xe}).apply(typeof sh<"u"?sh:typeof self<"u"?self:typeof window<"u"?window:{});var $S="@firebase/firestore",HS="4.9.3";var ot=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};ot.UNAUTHENTICATED=new ot(null),ot.GOOGLE_CREDENTIALS=new ot("google-credentials-uid"),ot.FIRST_PARTY=new ot("first-party-uid"),ot.MOCK_USER=new ot("mock-user");var Ss="12.7.0";var so=new Qr("@firebase/firestore");function is(){return so.logLevel}function j(t,...e){if(so.logLevel<=pe.DEBUG){let n=e.map(j_);so.debug(`Firestore (${Ss}): ${t}`,...n)}}function _r(t,...e){if(so.logLevel<=pe.ERROR){let n=e.map(j_);so.error(`Firestore (${Ss}): ${t}`,...n)}}function hs(t,...e){if(so.logLevel<=pe.WARN){let n=e.map(j_);so.warn(`Firestore (${Ss}): ${t}`,...n)}}function j_(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function H(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,R0(t,r,n)}function R0(t,e,n){let r=`FIRESTORE (${Ss}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw _r(r),new Error(r)}function ve(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||R0(e,i,r)}function ee(t,e){return t}var N={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},$=class extends qt{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Sn=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var ph=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},nv=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ot.UNAUTHENTICATED))}shutdown(){}},rv=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},iv=class{constructor(e){this.t=e,this.currentUser=ot.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ve(this.o===void 0,42304);let r=this.i,i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve(),o=new Sn;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Sn,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},a=u=>{j("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(j("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Sn)}},0),s()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(j("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ve(typeof r.accessToken=="string",31837,{l:r}),new ph(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return ve(e===null||typeof e=="string",2055,{h:e}),new ot(e)}},ov=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=ot.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},sv=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new ov(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(ot.FIRST_PARTY))}shutdown(){}invalidateToken(){}},mh=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},av=class{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Pt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ve(this.o===void 0,3512);let r=o=>{o.error!=null&&j("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,j("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{j("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):j("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new mh(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ve(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new mh(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function t2(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Rc=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=t2(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%62))}return r}};function me(t,e){return t<e?-1:t>e?1:0}function cv(t,e){let n=Math.min(t.length,e.length);for(let r=0;r<n;r++){let i=t.charAt(r),o=e.charAt(r);if(i!==o)return Zy(i)===Zy(o)?me(i,o):Zy(i)?1:-1}return me(t.length,e.length)}var n2=55296,r2=57343;function Zy(t){let e=t.charCodeAt(0);return e>=n2&&e<=r2}function fs(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var zS="__name__",gh=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&H(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&H(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let o=t.compareSegments(e.get(i),n.get(i));if(o!==0)return o}return me(e.length,n.length)}static compareSegments(e,n){let r=t.isNumericId(e),i=t.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?t.extractNumericId(e).compare(t.extractNumericId(n)):cv(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return mr.fromString(e.substring(4,e.length-2))}},Me=class t extends gh{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new $(N.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},i2=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Gt=class t extends gh{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return i2.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===zS}static keyField(){return new t([zS])}static fromServerFormat(e){let n=[],r="",i=0,o=()=>{if(r.length===0)throw new $(N.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new $(N.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new $(N.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new $(N.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var G=class t{constructor(e){this.path=e}static fromPath(e){return new t(Me.fromString(e))}static fromName(e){return new t(Me.fromString(e).popFirst(5))}static empty(){return new t(Me.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Me.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Me.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Me(e.slice()))}};function o2(t,e,n){if(!n)throw new $(N.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function s2(t,e,n,r){if(e===!0&&r===!0)throw new $(N.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function qS(t){if(!G.isDocumentKey(t))throw new $(N.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function N0(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function $_(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":H(12329,{type:typeof t})}function yr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new $(N.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=$_(t);throw new $(N.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function ze(t,e){let n={typeString:t};return e&&(n.value=e),n}function Hc(t,e){if(!N0(t))throw new $(N.INVALID_ARGUMENT,"JSON must be an object");let n;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}let s=t[r];if(i&&typeof s!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){n=`Expected '${r}' field to equal '${o.value}'`;break}}if(n)throw new $(N.INVALID_ARGUMENT,n);return!0}var GS=-62135596800,WS=1e6,Oe=class t{static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*WS);return new t(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new $(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new $(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<GS)throw new $(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new $(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/WS}_compareTo(e){return this.seconds===e.seconds?me(this.nanoseconds,e.nanoseconds):me(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:t._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Hc(e,t._jsonSchema))return new t(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-GS;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};Oe._jsonSchemaVersion="firestore/timestamp/1.0",Oe._jsonSchema={type:ze("string",Oe._jsonSchemaVersion),seconds:ze("number"),nanoseconds:ze("number")};var J=class t{static fromTimestamp(e){return new t(e)}static min(){return new t(new Oe(0,0))}static max(){return new t(new Oe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Nc=-1,uv=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};uv.UNKNOWN_ID=-1;function a2(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=J.fromTimestamp(r===1e9?new Oe(n+1,0):new Oe(n,r));return new ao(i,G.empty(),e)}function c2(t){return new ao(t.readTime,t.key,Nc)}var ao=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(J.min(),G.empty(),Nc)}static max(){return new t(J.max(),G.empty(),Nc)}};function u2(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=G.comparator(t.documentKey,e.documentKey),n!==0?n:me(t.largestBatchId,e.largestBatchId))}var l2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",lv=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};async function As(t){if(t.code!==N.FAILED_PRECONDITION||t.message!==l2)throw t;j("LocalStore","Unexpectedly lost primary lease")}var O=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&H(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},u=>r(u))}),s=!0,o===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let l=u;n(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,n){return new t((r,i)=>{let o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}};function d2(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Rs(t){return t.name==="IndexedDbTransactionError"}var H_=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>r.writeSequenceNumber(i))}ae(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.ue&&this.ue(n),n}}t.ce=-1;return t})(),z_=-1;function zc(t){return t==null}function Mc(t){return t===0&&1/t==-1/0}function h2(t){return typeof t=="number"&&Number.isInteger(t)&&!Mc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var M0="";function f2(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=KS(e)),e=p2(t.get(n),e);return KS(e)}function p2(t,e){let n=e,r=t.length;for(let i=0;i<r;i++){let o=t.charAt(i);switch(o){case"\0":n+="";break;case M0:n+="";break;default:n+=o}}return n}function KS(t){return t+M0+""}var m2="remoteDocuments",x0="owner";var P0="mutationQueues";var O0="mutations";var k0="documentMutations",g2="remoteDocumentsV14";var L0="remoteDocumentGlobal";var F0="targets";var V0="targetDocuments";var U0="targetGlobal",B0="collectionParents";var j0="clientMetadata";var $0="bundles";var H0="namedQueries";var y2="indexConfiguration";var v2="indexState";var _2="indexEntries";var z0="documentOverlays";var E2="globals";var I2=[P0,O0,k0,m2,F0,x0,U0,V0,j0,L0,B0,$0,H0],eee=[...I2,z0],w2=[P0,O0,k0,g2,F0,x0,U0,V0,j0,L0,B0,$0,H0,z0],C2=w2,T2=[...C2,y2,v2,_2];var tee=[...T2,E2];function QS(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function hi(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function q0(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var ke=class t{constructor(e,n){this.comparator=e,this.root=n||qn.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,qn.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,qn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new cs(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new cs(this.root,e,this.comparator,!1)}getReverseIterator(){return new cs(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new cs(this.root,e,this.comparator,!0)}},cs=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},qn=class t{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new t(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw H(43730,{key:this.key,value:this.value});if(this.right.isRed())throw H(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw H(27949);return e+(this.isRed()?0:1)}};qn.EMPTY=null,qn.RED=!0,qn.BLACK=!1;qn.EMPTY=new class{constructor(){this.size=0}get key(){throw H(57766)}get value(){throw H(16141)}get color(){throw H(16727)}get left(){throw H(29726)}get right(){throw H(36894)}copy(e,n,r,i,o){return this}insert(e,n,r){return new qn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var st=class t{constructor(e){this.comparator=e,this.data=new ke(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new yh(this.data.getIterator())}getIteratorFrom(e){return new yh(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},yh=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var cn=class t{constructor(e){this.fields=e,e.sort(Gt.comparator)}static empty(){return new t([])}unionWith(e){let n=new st(Gt.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return fs(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var vh=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var yt=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new vh("Invalid base64 string: "+o):o}})(e);return new t(n)}static fromUint8Array(e){let n=(function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o})(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return me(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};yt.EMPTY_BYTE_STRING=new yt("");var D2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Er(t){if(ve(!!t,39018),typeof t=="string"){let e=0,n=D2.exec(t);if(ve(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ne(t.seconds),nanos:Ne(t.nanos)}}function Ne(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ir(t){return typeof t=="string"?yt.fromBase64String(t):yt.fromUint8Array(t)}var G0="server_timestamp",W0="__type__",K0="__previous_value__",Q0="__local_write_time__";function q_(t){return(t?.mapValue?.fields||{})[W0]?.stringValue===G0}function Qh(t){let e=t.mapValue.fields[K0];return q_(e)?Qh(e):e}function xc(t){let e=Er(t.mapValue.fields[Q0].timestampValue);return new Oe(e.seconds,e.nanos)}var dv=class{constructor(e,n,r,i,o,s,a,u,l,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l,this.isUsingEmulator=h}},_h="(default)",Eh=class t{constructor(e,n){this.projectId=e,this.database=n||_h}static empty(){return new t("","")}get isDefaultDatabase(){return this.database===_h}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var G_="__type__",Y0="__max__",ch={mapValue:{fields:{__type__:{stringValue:Y0}}}},W_="__vector__",ps="value";function ci(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?q_(t)?4:Z0(t)?9007199254740991:J0(t)?10:11:H(28295,{value:t})}function Wn(t,e){if(t===e)return!0;let n=ci(t);if(n!==ci(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return xc(t).isEqual(xc(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=Er(i.timestampValue),a=Er(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,o){return Ir(i.bytesValue).isEqual(Ir(o.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,o){return Ne(i.geoPointValue.latitude)===Ne(o.geoPointValue.latitude)&&Ne(i.geoPointValue.longitude)===Ne(o.geoPointValue.longitude)})(t,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return Ne(i.integerValue)===Ne(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Ne(i.doubleValue),a=Ne(o.doubleValue);return s===a?Mc(s)===Mc(a):isNaN(s)&&isNaN(a)}return!1})(t,e);case 9:return fs(t.arrayValue.values||[],e.arrayValue.values||[],Wn);case 10:case 11:return(function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(QS(s)!==QS(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!Wn(s[u],a[u])))return!1;return!0})(t,e);default:return H(52216,{left:t})}}function Pc(t,e){return(t.values||[]).find(n=>Wn(n,e))!==void 0}function ms(t,e){if(t===e)return 0;let n=ci(t),r=ci(e);if(n!==r)return me(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return me(t.booleanValue,e.booleanValue);case 2:return(function(o,s){let a=Ne(o.integerValue||o.doubleValue),u=Ne(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1})(t,e);case 3:return YS(t.timestampValue,e.timestampValue);case 4:return YS(xc(t),xc(e));case 5:return cv(t.stringValue,e.stringValue);case 6:return(function(o,s){let a=Ir(o),u=Ir(s);return a.compareTo(u)})(t.bytesValue,e.bytesValue);case 7:return(function(o,s){let a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=me(a[l],u[l]);if(h!==0)return h}return me(a.length,u.length)})(t.referenceValue,e.referenceValue);case 8:return(function(o,s){let a=me(Ne(o.latitude),Ne(s.latitude));return a!==0?a:me(Ne(o.longitude),Ne(s.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return JS(t.arrayValue,e.arrayValue);case 10:return(function(o,s){let a=o.fields||{},u=s.fields||{},l=a[ps]?.arrayValue,h=u[ps]?.arrayValue,p=me(l?.values?.length||0,h?.values?.length||0);return p!==0?p:JS(l,h)})(t.mapValue,e.mapValue);case 11:return(function(o,s){if(o===ch.mapValue&&s===ch.mapValue)return 0;if(o===ch.mapValue)return 1;if(s===ch.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),l=s.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let g=cv(u[p],h[p]);if(g!==0)return g;let y=ms(a[u[p]],l[h[p]]);if(y!==0)return y}return me(u.length,h.length)})(t.mapValue,e.mapValue);default:throw H(23264,{he:n})}}function YS(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return me(t,e);let n=Er(t),r=Er(e),i=me(n.seconds,r.seconds);return i!==0?i:me(n.nanos,r.nanos)}function JS(t,e){let n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){let o=ms(n[i],r[i]);if(o)return o}return me(n.length,r.length)}function gs(t){return hv(t)}function hv(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){let r=Er(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return Ir(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return G.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",i=!0;for(let o of n.values||[])i?i=!1:r+=",",r+=hv(o);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){let r=Object.keys(n.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${hv(n.fields[s])}`;return i+"}"})(t.mapValue):H(61005,{value:t})}function dh(t){switch(ci(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=Qh(t);return e?16+dh(e):16;case 5:return 2*t.stringValue.length;case 6:return Ir(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,o)=>i+dh(o),0)})(t.arrayValue);case 10:case 11:return(function(r){let i=0;return hi(r.fields,(o,s)=>{i+=o.length+dh(s)}),i})(t.mapValue);default:throw H(13486,{value:t})}}function fv(t){return!!t&&"integerValue"in t}function K_(t){return!!t&&"arrayValue"in t}function ZS(t){return!!t&&"nullValue"in t}function XS(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function hh(t){return!!t&&"mapValue"in t}function J0(t){return(t?.mapValue?.fields||{})[G_]?.stringValue===W_}function Tc(t){if(t.geoPointValue)return{geoPointValue:M({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:M({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return hi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Tc(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Tc(t.arrayValue.values[n]);return e}return M({},t)}function Z0(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===Y0}var ree={mapValue:{fields:{[G_]:{stringValue:W_},[ps]:{arrayValue:{}}}}};var Ot=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!hh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Tc(n)}setAll(e){let n=Gt.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){let u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=Tc(s):i.push(a.lastSegment())});let o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){let n=this.field(e.popLast());hh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Wn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];hh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){hi(n,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new t(Tc(this.value))}};function X0(t){let e=[];return hi(t.fields,(n,r)=>{let i=new Gt([n]);if(hh(r)){let o=X0(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new cn(e)}var Kt=class t{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new t(e,0,J.min(),J.min(),J.min(),Ot.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,J.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,J.min(),J.min(),Ot.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,J.min(),J.min(),Ot.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(J.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ot.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ot.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=J.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var ys=class{constructor(e,n){this.position=e,this.inclusive=n}};function e0(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let o=e[i],s=t.position[i];if(o.field.isKeyField()?r=G.comparator(G.fromName(s.referenceValue),n.key):r=ms(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function t0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Wn(t.position[n],e.position[n]))return!1;return!0}var vs=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function b2(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var Ih=class{},Qe=class t extends Ih{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new mv(e,n,r):n==="array-contains"?new vv(e,r):n==="in"?new _v(e,r):n==="not-in"?new Ev(e,r):n==="array-contains-any"?new Iv(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new gv(e,r):new yv(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ms(n,this.value)):n!==null&&ci(this.value)===ci(n)&&this.matchesComparison(ms(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return H(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Kn=class t extends Ih{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new t(e,n)}matches(e){return eA(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}};function eA(t){return t.op==="and"}function tA(t){return S2(t)&&eA(t)}function S2(t){for(let e of t.filters)if(e instanceof Kn)return!1;return!0}function pv(t){if(t instanceof Qe)return t.field.canonicalString()+t.op.toString()+gs(t.value);if(tA(t))return t.filters.map(e=>pv(e)).join(",");{let e=t.filters.map(n=>pv(n)).join(",");return`${t.op}(${e})`}}function nA(t,e){return t instanceof Qe?(function(r,i){return i instanceof Qe&&r.op===i.op&&r.field.isEqual(i.field)&&Wn(r.value,i.value)})(t,e):t instanceof Kn?(function(r,i){return i instanceof Kn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&nA(s,i.filters[a]),!0):!1})(t,e):void H(19439)}function rA(t){return t instanceof Qe?(function(n){return`${n.field.canonicalString()} ${n.op} ${gs(n.value)}`})(t):t instanceof Kn?(function(n){return n.op.toString()+" {"+n.getFilters().map(rA).join(" ,")+"}"})(t):"Filter"}var mv=class extends Qe{constructor(e,n,r){super(e,n,r),this.key=G.fromName(r.referenceValue)}matches(e){let n=G.comparator(e.key,this.key);return this.matchesComparison(n)}},gv=class extends Qe{constructor(e,n){super(e,"in",n),this.keys=iA("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},yv=class extends Qe{constructor(e,n){super(e,"not-in",n),this.keys=iA("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function iA(t,e){return(e.arrayValue?.values||[]).map(n=>G.fromName(n.referenceValue))}var vv=class extends Qe{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return K_(n)&&Pc(n.arrayValue,this.value)}},_v=class extends Qe{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&Pc(this.value.arrayValue,n)}},Ev=class extends Qe{constructor(e,n){super(e,"not-in",n)}matches(e){if(Pc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Pc(this.value.arrayValue,n)}},Iv=class extends Qe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!K_(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Pc(this.value.arrayValue,r))}};var wv=class{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Te=null}};function n0(t,e=null,n=[],r=[],i=null,o=null,s=null){return new wv(t,e,n,r,i,o,s)}function Q_(t){let e=ee(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>pv(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>(function(o){return o.field.canonicalString()+o.dir})(r)).join(","),zc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>gs(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>gs(r)).join(",")),e.Te=n}return e.Te}function Y_(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!b2(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!nA(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!t0(t.startAt,e.startAt)&&t0(t.endAt,e.endAt)}function Cv(t){return G.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var _s=class{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}};function A2(t,e,n,r,i,o,s,a){return new _s(t,e,n,r,i,o,s,a)}function Yh(t){return new _s(t)}function r0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function R2(t){return t.collectionGroup!==null}function Dc(t){let e=ee(t);if(e.Ie===null){e.Ie=[];let n=new Set;for(let o of e.explicitOrderBy)e.Ie.push(o),n.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new st(Gt.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new vs(o,r))}),n.has(Gt.keyField().canonicalString())||e.Ie.push(new vs(Gt.keyField(),r))}return e.Ie}function Gn(t){let e=ee(t);return e.Ee||(e.Ee=N2(e,Dc(t))),e.Ee}function N2(t,e){if(t.limitType==="F")return n0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new vs(i.field,o)});let n=t.endAt?new ys(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new ys(t.startAt.position,t.startAt.inclusive):null;return n0(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Tv(t,e,n){return new _s(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Jh(t,e){return Y_(Gn(t),Gn(e))&&t.limitType===e.limitType}function oA(t){return`${Q_(Gn(t))}|lt:${t.limitType}`}function os(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>rA(i)).join(", ")}]`),zc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>gs(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>gs(i)).join(",")),`Target(${r})`})(Gn(t))}; limitType=${t.limitType})`}function Zh(t,e){return e.isFoundDocument()&&(function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):G.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(t,e)&&(function(r,i){for(let o of Dc(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(t,e)&&(function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0})(t,e)&&(function(r,i){return!(r.startAt&&!(function(s,a,u){let l=e0(s,a,u);return s.inclusive?l<=0:l<0})(r.startAt,Dc(r),i)||r.endAt&&!(function(s,a,u){let l=e0(s,a,u);return s.inclusive?l>=0:l>0})(r.endAt,Dc(r),i))})(t,e)}function M2(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function sA(t){return(e,n)=>{let r=!1;for(let i of Dc(t)){let o=x2(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function x2(t,e,n){let r=t.field.isKeyField()?G.comparator(e.key,n.key):(function(o,s,a){let u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?ms(u,l):H(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return H(19790,{direction:t.dir})}}var wr=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){hi(this.inner,(n,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return q0(this.inner)}size(){return this.innerSize}};var P2=new ke(G.comparator);function Cr(){return P2}var aA=new ke(G.comparator);function wc(...t){let e=aA;for(let n of t)e=e.insert(n.key,n);return e}function cA(t){let e=aA;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function io(){return bc()}function uA(){return bc()}function bc(){return new wr(t=>t.toString(),(t,e)=>t.isEqual(e))}var O2=new ke(G.comparator),k2=new st(G.comparator);function ge(...t){let e=k2;for(let n of t)e=e.add(n);return e}var L2=new st(me);function F2(){return L2}function J_(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Mc(e)?"-0":e}}function lA(t){return{integerValue:""+t}}function V2(t,e){return h2(e)?lA(e):J_(t,e)}var Es=class{constructor(){this._=void 0}};function U2(t,e,n){return t instanceof co?(function(i,o){let s={fields:{[W0]:{stringValue:G0},[Q0]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&q_(o)&&(o=Qh(o)),o&&(s.fields[K0]=o),{mapValue:s}})(n,e):t instanceof uo?hA(t,e):t instanceof lo?fA(t,e):(function(i,o){let s=dA(i,o),a=i0(s)+i0(i.Ae);return fv(s)&&fv(i.Ae)?lA(a):J_(i.serializer,a)})(t,e)}function B2(t,e,n){return t instanceof uo?hA(t,e):t instanceof lo?fA(t,e):n}function dA(t,e){return t instanceof Is?(function(r){return fv(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}var co=class extends Es{},uo=class extends Es{constructor(e){super(),this.elements=e}};function hA(t,e){let n=pA(e);for(let r of t.elements)n.some(i=>Wn(i,r))||n.push(r);return{arrayValue:{values:n}}}var lo=class extends Es{constructor(e){super(),this.elements=e}};function fA(t,e){let n=pA(e);for(let r of t.elements)n=n.filter(i=>!Wn(i,r));return{arrayValue:{values:n}}}var Is=class extends Es{constructor(e,n){super(),this.serializer=e,this.Ae=n}};function i0(t){return Ne(t.integerValue||t.doubleValue)}function pA(t){return K_(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Dv=class{constructor(e,n){this.field=e,this.transform=n}};function j2(t,e){return t.field.isEqual(e.field)&&(function(r,i){return r instanceof uo&&i instanceof uo||r instanceof lo&&i instanceof lo?fs(r.elements,i.elements,Wn):r instanceof Is&&i instanceof Is?Wn(r.Ae,i.Ae):r instanceof co&&i instanceof co})(t.transform,e.transform)}var bv=class{constructor(e,n){this.version=e,this.transformResults=n}},an=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function fh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var ws=class{};function mA(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Oc(t.key,an.none()):new ho(t.key,t.data,an.none());{let n=t.data,r=Ot.empty(),i=new st(Gt.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Qn(t.key,r,new cn(i.toArray()),an.none())}}function $2(t,e,n){t instanceof ho?(function(i,o,s){let a=i.value.clone(),u=s0(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()})(t,e,n):t instanceof Qn?(function(i,o,s){if(!fh(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=s0(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(gA(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()})(t,e,n):(function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,n)}function Sc(t,e,n,r){return t instanceof ho?(function(o,s,a,u){if(!fh(o.precondition,s))return a;let l=o.value.clone(),h=a0(o.fieldTransforms,u,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null})(t,e,n,r):t instanceof Qn?(function(o,s,a,u){if(!fh(o.precondition,s))return a;let l=a0(o.fieldTransforms,u,s),h=s.data;return h.setAll(gA(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))})(t,e,n,r):(function(o,s,a){return fh(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a})(t,e,n)}function H2(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),o=dA(r.transform,i||null);o!=null&&(n===null&&(n=Ot.empty()),n.set(r.field,o))}return n||null}function o0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&fs(r,i,(o,s)=>j2(o,s))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var ho=class extends ws{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Qn=class extends ws{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function gA(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function s0(t,e,n){let r=new Map;ve(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){let o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,B2(s,a,n[i]))}return r}function a0(t,e,n){let r=new Map;for(let i of t){let o=i.transform,s=n.data.field(i.field);r.set(i.field,U2(o,s,e))}return r}var Oc=class extends ws{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},wh=class extends ws{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Sv=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&$2(o,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=Sc(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=Sc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=uA();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;let u=mA(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(J.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ge())}isEqual(e){return this.batchId===e.batchId&&fs(this.mutations,e.mutations,(n,r)=>o0(n,r))&&fs(this.baseMutations,e.baseMutations,(n,r)=>o0(n,r))}},Av=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){ve(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return O2})(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)}};var Rv=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Nv=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var $e,ye;function yA(t){switch(t){case N.OK:return H(64938);case N.CANCELLED:case N.UNKNOWN:case N.DEADLINE_EXCEEDED:case N.RESOURCE_EXHAUSTED:case N.INTERNAL:case N.UNAVAILABLE:case N.UNAUTHENTICATED:return!1;case N.INVALID_ARGUMENT:case N.NOT_FOUND:case N.ALREADY_EXISTS:case N.PERMISSION_DENIED:case N.FAILED_PRECONDITION:case N.ABORTED:case N.OUT_OF_RANGE:case N.UNIMPLEMENTED:case N.DATA_LOSS:return!0;default:return H(15467,{code:t})}}function vA(t){if(t===void 0)return _r("GRPC error has no .code"),N.UNKNOWN;switch(t){case $e.OK:return N.OK;case $e.CANCELLED:return N.CANCELLED;case $e.UNKNOWN:return N.UNKNOWN;case $e.DEADLINE_EXCEEDED:return N.DEADLINE_EXCEEDED;case $e.RESOURCE_EXHAUSTED:return N.RESOURCE_EXHAUSTED;case $e.INTERNAL:return N.INTERNAL;case $e.UNAVAILABLE:return N.UNAVAILABLE;case $e.UNAUTHENTICATED:return N.UNAUTHENTICATED;case $e.INVALID_ARGUMENT:return N.INVALID_ARGUMENT;case $e.NOT_FOUND:return N.NOT_FOUND;case $e.ALREADY_EXISTS:return N.ALREADY_EXISTS;case $e.PERMISSION_DENIED:return N.PERMISSION_DENIED;case $e.FAILED_PRECONDITION:return N.FAILED_PRECONDITION;case $e.ABORTED:return N.ABORTED;case $e.OUT_OF_RANGE:return N.OUT_OF_RANGE;case $e.UNIMPLEMENTED:return N.UNIMPLEMENTED;case $e.DATA_LOSS:return N.DATA_LOSS;default:return H(39323,{code:t})}}(ye=$e||($e={}))[ye.OK=0]="OK",ye[ye.CANCELLED=1]="CANCELLED",ye[ye.UNKNOWN=2]="UNKNOWN",ye[ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ye[ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ye[ye.NOT_FOUND=5]="NOT_FOUND",ye[ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",ye[ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",ye[ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",ye[ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ye[ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ye[ye.ABORTED=10]="ABORTED",ye[ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",ye[ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",ye[ye.INTERNAL=13]="INTERNAL",ye[ye.UNAVAILABLE=14]="UNAVAILABLE",ye[ye.DATA_LOSS=15]="DATA_LOSS";var z2=null;function q2(){return new TextEncoder}var G2=new mr([4294967295,4294967295],0);function c0(t){let e=q2().encode(t),n=new Gy;return n.update(e),new Uint8Array(n.digest())}function u0(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new mr([n,r],0),new mr([i,o],0)]}var Mv=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new oo(`Invalid padding: ${n}`);if(r<0)throw new oo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new oo(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new oo(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=mr.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(mr.fromNumber(r)));return i.compare(G2)===1&&(i=new mr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;let n=c0(e),[r,i]=u0(n);for(let o=0;o<this.hashCount;o++){let s=this.ye(r,i,o);if(!this.we(s))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new t(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.ge===0)return;let n=c0(e),[r,i]=u0(n);for(let o=0;o<this.hashCount;o++){let s=this.ye(r,i,o);this.Se(s)}}Se(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},oo=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Ch=class t{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,kc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(J.min(),i,new ke(me),Cr(),ge())}},kc=class t{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,ge(),ge(),ge())}};var us=class{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}},Th=class{constructor(e,n){this.targetId=e,this.Ce=n}},Dh=class{constructor(e,n,r=yt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},bh=class{constructor(){this.ve=0,this.Fe=l0(),this.Me=yt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ge(),n=ge(),r=ge();return this.Fe.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:H(38017,{changeType:o})}}),new kc(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=l0()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ve(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}},xv=class{constructor(e){this.Ge=e,this.ze=new Map,this.je=Cr(),this.Je=uh(),this.He=uh(),this.Ye=new ke(me)}Ze(e){for(let n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(let n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{let r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:H(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,i)=>{this.rt(i)&&n(i)})}st(e){let n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){let o=i.target;if(Cv(o))if(r===0){let s=new G(o.path);this.et(n,s,Kt.newNoDocument(s,J.min()))}else ve(r===1,20013,{expectedCount:r});else{let s=this._t(n);if(s!==r){let a=this.ut(e),u=a?this.ct(a,e,s):1;if(u!==0){this.it(n);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,l)}z2?.lt((function(h,p,g,y,b){let R={localCacheCount:h,existenceFilterCount:p.count,databaseId:g.database,projectId:g.projectId},A=p.unchangedNames;return A&&(R.bloomFilter={applied:b===0,hashCount:A?.hashCount??0,bitmapLength:A?.bits?.bitmap?.length??0,padding:A?.bits?.padding??0,mightContain:k=>y?.mightContain(k)??!1}),R})(s,e.Ce,this.Ge.ht(),a,u))}}}}ut(e){let n=e.Ce.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n,s,a;try{s=Ir(r).toUint8Array()}catch(u){if(u instanceof vh)return hs("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new Mv(s,i,o)}catch(u){return hs(u instanceof oo?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.ge===0?null:a}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){let r=this.Ge.getRemoteKeysForTarget(n),i=0;return r.forEach(o=>{let s=this.Ge.ht(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.et(n,o,null),i++)}),i}Tt(e){let n=new Map;this.ze.forEach((o,s)=>{let a=this.ot(s);if(a){if(o.current&&Cv(a.target)){let u=new G(a.target.path);this.It(u).has(s)||this.Et(s,u)||this.et(s,u,Kt.newNoDocument(u,e))}o.Be&&(n.set(s,o.ke()),o.qe())}});let r=ge();this.He.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let l=this.ot(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.je.forEach((o,s)=>s.setReadTime(e));let i=new Ch(e,n,this.Ye,this.je,r);return this.je=Cr(),this.Je=uh(),this.He=uh(),this.Ye=new ke(me),i}Xe(e,n){if(!this.rt(e))return;let r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;let i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){let n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new bh,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new st(me),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new st(me),this.Je=this.Je.insert(e,n)),n}rt(e){let n=this.ot(e)!==null;return n||j("WatchChangeAggregator","Detected inactive target",e),n}ot(e){let n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new bh),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}};function uh(){return new ke(G.comparator)}function l0(){return new ke(G.comparator)}var W2={asc:"ASCENDING",desc:"DESCENDING"},K2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Q2={and:"AND",or:"OR"},Pv=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function Ov(t,e){return t.useProto3Json||zc(e)?e:{value:e}}function Sh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function _A(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Y2(t,e){return Sh(t,e.toTimestamp())}function Wt(t){return ve(!!t,49232),J.fromTimestamp((function(n){let r=Er(n);return new Oe(r.seconds,r.nanos)})(t))}function Z_(t,e){return kv(t,e).canonicalString()}function kv(t,e){let n=(function(i){return new Me(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?n:n.child(e)}function EA(t){let e=Me.fromString(t);return ve(bA(e),10190,{key:e.toString()}),e}function Ah(t,e){return Z_(t.databaseId,e.path)}function Ac(t,e){let n=EA(e);if(n.get(1)!==t.databaseId.projectId)throw new $(N.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new $(N.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new G(wA(n))}function IA(t,e){return Z_(t.databaseId,e)}function J2(t){let e=EA(t);return e.length===4?Me.emptyPath():wA(e)}function Lv(t){return new Me(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function wA(t){return ve(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function d0(t,e,n){return{name:Ah(t,e),fields:n.value.mapValue.fields}}function Z2(t,e){return"found"in e?(function(r,i){ve(!!i.found,43571),i.found.name,i.found.updateTime;let o=Ac(r,i.found.name),s=Wt(i.found.updateTime),a=i.found.createTime?Wt(i.found.createTime):J.min(),u=new Ot({mapValue:{fields:i.found.fields}});return Kt.newFoundDocument(o,s,a,u)})(t,e):"missing"in e?(function(r,i){ve(!!i.missing,3894),ve(!!i.readTime,22933);let o=Ac(r,i.missing),s=Wt(i.readTime);return Kt.newNoDocument(o,s)})(t,e):H(7234,{result:e})}function X2(t,e){let n;if("targetChange"in e){e.targetChange;let r=(function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:H(39313,{state:l})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(l,h){return l.useProto3Json?(ve(h===void 0||typeof h=="string",58123),yt.fromBase64String(h||"")):(ve(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),yt.fromUint8Array(h||new Uint8Array))})(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&(function(l){let h=l.code===void 0?N.UNKNOWN:vA(l.code);return new $(h,l.message||"")})(s);n=new Dh(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Ac(t,r.document.name),o=Wt(r.document.updateTime),s=r.document.createTime?Wt(r.document.createTime):J.min(),a=new Ot({mapValue:{fields:r.document.fields}}),u=Kt.newFoundDocument(i,o,s,a),l=r.targetIds||[],h=r.removedTargetIds||[];n=new us(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Ac(t,r.document),o=r.readTime?Wt(r.readTime):J.min(),s=Kt.newNoDocument(i,o),a=r.removedTargetIds||[];n=new us([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Ac(t,r.document),o=r.removedTargetIds||[];n=new us([],o,i,null)}else{if(!("filter"in e))return H(11601,{Rt:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new Nv(i,o),a=r.targetId;n=new Th(a,s)}}return n}function CA(t,e){let n;if(e instanceof ho)n={update:d0(t,e.key,e.value)};else if(e instanceof Oc)n={delete:Ah(t,e.key)};else if(e instanceof Qn)n={update:d0(t,e.key,e.data),updateMask:cU(e.fieldMask)};else{if(!(e instanceof wh))return H(16599,{Vt:e.type});n={verify:Ah(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>(function(o,s){let a=s.transform;if(a instanceof co)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof uo)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof lo)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Is)return{fieldPath:s.field.canonicalString(),increment:a.Ae};throw H(20930,{transform:s.transform})})(0,r))),e.precondition.isNone||(n.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:Y2(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:H(27497)})(t,e.precondition)),n}function eU(t,e){return t&&t.length>0?(ve(e!==void 0,14353),t.map(n=>(function(i,o){let s=i.updateTime?Wt(i.updateTime):Wt(o);return s.isEqual(J.min())&&(s=Wt(o)),new bv(s,i.transformResults||[])})(n,e))):[]}function tU(t,e){return{documents:[IA(t,e.path)]}}function nU(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=IA(t,i);let o=(function(l){if(l.length!==0)return DA(Kn.create(l,"and"))})(e.filters);o&&(n.structuredQuery.where=o);let s=(function(l){if(l.length!==0)return l.map(h=>(function(g){return{field:ss(g.field),direction:oU(g.dir)}})(h))})(e.orderBy);s&&(n.structuredQuery.orderBy=s);let a=Ov(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=(function(l){return{before:l.inclusive,values:l.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(l){return{before:!l.inclusive,values:l.position}})(e.endAt)),{ft:n,parent:i}}function rU(t){let e=J2(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){ve(r===1,65062);let h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];n.where&&(o=(function(p){let g=TA(p);return g instanceof Kn&&tA(g)?g.getFilters():[g]})(n.where));let s=[];n.orderBy&&(s=(function(p){return p.map(g=>(function(b){return new vs(as(b.field),(function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(b.direction))})(g))})(n.orderBy));let a=null;n.limit&&(a=(function(p){let g;return g=typeof p=="object"?p.value:p,zc(g)?null:g})(n.limit));let u=null;n.startAt&&(u=(function(p){let g=!!p.before,y=p.values||[];return new ys(y,g)})(n.startAt));let l=null;return n.endAt&&(l=(function(p){let g=!p.before,y=p.values||[];return new ys(y,g)})(n.endAt)),A2(e,i,s,o,a,"F",u,l)}function iU(t,e){let n=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return H(28987,{purpose:i})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function TA(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=as(n.unaryFilter.field);return Qe.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=as(n.unaryFilter.field);return Qe.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=as(n.unaryFilter.field);return Qe.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=as(n.unaryFilter.field);return Qe.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return H(61313);default:return H(60726)}})(t):t.fieldFilter!==void 0?(function(n){return Qe.create(as(n.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return H(58110);default:return H(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Kn.create(n.compositeFilter.filters.map(r=>TA(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return H(1026)}})(n.compositeFilter.op))})(t):H(30097,{filter:t})}function oU(t){return W2[t]}function sU(t){return K2[t]}function aU(t){return Q2[t]}function ss(t){return{fieldPath:t.canonicalString()}}function as(t){return Gt.fromServerFormat(t.fieldPath)}function DA(t){return t instanceof Qe?(function(n){if(n.op==="=="){if(XS(n.value))return{unaryFilter:{field:ss(n.field),op:"IS_NAN"}};if(ZS(n.value))return{unaryFilter:{field:ss(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(XS(n.value))return{unaryFilter:{field:ss(n.field),op:"IS_NOT_NAN"}};if(ZS(n.value))return{unaryFilter:{field:ss(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ss(n.field),op:sU(n.op),value:n.value}}})(t):t instanceof Kn?(function(n){let r=n.getFilters().map(i=>DA(i));return r.length===1?r[0]:{compositeFilter:{op:aU(n.op),filters:r}}})(t):H(54877,{filter:t})}function cU(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function bA(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var Lc=class t{constructor(e,n,r,i,o=J.min(),s=J.min(),a=yt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Fv=class{constructor(e){this.yt=e}};function uU(t){let e=rU({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Tv(e,e.limit,"L"):e}var Rh=class{constructor(){}Dt(e,n){this.Ct(e,n),n.vt()}Ct(e,n){if("nullValue"in e)this.Ft(n,5);else if("booleanValue"in e)this.Ft(n,10),n.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(n,15),n.Mt(Ne(e.integerValue));else if("doubleValue"in e){let r=Ne(e.doubleValue);isNaN(r)?this.Ft(n,13):(this.Ft(n,15),Mc(r)?n.Mt(0):n.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(n,20),typeof r=="string"&&(r=Er(r)),n.xt(`${r.seconds||""}`),n.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,n),this.Nt(n);else if("bytesValue"in e)this.Ft(n,30),n.Bt(Ir(e.bytesValue)),this.Nt(n);else if("referenceValue"in e)this.Lt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ft(n,45),n.Mt(r.latitude||0),n.Mt(r.longitude||0)}else"mapValue"in e?Z0(e)?this.Ft(n,Number.MAX_SAFE_INTEGER):J0(e)?this.kt(e.mapValue,n):(this.qt(e.mapValue,n),this.Nt(n)):"arrayValue"in e?(this.Qt(e.arrayValue,n),this.Nt(n)):H(19022,{$t:e})}Ot(e,n){this.Ft(n,25),this.Ut(e,n)}Ut(e,n){n.xt(e)}qt(e,n){let r=e.fields||{};this.Ft(n,55);for(let i of Object.keys(r))this.Ot(i,n),this.Ct(r[i],n)}kt(e,n){let r=e.fields||{};this.Ft(n,53);let i=ps,o=r[i].arrayValue?.values?.length||0;this.Ft(n,15),n.Mt(Ne(o)),this.Ot(i,n),this.Ct(r[i],n)}Qt(e,n){let r=e.values||[];this.Ft(n,50);for(let i of r)this.Ct(i,n)}Lt(e,n){this.Ft(n,37),G.fromName(e).path.forEach(r=>{this.Ft(n,60),this.Ut(r,n)})}Ft(e,n){e.Mt(n)}Nt(e){e.Mt(2)}};Rh.Kt=new Rh;var Vv=class{constructor(){this.Cn=new Uv}addToCollectionParentIndex(e,n){return this.Cn.add(n),O.resolve()}getCollectionParents(e,n){return O.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return O.resolve()}deleteFieldIndex(e,n){return O.resolve()}deleteAllFieldIndexes(e){return O.resolve()}createTargetIndexes(e,n){return O.resolve()}getDocumentsMatchingTarget(e,n){return O.resolve(null)}getIndexType(e,n){return O.resolve(0)}getFieldIndexes(e,n){return O.resolve([])}getNextCollectionGroupToUpdate(e){return O.resolve(null)}getMinOffset(e,n){return O.resolve(ao.min())}getMinOffsetFromCollectionGroup(e,n){return O.resolve(ao.min())}updateCollectionGroup(e,n,r){return O.resolve()}updateIndexEntries(e,n){return O.resolve()}},Uv=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new st(Me.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new st(Me.comparator)).toArray()}};var iee=new Uint8Array(0);var h0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},SA=41943040,sn=class t{static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}};sn.DEFAULT_COLLECTION_PERCENTILE=10,sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,sn.DEFAULT=new sn(SA,sn.DEFAULT_COLLECTION_PERCENTILE,sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),sn.DISABLED=new sn(-1,0,0);var Fc=class t{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new t(0)}static cr(){return new t(-1)}};var f0="LruGarbageCollector",lU=1048576;function p0([t,e],[n,r]){let i=me(t,n);return i===0?me(e,r):i}var Bv=class{constructor(e){this.Ir=e,this.buffer=new st(p0),this.Er=0}dr(){return++this.Er}Ar(e){let n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{let r=this.buffer.last();p0(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}},jv=class{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){j(f0,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Rs(n)?j(f0,"Ignoring IndexedDB error during garbage collection: ",n):await As(n)}await this.Vr(3e5)})}},$v=class{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return O.resolve(H_.ce);let r=new Bv(n);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(j("LruGarbageCollector","Garbage collection skipped; disabled"),O.resolve(h0)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(j("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),h0):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,o,s,a,u,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(j("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,n))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),is()<=pe.DEBUG&&j("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-h}ms`),O.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function dU(t,e){return new $v(t,e)}var Hv=class{constructor(){this.changes=new wr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Kt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?O.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var zv=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var qv=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Sc(r.mutation,i,cn.empty(),Oe.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ge()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ge()){let i=io();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=wc();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){let r=io();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ge()))}populateOverlays(e,n,r){let i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,i){let o=Cr(),s=bc(),a=(function(){return bc()})();return n.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof Qn)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),Sc(h.mutation,l,h.mutation.getFieldMask(),Oe.now())):s.set(l.key,cn.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,h)=>s.set(l,h)),n.forEach((l,h)=>a.set(l,new zv(h,s.get(l)??null))),a))}recalculateAndSaveOverlays(e,n){let r=bc(),i=new ke((s,a)=>s-a),o=ge();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(let a of s)a.keys().forEach(u=>{let l=n.get(u);if(l===null)return;let h=r.get(u)||cn.empty();h=a.applyToLocalView(l,h),r.set(u,h);let p=(i.get(a.batchId)||ge()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,p=uA();h.forEach(g=>{if(!o.has(g)){let y=mA(n.get(g),r.get(g));y!==null&&p.set(g,y),o=o.add(g)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return O.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return(function(s){return G.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):R2(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):O.resolve(io()),a=Nc,u=o;return s.next(l=>O.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?O.resolve():this.remoteDocumentCache.getEntry(e,h).next(g=>{u=u.insert(h,g)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,ge())).next(h=>({batchId:a,changes:cA(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new G(n)).next(r=>{let i=wc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let o=n.collectionGroup,s=wc();return this.indexManager.getCollectionParents(e,o).next(a=>O.forEach(a,u=>{let l=(function(p,g){return new _s(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(n,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,g)=>{s=s.insert(p,g)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((u,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,Kt.newInvalidDocument(h)))});let a=wc();return s.forEach((u,l)=>{let h=o.get(u);h!==void 0&&Sc(h.mutation,l,cn.empty(),Oe.now()),Zh(n,l)&&(a=a.insert(u,l))}),a})}};var Gv=class{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return O.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(i){return{id:i.id,version:i.version,createTime:Wt(i.createTime)}})(n)),O.resolve()}getNamedQuery(e,n){return O.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(i){return{name:i.name,query:uU(i.bundledQuery),readTime:Wt(i.readTime)}})(n)),O.resolve()}};var Wv=class{constructor(){this.overlays=new ke(G.comparator),this.qr=new Map}getOverlay(e,n){return O.resolve(this.overlays.get(n))}getOverlays(e,n){let r=io();return O.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.St(e,n,o)}),O.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.qr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.qr.delete(r)),O.resolve()}getOverlaysForCollection(e,n,r){let i=io(),o=n.length+1,s=new G(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return O.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new ke((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=io(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=io(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return O.resolve(a)}St(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new Rv(n,r));let o=this.qr.get(n);o===void 0&&(o=ge(),this.qr.set(n,o)),this.qr.set(n,o.add(r.key))}};var Kv=class{constructor(){this.sessionToken=yt.EMPTY_BYTE_STRING}getSessionToken(e){return O.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,O.resolve()}};var Vc=class{constructor(){this.Qr=new st(He.$r),this.Ur=new st(He.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){let r=new He(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new He(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){let n=new G(new Me([])),r=new He(n,e),i=new He(n,e+1),o=[];return this.Ur.forEachInRange([r,i],s=>{this.Gr(s),o.push(s.key)}),o}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){let n=new G(new Me([])),r=new He(n,e),i=new He(n,e+1),o=ge();return this.Ur.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let n=new He(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},He=class{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return G.comparator(e.key,n.key)||me(e.Yr,n.Yr)}static Kr(e,n){return me(e.Yr,n.Yr)||G.comparator(e.key,n.key)}};var Qv=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new st(He.$r)}checkEmpty(e){return O.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new Sv(o,n,r,i);this.mutationQueue.push(s);for(let a of i)this.Zr=this.Zr.add(new He(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return O.resolve(s)}lookupMutationBatch(e,n){return O.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.ei(r),o=i<0?0:i;return O.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return O.resolve(this.mutationQueue.length===0?z_:this.tr-1)}getAllMutationBatches(e){return O.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new He(n,0),i=new He(n,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([r,i],s=>{let a=this.Xr(s.Yr);o.push(a)}),O.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new st(me);return n.forEach(i=>{let o=new He(i,0),s=new He(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,s],a=>{r=r.add(a.Yr)})}),O.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=r;G.isDocumentKey(o)||(o=o.child(""));let s=new He(new G(o),0),a=new st(me);return this.Zr.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.Yr)),!0)},s),O.resolve(this.ti(a))}ti(e){let n=[];return e.forEach(r=>{let i=this.Xr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){ve(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return O.forEach(n.mutations,i=>{let o=new He(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){let r=new He(n,0),i=this.Zr.firstAfterOrEqual(r);return O.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,O.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){let n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var Yv=class{constructor(e){this.ri=e,this.docs=(function(){return new ke(G.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return O.resolve(r?r.document.mutableCopy():Kt.newInvalidDocument(n))}getEntries(e,n){let r=Cr();return n.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Kt.newInvalidDocument(i))}),O.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=Cr(),s=n.path,a=new G(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||u2(c2(h),r)<=0||(i.has(h.key)||Zh(n,h))&&(o=o.insert(h.key,h.mutableCopy()))}return O.resolve(o)}getAllFromCollectionGroup(e,n,r,i){H(9500)}ii(e,n){return O.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Jv(this)}getSize(e){return O.resolve(this.size)}},Jv=class extends Hv{constructor(e){super(),this.Nr=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),O.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}};var Zv=class{constructor(e){this.persistence=e,this.si=new wr(n=>Q_(n),Y_),this.lastRemoteSnapshotVersion=J.min(),this.highestTargetId=0,this.oi=0,this._i=new Vc,this.targetCount=0,this.ai=Fc.ur()}forEachTarget(e,n){return this.si.forEach((r,i)=>n(i)),O.resolve()}getLastRemoteSnapshotVersion(e){return O.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return O.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),O.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),O.resolve()}Pr(e){this.si.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.ai=new Fc(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,O.resolve()}updateTargetData(e,n){return this.Pr(n),O.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,O.resolve()}removeTargets(e,n,r){let i=0,o=[];return this.si.forEach((s,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.si.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),O.waitFor(o).next(()=>i)}getTargetCount(e){return O.resolve(this.targetCount)}getTargetData(e,n){let r=this.si.get(n)||null;return O.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),O.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);let i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),O.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),O.resolve()}getMatchingKeysForTargetId(e,n){let r=this._i.Hr(n);return O.resolve(r)}containsKey(e,n){return O.resolve(this._i.containsKey(n))}};var Nh=class{constructor(e,n){this.ui={},this.overlays={},this.ci=new H_(0),this.li=!1,this.li=!0,this.hi=new Kv,this.referenceDelegate=e(this),this.Pi=new Zv(this),this.indexManager=new Vv,this.remoteDocumentCache=(function(i){return new Yv(i)})(r=>this.referenceDelegate.Ti(r)),this.serializer=new Fv(n),this.Ii=new Gv(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Wv,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new Qv(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){j("MemoryPersistence","Starting transaction:",e);let i=new Xv(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ai(e,n){return O.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}},Xv=class extends lv{constructor(e){super(),this.currentSequenceNumber=e}},e_=class t{constructor(e){this.persistence=e,this.Ri=new Vc,this.Vi=null}static mi(e){return new t(e)}get fi(){if(this.Vi)return this.Vi;throw H(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),O.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),O.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),O.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(i=>this.fi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.fi.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return O.forEach(this.fi,r=>{let i=G.fromPath(r);return this.gi(e,i).next(o=>{o||n.removeEntry(i,J.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return O.or([()=>O.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}},Mh=class t{constructor(e,n){this.persistence=e,this.pi=new wr(r=>f2(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=dU(this,n)}static mi(e,n){return new t(e,n)}Ei(){}di(e){return O.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){let n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return O.forEach(this.pi,(r,i)=>this.br(e,r,i).next(o=>o?O.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ii(e,s=>this.br(e,s,n).next(a=>{a||(r++,o.removeEntry(s,J.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),O.resolve()}removeTarget(e,n){let r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),O.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),O.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),O.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=dh(e.data.value)),n}br(e,n,r){return O.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{let i=this.pi.get(n);return O.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var t_=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=ge(),i=ge();for(let o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new t(e,n.fromCache,r,i)}};var n_=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var r_=class{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return Nb()?8:d2(it())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){let o={result:null};return this.ys(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ws(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new n_;return this.Ss(e,n,s).next(a=>{if(o.result=a,this.Vs)return this.bs(e,n,s,a.size)})}).next(()=>o.result)}bs(e,n,r,i){return r.documentReadCount<this.fs?(is()<=pe.DEBUG&&j("QueryEngine","SDK will not create cache indexes for query:",os(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),O.resolve()):(is()<=pe.DEBUG&&j("QueryEngine","Query:",os(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(is()<=pe.DEBUG&&j("QueryEngine","The SDK decides to create cache indexes for query:",os(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Gn(n))):O.resolve())}ys(e,n){if(r0(n))return O.resolve(null);let r=Gn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Tv(n,null,"F"),r=Gn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=ge(...o);return this.ps.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.Ds(n,a);return this.Cs(n,l,s,u.readTime)?this.ys(e,Tv(n,null,"F")):this.vs(e,l,n,u)}))})))}ws(e,n,r,i){return r0(n)||i.isEqual(J.min())?O.resolve(null):this.ps.getDocuments(e,r).next(o=>{let s=this.Ds(n,o);return this.Cs(n,s,r,i)?O.resolve(null):(is()<=pe.DEBUG&&j("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),os(n)),this.vs(e,s,n,a2(i,Nc)).next(a=>a))})}Ds(e,n){let r=new st(sA(e));return n.forEach((i,o)=>{Zh(e,o)&&(r=r.add(o))}),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ss(e,n,r){return is()<=pe.DEBUG&&j("QueryEngine","Using full collection scan to execute query:",os(n)),this.ps.getDocumentsMatchingQuery(e,n,ao.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}};var X_="LocalStore",hU=3e8,i_=class{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new ke(me),this.xs=new wr(o=>Q_(o),Y_),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new qv(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}};function fU(t,e,n,r){return new i_(t,e,n,r)}async function AA(t,e){let n=ee(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=ge();for(let l of i){s.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of o){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(l=>({Ls:l,removedBatchIds:s,addedBatchIds:a}))})})}function pU(t,e){let n=ee(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(a,u,l,h){let p=l.batch,g=p.keys(),y=O.resolve();return g.forEach(b=>{y=y.next(()=>h.getEntry(u,b)).next(R=>{let A=l.docVersions.get(b);ve(A!==null,48541),R.version.compareTo(A)<0&&(p.applyToRemoteDocument(R,l),R.isValidDocument()&&(R.setReadTime(l.commitVersion),h.addEntry(R)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,p))})(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let u=ge();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u})(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function RA(t){let e=ee(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function mU(t,e){let n=ee(t),r=e.snapshotVersion,i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;let a=[];e.targetChanges.forEach((h,p)=>{let g=i.get(p);if(!g)return;a.push(n.Pi.removeMatchingKeys(o,h.removedDocuments,p).next(()=>n.Pi.addMatchingKeys(o,h.addedDocuments,p)));let y=g.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(yt.EMPTY_BYTE_STRING,J.min()).withLastLimboFreeSnapshotVersion(J.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(p,y),(function(R,A,k){return R.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=hU?!0:k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0})(g,y,h)&&a.push(n.Pi.updateTargetData(o,y))});let u=Cr(),l=ge();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(gU(o,s,e.documentUpdates).next(h=>{u=h.ks,l=h.qs})),!r.isEqual(J.min())){let h=n.Pi.getLastRemoteSnapshotVersion(o).next(p=>n.Pi.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return O.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(n.Ms=i,o))}function gU(t,e,n){let r=ge(),i=ge();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=Cr();return n.forEach((a,u)=>{let l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(J.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):j(X_,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{ks:s,qs:i}})}function yU(t,e){let n=ee(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=z_),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function vU(t,e){let n=ee(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Pi.getTargetData(r,e).next(o=>o?(i=o,O.resolve(i)):n.Pi.allocateTargetId(r).next(s=>(i=new Lc(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function o_(t,e,n){let r=ee(t),i=r.Ms.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!Rs(s))throw s;j(X_,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function m0(t,e,n){let r=ee(t),i=J.min(),o=ge();return r.persistence.runTransaction("Execute query","readwrite",s=>(function(u,l,h){let p=ee(u),g=p.xs.get(h);return g!==void 0?O.resolve(p.Ms.get(g)):p.Pi.getTargetData(l,h)})(r,s,Gn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.Fs.getDocumentsMatchingQuery(s,e,n?i:J.min(),n?o:ge())).next(a=>(_U(r,M2(e),a),{documents:a,Qs:o})))}function _U(t,e,n){let r=t.Os.get(e)||J.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.Os.set(e,r)}var xh=class{constructor(){this.activeTargetIds=F2()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var s_=class{constructor(){this.Mo=new xh,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new xh,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var a_=class{Oo(e){}shutdown(){}};var g0="ConnectivityMonitor",Ph=class{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){j(g0,"Network connectivity changed: AVAILABLE");for(let e of this.qo)e(0)}ko(){j(g0,"Network connectivity changed: UNAVAILABLE");for(let e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var lh=null;function c_(){return lh===null?lh=(function(){return 268435456+Math.round(2147483648*Math.random())})():lh++,"0x"+lh.toString(16)}var Xy="RestConnection",EU={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},u_=class{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===_h?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,o){let s=c_(),a=this.zo(e,n.toUriEncodedString());j(Xy,`Sending RPC '${e}' ${s}:`,a,r);let u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,i,o);let{host:l}=new URL(a),h=Kr(l);return this.Jo(e,a,u,r,h).then(p=>(j(Xy,`Received RPC '${e}' ${s}: `,p),p),p=>{throw hs(Xy,`RPC '${e}' ${s} failed with error: `,p,"url: ",a,"request:",r),p})}Ho(e,n,r,i,o,s){return this.Go(e,n,r,i,o)}jo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ss})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}zo(e,n){let r=EU[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}};var l_=class{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}};var gt="WebChannelConnection",d_=class extends u_{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,o){let s=c_();return new Promise((a,u)=>{let l=new Wy;l.setWithCredentials(!0),l.listenOnce(Ky.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Ic.NO_ERROR:let p=l.getResponseJson();j(gt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),a(p);break;case Ic.TIMEOUT:j(gt,`RPC '${e}' ${s} timed out`),u(new $(N.DEADLINE_EXCEEDED,"Request time out"));break;case Ic.HTTP_ERROR:let g=l.getStatus();if(j(gt,`RPC '${e}' ${s} failed with status:`,g,"response text:",l.getResponseText()),g>0){let y=l.getResponseJson();Array.isArray(y)&&(y=y[0]);let b=y?.error;if(b&&b.status&&b.message){let R=(function(k){let q=k.toLowerCase().replace(/_/g,"-");return Object.values(N).indexOf(q)>=0?q:N.UNKNOWN})(b.status);u(new $(R,b.message))}else u(new $(N.UNKNOWN,"Server responded with status "+l.getStatus()))}else u(new $(N.UNAVAILABLE,"Connection failed."));break;default:H(9055,{l_:e,streamId:s,h_:l.getLastErrorCode(),P_:l.getLastError()})}}finally{j(gt,`RPC '${e}' ${s} completed.`)}});let h=JSON.stringify(i);j(gt,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",h,r,15)})}T_(e,n,r){let i=c_(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Jy(),a=Yy(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;let h=o.join("");j(gt,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=s.createWebChannel(h,u);this.I_(p);let g=!1,y=!1,b=new l_({Yo:A=>{y?j(gt,`Not sending because RPC '${e}' stream ${i} is closed:`,A):(g||(j(gt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),g=!0),j(gt,`RPC '${e}' stream ${i} sending:`,A),p.send(A))},Zo:()=>p.close()}),R=(A,k,q)=>{A.listen(k,le=>{try{q(le)}catch(at){setTimeout(()=>{throw at},0)}})};return R(p,rs.EventType.OPEN,()=>{y||(j(gt,`RPC '${e}' stream ${i} transport opened.`),b.o_())}),R(p,rs.EventType.CLOSE,()=>{y||(y=!0,j(gt,`RPC '${e}' stream ${i} transport closed`),b.a_(),this.E_(p))}),R(p,rs.EventType.ERROR,A=>{y||(y=!0,hs(gt,`RPC '${e}' stream ${i} transport errored. Name:`,A.name,"Message:",A.message),b.a_(new $(N.UNAVAILABLE,"The operation could not be completed")))}),R(p,rs.EventType.MESSAGE,A=>{if(!y){let k=A.data[0];ve(!!k,16349);let q=k,le=q?.error||q[0]?.error;if(le){j(gt,`RPC '${e}' stream ${i} received error:`,le);let at=le.status,St=(function(v){let E=$e[v];if(E!==void 0)return vA(E)})(at),Ye=le.message;St===void 0&&(St=N.INTERNAL,Ye="Unknown error status: "+at+" with message "+le.message),y=!0,b.a_(new $(St,Ye)),p.close()}else j(gt,`RPC '${e}' stream ${i} received:`,k),b.u_(k)}}),R(a,Qy.STAT_EVENT,A=>{A.stat===ah.PROXY?j(gt,`RPC '${e}' stream ${i} detected buffering proxy`):A.stat===ah.NOPROXY&&j(gt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{b.__()},0),b}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}};function ev(){return typeof document<"u"?document:null}function Xh(t){return new Pv(t,!0)}var Uc=class{constructor(e,n,r=1e3,i=1.5,o=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();let n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&j("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}};var y0="PersistentStream",Oh=class{constructor(e,n,r,i,o,s,a,u){this.Mi=e,this.S_=r,this.b_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Uc(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===N.RESOURCE_EXHAUSTED?(_r(n.toString()),_r("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===N.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;let e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===n&&this.G_(r,i)},r=>{e(()=>{let i=new $(N.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,n){let r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return j(y0,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(j(y0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},h_=class extends Oh{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();let n=X2(this.serializer,e),r=(function(o){if(!("targetChange"in o))return J.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?J.min():s.readTime?Wt(s.readTime):J.min()})(e);return this.listener.H_(n,r)}Y_(e){let n={};n.database=Lv(this.serializer),n.addTarget=(function(o,s){let a,u=s.target;if(a=Cv(u)?{documents:tU(o,u)}:{query:nU(o,u).ft},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=_A(o,s.resumeToken);let l=Ov(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(J.min())>0){a.readTime=Sh(o,s.snapshotVersion.toTimestamp());let l=Ov(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a})(this.serializer,e);let r=iU(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){let n={};n.database=Lv(this.serializer),n.removeTarget=e,this.q_(n)}},f_=class extends Oh{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return ve(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ve(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ve(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();let n=eU(e.writeResults,e.commitTime),r=Wt(e.commitTime);return this.listener.na(r,n)}ra(){let e={};e.database=Lv(this.serializer),this.q_(e)}ea(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>CA(this.serializer,r))};this.q_(n)}};var p_=class{},m_=class extends p_{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new $(N.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Go(e,kv(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new $(N.UNKNOWN,o.toString())})}Ho(e,n,r,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Ho(e,kv(n,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new $(N.UNKNOWN,s.toString())})}terminate(){this.ia=!0,this.connection.terminate()}},g_=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(_r(n),this.aa=!1):j("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}};var fo="RemoteStore",y_=class{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo(s=>{r.enqueueAndForget(async()=>{po(this)&&(j(fo,"Restarting streams for network reachability change."),await(async function(u){let l=ee(u);l.Ea.add(4),await qc(l),l.Ra.set("Unknown"),l.Ea.delete(4),await ef(l)})(this))})}),this.Ra=new g_(r,i)}};async function ef(t){if(po(t))for(let e of t.da)await e(!0)}async function qc(t){for(let e of t.da)await e(!1)}function NA(t,e){let n=ee(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),rE(n)?nE(n):Ns(n).O_()&&tE(n,e))}function eE(t,e){let n=ee(t),r=Ns(n);n.Ia.delete(e),r.O_()&&MA(n,e),n.Ia.size===0&&(r.O_()?r.L_():po(n)&&n.Ra.set("Unknown"))}function tE(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(J.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ns(t).Y_(e)}function MA(t,e){t.Va.Ue(e),Ns(t).Z_(e)}function nE(t){t.Va=new xv({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Ns(t).start(),t.Ra.ua()}function rE(t){return po(t)&&!Ns(t).x_()&&t.Ia.size>0}function po(t){return ee(t).Ea.size===0}function xA(t){t.Va=void 0}async function IU(t){t.Ra.set("Online")}async function wU(t){t.Ia.forEach((e,n)=>{tE(t,e)})}async function CU(t,e){xA(t),rE(t)?(t.Ra.ha(e),nE(t)):t.Ra.set("Unknown")}async function TU(t,e,n){if(t.Ra.set("Online"),e instanceof Dh&&e.state===2&&e.cause)try{await(async function(i,o){let s=o.cause;for(let a of o.targetIds)i.Ia.has(a)&&(await i.remoteSyncer.rejectListen(a,s),i.Ia.delete(a),i.Va.removeTarget(a))})(t,e)}catch(r){j(fo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await kh(t,r)}else if(e instanceof us?t.Va.Ze(e):e instanceof Th?t.Va.st(e):t.Va.tt(e),!n.isEqual(J.min()))try{let r=await RA(t.localStore);n.compareTo(r)>=0&&await(function(o,s){let a=o.Va.Tt(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=o.Ia.get(l);h&&o.Ia.set(l,h.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{let h=o.Ia.get(u);if(!h)return;o.Ia.set(u,h.withResumeToken(yt.EMPTY_BYTE_STRING,h.snapshotVersion)),MA(o,u);let p=new Lc(h.target,u,l,h.sequenceNumber);tE(o,p)}),o.remoteSyncer.applyRemoteEvent(a)})(t,n)}catch(r){j(fo,"Failed to raise snapshot:",r),await kh(t,r)}}async function kh(t,e,n){if(!Rs(e))throw e;t.Ea.add(1),await qc(t),t.Ra.set("Offline"),n||(n=()=>RA(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{j(fo,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await ef(t)})}function PA(t,e){return e().catch(n=>kh(t,n,e))}async function tf(t){let e=ee(t),n=ui(e),r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:z_;for(;DU(e);)try{let i=await yU(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,bU(e,i)}catch(i){await kh(e,i)}OA(e)&&kA(e)}function DU(t){return po(t)&&t.Ta.length<10}function bU(t,e){t.Ta.push(e);let n=ui(t);n.O_()&&n.X_&&n.ea(e.mutations)}function OA(t){return po(t)&&!ui(t).x_()&&t.Ta.length>0}function kA(t){ui(t).start()}async function SU(t){ui(t).ra()}async function AU(t){let e=ui(t);for(let n of t.Ta)e.ea(n.mutations)}async function RU(t,e,n){let r=t.Ta.shift(),i=Av.from(r,e,n);await PA(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await tf(t)}async function NU(t,e){e&&ui(t).X_&&await(async function(r,i){if((function(s){return yA(s)&&s!==N.ABORTED})(i.code)){let o=r.Ta.shift();ui(r).B_(),await PA(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await tf(r)}})(t,e),OA(t)&&kA(t)}async function v0(t,e){let n=ee(t);n.asyncQueue.verifyOperationInProgress(),j(fo,"RemoteStore received new credentials");let r=po(n);n.Ea.add(3),await qc(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await ef(n)}async function MU(t,e){let n=ee(t);e?(n.Ea.delete(2),await ef(n)):e||(n.Ea.add(2),await qc(n),n.Ra.set("Unknown"))}function Ns(t){return t.ma||(t.ma=(function(n,r,i){let o=ee(n);return o.sa(),new h_(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(t.datastore,t.asyncQueue,{Xo:IU.bind(null,t),t_:wU.bind(null,t),r_:CU.bind(null,t),H_:TU.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),rE(t)?nE(t):t.Ra.set("Unknown")):(await t.ma.stop(),xA(t))})),t.ma}function ui(t){return t.fa||(t.fa=(function(n,r,i){let o=ee(n);return o.sa(),new f_(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:SU.bind(null,t),r_:NU.bind(null,t),ta:AU.bind(null,t),na:RU.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await tf(t)):(await t.fa.stop(),t.Ta.length>0&&(j(fo,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}var v_=class t{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Sn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){let s=Date.now()+r,a=new t(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new $(N.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function iE(t,e){if(_r("AsyncQueue",`${e}: ${t}`),Rs(t))return new $(N.UNAVAILABLE,`${e}: ${t}`);throw t}var Lh=class t{static emptySet(e){return new t(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||G.comparator(n.key,r.key):(n,r)=>G.comparator(n.key,r.key),this.keyedMap=wc(),this.sortedSet=new ke(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var Fh=class{constructor(){this.ga=new ke(G.comparator)}track(e){let n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):H(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){let e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}},Cs=class t{constructor(e,n,r,i,o,s,a,u,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,o){let s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new t(e,n,Lh.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Jh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var __=class{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}},E_=class{constructor(){this.queries=_0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){let i=ee(n),o=i.queries;i.queries=_0(),o.forEach((s,a)=>{for(let u of a.Sa)u.onError(r)})})(this,new $(N.ABORTED,"Firestore shutting down"))}};function _0(){return new wr(t=>oA(t),Jh)}async function LA(t,e){let n=ee(t),r=3,i=e.query,o=n.queries.get(i);o?!o.ba()&&e.Da()&&(r=2):(o=new __,r=e.Da()?0:1);try{switch(r){case 0:o.wa=await n.onListen(i,!0);break;case 1:o.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(s){let a=iE(s,`Initialization of query '${os(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,o),o.Sa.push(e),e.va(n.onlineState),o.wa&&e.Fa(o.wa)&&oE(n)}async function FA(t,e){let n=ee(t),r=e.query,i=3,o=n.queries.get(r);if(o){let s=o.Sa.indexOf(e);s>=0&&(o.Sa.splice(s,1),o.Sa.length===0?i=e.Da()?0:1:!o.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function xU(t,e){let n=ee(t),r=!1;for(let i of e){let o=i.query,s=n.queries.get(o);if(s){for(let a of s.Sa)a.Fa(i)&&(r=!0);s.wa=i}}r&&oE(n)}function PU(t,e,n){let r=ee(t),i=r.queries.get(e);if(i)for(let o of i.Sa)o.onError(n);r.queries.delete(e)}function oE(t){t.Ca.forEach(e=>{e.next()})}var I_,E0;(E0=I_||(I_={})).Ma="default",E0.Cache="cache";var Vh=class{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Cs(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;let r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;let n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Cs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==I_.Cache}};var Uh=class{constructor(e){this.key=e}},Bh=class{constructor(e){this.key=e}},w_=class{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ge(),this.mutatedKeys=ge(),this.eu=sA(e),this.tu=new Lh(this.eu)}get nu(){return this.Ya}ru(e,n){let r=n?n.iu:new Fh,i=n?n.tu:this.tu,o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let g=i.get(h),y=Zh(this.query,p)?p:null,b=!!g&&this.mutatedKeys.has(g.key),R=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),A=!1;g&&y?g.data.isEqual(y.data)?b!==R&&(r.track({type:3,doc:y}),A=!0):this.su(g,y)||(r.track({type:2,doc:y}),A=!0,(u&&this.eu(y,u)>0||l&&this.eu(y,l)<0)&&(a=!0)):!g&&y?(r.track({type:0,doc:y}),A=!0):g&&!y&&(r.track({type:1,doc:g}),A=!0,(u||l)&&(a=!0)),A&&(y?(s=s.add(y),o=R?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{tu:s,iu:r,Cs:a,mutatedKeys:o}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;let s=e.iu.ya();s.sort((h,p)=>(function(y,b){let R=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return H(20277,{Rt:A})}};return R(y)-R(b)})(h.type,p.type)||this.eu(h.doc,p.doc)),this.ou(r),i=i??!1;let a=n&&!i?this._u():[],u=this.Xa.size===0&&this.current&&!i?1:0,l=u!==this.Za;return this.Za=u,s.length!==0||l?{snapshot:new Cs(this.query,e.tu,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Fh,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];let e=this.Xa;this.Xa=ge(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});let n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new Bh(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new Uh(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=ge();let n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Cs.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}},sE="SyncEngine",C_=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},T_=class{constructor(e){this.key=e,this.hu=!1}},D_=class{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new wr(a=>oA(a),Jh),this.Iu=new Map,this.Eu=new Set,this.du=new ke(G.comparator),this.Au=new Map,this.Ru=new Vc,this.Vu={},this.mu=new Map,this.fu=Fc.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}};async function OU(t,e,n=!0){let r=HA(t),i,o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=await VA(r,e,n,!0),i}async function kU(t,e){let n=HA(t);await VA(n,e,!0,!1)}async function VA(t,e,n,r){let i=await vU(t.localStore,Gn(e)),o=i.targetId,s=t.sharedClientState.addLocalQueryTarget(o,n),a;return r&&(a=await LU(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&NA(t.remoteStore,i),a}async function LU(t,e,n,r,i){t.pu=(p,g,y)=>(async function(R,A,k,q){let le=A.view.ru(k);le.Cs&&(le=await m0(R.localStore,A.query,!1).then(({documents:w})=>A.view.ru(w,le)));let at=q&&q.targetChanges.get(A.targetId),St=q&&q.targetMismatches.get(A.targetId)!=null,Ye=A.view.applyChanges(le,R.isPrimaryClient,at,St);return w0(R,A.targetId,Ye.au),Ye.snapshot})(t,p,g,y);let o=await m0(t.localStore,e,!0),s=new w_(e,o.Qs),a=s.ru(o.documents),u=kc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=s.applyChanges(a,t.isPrimaryClient,u);w0(t,n,l.au);let h=new C_(e,n,s);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),l.snapshot}async function FU(t,e,n){let r=ee(t),i=r.Tu.get(e),o=r.Iu.get(i.targetId);if(o.length>1)return r.Iu.set(i.targetId,o.filter(s=>!Jh(s,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await o_(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&eE(r.remoteStore,i.targetId),b_(r,i.targetId)}).catch(As)):(b_(r,i.targetId),await o_(r.localStore,i.targetId,!0))}async function VU(t,e){let n=ee(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),eE(n.remoteStore,r.targetId))}async function UU(t,e,n){let r=GU(t);try{let i=await(function(s,a){let u=ee(s),l=Oe.now(),h=a.reduce((y,b)=>y.add(b.key),ge()),p,g;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let b=Cr(),R=ge();return u.Ns.getEntries(y,h).next(A=>{b=A,b.forEach((k,q)=>{q.isValidDocument()||(R=R.add(k))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,b)).next(A=>{p=A;let k=[];for(let q of a){let le=H2(q,p.get(q.key).overlayedDocument);le!=null&&k.push(new Qn(q.key,le,X0(le.value.mapValue),an.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,k,a)}).next(A=>{g=A;let k=A.applyToLocalDocumentSet(p,R);return u.documentOverlayCache.saveOverlays(y,A.batchId,k)})}).then(()=>({batchId:g.batchId,changes:cA(p)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(s,a,u){let l=s.Vu[s.currentUser.toKey()];l||(l=new ke(me)),l=l.insert(a,u),s.Vu[s.currentUser.toKey()]=l})(r,i.batchId,n),await Gc(r,i.changes),await tf(r.remoteStore)}catch(i){let o=iE(i,"Failed to persist write");n.reject(o)}}async function UA(t,e){let n=ee(t);try{let r=await mU(n.localStore,e);e.targetChanges.forEach((i,o)=>{let s=n.Au.get(o);s&&(ve(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.hu=!0:i.modifiedDocuments.size>0?ve(s.hu,14607):i.removedDocuments.size>0&&(ve(s.hu,42227),s.hu=!1))}),await Gc(n,r,e)}catch(r){await As(r)}}function I0(t,e,n){let r=ee(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.Tu.forEach((o,s)=>{let a=s.view.va(e);a.snapshot&&i.push(a.snapshot)}),(function(s,a){let u=ee(s);u.onlineState=a;let l=!1;u.queries.forEach((h,p)=>{for(let g of p.Sa)g.va(a)&&(l=!0)}),l&&oE(u)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function BU(t,e,n){let r=ee(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Au.get(e),o=i&&i.key;if(o){let s=new ke(G.comparator);s=s.insert(o,Kt.newNoDocument(o,J.min()));let a=ge().add(o),u=new Ch(J.min(),new Map,new ke(me),s,a);await UA(r,u),r.du=r.du.remove(o),r.Au.delete(e),aE(r)}else await o_(r.localStore,e,!1).then(()=>b_(r,e,n)).catch(As)}async function jU(t,e){let n=ee(t),r=e.batch.batchId;try{let i=await pU(n.localStore,e);jA(n,r,null),BA(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Gc(n,i)}catch(i){await As(i)}}async function $U(t,e,n){let r=ee(t);try{let i=await(function(s,a){let u=ee(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(ve(p!==null,37113),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})})(r.localStore,e);jA(r,e,n),BA(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Gc(r,i)}catch(i){await As(i)}}function BA(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function jA(t,e,n){let r=ee(t),i=r.Vu[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function b_(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||$A(t,r)})}function $A(t,e){t.Eu.delete(e.path.canonicalString());let n=t.du.get(e);n!==null&&(eE(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),aE(t))}function w0(t,e,n){for(let r of n)r instanceof Uh?(t.Ru.addReference(r.key,e),HU(t,r)):r instanceof Bh?(j(sE,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||$A(t,r.key)):H(19791,{wu:r})}function HU(t,e){let n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(j(sE,"New document in limbo: "+n),t.Eu.add(r),aE(t))}function aE(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){let e=t.Eu.values().next().value;t.Eu.delete(e);let n=new G(Me.fromString(e)),r=t.fu.next();t.Au.set(r,new T_(n)),t.du=t.du.insert(n,r),NA(t.remoteStore,new Lc(Gn(Yh(n.path)),r,"TargetPurposeLimboResolution",H_.ce))}}async function Gc(t,e,n){let r=ee(t),i=[],o=[],s=[];r.Tu.isEmpty()||(r.Tu.forEach((a,u)=>{s.push(r.pu(u,e,n).then(l=>{if((l||n)&&r.isPrimaryClient){let h=l?!l.fromCache:n?.targetChanges.get(u.targetId)?.current;r.sharedClientState.updateQueryState(u.targetId,h?"current":"not-current")}if(l){i.push(l);let h=t_.As(u.targetId,l);o.push(h)}}))}),await Promise.all(s),r.Pu.H_(i),await(async function(u,l){let h=ee(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>O.forEach(l,g=>O.forEach(g.Es,y=>h.persistence.referenceDelegate.addReference(p,g.targetId,y)).next(()=>O.forEach(g.ds,y=>h.persistence.referenceDelegate.removeReference(p,g.targetId,y)))))}catch(p){if(!Rs(p))throw p;j(X_,"Failed to update sequence numbers: "+p)}for(let p of l){let g=p.targetId;if(!p.fromCache){let y=h.Ms.get(g),b=y.snapshotVersion,R=y.withLastLimboFreeSnapshotVersion(b);h.Ms=h.Ms.insert(g,R)}}})(r.localStore,o))}async function zU(t,e){let n=ee(t);if(!n.currentUser.isEqual(e)){j(sE,"User change. New user:",e.toKey());let r=await AA(n.localStore,e);n.currentUser=e,(function(o,s){o.mu.forEach(a=>{a.forEach(u=>{u.reject(new $(N.CANCELLED,s))})}),o.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Gc(n,r.Ls)}}function qU(t,e){let n=ee(t),r=n.Au.get(e);if(r&&r.hu)return ge().add(r.key);{let i=ge(),o=n.Iu.get(e);if(!o)return i;for(let s of o){let a=n.Tu.get(s);i=i.unionWith(a.view.nu)}return i}}function HA(t){let e=ee(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=UA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=qU.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=BU.bind(null,e),e.Pu.H_=xU.bind(null,e.eventManager),e.Pu.yu=PU.bind(null,e.eventManager),e}function GU(t){let e=ee(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=jU.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=$U.bind(null,e),e}var zA=(()=>{class t{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(n){this.serializer=Xh(n.databaseInfo.databaseId),this.sharedClientState=this.Du(n),this.persistence=this.Cu(n),await this.persistence.start(),this.localStore=this.vu(n),this.gcScheduler=this.Fu(n,this.localStore),this.indexBackfillerScheduler=this.Mu(n,this.localStore)}Fu(n,r){return null}Mu(n,r){return null}vu(n){return fU(this.persistence,new r_,n.initialUser,this.serializer)}Cu(n){return new Nh(e_.mi,this.serializer)}Du(n){return new s_}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}return t.provider={build:()=>new t},t})(),S_=class extends zA{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){ve(this.persistence.referenceDelegate instanceof Mh,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new jv(r,e.asyncQueue,n)}Cu(e){let n=this.cacheSizeBytes!==void 0?sn.withCacheSize(this.cacheSizeBytes):sn.DEFAULT;return new Nh(r=>Mh.mi(r,n),this.serializer)}};var WU=(()=>{class t{async initialize(n,r){this.localStore||(this.localStore=n.localStore,this.sharedClientState=n.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!n.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>I0(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=zU.bind(null,this.syncEngine),await MU(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(n){return(function(){return new E_})()}createDatastore(n){let r=Xh(n.databaseInfo.databaseId),i=(function(s){return new d_(s)})(n.databaseInfo);return(function(s,a,u,l){return new m_(s,a,u,l)})(n.authCredentials,n.appCheckCredentials,i,r)}createRemoteStore(n){return(function(i,o,s,a,u){return new y_(i,o,s,a,u)})(this.localStore,this.datastore,n.asyncQueue,r=>I0(this.syncEngine,r,0),(function(){return Ph.v()?new Ph:new a_})())}createSyncEngine(n,r){return(function(o,s,a,u,l,h,p){let g=new D_(o,s,a,u,l,h);return p&&(g.gu=!0),g})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,r)}async terminate(){await(async function(r){let i=ee(r);j(fo,"RemoteStore shutting down."),i.Ea.add(5),await qc(i),i.Aa.shutdown(),i.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}return t.provider={build:()=>new t},t})();var jh=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):_r("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}};var A_=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new $(N.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let n=await(async function(i,o){let s=ee(i),a={documents:o.map(p=>Ah(s.serializer,p))},u=await s.Ho("BatchGetDocuments",s.serializer.databaseId,Me.emptyPath(),a,o.length),l=new Map;u.forEach(p=>{let g=Z2(s.serializer,p);l.set(g.key.toString(),g)});let h=[];return o.forEach(p=>{let g=l.get(p.toString());ve(!!g,55234,{key:p}),h.push(g)}),h})(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Oc(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{let i=G.fromPath(r);this.mutations.push(new wh(i,this.precondition(i)))}),await(async function(r,i){let o=ee(r),s={writes:i.map(a=>CA(o.serializer,a))};await o.Go("Commit",o.serializer.databaseId,Me.emptyPath(),s)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw H(50498,{Gu:e.constructor.name});n=J.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new $(N.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){let n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(J.min())?an.exists(!1):an.updateTime(n):an.none()}preconditionForUpdate(e){let n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(J.min()))throw new $(N.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return an.updateTime(n)}return an.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var R_=class{constructor(e,n,r,i,o){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=o,this.zu=r.maxAttempts,this.M_=new Uc(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_(async()=>{let e=new A_(this.datastore),n=this.Hu(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.Yu(i)}))}).catch(r=>{this.Yu(r)})})}Hu(e){try{let n=this.updateFunction(e);return!zc(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ju(),Promise.resolve()))):this.deferred.reject(e)}Zu(e){if(e?.name==="FirebaseError"){let n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!yA(n)}return!1}};var li="FirestoreClient",N_=class{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=ot.UNAUTHENTICATED,this.clientId=Rc.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async s=>{j(li,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(j(li,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Sn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=iE(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}};async function tv(t,e){t.asyncQueue.verifyOperationInProgress(),j(li,"Initializing OfflineComponentProvider");let n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await AA(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function C0(t,e){t.asyncQueue.verifyOperationInProgress();let n=await KU(t);j(li,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>v0(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>v0(e.remoteStore,i)),t._onlineComponents=e}async function KU(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){j(li,"Using user provided OfflineComponentProvider");try{await tv(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!(function(i){return i.name==="FirebaseError"?i.code===N.FAILED_PRECONDITION||i.code===N.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(n))throw n;hs("Error using user provided cache. Falling back to memory cache: "+n),await tv(t,new zA)}}else j(li,"Using default OfflineComponentProvider"),await tv(t,new S_(void 0));return t._offlineComponents}async function cE(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(j(li,"Using user provided OnlineComponentProvider"),await C0(t,t._uninitializedComponentsProvider._online)):(j(li,"Using default OnlineComponentProvider"),await C0(t,new WU))),t._onlineComponents}function QU(t){return cE(t).then(e=>e.syncEngine)}function YU(t){return cE(t).then(e=>e.datastore)}async function M_(t){let e=await cE(t),n=e.eventManager;return n.onListen=OU.bind(null,e.syncEngine),n.onUnlisten=FU.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=kU.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=VU.bind(null,e.syncEngine),n}function JU(t,e,n={}){let r=new Sn;return t.asyncQueue.enqueueAndForget(async()=>(function(o,s,a,u,l){let h=new jh({next:g=>{h.Nu(),s.enqueueAndForget(()=>FA(o,p));let y=g.docs.has(a);!y&&g.fromCache?l.reject(new $(N.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&g.fromCache&&u&&u.source==="server"?l.reject(new $(N.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(g)},error:g=>l.reject(g)}),p=new Vh(Yh(a.path),h,{includeMetadataChanges:!0,qa:!0});return LA(o,p)})(await M_(t),t.asyncQueue,e,n,r)),r.promise}function qA(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var T0=new Map;var GA="firestore.googleapis.com",D0=!0,$h=class{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new $(N.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=GA,this.ssl=D0}else this.host=e.host,this.ssl=e.ssl??D0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=SA;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<lU)throw new $(N.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}s2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=qA(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new $(N.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new $(N.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new $(N.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Bc=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new $h({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new $(N.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new $(N.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new $h(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new nv;switch(r.type){case"firstParty":return new sv(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new $(N.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){let r=T0.get(n);r&&(j("ComponentProvider","Removing Datastore"),T0.delete(n),r.terminate())})(this),Promise.resolve()}};function ZU(t,e,n,r={}){t=yr(t,Bc);let i=Kr(e),o=t._getSettings(),s=se(M({},o),{emulatorOptions:t._getEmulatorOptions()}),a=`${e}:${n}`;i&&(Od(`https://${a}`),kd("Firestore",!0)),o.host!==GA&&o.host!==a&&hs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let u=se(M({},o),{host:a,ssl:i,emulatorOptions:r});if(!$n(u,s)&&(t._setSettings(u),r.mockUserToken)){let l,h;if(typeof r.mockUserToken=="string")l=r.mockUserToken,h=ot.MOCK_USER;else{l=Tb(r.mockUserToken,t._app?.options.projectId);let p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new $(N.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new ot(p)}t._authCredentials=new rv(new ph(l,h))}}var Hh=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},lt=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new jc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}toJSON(){return{type:t._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Hc(n,t._jsonSchema))return new t(e,r||null,new G(Me.fromString(n.referencePath)))}};lt._jsonSchemaVersion="firestore/documentReference/1.0",lt._jsonSchema={type:ze("string",lt._jsonSchemaVersion),referencePath:ze("string")};var jc=class t extends Hh{constructor(e,n,r){super(e,n,Yh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new lt(this.firestore,null,new G(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function mo(t,e,...n){if(t=je(t),arguments.length===1&&(e=Rc.newId()),o2("doc","path",e),t instanceof Bc){let r=Me.fromString(e,...n);return qS(r),new lt(t,null,new G(r))}{if(!(t instanceof lt||t instanceof jc))throw new $(N.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Me.fromString(e,...n));return qS(r),new lt(t.firestore,t instanceof jc?t.converter:null,new G(r))}}var b0="AsyncQueue",zh=class{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Uc(this,"async_queue_retry"),this._c=()=>{let r=ev();r&&j(b0,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;let n=ev();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;let n=ev();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});let n=new Sn;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Rs(e))throw e;j(b0,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){let n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,_r("INTERNAL UNHANDLED ERROR: ",S0(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);let i=v_.createAndSchedule(this,e,n,r,o=>this.hc(o));return this.tc.push(i),i}uc(){this.nc&&H(47125,{Pc:S0(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(let n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){let n=this.tc.indexOf(e);this.tc.splice(n,1)}};function S0(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}function A0(t){return(function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1})(t,["next","error","complete"])}var di=class extends Bc{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new zh,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new zh(e),this._firestoreClient=void 0,await e}}};function WA(t,e){let n=typeof t=="object"?t:Ud(),r=typeof t=="string"?t:e||_h,i=fc(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=Cb("firestore");o&&ZU(i,...o)}return i}function nf(t){if(t._terminated)throw new $(N.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||XU(t),t._firestoreClient}function XU(t){let e=t._freezeSettings(),n=(function(i,o,s,a){return new dv(i,o,s,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,qA(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator)})(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new N_(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(i){let o=i?._online.build();return{_offline:i?._offline.build(o),_online:o}})(t._componentsProvider))}var vr=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(yt.fromBase64String(e))}catch(n){throw new $(N.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(yt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:t._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Hc(e,t._jsonSchema))return t.fromBase64String(e.bytes)}};vr._jsonSchemaVersion="firestore/bytes/1.0",vr._jsonSchema={type:ze("string",vr._jsonSchemaVersion),bytes:ze("string")};var Ts=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new $(N.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Gt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Ds=class{constructor(e){this._methodName=e}};var oi=class t{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new $(N.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new $(N.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return me(this._lat,e._lat)||me(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:t._jsonSchemaVersion}}static fromJSON(e){if(Hc(e,t._jsonSchema))return new t(e.latitude,e.longitude)}};oi._jsonSchemaVersion="firestore/geoPoint/1.0",oi._jsonSchema={type:ze("string",oi._jsonSchemaVersion),latitude:ze("number"),longitude:ze("number")};var si=class t{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:t._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Hc(e,t._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new t(e.vectorValues);throw new $(N.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};si._jsonSchemaVersion="firestore/vectorValue/1.0",si._jsonSchema={type:ze("string",si._jsonSchemaVersion),vectorValues:ze("object")};var eB=/^__.*__$/,x_=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Qn(e,this.data,this.fieldMask,n,this.fieldTransforms):new ho(e,this.data,n,this.fieldTransforms)}},qh=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Qn(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function KA(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw H(40011,{Ac:t})}}var P_=class t{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new t(M(M({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){let n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){let n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Wh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(KA(this.Ac)&&eB.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}},O_=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Xh(e)}Cc(e,n,r,i=!1){return new P_({Ac:e,methodName:n,Dc:r,path:Gt.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function QA(t){let e=t._freezeSettings(),n=Xh(t._databaseId);return new O_(t._databaseId,!!e.ignoreUndefinedProperties,n)}function YA(t,e,n,r,i,o={}){let s=t.Cc(o.merge||o.mergeFields?2:0,e,n,i);uE("Data must be an object, but it was:",s,r);let a=JA(r,s),u,l;if(o.merge)u=new cn(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let g=L_(e,p,n);if(!s.contains(g))throw new $(N.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);XA(h,g)||h.push(g)}u=new cn(h),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new x_(new Ot(a),u,l)}var Gh=class t extends Ds{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};var k_=class t extends Ds{_toFieldTransform(e){return new Dv(e.path,new co)}isEqual(e){return e instanceof t}};function tB(t,e,n,r){let i=t.Cc(1,e,n);uE("Data must be an object, but it was:",i,r);let o=[],s=Ot.empty();hi(r,(u,l)=>{let h=lE(e,u,n);l=je(l);let p=i.yc(h);if(l instanceof Gh)o.push(h);else{let g=rf(l,p);g!=null&&(o.push(h),s.set(h,g))}});let a=new cn(o);return new qh(s,a,i.fieldTransforms)}function nB(t,e,n,r,i,o){let s=t.Cc(1,e,n),a=[L_(e,r,n)],u=[i];if(o.length%2!=0)throw new $(N.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<o.length;g+=2)a.push(L_(e,o[g])),u.push(o[g+1]);let l=[],h=Ot.empty();for(let g=a.length-1;g>=0;--g)if(!XA(l,a[g])){let y=a[g],b=u[g];b=je(b);let R=s.yc(y);if(b instanceof Gh)l.push(y);else{let A=rf(b,R);A!=null&&(l.push(y),h.set(y,A))}}let p=new cn(l);return new qh(h,p,s.fieldTransforms)}function rf(t,e){if(ZA(t=je(t)))return uE("Unsupported field value:",e,t),JA(t,e);if(t instanceof Ds)return(function(r,i){if(!KA(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){let o=[],s=0;for(let a of r){let u=rf(a,i.wc(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}})(t,e)}return(function(r,i){if((r=je(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return V2(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Oe.fromDate(r);return{timestampValue:Sh(i.serializer,o)}}if(r instanceof Oe){let o=new Oe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Sh(i.serializer,o)}}if(r instanceof oi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof vr)return{bytesValue:_A(i.serializer,r._byteString)};if(r instanceof lt){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Sc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Z_(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof si)return(function(s,a){return{mapValue:{fields:{[G_]:{stringValue:W_},[ps]:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw a.Sc("VectorValues must only contain numeric values.");return J_(a.serializer,l)})}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${$_(r)}`)})(t,e)}function JA(t,e){let n={};return q0(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):hi(t,(r,i)=>{let o=rf(i,e.mc(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function ZA(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Oe||t instanceof oi||t instanceof vr||t instanceof lt||t instanceof Ds||t instanceof si)}function uE(t,e,n){if(!ZA(n)||!N0(n)){let r=$_(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function L_(t,e,n){if((e=je(e))instanceof Ts)return e._internalPath;if(typeof e=="string")return lE(t,e);throw Wh("Field path arguments must be of type string or ",t,!1,void 0,n)}var rB=new RegExp("[~\\*/\\[\\]]");function lE(t,e,n){if(e.search(rB)>=0)throw Wh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ts(...e.split("."))._internalPath}catch{throw Wh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Wh(t,e,n,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new $(N.INVALID_ARGUMENT,a+t+u)}function XA(t,e){return t.some(n=>n.isEqual(e))}var bs=class{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new lt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new F_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(eR("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},F_=class extends bs{data(){return super.data()}};function eR(t,e){return typeof e=="string"?lE(t,e):e instanceof Ts?e._internalPath:e._delegate._internalPath}function iB(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new $(N.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Kh=class{convertValue(e,n="none"){switch(ci(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ne(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ir(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw H(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return hi(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){let n=e.fields?.[ps].arrayValue?.values?.map(r=>Ne(r.doubleValue));return new si(n)}convertGeoPoint(e){return new oi(Ne(e.latitude),Ne(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=Qh(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(xc(e));default:return null}}convertTimestamp(e){let n=Er(e);return new Oe(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=Me.fromString(e);ve(bA(r),9688,{name:e});let i=new Eh(r.get(1),r.get(3)),o=new G(r.popFirst(5));return i.isEqual(n)||_r(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};function tR(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var V_=class extends Kh{constructor(e){super(),this.firestore=e}convertBytes(e){return new vr(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new lt(this.firestore,null,n)}};var ii=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},ai=class t extends bs{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new ls(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(eR("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new $(N.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,n={};return n.type=t._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}};ai._jsonSchemaVersion="firestore/documentSnapshot/1.0",ai._jsonSchema={type:ze("string",ai._jsonSchemaVersion),bundleSource:ze("string","DocumentSnapshot"),bundleName:ze("string"),bundle:ze("string")};var ls=class extends ai{data(e={}){return super.data(e)}},ds=class t{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new ii(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new ls(this._firestore,this._userDataWriter,r.key,r,new ii(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new $(N.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new ls(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ii(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new ls(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ii(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:oB(a.type),doc:u,oldIndex:l,newIndex:h}})}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new $(N.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=t._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Rc.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let n=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function oB(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return H(61501,{type:t})}}function of(t){t=yr(t,lt);let e=yr(t.firestore,di);return JU(nf(e),t._key).then(n=>nR(e,t,n))}ds._jsonSchemaVersion="firestore/querySnapshot/1.0",ds._jsonSchema={type:ze("string",ds._jsonSchemaVersion),bundleSource:ze("string","QuerySnapshot"),bundleName:ze("string"),bundle:ze("string")};var $c=class extends Kh{constructor(e){super(),this.firestore=e}convertBytes(e){return new vr(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new lt(this.firestore,null,n)}};function fi(t,e,n){t=yr(t,lt);let r=yr(t.firestore,di),i=tR(t.converter,e,n);return sB(r,[YA(QA(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,an.none())])}function Ms(t,...e){t=je(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||A0(e[r])||(n=e[r++]);let i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(A0(e[r])){let u=e[r];e[r]=u.next?.bind(u),e[r+1]=u.error?.bind(u),e[r+2]=u.complete?.bind(u)}let o,s,a;if(t instanceof lt)s=yr(t.firestore,di),a=Yh(t._key.path),o={next:u=>{e[r]&&e[r](nR(s,t,u))},error:e[r+1],complete:e[r+2]};else{let u=yr(t,Hh);s=yr(u.firestore,di),a=u._query;let l=new $c(s);o={next:h=>{e[r]&&e[r](new ds(s,l,u,h))},error:e[r+1],complete:e[r+2]},iB(t._query)}return(function(l,h,p,g){let y=new jh(g),b=new Vh(h,y,p);return l.asyncQueue.enqueueAndForget(async()=>LA(await M_(l),b)),()=>{y.Nu(),l.asyncQueue.enqueueAndForget(async()=>FA(await M_(l),b))}})(nf(s),a,i,o)}function sB(t,e){return(function(r,i){let o=new Sn;return r.asyncQueue.enqueueAndForget(async()=>UU(await QU(r),i,o)),o.promise})(nf(t),e)}function nR(t,e,n){let r=n.docs.get(e._key),i=new $c(t);return new ai(t,i,e._key,r,new ii(n.hasPendingWrites,n.fromCache),e.converter)}var aB={maxAttempts:5};function Cc(t,e){if((t=je(t)).firestore!==e)throw new $(N.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var U_=class{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=QA(e)}get(e){let n=Cc(e,this._firestore),r=new V_(this._firestore);return this._transaction.lookup([n._key]).then(i=>{if(!i||i.length!==1)return H(24041);let o=i[0];if(o.isFoundDocument())return new bs(this._firestore,r,o.key,o,n.converter);if(o.isNoDocument())return new bs(this._firestore,r,n._key,null,n.converter);throw H(18433,{doc:o})})}set(e,n,r){let i=Cc(e,this._firestore),o=tR(i.converter,n,r),s=YA(this._dataReader,"Transaction.set",i._key,o,i.converter!==null,r);return this._transaction.set(i._key,s),this}update(e,n,r,...i){let o=Cc(e,this._firestore),s;return s=typeof(n=je(n))=="string"||n instanceof Ts?nB(this._dataReader,"Transaction.update",o._key,n,r,i):tB(this._dataReader,"Transaction.update",o._key,n),this._transaction.update(o._key,s),this}delete(e){let n=Cc(e,this._firestore);return this._transaction.delete(n._key),this}};var B_=class extends U_{constructor(e,n){super(e,n),this._firestore=e}get(e){let n=Cc(e,this._firestore),r=new $c(this._firestore);return super.get(e).then(i=>new ai(this._firestore,r,n._key,i._document,new ii(!1,!1),n.converter))}};function pi(t,e,n){t=yr(t,di);let r=M(M({},aB),n);return(function(o){if(o.maxAttempts<1)throw new $(N.INVALID_ARGUMENT,"Max attempts must be at least 1")})(r),(function(o,s,a){let u=new Sn;return o.asyncQueue.enqueueAndForget(async()=>{let l=await YU(o);new R_(o.asyncQueue,l,a,s,u).ju()}),u.promise})(nf(t),i=>e(new B_(t,i)),r)}function kt(){return new k_("serverTimestamp")}(function(e,n=!0){(function(i){Ss=i})(Zr),Jr(new on("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new di(new iv(r.getProvider("auth-internal")),new av(s,r.getProvider("app-check-internal")),(function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new $(N.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Eh(l.options.projectId,h)})(s,i),s);return o=M({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),bn($S,HS,e),bn($S,HS,"esm2020")})();var cB={apiKey:"AIzaSyD1m1RhdiM9NtlEv9-lk-TT9bQhBUvC2d0",authDomain:"clouset-cs2.firebaseapp.com",projectId:"clouset-cs2",storageBucket:"clouset-cs2.firebasestorage.app",messagingSenderId:"129931894882",appId:"1:129931894882:web:a45936fa981264e8ee713b"},rR=py(cB),go=qy(rR),Lt=WA(rR);var un=class t{constructor(e){this.zone=e}user$=new de(e=>{let n=rh(go,r=>this.zone.run(()=>e.next(r)),r=>this.zone.run(()=>e.error(r)));return()=>n()});async ensurePersistence(){await $y(go,ih)}async getUserOnce(){return await new Promise(e=>{let n=rh(go,r=>{this.zone.run(()=>{n(),e(r??null)})})})}async isLoggedInOnce(){return!!await this.getUserOnce()}async loginWithCustomToken(e){return await this.ensurePersistence(),(await jy(go,e)).user}async logout(){await Hy(go)}async loginAnonymous(){return await this.ensurePersistence(),(await By(go)).user}static \u0275fac=function(n){return new(n||t)(re(Fe))};static \u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})};function uB(t,e){t&1&&(U(0,"p",5),P(1,"Procesando..."),B())}function lB(t,e){if(t&1&&(U(0,"p",6),P(1),B()),t&2){let n=L();F(),Ae(n.error)}}var sf=class t{auth=x(un);route=x(jn);router=x(rn);loading=!1;error="";async ngOnInit(){let e=this.route.snapshot.queryParamMap.get("token"),n=this.route.snapshot.queryParamMap.get("error");if(n&&(this.error=n),e){this.loading=!0;try{await this.auth.loginWithCustomToken(e),await this.router.navigateByUrl("/dashboard")}catch(r){this.error=r?.message??"Error al iniciar sesi\xF3n"}finally{this.loading=!1}}}loginSteam(){let e=`${window.location.origin}/login`,n=`/api/auth/steam/start?redirect=${encodeURIComponent(e)}`;window.location.href=n}async loginAnon(){this.loading=!0,this.error="";try{await this.auth.loginAnonymous(),await this.router.navigateByUrl("/dashboard")}catch(e){this.error=e?.message??"Error en login an\xF3nimo"}finally{this.loading=!1}}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=In({type:t,selectors:[["ng-component"]],decls:13,vars:2,consts:[[1,"custom-wrapper"],[1,"custom-card"],["src","clouset.png",1,"img-logo"],["role","button",1,"button-27","steam-btn",3,"click"],["src","steam-logo.png","alt","Steam",1,"img-button"],[2,"margin-top","12px"],[2,"color","#b00020","margin-top","12px"]],template:function(n,r){n&1&&(U(0,"div",0)(1,"div",1)(2,"h1"),tt(3,"img",2),B(),U(4,"button",3),Vn("click",function(){return r.loginSteam()}),tt(5,"img",4),U(6,"span"),P(7,"Login con Steam"),B()(),U(8,"button",3),Vn("click",function(){return r.loginAnon()}),U(9,"span"),P(10,"Login con Anon"),B()(),te(11,uB,2,0,"p",5),te(12,lB,2,1,"p",6),B()()),n&2&&(F(11),ne(r.loading?11:-1),F(),ne(r.error?12:-1))},dependencies:[Zl],styles:[".steam-btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:12px}.img-button[_ngcontent-%COMP%]{height:100%;max-height:32px;width:auto;display:block}"]})};function iR(t){t||(t=x(vn));let e=new de(n=>{if(t.destroyed){n.next();return}return t.onDestroy(n.next.bind(n))});return n=>n.pipe(Ti(e))}var dB=["matches","draft"],hB=["matches","current"],Qc=["de_inferno","de_mirage","de_nuke","de_overpass","de_ancient","de_vertigo","de_anubis"],fB=["esperando_jugadores","seleccionando_lideres","armando_equipos","seleccionando_mapa","en_curso"];function Wc(){return{estado:"esperando_jugadores",map:null,team1:{name:"Team A",players:[]},team2:{name:"Team B",players:[]},queue:[],mapPool:[...Qc],bannedMaps:[],mapTurn:"team1",mapBanCount:0,leaderSelectionAt:null,publishInProgress:!1,publishedAt:null,updatedAt:kt()}}function dE(t){return typeof t=="string"&&fB.includes(t)}function pB(t){let e={};if(dE(t.estado)||(e.estado="esperando_jugadores"),t.map===void 0&&(e.map=null),Array.isArray(t.queue)||(e.queue=[]),Array.isArray(t.mapPool)||(e.mapPool=[...Qc]),Array.isArray(t.bannedMaps)||(e.bannedMaps=[]),!t.team1||typeof t.team1!="object")e.team1={name:"Team A",players:[]};else{let n={};t.team1.name||(n.name="Team A"),Array.isArray(t.team1.players)||(n.players=[]),Object.keys(n).length&&(e.team1=M(M({},t.team1),n))}if(!t.team2||typeof t.team2!="object")e.team2={name:"Team B",players:[]};else{let n={};t.team2.name||(n.name="Team B"),Array.isArray(t.team2.players)||(n.players=[]),Object.keys(n).length&&(e.team2=M(M({},t.team2),n))}return e}function Kc(t){return Array.isArray(t)?t.map(e=>e==null?"":String(e)).filter(e=>e.length>0):[]}function mB(t){return se(M({},t),{team1:se(M({},t.team1),{players:Kc(t.team1?.players)}),team2:se(M({},t.team2),{players:Kc(t.team2?.players)}),queue:Kc(t.queue),unassigned:Kc(t.unassigned),finalizeBy:Kc(t.finalizeBy)})}var xs=class t{constructor(e){this.zone=e}matchRef=mo(Lt,...dB);currentRef=mo(Lt,...hB);_match$=new Ge(null);match$=this._match$.asObservable();unsub=null;selectingLeaders=!1;publishing=!1;async ensureAndSubscribe(){let e=await of(this.matchRef);if(!e.exists())await fi(this.matchRef,Wc(),{merge:!1});else{let n=e.data(),r=pB(n);Object.keys(r).length>0&&await fi(this.matchRef,r,{merge:!0})}this.unsub||(this.unsub=Ms(this.matchRef,n=>{let r=n.data()??null,i=r?mB(r):null;this.zone.run(()=>{this._match$.next(i)}),i&&(this.maybeSelectLeaders(i).catch(()=>{}),this.maybePublishMatch(i).catch(()=>{}))},n=>{console.error("Match onSnapshot error:",n),this.zone.run(()=>{this._match$.next(null)})}))}async joinQueue(e){e&&await pi(Lt,async n=>{let r=await n.get(this.matchRef);if(!r.exists()){n.set(this.matchRef,Wc(),{merge:!1});return}let i=r.data(),o=dE(i.estado)?i.estado:"esperando_jugadores";if(o!=="esperando_jugadores")throw new Error(`No se puede unirse: estado actual = ${o}`);let s=Array.isArray(i.queue)?[...i.queue]:[];if(s.includes(e))return;if(s.length>=10)throw new Error("La queue ya est\xE1 completa (10 jugadores).");s.push(e);let a={queue:s,updatedAt:kt()};s.length===10&&(a.estado="seleccionando_lideres",a.team1={name:"Team A",players:[]},a.team2={name:"Team B",players:[]},a.unassigned=[],a.turn="team1",a.leaderSelectionAt=Oe.fromMillis(Date.now()+1e4)),!dE(i.estado)&&!a.estado&&(a.estado="esperando_jugadores"),n.update(this.matchRef,a)})}async leaveQueue(e){e&&await pi(Lt,async n=>{let r=await n.get(this.matchRef);if(!r.exists())return;let i=r.data();if(i.estado!=="esperando_jugadores")return;let s=(Array.isArray(i.queue)?[...i.queue]:[]).filter(a=>a!==e);n.update(this.matchRef,{queue:s,updatedAt:kt()})})}async pickPlayer(e,n){!e||!n||await pi(Lt,async r=>{let i=await r.get(this.matchRef);if(!i.exists())throw new Error("Match no existe.");let o=i.data();if(o.estado!=="armando_equipos")throw new Error(`No se puede pickear: estado = ${o.estado}`);let s=o.team1?.players?[...o.team1.players]:[],a=o.team2?.players?[...o.team2.players]:[],u=s[0]??null,l=a[0]??null;if(!u||!l)throw new Error("No hay l\xEDderes definidos todav\xEDa.");let h=o.turn||"team1";if(h==="team1"){if(e!==u)throw new Error("No sos el l\xEDder de Team A o no es tu turno.")}else if(e!==l)throw new Error("No sos el l\xEDder de Team B o no es tu turno.");let p=Array.isArray(o.unassigned)?[...o.unassigned]:Array.isArray(o.queue)?[...o.queue]:[];if(!p.includes(n))throw new Error("Ese jugador ya no est\xE1 disponible para pick.");if(n===u||n===l)throw new Error("No pod\xE9s pickear a un l\xEDder.");if(s.includes(n)||a.includes(n))throw new Error("Ese jugador ya est\xE1 en un equipo.");if(h==="team1"&&s.length>=5)throw new Error("Team A ya est\xE1 completo.");if(h==="team2"&&a.length>=5)throw new Error("Team B ya est\xE1 completo.");let g=p.filter(q=>q!==n),y=s,b=a;h==="team1"?y=[...s,n]:b=[...a,n];let R=h==="team1"?"team2":"team1",A=y.length===5&&b.length===5,k={team1:se(M({},o.team1??{name:"Team A"}),{players:y}),team2:se(M({},o.team2??{name:"Team B"}),{players:b}),unassigned:g,turn:R,updatedAt:kt()};A&&(k.estado="seleccionando_mapa",k.queue=[],k.unassigned=[],k.mapTurn="team1",k.mapBanCount=0,k.bannedMaps=[],k.mapPool=Array.isArray(o.mapPool)?[...o.mapPool]:[...Qc]),r.update(this.matchRef,k)})}async banMap(e,n){if(!e||!n)return;let r=["team1","team1","team2","team2","team1","team2"];await pi(Lt,async i=>{let o=await i.get(this.matchRef);if(!o.exists())throw new Error("Match no existe.");let s=o.data();if(s.estado!=="seleccionando_mapa")throw new Error(`No se puede banear: estado = ${s.estado}`);let a=s.team1?.players??[],u=s.team2?.players??[],l=a[0]??null,h=u[0]??null;if(!l||!h)throw new Error("No hay l\xEDderes definidos.");let p=Array.isArray(s.bannedMaps)?[...s.bannedMaps]:[],g=p.length,y=r[g];if(!y)throw new Error("No hay m\xE1s mapas para banear.");if(y==="team1"&&e!==l)throw new Error("No sos el l\xEDder de Team A o no es tu turno.");if(y==="team2"&&e!==h)throw new Error("No sos el l\xEDder de Team B o no es tu turno.");let b=Array.isArray(s.mapPool)&&s.mapPool.length>0?[...s.mapPool]:[...Qc];if(!b.includes(n))throw new Error("Ese mapa no est\xE1 en el pool.");if(p.includes(n))throw new Error("Ese mapa ya est\xE1 baneado.");let R=[...p,n],A=b.filter(at=>!R.includes(at));if(A.length===0)throw new Error("No quedan mapas disponibles.");let k=g+1,q=r[g+1]??null,le={bannedMaps:R,mapTurn:q,mapBanCount:k,mapPool:b,updatedAt:kt()};A.length===1&&(le.map=A[0]),i.update(this.matchRef,le)}),await this.maybePublishMatch()}async requestFinalizeMatch(e){e&&await pi(Lt,async n=>{let r=await n.get(this.matchRef);if(!r.exists())throw new Error("Match no existe.");let i=r.data();if(i.estado!=="en_curso")throw new Error(`No se puede finalizar: estado = ${i.estado}`);let o=i.team1?.players??[],s=i.team2?.players??[],a=o[0]??null,u=s[0]??null;if(!a||!u)throw new Error("No hay l\xEDderes definidos.");if(e!==a&&e!==u)throw new Error("Solo los l\xEDderes pueden finalizar el match.");let l=Array.isArray(i.finalizeBy)?[...i.finalizeBy]:[];if(l.includes(e))return;if(l.push(e),l.includes(a)&&l.includes(u)){n.set(this.matchRef,Wc(),{merge:!1}),n.set(this.currentRef,Wc(),{merge:!1});return}n.update(this.matchRef,{finalizeBy:l,updatedAt:kt()})})}async cancelMatch(){let e=await fetch("/api/match/cancel",{method:"POST"});if(!e.ok){let n=await e.text().catch(()=>"");throw new Error(`No se pudo cancelar el match (${e.status}) ${n}`.trim())}await fi(this.matchRef,Wc(),{merge:!1})}async maybeSelectLeaders(e){if(this.selectingLeaders)return;let n=e??this._match$.getValue();if(!n||n.estado!=="seleccionando_lideres")return;let r=n.leaderSelectionAt;if(!(!r||r.toMillis()>Date.now()||(Array.isArray(n.queue)?n.queue:[]).length!==10)){this.selectingLeaders=!0;try{await pi(Lt,async o=>{let s=await o.get(this.matchRef);if(!s.exists())return;let a=s.data();if(a.estado!=="seleccionando_lideres")return;let u=Array.isArray(a.queue)?[...a.queue]:[];if(u.length!==10)return;let l=[...u].sort(()=>Math.random()-.5),h=l[0],p=l[1],g=u.filter(y=>y!==h&&y!==p);o.update(this.matchRef,{estado:"armando_equipos",team1:{name:"Team A",players:[h]},team2:{name:"Team B",players:[p]},unassigned:g,turn:"team1",leaderSelectionAt:null,updatedAt:kt()})})}finally{this.selectingLeaders=!1}}}async maybePublishMatch(e){if(this.publishing)return;let n=e??this._match$.getValue();if(!n||n.publishInProgress||n.publishedAt||n.estado!=="seleccionando_mapa")return;let r=n.team1?.players??[],i=n.team2?.players??[];if(!(r.length!==5||i.length!==5)&&n.map){this.publishing=!0;try{let o=await pi(Lt,async a=>{let u=await a.get(this.matchRef);if(!u.exists())return null;let l=u.data();if(l.publishInProgress||l.publishedAt||l.estado!=="seleccionando_mapa")return null;let h=l.team1?.players??[],p=l.team2?.players??[];return h.length!==5||p.length!==5||!l.map?null:(a.update(this.matchRef,{publishInProgress:!0,updatedAt:kt()}),l)});if(!o)return;let s={estado:o.estado,map:o.map,team1:o.team1,team2:o.team2,queue:[],mapPool:o.mapPool??[...Qc],bannedMaps:o.bannedMaps??[],mapTurn:o.mapTurn??null,mapBanCount:o.mapBanCount??0,unassigned:o.unassigned??[],turn:o.turn??"team1",updatedAt:kt()};await fi(this.currentRef,s,{merge:!1}),await fi(this.matchRef,{publishInProgress:!1,publishedAt:kt(),estado:"en_curso",updatedAt:kt()},{merge:!0})}finally{this.publishing=!1}}}dispose(){this.unsub&&this.unsub(),this.unsub=null,this._match$.next(null)}static \u0275fac=function(n){return new(n||t)(re(Fe))};static \u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})};function gB(t,e){if(t&1&&(U(0,"span"),P(1,"Mapa: "),U(2,"b"),P(3),B()()),t&2){let n=L();F(3),Ae(n.match.map)}}function yB(t,e){if(t&1&&(U(0,"span"),P(1,"Turno: "),U(2,"b"),P(3),B()()),t&2){let n=L();F(3),Ae(n.turn==="team1"?(n.match.team1==null?null:n.match.team1.name)??"Team A":(n.match.team2==null?null:n.match.team2.name)??"Team B")}}function vB(t,e){t&1&&(U(0,"div",5),P(1," Est\xE1s fuera. Activ\xE1 "),U(2,"b"),P(3,"Ver match"),B(),P(4," para ver el detalle. "),B())}function _B(t,e){if(t&1&&(tt(0,"img",14),U(1,"div",15),P(2),B()),t&2){let n=e,r=L().$implicit,i=L(2);Cn("leaderAvatar",i.isLeaderA(r)),mt("src",i.avatarSrc(n),et),jr("title",n.personaName),F(2),Ae(i.displayName(n))}}function EB(t,e){if(t&1&&(tt(0,"img",14),U(1,"div",16),P(2,"Cargando..."),B()),t&2){let n=L().$implicit,r=L(2);Cn("leaderAvatar",r.isLeaderA(n)),mt("src",r.avatarSrc(null),et)}}function IB(t,e){if(t&1&&(U(0,"div",13),te(1,_B,3,5),tn(2,"async"),jt(3,EB,3,3),B()),t&2){let n,r=e.$implicit,i=L(2);Cn("leader",i.isLeaderA(r)),F(),ne((n=nn(2,3,i.profile$(r)))?1:3,n)}}function wB(t,e){t&1&&(U(0,"div",11),P(1,"Vac\xEDo"),B())}function CB(t,e){if(t&1&&(tt(0,"img",14),U(1,"div",15),P(2),B()),t&2){let n=e,r=L(4);mt("src",r.avatarSrc(n),et),jr("title",n.personaName),F(2),Ae(r.displayName(n))}}function TB(t,e){if(t&1&&(tt(0,"img",14),U(1,"div",16),P(2,"Cargando..."),B()),t&2){let n=L(4);mt("src",n.avatarSrc(null),et)}}function DB(t,e){if(t&1&&(U(0,"div",19),te(1,CB,3,3),tn(2,"async"),jt(3,TB,3,1),B()),t&2){let n,r=e.$implicit,i=L(3);F(),ne((n=nn(2,1,i.profile$(r)))?1:3,n)}}function bB(t,e){t&1&&(U(0,"div",11),P(1,"No hay nadie todav\xEDa"),B())}function SB(t,e){if(t&1&&(U(0,"div",17),P(1,"Jugadores en cola"),B(),U(2,"div",18),Hr(3,DB,4,3,"div",19,$r),te(5,bB,2,0,"div",11),B()),t&2){let n=L(2);F(3),zr(n.queue),F(2),ne(n.queue.length===0?5:-1)}}function AB(t,e){if(t&1&&(tt(0,"img",14),U(1,"div",15),P(2),B()),t&2){let n=e,r=L(4);mt("src",r.avatarSrc(n),et),jr("title",n.personaName),F(2),Ae(r.displayName(n))}}function RB(t,e){if(t&1&&(tt(0,"img",14),U(1,"div",16),P(2,"Cargando..."),B()),t&2){let n=L(4);mt("src",n.avatarSrc(null),et)}}function NB(t,e){if(t&1&&(U(0,"div",19),te(1,AB,3,3),tn(2,"async"),jt(3,RB,3,1),B()),t&2){let n,r=e.$implicit,i=L(3);F(),ne((n=nn(2,1,i.profile$(r)))?1:3,n)}}function MB(t,e){if(t&1&&(U(0,"div",17),P(1,"Seleccionando l\xEDderes\u2026"),B(),U(2,"div",11),P(3,"En unos segundos se asignan 2 l\xEDderes y pasan a los equipos."),B(),U(4,"div",18),Hr(5,NB,4,3,"div",19,$r),B()),t&2){let n=L(2);F(5),zr(n.queue)}}function xB(t,e){t&1&&(U(0,"div",11),P(1,"Es tu turno. Eleg\xED un jugador haciendo click."),B())}function PB(t,e){t&1&&(U(0,"div",11),P(1,"Solo el l\xEDder del turno puede pickear."),B())}function OB(t,e){if(t&1&&(tt(0,"img",14),U(1,"div",15),P(2),B()),t&2){let n=e,r=L(4);mt("src",r.avatarSrc(n),et),jr("title",n.personaName),F(2),Ae(r.displayName(n))}}function kB(t,e){if(t&1&&(tt(0,"img",14),U(1,"div",16),P(2,"Cargando..."),B()),t&2){let n=L(4);mt("src",n.avatarSrc(null),et)}}function LB(t,e){if(t&1){let n=Dt();U(0,"div",22),Vn("click",function(){let i=ft(n).$implicit,o=L(3);return pt(o.onPick(i))}),te(1,OB,3,3),tn(2,"async"),jt(3,kB,3,1),B()}if(t&2){let n,r=e.$implicit,i=L(3);Cn("selectable",i.canPick&&!i.busyPick)("disabled",!i.canPick||i.busyPick),F(),ne((n=nn(2,5,i.profile$(r)))?1:3,n)}}function FB(t,e){t&1&&(U(0,"div",11),P(1,"No hay disponibles"),B())}function VB(t,e){if(t&1&&(U(0,"div",21),P(1),B()),t&2){let n=L(3);F(),nt(" ",n.pickErr," ")}}function UB(t,e){if(t&1&&(U(0,"div",17),P(1,"Jugadores disponibles"),B(),te(2,xB,2,0,"div",11)(3,PB,2,0,"div",11),U(4,"div",18),Hr(5,LB,4,7,"div",20,$r),te(7,FB,2,0,"div",11),B(),te(8,VB,2,1,"div",21)),t&2){let n=L(2);F(2),ne(n.canPick?2:3),F(3),zr(n.availableIds),F(2),ne(n.availableIds.length===0?7:-1),F(),ne(n.pickErr?8:-1)}}function BB(t,e){t&1&&(U(0,"div",11),P(1,"Es tu turno. Eleg\xED un mapa para banear."),B())}function jB(t,e){t&1&&(U(0,"div",11),P(1,"Solo el l\xEDder del turno puede banear."),B())}function $B(t,e){if(t&1){let n=Dt();U(0,"div",25),Vn("click",function(){let i=ft(n).$implicit,o=L(3);return pt(o.onBanMap(i))}),tt(1,"div",26),U(2,"div",27),P(3),B()()}if(t&2){let n=e.$implicit,r=L(3);Cn("banned",r.isBanned(n))("selectable",r.canBan&&!r.busyBan&&!r.isBanned(n)),F(3),Ae(n)}}function HB(t,e){if(t&1&&(U(0,"div",21),P(1),B()),t&2){let n=L(3);F(),nt(" ",n.banErr," ")}}function zB(t,e){if(t&1&&(U(0,"div",17),P(1,"Baneo de mapas"),B(),U(2,"div",11),P(3," Turno: "),U(4,"b"),P(5),B(),P(6," \xB7 Bans: "),U(7,"b"),P(8),B(),P(9," \xB7 Restantes: "),U(10,"b"),P(11),B()(),te(12,BB,2,0,"div",11)(13,jB,2,0,"div",11),U(14,"div",23),Hr(15,$B,4,5,"div",24,$r),B(),te(17,HB,2,1,"div",21)),t&2){let n=L(2);F(5),Ae(n.mapTurn==="team1"?(n.match.team1==null?null:n.match.team1.name)??"Team A":(n.match.team2==null?null:n.match.team2.name)??"Team B"),F(3),Ae(n.match.mapBanCount??0),F(3),Ae(n.mapPool.length-n.bannedMaps.length),F(),ne(n.canBan?12:13),F(3),zr(n.mapPool),F(2),ne(n.banErr?17:-1)}}function qB(t,e){if(t&1&&(U(0,"a",31),P(1),B()),t&2){let n=L(3);mt("href",n.isParticipant?n.connection.connectUrl:n.connection.spectateUrl,et),F(),nt(" ",n.isParticipant?"Ingresar al servidor":"Ingresar como espectador"," ")}}function GB(t,e){t&1&&(U(0,"div",11),P(1,"Esperando confirmaci\xF3n del otro l\xEDder\u2026"),B())}function WB(t,e){if(t&1&&(U(0,"div",21),P(1),B()),t&2){let n=L(4);F(),Ae(n.finalizeErr)}}function KB(t,e){if(t&1){let n=Dt();U(0,"div",32),P(1," Para reiniciar el match, ambos l\xEDderes deben confirmar. "),B(),U(2,"button",33),Vn("click",function(){ft(n);let i=L(3);return pt(i.onFinalize())}),P(3),B(),te(4,GB,2,0,"div",11),te(5,WB,2,1,"div",21)}if(t&2){let n=L(3);F(2),mt("disabled",n.busyFinalize||n.hasFinalized),F(),nt(" ",n.hasFinalized?"Confirmado":n.busyFinalize?"Finalizando\u2026":"Finalizar match"," "),F(),ne(n.hasFinalized?4:-1),F(),ne(n.finalizeErr?5:-1)}}function QB(t,e){if(t&1&&(U(0,"div",21),P(1),B()),t&2){let n=L(4);F(),Ae(n.cancelErr)}}function YB(t,e){if(t&1){let n=Dt();U(0,"button",34),Vn("click",function(){ft(n);let i=L(3);return pt(i.onCancel())}),P(1),B(),te(2,QB,2,1,"div",21)}if(t&2){let n=L(3);mt("disabled",n.busyCancel),F(),nt(" ",n.busyCancel?"Cancelando\u2026":"Cancelar match"," "),F(),ne(n.cancelErr?2:-1)}}function JB(t,e){if(t&1&&(U(0,"div",17),P(1,"Match en curso"),B(),U(2,"div",28),tt(3,"div",29),U(4,"div",30),P(5),B(),te(6,qB,2,2,"a",31),B(),te(7,KB,6,4),te(8,YB,3,3)),t&2){let n=L(2);F(5),Ae(n.match.map??"Mapa no definido"),F(),ne(n.connection?6:-1),F(),ne(n.canFinalize?7:-1),F(),ne(n.canCancel?8:-1)}}function ZB(t,e){if(t&1&&(tt(0,"img",14),U(1,"div",15),P(2),B()),t&2){let n=e,r=L().$implicit,i=L(2);Cn("leaderAvatar",i.isLeaderB(r)),mt("src",i.avatarSrc(n),et),jr("title",n.personaName),F(2),Ae(i.displayName(n))}}function XB(t,e){if(t&1&&(tt(0,"img",14),U(1,"div",16),P(2,"Cargando..."),B()),t&2){let n=L().$implicit,r=L(2);Cn("leaderAvatar",r.isLeaderB(n)),mt("src",r.avatarSrc(null),et)}}function ej(t,e){if(t&1&&(U(0,"div",13),te(1,ZB,3,5),tn(2,"async"),jt(3,XB,3,3),B()),t&2){let n,r=e.$implicit,i=L(2);Cn("leader",i.isLeaderB(r)),F(),ne((n=nn(2,3,i.profile$(r)))?1:3,n)}}function tj(t,e){t&1&&(U(0,"div",11),P(1,"Vac\xEDo"),B())}function nj(t,e){if(t&1&&(U(0,"div",6)(1,"section",7)(2,"div",8),P(3),B(),U(4,"div",9),Hr(5,IB,4,5,"div",10,$r),te(7,wB,2,0,"div",11),B()(),U(8,"section",12),te(9,SB,6,1)(10,MB,7,0)(11,UB,9,3)(12,zB,18,5)(13,JB,9,4),B(),U(14,"section",7)(15,"div",8),P(16),B(),U(17,"div",9),Hr(18,ej,4,5,"div",10,$r),te(20,tj,2,0,"div",11),B()()()),t&2){let n,r=L();F(3),Ae((r.match.team1==null?null:r.match.team1.name)??"Team A"),F(2),zr(r.teamA),F(2),ne(r.teamA.length===0?7:-1),F(2),ne((n=r.match.estado)==="esperando_jugadores"?9:n==="seleccionando_lideres"?10:n==="armando_equipos"?11:n==="seleccionando_mapa"?12:n==="en_curso"?13:-1),F(7),Ae((r.match.team2==null?null:r.match.team2.name)??"Team B"),F(2),zr(r.teamB),F(2),ne(r.teamB.length===0?20:-1)}}var af=class t{matchSvc=x(xs);zone=x(Fe);profileCache=new Map;mapPool=["de_inferno","de_mirage","de_nuke","de_overpass","de_ancient","de_vertigo","de_anubis"];matchValue;set match(e){this.matchValue=e}get match(){return this.matchValue}showDetails=!0;mySteamId=null;leaderA=null;leaderB=null;connection=null;profileOf;busyPick=!1;pickErr="";busyBan=!1;banErr="";busyFinalize=!1;finalizeErr="";busyCancel=!1;cancelErr="";get teamA(){return this.match?.team1?.players??[]}get teamB(){return this.match?.team2?.players??[]}get queue(){return this.match?.queue??[]}get unassigned(){let e=this.match;return Array.isArray(e.unassigned)?e.unassigned:[]}get leaderAId(){return this.leaderA??this.teamA[0]??null}get leaderBId(){return this.leaderB??this.teamB[0]??null}get turn(){return this.match?.turn==="team2"?"team2":"team1"}get mapTurn(){return this.match?.mapTurn==="team2"?"team2":"team1"}get finalizeBy(){return Array.isArray(this.match?.finalizeBy)?this.match.finalizeBy:[]}isLeaderA(e){return!!e&&e===this.leaderAId}isLeaderB(e){return!!e&&e===this.leaderBId}get canPick(){return this.match?.estado!=="armando_equipos"||!this.mySteamId?!1:this.turn==="team1"?this.mySteamId===this.leaderAId:this.mySteamId===this.leaderBId}get canBan(){return this.match?.estado!=="seleccionando_mapa"||this.match?.map||!this.mySteamId?!1:this.mapTurn==="team1"?this.mySteamId===this.leaderAId:this.mySteamId===this.leaderBId}get isParticipant(){return this.mySteamId?this.teamA.includes(this.mySteamId)||this.teamB.includes(this.mySteamId):!1}get canFinalize(){return this.match?.estado!=="en_curso"||!this.mySteamId?!1:this.mySteamId===this.leaderAId||this.mySteamId===this.leaderBId}get canCancel(){return this.match?.estado!=="en_curso"||!this.mySteamId?!1:this.mySteamId===this.leaderAId||this.mySteamId===this.leaderBId}get hasFinalized(){return this.mySteamId?this.finalizeBy.includes(this.mySteamId):!1}get bannedMaps(){return Array.isArray(this.match?.bannedMaps)?this.match.bannedMaps:[]}isBanned(e){return this.bannedMaps.includes(e)}get availableIds(){let e=this.unassigned.length?this.unassigned:this.queue,n=this.leaderAId,r=this.leaderBId;return e.filter(i=>i&&i!==n&&i!==r)}profileRef(e){return mo(Lt,"steamProfiles",e)}fallbackAvatar="/steam-logo.png";avatarSrc(e){return e?.avatar?.trim()?e.avatar:this.fallbackAvatar}displayName(e){return e?.personaName?.trim()?e.personaName:"Jugador"}profile$(e){if(!e)return he(null);if(this.profileOf)return this.profileOf(e);let n=this.profileCache.get(e);if(n)return n;let r=new de(i=>{let o=Ms(this.profileRef(e),s=>{if(!s.exists()){this.zone.run(()=>i.next(null));return}let a=s.data(),u={steamId:a.steamId??e,personaName:a.personaName??"",avatar:a.avatar??"",profileUrl:a.profileUrl??""};if(!u.steamId){this.zone.run(()=>i.next(null));return}this.zone.run(()=>i.next(u))},s=>{console.error("Match board profile onSnapshot error:",s),this.zone.run(()=>i.next(null))});return()=>o()}).pipe(ip({bufferSize:1,refCount:!0}));return this.profileCache.set(e,r),r}async onBanMap(e){if(!(!this.canBan||this.busyBan)&&!(!e||this.isBanned(e)))try{this.busyBan=!0,this.banErr="",await this.matchSvc.banMap(this.mySteamId,e)}catch(n){this.banErr=n?.message??String(n)}finally{this.busyBan=!1}}async onPick(e){if(!(!this.canPick||this.busyPick)&&e)try{this.busyPick=!0,this.pickErr="",await this.matchSvc.pickPlayer(this.mySteamId,e)}catch(n){this.pickErr=n?.message??String(n)}finally{this.busyPick=!1}}async onFinalize(){if(!(!this.canFinalize||this.hasFinalized))try{this.busyFinalize=!0,this.finalizeErr="",await this.matchSvc.requestFinalizeMatch(this.mySteamId)}catch(e){this.finalizeErr=e?.message??String(e)}finally{this.busyFinalize=!1}}async onCancel(){if(this.canCancel)try{this.busyCancel=!0,this.cancelErr="",await this.matchSvc.cancelMatch()}catch(e){this.cancelErr=e?.message??String(e)}finally{this.busyCancel=!1}}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=In({type:t,selectors:[["app-match-board"]],inputs:{match:"match",showDetails:"showDetails",mySteamId:"mySteamId",leaderA:"leaderA",leaderB:"leaderB",connection:"connection",profileOf:"profileOf"},decls:17,vars:5,consts:[[1,"custom-wrapper","match-board-wrapper"],[1,"board","custom-card"],[1,"board__header"],[1,"state"],[1,"meta"],[1,"board__locked"],[1,"board__grid"],[1,"col","custom-card"],[1,"col__title"],[1,"stack"],[1,"player-card",3,"leader"],[1,"hint"],[1,"center","custom-card"],[1,"player-card"],["alt","avatar",1,"avatar",3,"src"],[1,"name"],[1,"name","placeholder"],[1,"center__title"],[1,"centerGrid"],[1,"player-card","tile"],[1,"player-card","tile",3,"selectable","disabled"],[1,"err"],[1,"player-card","tile",3,"click"],[1,"mapList"],[1,"mapRow",3,"banned","selectable"],[1,"mapRow",3,"click"],[1,"mapThumb"],[1,"mapName"],[1,"mapCard"],[1,"mapThumb","big"],[1,"mapName","big"],[1,"btn","primary",3,"href"],[1,"hint",2,"margin-top","12px"],["type","button",1,"btn",2,"margin-top","8px","width","100%",3,"click","disabled"],["type","button",1,"btn","danger",2,"margin-top","8px","width","100%",3,"click","disabled"]],template:function(n,r){n&1&&(U(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"span"),P(5,"Estado:"),B(),U(6,"b"),P(7),B()(),U(8,"div",4)(9,"span"),P(10,"Queue: "),U(11,"b"),P(12),B()(),te(13,gB,4,1,"span"),te(14,yB,4,1,"span"),B()(),te(15,vB,5,0,"div",5)(16,nj,21,5,"div",6),B()()),n&2&&(F(7),Ae(r.match.estado),F(5),nt("",r.queue.length,"/10"),F(),ne(r.match.map?13:-1),F(),ne(r.match.estado==="armando_equipos"?14:-1),F(),ne(r.showDetails?16:15))},dependencies:[Ua],styles:[".custom-wrapper.match-board-wrapper[_ngcontent-%COMP%]{height:100%;width:100%}.board.custom-card[_ngcontent-%COMP%]{padding:16px;width:min(1100px,100%);text-align:left}.board__header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:12px;padding-bottom:10px;border-bottom:1px solid rgba(255,255,255,.08);margin-bottom:10px;font-size:13px}.meta[_ngcontent-%COMP%]{display:flex;gap:12px;opacity:.85;flex-wrap:wrap}.board__locked[_ngcontent-%COMP%]{padding:16px;font-size:13px;opacity:.75}.board__grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1.3fr 1fr;gap:12px;align-items:start}.col.custom-card[_ngcontent-%COMP%], .center.custom-card[_ngcontent-%COMP%]{padding:12px;min-height:360px;text-align:left}.col__title[_ngcontent-%COMP%], .center__title[_ngcontent-%COMP%]{font-weight:800;font-size:12px;margin-bottom:10px}.stack[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px;padding:4px}.player-card[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;width:calc(100% - 8px);box-sizing:border-box;margin:4px;min-height:52px;color:#fffffe}.player-card.leader[_ngcontent-%COMP%]{border-style:solid;border-width:2px;border-color:#ff8a00}.avatar[_ngcontent-%COMP%]{width:auto;height:100%;max-height:46px;border-radius:8px;object-fit:cover;flex:0 0 auto}.avatar.leaderAvatar[_ngcontent-%COMP%]{outline:2px solid #ff8a00;outline-offset:1px}.name[_ngcontent-%COMP%]{font-size:12px;font-weight:600;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:flex;align-items:center}.name.placeholder[_ngcontent-%COMP%]{color:#ffffffa6;font-family:monospace}.hint[_ngcontent-%COMP%]{font-size:12px;opacity:.7;padding:6px 0}.centerGrid[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px;padding:4px}.tile[_ngcontent-%COMP%]{min-height:52px;width:calc(100% - 8px)}.selectable[_ngcontent-%COMP%]{cursor:pointer}.disabled[_ngcontent-%COMP%]{cursor:not-allowed;opacity:.65}.err[_ngcontent-%COMP%]{margin-top:10px;padding:10px;border:1px solid #b00020;border-radius:12px;font-size:12px}.mapList[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.mapRow[_ngcontent-%COMP%]{display:grid;grid-template-columns:44px 1fr;gap:10px;align-items:center;border:1px solid #ddd;border-radius:12px;padding:8px}.mapRow.banned[_ngcontent-%COMP%]{opacity:.55}.mapThumb[_ngcontent-%COMP%]{width:44px;height:28px;border-radius:8px;border:1px dashed #bbb}.mapThumb.big[_ngcontent-%COMP%]{width:100%;height:110px}.mapName[_ngcontent-%COMP%]{font-size:12px;font-weight:700}.mapName.big[_ngcontent-%COMP%]{text-align:center;font-size:14px;margin-top:8px}.mapCard[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;align-items:stretch}.btn[_ngcontent-%COMP%]{padding:8px 10px;border:1px solid #ddd;border-radius:12px;background:transparent;cursor:pointer;font-size:12px}.btn.primary[_ngcontent-%COMP%]{font-weight:800}.btn.danger[_ngcontent-%COMP%]{border-color:#b00020;color:#b00020;font-weight:700}.btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}"]})};function rj(t,e){if(t&1&&(Y(0,"div",19),P(1),ie()),t&2){let n=L(4);F(),nt(" ",n.steamRefreshErr," ")}}function ij(t,e){if(t&1){let n=Dt();sr(0,"img",12),Y(1,"div",13)(2,"div",14),P(3),ie(),Y(4,"div",15),P(5),ie(),Y(6,"a",16),P(7," Ver perfil "),ie(),Y(8,"div",17)(9,"button",18),wn("click",function(){ft(n);let i=L(),o=L(2);return pt(o.refreshMyProfile(i))}),P(10),ie(),te(11,rj,2,1,"div",19),ie()()}if(t&2){let n=e,r=L(3);or("src",n.avatar,et),F(3),nt(" ",n.personaName," "),F(2),Ae(n.steamId),F(),or("href",n.profileUrl,et),F(3),or("disabled",r.steamRefreshBusy),F(),nt(" ",r.steamRefreshBusy?"Actualizando\u2026":"Actualizar datos"," "),F(),ne(r.steamRefreshErr?11:-1)}}function oj(t,e){t&1&&(Y(0,"div",5),P(1,"Cargando perfil Steam\u2026"),ie())}function sj(t,e){t&1&&(Y(0,"div",20),P(1," Estado: "),Y(2,"b"),P(3,"En cola"),ie()())}function aj(t,e){t&1&&(Y(0,"div",20),P(1," Estado: "),Y(2,"b"),P(3,"En match (Team A)"),ie()())}function cj(t,e){t&1&&(Y(0,"div",20),P(1," Estado: "),Y(2,"b"),P(3,"En match (Team B)"),ie()())}function uj(t,e){t&1&&(Y(0,"div",20),P(1," Estado: "),Y(2,"b"),P(3,"Fuera"),ie()())}function lj(t,e){if(t&1&&te(0,sj,4,0,"div",20)(1,aj,4,0,"div",20)(2,cj,4,0,"div",20)(3,uj,4,0,"div",20),t&2){let n,r=L(),i=L(2);ne((n=i.myStatus(e,r))==="cola"?0:n==="team1"?1:n==="team2"?2:3)}}function dj(t,e){t&1&&(Y(0,"div",5),P(1,"Cargando match\u2026"),ie())}function hj(t,e){if(t&1){let n=Dt();Y(0,"button",8),wn("click",function(){ft(n);let i=L(2),o=L(),s=L(2);return pt(s.leave(i,o))}),P(1," Salir del match "),ie()}}function fj(t,e){if(t&1){let n=Dt();Y(0,"button",8),wn("click",function(){ft(n);let i=L(2),o=L(),s=L(2);return pt(s.join(i,o))}),P(1," Ingresar al match "),ie()}}function pj(t,e){if(t&1&&(Y(0,"div",21),P(1),ie(),te(2,hj,2,0,"button",22)(3,fj,2,0,"button",22)),t&2){let n=L(),r=L(),i=L(2);F(),nt(" Esperando jugadores (",n.queue.length,"/10) "),F(),ne(i.myStatus(n,r)==="cola"?2:3)}}function mj(t,e){t&1&&(Y(0,"div",24),P(1," Activ\xE1 \u201CVer match\u201D para ver el detalle del estado. "),ie())}function gj(t,e){if(t&1){let n=Dt();Y(0,"button",8),wn("click",function(){ft(n);let i=L(5);return pt(i.toggleWatch())}),P(1),ie(),te(2,mj,2,0,"div",24)}if(t&2){let n=L(5);F(),nt(" ",n.watchMatch?"Dejar de ver":"Ver match"," "),F(),ne(n.watchMatch?-1:2)}}function yj(t,e){t&1&&(Y(0,"div",23),P(1," Est\xE1s dentro. Vas a ver el estado completo a la derecha. "),ie())}function vj(t,e){if(t&1&&(Y(0,"div",21),P(1," Seleccionando l\xEDderes\u2026 "),ie(),te(2,gj,3,2)(3,yj,2,0,"div",23)),t&2){let n=L(),r=L(),i=L(2);F(2),ne(i.myStatus(n,r)==="fuera"?2:3)}}function _j(t,e){if(t&1){let n=Dt();Y(0,"button",8),wn("click",function(){ft(n);let i=L(5);return pt(i.toggleWatch())}),P(1),ie()}if(t&2){let n=L(5);F(),nt(" ",n.watchMatch?"Dejar de ver":"Ver match"," ")}}function Ej(t,e){t&1&&(Y(0,"div",23),P(1," Seleccion\xE1 jugadores en el panel de la derecha. "),ie())}function Ij(t,e){if(t&1&&(Y(0,"div",21),P(1," Armando equipos\u2026 "),ie(),te(2,_j,2,1,"button",22)(3,Ej,2,0,"div",23)),t&2){let n=L(),r=L(),i=L(2);F(2),ne(i.myStatus(n,r)==="fuera"?2:3)}}function wj(t,e){if(t&1){let n=Dt();Y(0,"button",8),wn("click",function(){ft(n);let i=L(5);return pt(i.toggleWatch())}),P(1),ie()}if(t&2){let n=L(5);F(),nt(" ",n.watchMatch?"Dejar de ver":"Ver match"," ")}}function Cj(t,e){t&1&&(Y(0,"div",23),P(1," Bane\xE1 mapas en el panel de la derecha. "),ie())}function Tj(t,e){if(t&1&&(Y(0,"div",21),P(1," Baneando mapas\u2026 "),ie(),te(2,wj,2,1,"button",22)(3,Cj,2,0,"div",23)),t&2){let n=L(),r=L(),i=L(2);F(2),ne(i.myStatus(n,r)==="fuera"?2:3)}}function Dj(t,e){if(t&1&&(Y(0,"a",26),P(1," Ingresar como espectador "),ie()),t&2){let n=L();or("href",n.spectateUrl,et)}}function bj(t,e){if(t&1&&(Y(0,"a",26),P(1," Ingresar al servidor "),ie()),t&2){let n=L();or("href",n.connectUrl,et)}}function Sj(t,e){if(t&1&&te(0,Dj,2,1,"a",26)(1,bj,2,1,"a",26),t&2){let n=L(2),r=L(),i=L(2);ne(i.myStatus(n,r)==="fuera"?0:1)}}function Aj(t,e){if(t&1&&(Y(0,"div",21),P(1," Match en curso "),ie(),Y(2,"div",25),P(3," Mapa: "),Y(4,"b"),P(5),ie()(),te(6,Sj,2,1)),t&2){let n,r=L(),i=L(3);F(5),Ae(r.map??"\u2014"),F(),ne((n=i.activeServerConnection)?6:-1,n)}}function Rj(t,e){if(t&1&&te(0,pj,4,2)(1,vj,4,1)(2,Ij,4,1)(3,Tj,4,1)(4,Aj,7,2),t&2){let n;ne((n=e.estado)==="esperando_jugadores"?0:n==="seleccionando_lideres"?1:n==="armando_equipos"?2:n==="seleccionando_mapa"?3:n==="en_curso"?4:-1)}}function Nj(t,e){t&1&&(Y(0,"div",5),P(1,"Cargando match\u2026"),ie())}function Mj(t,e){if(t&1&&sr(0,"app-match-board",11),t&2){let n=e,r=L(),i=L(2);or("match",n)("showDetails",i.myStatus(n,r)!=="fuera"||i.watchMatch)("leaderA",(n.team1==null||n.team1.players==null?null:n.team1.players[0])??null)("leaderB",(n.team2==null||n.team2.players==null?null:n.team2.players[0])??null)("mySteamId",r)("connection",i.activeServerConnection)}}function xj(t,e){if(t&1){let n=Dt();Y(0,"div",1)(1,"div",2)(2,"section",3)(3,"div",4),te(4,ij,12,7)(5,oj,2,0,"div",5),ie(),Y(6,"div",6),te(7,lj,4,1),tn(8,"async"),jt(9,dj,2,0,"div",5),ie(),Y(10,"div",7)(11,"button",8),wn("click",function(){ft(n);let i=L(2);return pt(i.logout())}),P(12," Logout "),ie()()(),Y(13,"section",3)(14,"h3",9),P(15,"Acciones"),ie(),te(16,Rj,5,1),tn(17,"async"),jt(18,Nj,2,0,"div",5),ie()(),Y(19,"div",10),te(20,Mj,1,6,"app-match-board",11),tn(21,"async"),ie()()}if(t&2){let n,r,i,o,s=L(2);F(4),ne((n=s.myProfile)?4:5,n),F(3),ne((r=nn(8,4,s.match$))?7:9,r),F(9),ne((i=nn(17,6,s.match$))?16:18,i),F(4),ne((o=nn(21,8,s.match$))?20:-1,o)}}function Pj(t,e){if(t&1){let n=Dt();Y(0,"button",8),wn("click",function(){ft(n);let i=L(2);return pt(i.logout())}),P(1,"Logoff"),ie(),Y(2,"div"),P(3,"No permitido login an\xF3nimo"),ie()}}function Oj(t,e){if(t&1&&te(0,xj,22,10,"div",1)(1,Pj,4,0),t&2){let n,r=L();ne((n=r.steamIdFromUid(e.uid))?0:1,n)}}function kj(t,e){t&1&&(Y(0,"p"),P(1,"Cargando sesi\xF3n\u2026"),ie())}var cf=class t{auth=x(un);matchSvc=x(xs);router=x(rn);destroyRef=x(vn);zone=x(Fe);cdr=x(Ho);watchMatch=!1;serverConnection={host:"45.235.98.222",port:27159,spectatePort:27159,connectUrl:"steam://connect/45.235.98.222:27159",spectateUrl:"steam://connect/45.235.98.222:27159"};steamErr="";steamRefreshErr="";steamRefreshBusy=!1;currentUserSteamId=null;currentUserUnsubscribe=null;myProfile=null;match$=this.matchSvc.match$;constructor(){this.destroyRef.onDestroy(()=>{this.currentUserUnsubscribe?.(),this.currentUserUnsubscribe=null}),this.matchSvc.ensureAndSubscribe().catch(e=>console.error("ensureAndSubscribe error",e)),this.auth.user$.pipe(iR(this.destroyRef)).subscribe(e=>{let n=this.steamIdFromUid(e?.uid??"");this.setCurrentUserSteamId(n)})}steamIdFromUid(e){return e?.startsWith("steam:")?e.slice(6):null}profileRef(e){return mo(Lt,"steamProfiles",e)}async readProfileFromStore(e){let n=await of(this.profileRef(e));return n.exists()?this.normalizeProfile(e,n.data()):null}normalizeProfile(e,n){if(!n)return null;let r={steamId:n.steamId??e,personaName:n.personaName??"",avatar:n.avatar??"",profileUrl:n.profileUrl??""};return r.steamId?r:null}async fetchAndStoreProfile(e){let n=new AbortController,r=setTimeout(()=>n.abort(),15e3),i=await fetch(`/api/steam/me?steamId=${encodeURIComponent(e)}`,{signal:n.signal}).finally(()=>clearTimeout(r));if(!i.ok){let a=await i.text().catch(()=>"");throw new Error(`SteamMe HTTP ${i.status} ${a}`.trim())}let o=await i.json(),s=this.normalizeProfile(e,o);if(!s)throw new Error("SteamMe response missing steamId");return await fi(this.profileRef(e),se(M({},s),{updatedAt:kt()}),{merge:!0}),s}setCurrentUserSteamId(e){if(this.currentUserSteamId!==e){if(this.currentUserSteamId=e,this.currentUserUnsubscribe?.(),this.currentUserUnsubscribe=null,!e){this.zone.run(()=>{this.myProfile=null});return}this.currentUserUnsubscribe=Ms(this.profileRef(e),n=>{if(!n.exists()){this.zone.run(()=>{this.myProfile=null});return}let r=this.normalizeProfile(e,n.data());r&&this.zone.run(()=>{this.myProfile=r,this.steamErr=""})},n=>{console.error("Steam profile onSnapshot error:",n),this.zone.run(()=>{this.steamErr=n?.message??String(n)})}),this.ensureProfileOnFirstLogin(e).catch(n=>{console.error("ensureProfileOnFirstLogin error:",n)})}}async ensureProfileOnFirstLogin(e){await this.readProfileFromStore(e)||await this.fetchAndStoreProfile(e)}get activeServerConnection(){return this.serverConnection}async refreshMyProfile(e){if(!(!e||this.steamRefreshBusy)){this.zone.run(()=>{this.steamRefreshBusy=!0,this.steamRefreshErr=""});try{await this.fetchAndStoreProfile(e)}catch(n){this.zone.run(()=>{this.steamRefreshErr=n?.message??String(n),this.cdr.detectChanges()})}finally{this.zone.run(()=>{this.steamRefreshBusy=!1,this.cdr.detectChanges()})}}}myStatus(e,n){return!e||!n?"fuera":(e.team1?.players??[]).includes(n)?"team1":(e.team2?.players??[]).includes(n)?"team2":(e.queue??[]).includes(n)?"cola":"fuera"}async join(e,n){!e||!n||await this.matchSvc.joinQueue(n)}async leave(e,n){!e||!n||await this.matchSvc.leaveQueue(n)}toggleWatch(){this.watchMatch=!this.watchMatch}async logout(){await this.auth.logout(),await this.router.navigateByUrl("/login")}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=In({type:t,selectors:[["app-dashboard"]],decls:4,vars:3,consts:[[1,"dashboard"],[1,"dashboard-grid"],[1,"dashboard-left"],[1,"custom-card"],[1,"dashboard-profile"],[1,"dashboard-muted"],[1,"dashboard-status"],[1,"dashboard-space-top"],[1,"button-27",3,"click"],[1,"dashboard-actions-title"],[1,"dashboard-match"],[3,"match","showDetails","leaderA","leaderB","mySteamId","connection"],["alt","avatar",1,"dashboard-avatar",3,"src"],[1,"dashboard-profile-text"],[1,"dashboard-name"],[1,"dashboard-meta"],["target","_blank","rel","noreferrer",1,"dashboard-link",3,"href"],[1,"dashboard-space-top-sm"],[1,"button-27",3,"click","disabled"],[1,"dashboard-error","dashboard-space-top-sm"],[1,"dashboard-status-text"],[1,"dashboard-muted","dashboard-space-bottom"],[1,"button-27"],[1,"dashboard-note"],[1,"dashboard-note","dashboard-space-top-sm"],[1,"dashboard-status-text","dashboard-space-bottom"],[1,"dashboard-button","dashboard-link-button",3,"href"]],template:function(n,r){if(n&1&&(Y(0,"div",0),te(1,Oj,2,1),tn(2,"async"),jt(3,kj,2,0,"p"),ie()),n&2){let i;F(),ne((i=nn(2,1,r.auth.user$))?1:3,i)}},dependencies:[af,Ua],styles:[".dashboard[_ngcontent-%COMP%]{padding:16px;font-family:system-ui}.dashboard-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 2.2fr;gap:16px;align-items:start}.dashboard-left[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.dashboard-match[_ngcontent-%COMP%]{min-width:0}.dashboard-card[_ngcontent-%COMP%]{border:1px solid #e5e5e5;border-radius:12px;padding:12px}.dashboard-profile[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center}.dashboard-avatar[_ngcontent-%COMP%]{width:56px;height:56px;border-radius:12px;object-fit:cover}.dashboard-profile-text[_ngcontent-%COMP%]{min-width:0}.dashboard-name[_ngcontent-%COMP%]{font-weight:800;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.dashboard-meta[_ngcontent-%COMP%]{font-size:12px;opacity:.7}.dashboard-link[_ngcontent-%COMP%]{font-size:12px}.dashboard-status[_ngcontent-%COMP%]{margin-top:12px;border-top:1px solid #eee;padding-top:12px}.dashboard-status-text[_ngcontent-%COMP%]{font-size:13px}.dashboard-button[_ngcontent-%COMP%]{padding:10px 14px;cursor:pointer;width:100%}.dashboard-link-button[_ngcontent-%COMP%]{display:inline-block;text-align:center;text-decoration:none;border:1px solid #ccc;border-radius:6px}.dashboard-actions-title[_ngcontent-%COMP%]{margin:0 0 8px}.dashboard-muted[_ngcontent-%COMP%]{font-size:13px;opacity:.8}.dashboard-note[_ngcontent-%COMP%]{font-size:13px;opacity:.7}.dashboard-error[_ngcontent-%COMP%]{font-size:12px;opacity:.7;margin-top:8px}.dashboard-space-top[_ngcontent-%COMP%]{margin-top:12px}.dashboard-space-top-sm[_ngcontent-%COMP%]{margin-top:10px}.dashboard-space-bottom[_ngcontent-%COMP%]{margin-bottom:10px}"]})};var oR=async()=>{let t=x(un),e=x(rn);return await t.isLoggedInOnce()?!0:(e.navigateByUrl("/login"),!1)};var sR=async()=>{let t=x(un),e=x(rn);return await t.isLoggedInOnce()?(e.navigateByUrl("/dashboard"),!1):!0};var aR=[{path:"",pathMatch:"full",redirectTo:"dashboard"},{path:"login",component:sf,canActivate:[sR]},{path:"dashboard",component:cf,canActivate:[oR]},{path:"**",redirectTo:"dashboard"}];var cR={providers:[cm(),Gg(aR)]};var uf=class t{auth=x(un);title=ir("myapp");async ngOnInit(){await this.auth.ensurePersistence()}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=In({type:t,selectors:[["app-root"]],decls:1,vars:0,template:function(n,r){n&1&&sr(0,"router-outlet")},dependencies:[oc],encapsulation:2})};Cg(uf,cR).catch(t=>console.error(t));
