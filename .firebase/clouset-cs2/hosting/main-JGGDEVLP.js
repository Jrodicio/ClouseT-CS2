var QM=Object.defineProperty,YM=Object.defineProperties;var JM=Object.getOwnPropertyDescriptors;var Tu=Object.getOwnPropertySymbols;var rw=Object.prototype.hasOwnProperty,iw=Object.prototype.propertyIsEnumerable;var nw=(t,e,n)=>e in t?QM(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,M=(t,e)=>{for(var n in e||={})rw.call(e,n)&&nw(t,n,e[n]);if(Tu)for(var n of Tu(e))iw.call(e,n)&&nw(t,n,e[n]);return t},J=(t,e)=>YM(t,JM(e));var np=(t,e)=>{var n={};for(var r in t)rw.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&Tu)for(var r of Tu(t))e.indexOf(r)<0&&iw.call(t,r)&&(n[r]=t[r]);return n};var yt=null,Su=!1,sp=1,ZM=null,Ct=Symbol("SIGNAL");function Y(t){let e=yt;return yt=t,e}function Ru(){return yt}var sa={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function aa(t){if(Su)throw new Error("");if(yt===null)return;yt.consumerOnSignalRead(t);let e=yt.producersTail;if(e!==void 0&&e.producer===t)return;let n,r=yt.recomputing;if(r&&(n=e!==void 0?e.nextProducer:yt.producers,n!==void 0&&n.producer===t)){yt.producersTail=n,n.lastReadVersion=t.version;return}let i=t.consumersTail;if(i!==void 0&&i.consumer===yt&&(!r||eN(i,yt)))return;let o=Do(yt),s={producer:t,consumer:yt,nextProducer:n,prevConsumer:i,lastReadVersion:t.version,nextConsumer:void 0};yt.producersTail=s,e!==void 0?e.nextProducer=s:yt.producers=s,o&&cw(t,s)}function ow(){sp++}function ap(t){if(!(Do(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===sp)){if(!t.producerMustRecompute(t)&&!Nu(t)){op(t);return}t.producerRecomputeValue(t),op(t)}}function cp(t){if(t.consumers===void 0)return;let e=Su;Su=!0;try{for(let n=t.consumers;n!==void 0;n=n.nextConsumer){let r=n.consumer;r.dirty||XM(r)}}finally{Su=e}}function up(){return yt?.consumerAllowSignalWrites!==!1}function XM(t){t.dirty=!0,cp(t),t.consumerMarkedDirty?.(t)}function op(t){t.dirty=!1,t.lastCleanEpoch=sp}function ca(t){return t&&sw(t),Y(t)}function sw(t){t.producersTail=void 0,t.recomputing=!0}function Mu(t,e){Y(e),t&&aw(t)}function aw(t){t.recomputing=!1;let e=t.producersTail,n=e!==void 0?e.nextProducer:t.producers;if(n!==void 0){if(Do(t))do n=lp(n);while(n!==void 0);e!==void 0?e.nextProducer=void 0:t.producers=void 0}}function Nu(t){for(let e=t.producers;e!==void 0;e=e.nextProducer){let n=e.producer,r=e.lastReadVersion;if(r!==n.version||(ap(n),r!==n.version))return!0}return!1}function ua(t){if(Do(t)){let e=t.producers;for(;e!==void 0;)e=lp(e)}t.producers=void 0,t.producersTail=void 0,t.consumers=void 0,t.consumersTail=void 0}function cw(t,e){let n=t.consumersTail,r=Do(t);if(n!==void 0?(e.nextConsumer=n.nextConsumer,n.nextConsumer=e):(e.nextConsumer=void 0,t.consumers=e),e.prevConsumer=n,t.consumersTail=e,!r)for(let i=t.producers;i!==void 0;i=i.nextProducer)cw(i.producer,i)}function lp(t){let e=t.producer,n=t.nextProducer,r=t.nextConsumer,i=t.prevConsumer;if(t.nextConsumer=void 0,t.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!Do(e)){let o=e.producers;for(;o!==void 0;)o=lp(o)}return n}function Do(t){return t.consumerIsAlwaysLive||t.consumers!==void 0}function dp(t){ZM?.(t)}function eN(t,e){let n=e.producersTail;if(n!==void 0){let r=e.producers;do{if(r===t)return!0;if(r===n)break;r=r.nextProducer}while(r!==void 0)}return!1}function hp(t,e){return Object.is(t,e)}function xu(t,e){let n=Object.create(tN);n.computation=t,e!==void 0&&(n.equal=e);let r=()=>{if(ap(n),aa(n),n.value===Au)throw n.error;return n.value};return r[Ct]=n,dp(n),r}var rp=Symbol("UNSET"),ip=Symbol("COMPUTING"),Au=Symbol("ERRORED"),tN=J(M({},sa),{value:rp,dirty:!0,error:null,equal:hp,kind:"computed",producerMustRecompute(t){return t.value===rp||t.value===ip},producerRecomputeValue(t){if(t.value===ip)throw new Error("");let e=t.value;t.value=ip;let n=ca(t),r,i=!1;try{r=t.computation(),Y(null),i=e!==rp&&e!==Au&&r!==Au&&t.equal(e,r)}catch(o){r=Au,t.error=o}finally{Mu(t,n)}if(i){t.value=e;return}t.value=r,t.version++}});function nN(){throw new Error}var uw=nN;function lw(t){uw(t)}function fp(t){uw=t}var rN=null;function pp(t,e){let n=Object.create(Pu);n.value=t,e!==void 0&&(n.equal=e);let r=()=>dw(n);return r[Ct]=n,dp(n),[r,s=>la(n,s),s=>hw(n,s)]}function dw(t){return aa(t),t.value}function la(t,e){up()||lw(t),t.equal(t.value,e)||(t.value=e,iN(t))}function hw(t,e){up()||lw(t),la(t,e(t.value))}var Pu=J(M({},sa),{equal:hp,value:void 0,kind:"signal"});function iN(t){t.version++,ow(),cp(t),rN?.(t)}function mp(t){let e=Y(null);try{return t()}finally{Y(e)}}function se(t){return typeof t=="function"}function bo(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Ou=bo(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function da(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var dt=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(se(r))try{r()}catch(o){e=o instanceof Ou?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{fw(o)}catch(s){e=e??[],s instanceof Ou?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Ou(e)}}add(e){var n;if(e&&e!==this)if(this.closed)fw(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&da(n,e)}remove(e){let{_finalizers:n}=this;n&&da(n,e),e instanceof t&&e._removeParent(this)}};dt.EMPTY=(()=>{let t=new dt;return t.closed=!0,t})();var gp=dt.EMPTY;function ku(t){return t instanceof dt||t&&"closed"in t&&se(t.remove)&&se(t.add)&&se(t.unsubscribe)}function fw(t){se(t)?t():t.unsubscribe()}var fn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var To={setTimeout(t,e,...n){let{delegate:r}=To;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=To;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Fu(t){To.setTimeout(()=>{let{onUnhandledError:e}=fn;if(e)e(t);else throw t})}function ha(){}var pw=yp("C",void 0,void 0);function mw(t){return yp("E",void 0,t)}function gw(t){return yp("N",t,void 0)}function yp(t,e,n){return{kind:t,value:e,error:n}}var Ei=null;function So(t){if(fn.useDeprecatedSynchronousErrorHandling){let e=!Ei;if(e&&(Ei={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=Ei;if(Ei=null,n)throw r}}else t()}function yw(t){fn.useDeprecatedSynchronousErrorHandling&&Ei&&(Ei.errorThrown=!0,Ei.error=t)}var Ii=class extends dt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,ku(e)&&e.add(this)):this.destination=aN}static create(e,n,r){return new Ao(e,n,r)}next(e){this.isStopped?_p(gw(e),this):this._next(e)}error(e){this.isStopped?_p(mw(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?_p(pw,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},oN=Function.prototype.bind;function vp(t,e){return oN.call(t,e)}var Ep=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Lu(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Lu(r)}else Lu(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Lu(n)}}},Ao=class extends Ii{constructor(e,n,r){super();let i;if(se(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&fn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&vp(e.next,o),error:e.error&&vp(e.error,o),complete:e.complete&&vp(e.complete,o)}):i=e}this.destination=new Ep(i)}};function Lu(t){fn.useDeprecatedSynchronousErrorHandling?yw(t):Fu(t)}function sN(t){throw t}function _p(t,e){let{onStoppedNotification:n}=fn;n&&To.setTimeout(()=>n(t,e))}var aN={closed:!0,next:ha,error:sN,complete:ha};var Ro=typeof Symbol=="function"&&Symbol.observable||"@@observable";function pn(t){return t}function Ip(...t){return wp(t)}function wp(t){return t.length===0?pn:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var de=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=uN(n)?n:new Ao(n,r,i);return So(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=vw(r),new r((i,o)=>{let s=new Ao({next:a=>{try{n(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Ro](){return this}pipe(...n){return wp(n)(this)}toPromise(n){return n=vw(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function vw(t){var e;return(e=t??fn.Promise)!==null&&e!==void 0?e:Promise}function cN(t){return t&&se(t.next)&&se(t.error)&&se(t.complete)}function uN(t){return t&&t instanceof Ii||cN(t)&&ku(t)}function lN(t){return se(t?.lift)}function we(t){return e=>{if(lN(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ce(t,e,n,r,i){return new Cp(t,e,n,r,i)}var Cp=class extends Ii{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};var _w=bo(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var rt=(()=>{class t extends de{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Vu(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new _w}next(n){So(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){So(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){So(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?gp:(this.currentObservers=null,o.push(n),new dt(()=>{this.currentObservers=null,da(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new de;return n.source=this,n}}return t.create=(e,n)=>new Vu(e,n),t})(),Vu=class extends rt{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:gp}};var We=class extends rt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Nt=new de(t=>t.complete());function Ew(t){return t&&se(t.schedule)}function Iw(t){return t[t.length-1]}function ju(t){return se(Iw(t))?t.pop():void 0}function Mr(t){return Ew(Iw(t))?t.pop():void 0}function Cw(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(h){try{l(r.next(h))}catch(p){s(p)}}function u(h){try{l(r.throw(h))}catch(p){s(p)}}function l(h){h.done?o(h.value):i(h.value).then(a,u)}l((r=r.apply(t,e||[])).next())})}function ww(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function wi(t){return this instanceof wi?(this.v=t,this):new wi(t)}function Dw(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(y){return function(T){return Promise.resolve(T).then(y,p)}}function a(y,T){r[y]&&(i[y]=function(R){return new Promise(function(A,F){o.push([y,R,A,F])>1||u(y,R)})},T&&(i[y]=T(i[y])))}function u(y,T){try{l(r[y](T))}catch(R){g(o[0][3],R)}}function l(y){y.value instanceof wi?Promise.resolve(y.value.v).then(h,p):g(o[0][2],y)}function h(y){u("next",y)}function p(y){u("throw",y)}function g(y,T){y(T),o.shift(),o.length&&u(o[0][0],o[0][1])}}function bw(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof ww=="function"?ww(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,u){s=t[o](s),i(a,u,s.done,s.value)})}}function i(o,s,a,u){Promise.resolve(u).then(function(l){o({value:l,done:a})},s)}}var Bu=t=>t&&typeof t.length=="number"&&typeof t!="function";function Uu(t){return se(t?.then)}function $u(t){return se(t[Ro])}function Hu(t){return Symbol.asyncIterator&&se(t?.[Symbol.asyncIterator])}function zu(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function dN(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var qu=dN();function Gu(t){return se(t?.[qu])}function Wu(t){return Dw(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield wi(n.read());if(i)return yield wi(void 0);yield yield wi(r)}}finally{n.releaseLock()}})}function Ku(t){return se(t?.getReader)}function Le(t){if(t instanceof de)return t;if(t!=null){if($u(t))return hN(t);if(Bu(t))return fN(t);if(Uu(t))return pN(t);if(Hu(t))return Tw(t);if(Gu(t))return mN(t);if(Ku(t))return gN(t)}throw zu(t)}function hN(t){return new de(e=>{let n=t[Ro]();if(se(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function fN(t){return new de(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function pN(t){return new de(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Fu)})}function mN(t){return new de(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function Tw(t){return new de(e=>{yN(t,e).catch(n=>e.error(n))})}function gN(t){return Tw(Wu(t))}function yN(t,e){var n,r,i,o;return Cw(this,void 0,void 0,function*(){try{for(n=bw(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function xt(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function Qu(t,e=0){return we((n,r)=>{n.subscribe(Ce(r,i=>xt(r,t,()=>r.next(i),e),()=>xt(r,t,()=>r.complete(),e),i=>xt(r,t,()=>r.error(i),e)))})}function Yu(t,e=0){return we((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function Sw(t,e){return Le(t).pipe(Yu(e),Qu(e))}function Aw(t,e){return Le(t).pipe(Yu(e),Qu(e))}function Rw(t,e){return new de(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function Mw(t,e){return new de(n=>{let r;return xt(n,e,()=>{r=t[qu](),xt(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>se(r?.return)&&r.return()})}function Ju(t,e){if(!t)throw new Error("Iterable cannot be null");return new de(n=>{xt(n,e,()=>{let r=t[Symbol.asyncIterator]();xt(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function Nw(t,e){return Ju(Wu(t),e)}function xw(t,e){if(t!=null){if($u(t))return Sw(t,e);if(Bu(t))return Rw(t,e);if(Uu(t))return Aw(t,e);if(Hu(t))return Ju(t,e);if(Gu(t))return Mw(t,e);if(Ku(t))return Nw(t,e)}throw zu(t)}function Ve(t,e){return e?xw(t,e):Le(t)}function ge(...t){let e=Mr(t);return Ve(t,e)}function Dp(t,e){let n=se(t)?t:()=>t,r=i=>i.error(n());return new de(e?i=>e.schedule(r,0,i):r)}function Zu(t){return!!t&&(t instanceof de||se(t.lift)&&se(t.subscribe))}var Ci=bo(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function Ae(t,e){return we((n,r)=>{let i=0;n.subscribe(Ce(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:vN}=Array;function _N(t,e){return vN(e)?t(...e):t(e)}function Xu(t){return Ae(e=>_N(t,e))}var{isArray:EN}=Array,{getPrototypeOf:IN,prototype:wN,keys:CN}=Object;function el(t){if(t.length===1){let e=t[0];if(EN(e))return{args:e,keys:null};if(DN(e)){let n=CN(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function DN(t){return t&&typeof t=="object"&&IN(t)===wN}function tl(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function bp(...t){let e=Mr(t),n=ju(t),{args:r,keys:i}=el(t);if(r.length===0)return Ve([],e);let o=new de(bN(r,e,i?s=>tl(i,s):pn));return n?o.pipe(Xu(n)):o}function bN(t,e,n=pn){return r=>{Pw(e,()=>{let{length:i}=t,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)Pw(e,()=>{let l=Ve(t[u],e),h=!1;l.subscribe(Ce(r,p=>{o[u]=p,h||(h=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function Pw(t,e,n){t?xt(n,t,e):e()}function Ow(t,e,n,r,i,o,s,a){let u=[],l=0,h=0,p=!1,g=()=>{p&&!u.length&&!l&&e.complete()},y=R=>l<r?T(R):u.push(R),T=R=>{o&&e.next(R),l++;let A=!1;Le(n(R,h++)).subscribe(Ce(e,F=>{i?.(F),o?y(F):e.next(F)},()=>{A=!0},void 0,()=>{if(A)try{for(l--;u.length&&l<r;){let F=u.shift();s?xt(e,s,()=>T(F)):T(F)}g()}catch(F){e.error(F)}}))};return t.subscribe(Ce(e,y,()=>{p=!0,g()})),()=>{a?.()}}function Dt(t,e,n=1/0){return se(e)?Dt((r,i)=>Ae((o,s)=>e(r,o,i,s))(Le(t(r,i))),n):(typeof e=="number"&&(n=e),we((r,i)=>Ow(r,i,t,n)))}function kw(t=1/0){return Dt(pn,t)}function Fw(){return kw(1)}function Mo(...t){return Fw()(Ve(t,Mr(t)))}function fa(t){return new de(e=>{Le(t()).subscribe(e)})}function Tp(...t){let e=ju(t),{args:n,keys:r}=el(t),i=new de(o=>{let{length:s}=n;if(!s){o.complete();return}let a=new Array(s),u=s,l=s;for(let h=0;h<s;h++){let p=!1;Le(n[h]).subscribe(Ce(o,g=>{p||(p=!0,l--),a[h]=g},()=>u--,void 0,()=>{(!u||!p)&&(l||o.next(r?tl(r,a):a),o.complete())}))}});return e?i.pipe(Xu(e)):i}function An(t,e){return we((n,r)=>{let i=0;n.subscribe(Ce(r,o=>t.call(e,o,i++)&&r.next(o)))})}function pa(t){return we((e,n)=>{let r=null,i=!1,o;r=e.subscribe(Ce(n,void 0,void 0,s=>{o=Le(t(s,pa(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function nl(t,e){return se(e)?Dt(t,e,1):Dt(t,1)}function Sp(t){return we((e,n)=>{let r=!1;e.subscribe(Ce(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function Jn(t){return t<=0?()=>Nt:we((e,n)=>{let r=0;e.subscribe(Ce(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function Lw(t=TN){return we((e,n)=>{let r=!1;e.subscribe(Ce(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function TN(){return new Ci}function Ap(t){return we((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function Zn(t,e){let n=arguments.length>=2;return r=>r.pipe(t?An((i,o)=>t(i,o,r)):pn,Jn(1),n?Sp(e):Lw(()=>new Ci))}function rl(t){return t<=0?()=>Nt:we((e,n)=>{let r=[];e.subscribe(Ce(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function Rp(...t){let e=Mr(t);return we((n,r)=>{(e?Mo(t,n,e):Mo(t,n)).subscribe(r)})}function Rn(t,e){return we((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(Ce(r,u=>{i?.unsubscribe();let l=0,h=o++;Le(t(u,h)).subscribe(i=Ce(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Di(t){return we((e,n)=>{Le(t).subscribe(Ce(n,()=>n.complete(),ha)),!n.closed&&e.subscribe(n)})}function bt(t,e,n){let r=se(t)||e||n?{next:t,error:e,complete:n}:t;return r?we((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(Ce(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):pn}var Mp;function il(){return Mp}function Mn(t){let e=Mp;return Mp=t,e}var Vw=Symbol("NotFound");function No(t){return t===Vw||t?.name==="\u0275NotFound"}var ul="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",z=class extends Error{code;constructor(e,n){super(Oo(e,n)),this.code=e}};function RN(t){return`NG0${Math.abs(t)}`}function Oo(t,e){return`${RN(t)}${e?": "+e:""}`}function De(t){for(let e in t)if(t[e]===De)return e;throw Error("")}function Hw(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function er(t){if(typeof t=="string")return t;if(Array.isArray(t))return`[${t.map(er).join(", ")}]`;if(t==null)return""+t;let e=t.overriddenName||t.name;if(e)return`${e}`;let n=t.toString();if(n==null)return""+n;let r=n.indexOf(`
`);return r>=0?n.slice(0,r):n}function qp(t,e){return t?e?`${t} ${e}`:t:e||""}var MN=De({__forward_ref__:De});function Ri(t){return t.__forward_ref__=Ri,t.toString=function(){return er(this())},t}function ht(t){return Gp(t)?t():t}function Gp(t){return typeof t=="function"&&t.hasOwnProperty(MN)&&t.__forward_ref__===Ri}function K(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function nr(t){return{providers:t.providers||[],imports:t.imports||[]}}function Ea(t){return NN(t,ll)}function Wp(t){return Ea(t)!==null}function NN(t,e){return t.hasOwnProperty(e)&&t[e]||null}function xN(t){let e=t?.[ll]??null;return e||null}function xp(t){return t&&t.hasOwnProperty(sl)?t[sl]:null}var ll=De({\u0275prov:De}),sl=De({\u0275inj:De}),q=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,n){this._desc=e,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=K({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Kp(t){return t&&!!t.\u0275providers}var Qp=De({\u0275cmp:De}),Yp=De({\u0275dir:De}),Jp=De({\u0275pipe:De}),Zp=De({\u0275mod:De}),ga=De({\u0275fac:De}),Mi=De({__NG_ELEMENT_ID__:De}),jw=De({__NG_ENV_ID__:De});function Xp(t){return dl(t,"@NgModule"),t[Zp]||null}function Pr(t){return dl(t,"@Component"),t[Qp]||null}function em(t){return dl(t,"@Directive"),t[Yp]||null}function zw(t){return dl(t,"@Pipe"),t[Jp]||null}function dl(t,e){if(t==null)throw new z(-919,!1)}function Ia(t){return typeof t=="string"?t:t==null?"":String(t)}function qw(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Ia(t)}var Gw=De({ngErrorCode:De}),PN=De({ngErrorMessage:De}),ON=De({ngTokenPath:De});function tm(t,e){return Ww("",-200,e)}function hl(t,e){throw new z(-201,!1)}function Ww(t,e,n){let r=new z(e,t);return r[Gw]=e,r[PN]=t,n&&(r[ON]=n),r}function kN(t){return t[Gw]}var Pp;function Kw(){return Pp}function Tt(t){let e=Pp;return Pp=t,e}function nm(t,e,n){let r=Ea(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&8)return null;if(e!==void 0)return e;hl(t,"")}var FN={},bi=FN,LN="__NG_DI_FLAG__",Op=class{injector;constructor(e){this.injector=e}retrieve(e,n){let r=Ti(n)||0;try{return this.injector.get(e,r&8?null:bi,r)}catch(i){if(No(i))return i;throw i}}};function VN(t,e=0){let n=il();if(n===void 0)throw new z(-203,!1);if(n===null)return nm(t,void 0,e);{let r=jN(e),i=n.retrieve(t,r);if(No(i)){if(r.optional)return null;throw i}return i}}function ue(t,e=0){return(Kw()||VN)(ht(t),e)}function P(t,e){return ue(t,Ti(e))}function Ti(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function jN(t){return{optional:!!(t&8),host:!!(t&1),self:!!(t&2),skipSelf:!!(t&4)}}function kp(t){let e=[];for(let n=0;n<t.length;n++){let r=ht(t[n]);if(Array.isArray(r)){if(r.length===0)throw new z(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],u=BN(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(ue(i,o))}else e.push(ue(r))}return e}function BN(t){return t[LN]}function Nr(t,e){let n=t.hasOwnProperty(ga);return n?t[ga]:null}function fl(t,e){t.forEach(n=>Array.isArray(n)?fl(n,e):e(n))}function rm(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function wa(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function Qw(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let o=i-2;t[i]=t[o],i--}t[e]=n,t[e+1]=r}}function Yw(t,e,n){let r=ko(t,e);return r>=0?t[r|1]=n:(r=~r,Qw(t,r,e,n)),r}function pl(t,e){let n=ko(t,e);if(n>=0)return t[n|1]}function ko(t,e){return UN(t,e,1)}function UN(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}var Or={},Vt=[],Ni=new q(""),im=new q("",-1),om=new q(""),ya=class{get(e,n=bi){if(n===bi){let i=Ww("",-201);throw i.name="\u0275NotFound",i}return n}};function xi(t){return{\u0275providers:t}}function Jw(t){return xi([{provide:Ni,multi:!0,useValue:t}])}function Zw(...t){return{\u0275providers:sm(!0,t),\u0275fromNgModule:!0}}function sm(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return fl(e,s=>{let a=s;al(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&Xw(i,o),n}function Xw(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];am(i,o=>{e(o,r)})}}function al(t,e,n,r){if(t=ht(t),!t)return!1;let i=null,o=xp(t),s=!o&&Pr(t);if(!o&&!s){let u=t.ngModule;if(o=xp(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=t}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)al(l,e,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{fl(o.imports,h=>{al(h,e,n,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&Xw(l,e)}if(!a){let l=Nr(i)||(()=>new i);e({provide:i,useFactory:l,deps:Vt},i),e({provide:om,useValue:i,multi:!0},i),e({provide:Ni,useValue:()=>ue(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let l=t;am(u,h=>{e(h,l)})}}else return!1;return i!==t&&t.providers!==void 0}function am(t,e){for(let n of t)Kp(n)&&(n=n.\u0275providers),Array.isArray(n)?am(n,e):e(n)}var $N=De({provide:String,useValue:De});function eC(t){return t!==null&&typeof t=="object"&&$N in t}function HN(t){return!!(t&&t.useExisting)}function zN(t){return!!(t&&t.useFactory)}function Si(t){return typeof t=="function"}function tC(t){return!!t.useClass}var Ca=new q(""),ol={},Bw={},Np;function Da(){return Np===void 0&&(Np=new ya),Np}var ft=class{},Ai=class extends ft{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,Lp(e,s=>this.processProvider(s)),this.records.set(im,xo(void 0,this)),i.has("environment")&&this.records.set(ft,xo(void 0,this));let o=this.records.get(Ca);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(om,Vt,{self:!0}))}retrieve(e,n){let r=Ti(n)||0;try{return this.get(e,bi,r)}catch(i){if(No(i))return i;throw i}}destroy(){ma(this),this._destroyed=!0;let e=Y(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Y(e)}}onDestroy(e){return ma(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){ma(this);let n=Mn(this),r=Tt(void 0),i;try{return e()}finally{Mn(n),Tt(r)}}get(e,n=bi,r){if(ma(this),e.hasOwnProperty(jw))return e[jw](this);let i=Ti(r),o,s=Mn(this),a=Tt(void 0);try{if(!(i&4)){let l=this.records.get(e);if(l===void 0){let h=QN(e)&&Ea(e);h&&this.injectableDefInScope(h)?l=xo(Fp(e),ol):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l,i)}let u=i&2?Da():this.parent;return n=i&8&&n===bi?null:n,u.get(e,n)}catch(u){let l=kN(u);throw l===-200||l===-201?new z(l,null):u}finally{Tt(a),Mn(s)}}resolveInjectorInitializers(){let e=Y(null),n=Mn(this),r=Tt(void 0),i;try{let o=this.get(Ni,Vt,{self:!0});for(let s of o)s()}finally{Mn(n),Tt(r),Y(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(er(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=ht(e);let n=Si(e)?e:ht(e&&e.provide),r=GN(e);if(!Si(e)&&e.multi===!0){let i=this.records.get(n);i||(i=xo(void 0,ol,!0),i.factory=()=>kp(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n,r){let i=Y(null);try{if(n.value===Bw)throw tm(er(e));return n.value===ol&&(n.value=Bw,n.value=n.factory(void 0,r)),typeof n.value=="object"&&n.value&&KN(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{Y(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=ht(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Fp(t){let e=Ea(t),n=e!==null?e.factory:Nr(t);if(n!==null)return n;if(t instanceof q)throw new z(204,!1);if(t instanceof Function)return qN(t);throw new z(204,!1)}function qN(t){if(t.length>0)throw new z(204,!1);let n=xN(t);return n!==null?()=>n.factory(t):()=>new t}function GN(t){if(eC(t))return xo(void 0,t.useValue);{let e=cm(t);return xo(e,ol)}}function cm(t,e,n){let r;if(Si(t)){let i=ht(t);return Nr(i)||Fp(i)}else if(eC(t))r=()=>ht(t.useValue);else if(zN(t))r=()=>t.useFactory(...kp(t.deps||[]));else if(HN(t))r=(i,o)=>ue(ht(t.useExisting),o!==void 0&&o&8?8:void 0);else{let i=ht(t&&(t.useClass||t.provide));if(WN(t))r=()=>new i(...kp(t.deps));else return Nr(i)||Fp(i)}return r}function ma(t){if(t.destroyed)throw new z(205,!1)}function xo(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function WN(t){return!!t.deps}function KN(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function QN(t){return typeof t=="function"||typeof t=="object"&&t.ngMetadataName==="InjectionToken"}function Lp(t,e){for(let n of t)Array.isArray(n)?Lp(n,e):n&&Kp(n)?Lp(n.\u0275providers,e):e(n)}function St(t,e){let n;t instanceof Ai?(ma(t),n=t):n=new Op(t);let r,i=Mn(n),o=Tt(void 0);try{return e()}finally{Mn(i),Tt(o)}}function nC(){return Kw()!==void 0||il()!=null}var mn=0,Z=1,ae=2,it=3,Zt=4,Xt=5,Fo=6,Lo=7,ke=8,rr=9,Nn=10,Me=11,Vo=12,um=13,Pi=14,Bt=15,Oi=16,ki=17,Fi=18,ba=19,lm=20,Xn=21,ml=22,Ta=23,Ut=24,gl=25,Li=26,Qe=27,rC=1,dm=6,kr=7,Sa=8,Aa=9,Fe=10;function xn(t){return Array.isArray(t)&&typeof t[rC]=="object"}function gn(t){return Array.isArray(t)&&t[rC]===!0}function hm(t){return(t.flags&4)!==0}function Fr(t){return t.componentOffset>-1}function yl(t){return(t.flags&1)===1}function Pn(t){return!!t.template}function jo(t){return(t[ae]&512)!==0}function Vi(t){return(t[ae]&256)===256}var iC="svg",oC="math";function en(t){for(;Array.isArray(t);)t=t[mn];return t}function fm(t,e){return en(e[t])}function yn(t,e){return en(e[t.index])}function Ra(t,e){return t.data[e]}function sC(t,e){return t[e]}function pm(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}function tn(t,e){let n=e[t];return xn(n)?n:n[mn]}function vl(t){return(t[ae]&128)===128}function aC(t){return gn(t[it])}function On(t,e){return e==null?null:t[e]}function mm(t){t[ki]=0}function gm(t){t[ae]&1024||(t[ae]|=1024,vl(t)&&Na(t))}function cC(t,e){for(;t>0;)e=e[Pi],t--;return e}function Ma(t){return!!(t[ae]&9216||t[Ut]?.dirty)}function _l(t){t[Nn].changeDetectionScheduler?.notify(8),t[ae]&64&&(t[ae]|=1024),Ma(t)&&Na(t)}function Na(t){t[Nn].changeDetectionScheduler?.notify(0);let e=xr(t);for(;e!==null&&!(e[ae]&8192||(e[ae]|=8192,!vl(e)));)e=xr(e)}function ym(t,e){if(Vi(t))throw new z(911,!1);t[Xn]===null&&(t[Xn]=[]),t[Xn].push(e)}function uC(t,e){if(t[Xn]===null)return;let n=t[Xn].indexOf(e);n!==-1&&t[Xn].splice(n,1)}function xr(t){let e=t[it];return gn(e)?e[it]:e}function lC(t){return t[Lo]??=[]}function dC(t){return t.cleanup??=[]}var he={lFrame:TC(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Vp=!1;function hC(){return he.lFrame.elementDepthCount}function fC(){he.lFrame.elementDepthCount++}function vm(){he.lFrame.elementDepthCount--}function pC(){return he.bindingsEnabled}function mC(){return he.skipHydrationRootTNode!==null}function _m(t){return he.skipHydrationRootTNode===t}function Em(){he.skipHydrationRootTNode=null}function ye(){return he.lFrame.lView}function ot(){return he.lFrame.tView}function Ye(t){return he.lFrame.contextLView=t,t[ke]}function Je(t){return he.lFrame.contextLView=null,t}function Pt(){let t=Im();for(;t!==null&&t.type===64;)t=t.parent;return t}function Im(){return he.lFrame.currentTNode}function gC(){let t=he.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Bo(t,e){let n=he.lFrame;n.currentTNode=t,n.isParent=e}function wm(){return he.lFrame.isParent}function yC(){he.lFrame.isParent=!1}function Cm(){return Vp}function Dm(t){let e=Vp;return Vp=t,e}function vC(){let t=he.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function _C(t){return he.lFrame.bindingIndex=t}function Lr(){return he.lFrame.bindingIndex++}function EC(t){let e=he.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function IC(){return he.lFrame.inI18n}function wC(t,e){let n=he.lFrame;n.bindingIndex=n.bindingRootIndex=t,El(e)}function CC(){return he.lFrame.currentDirectiveIndex}function El(t){he.lFrame.currentDirectiveIndex=t}function DC(t){let e=he.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function bm(t){he.lFrame.currentQueryIndex=t}function YN(t){let e=t[Z];return e.type===2?e.declTNode:e.type===1?t[Xt]:null}function Tm(t,e,n){if(n&4){let i=e,o=t;for(;i=i.parent,i===null&&!(n&1);)if(i=YN(o),i===null||(o=o[Pi],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=he.lFrame=bC();return r.currentTNode=e,r.lView=t,!0}function Il(t){let e=bC(),n=t[Z];he.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function bC(){let t=he.lFrame,e=t===null?null:t.child;return e===null?TC(t):e}function TC(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function SC(){let t=he.lFrame;return he.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var Sm=SC;function wl(){let t=SC();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function AC(t){return(he.lFrame.contextLView=cC(t,he.lFrame.contextLView))[ke]}function Vr(){return he.lFrame.selectedIndex}function jr(t){he.lFrame.selectedIndex=t}function xa(){let t=he.lFrame;return Ra(t.tView,t.selectedIndex)}function RC(){return he.lFrame.currentNamespace}var MC=!0;function Cl(){return MC}function Dl(t){MC=t}function jp(t,e=null,n=null,r){let i=Am(t,e,n,r);return i.resolveInjectorInitializers(),i}function Am(t,e=null,n=null,r,i=new Set){let o=[n||Vt,Zw(t)];return r=r||(typeof t=="object"?void 0:er(t)),new Ai(o,e||Da(),r||null,i)}var Jt=class t{static THROW_IF_NOT_FOUND=bi;static NULL=new ya;static create(e,n){if(Array.isArray(e))return jp({name:""},n,e,"");{let r=e.name??"";return jp({name:r},e.parent,e.providers,r)}}static \u0275prov=K({token:t,providedIn:"any",factory:()=>ue(im)});static __NG_ELEMENT_ID__=-1},Ze=new q(""),nn=(()=>{class t{static __NG_ELEMENT_ID__=JN;static __NG_ENV_ID__=n=>n}return t})(),Bp=class extends nn{_lView;constructor(e){super(),this._lView=e}get destroyed(){return Vi(this._lView)}onDestroy(e){let n=this._lView;return ym(n,e),()=>uC(n,e)}};function JN(){return new Bp(ye())}var NC=!1,Br=(()=>{class t{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new We(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new de(n=>{n.next(!1),n.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=K({token:t,providedIn:"root",factory:()=>new t})}return t})(),Up=class extends rt{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,nC()&&(this.destroyRef=P(nn,{optional:!0})??void 0,this.pendingTasks=P(Br,{optional:!0})??void 0)}emit(e){let n=Y(null);try{super.next(e)}finally{Y(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof dt&&e.add(a),a}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(n)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},Ke=Up;function cl(...t){}function Rm(t){let e,n;function r(){t=cl;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function Mm(t){return queueMicrotask(()=>t()),()=>{t=cl}}var Nm="isAngularZone",va=Nm+"_ID",ZN=0,jt=class t{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Ke(!1);onMicrotaskEmpty=new Ke(!1);onStable=new Ke(!1);onError=new Ke(!1);constructor(e){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=NC}=e;if(typeof Zone>"u")throw new z(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,tx(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Nm)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new z(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new z(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,XN,cl,cl);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},XN={};function xm(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function ex(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){Rm(()=>{t.callbackScheduled=!1,$p(t),t.isCheckStableRunning=!0,xm(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),$p(t)}function tx(t){let e=()=>{ex(t)},n=ZN++;t._inner=t._inner.fork({name:"angular",properties:{[Nm]:!0,[va]:n,[va+n]:!0},onInvokeTask:(r,i,o,s,a,u)=>{if(nx(u))return r.invokeTask(o,s,a,u);try{return Uw(t),r.invokeTask(o,s,a,u)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),$w(t)}},onInvoke:(r,i,o,s,a,u,l)=>{try{return Uw(t),r.invoke(o,s,a,u,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!rx(u)&&e(),$w(t)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,$p(t),xm(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function $p(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function Uw(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function $w(t){t._nesting--,xm(t)}var _a=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Ke;onMicrotaskEmpty=new Ke;onStable=new Ke;onError=new Ke;run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function nx(t){return xC(t,"__ignore_ng_zone__")}function rx(t){return xC(t,"__scheduler_tick__")}function xC(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var tr=class{_console=console;handleError(e){this._console.error("ERROR",e)}},rn=new q("",{factory:()=>{let t=P(jt),e=P(ft),n;return r=>{t.runOutsideAngular(()=>{e.destroyed&&!n?setTimeout(()=>{throw r}):(n??=e.get(tr),n.handleError(r))})}}}),PC={provide:Ni,useValue:()=>{let t=P(tr,{optional:!0})},multi:!0},ix=new q("",{factory:()=>{let t=P(Ze).defaultView;if(!t)return;let e=P(rn),n=o=>{e(o.reason),o.preventDefault()},r=o=>{o.error?e(o.error):e(new Error(o.message,{cause:o})),o.preventDefault()},i=()=>{t.addEventListener("unhandledrejection",n),t.addEventListener("error",r)};typeof Zone<"u"?Zone.root.run(i):i(),P(nn).onDestroy(()=>{t.removeEventListener("error",r),t.removeEventListener("unhandledrejection",n)})}});function Pm(){return xi([Jw(()=>void P(ix))])}function $t(t,e){let[n,r,i]=pp(t,e?.equal),o=n,s=o[Ct];return o.set=r,o.update=i,o.asReadonly=OC.bind(o),o}function OC(){let t=this[Ct];if(t.readonlyFn===void 0){let e=()=>this();e[Ct]=t,t.readonlyFn=e}return t.readonlyFn}var Po=class{},Pa=new q("",{factory:()=>!0});var Om=new q("");var km=(()=>{class t{static \u0275prov=K({token:t,providedIn:"root",factory:()=>new Hp})}return t})(),Hp=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let n=e.zone,r=this.queues.get(n);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let n=e.zone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[n,r]of this.queues)n===null?e||=this.flushQueue(r):e||=n.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let n=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,n=!0,r.run());return n}},zp=class{[Ct];constructor(e){this[Ct]=e}destroy(){this[Ct].destroy()}};function je(t){return mp(t)}function Ua(t){return{toString:t}.toString()}function fx(t){return typeof t=="function"}function lD(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}var Ml=class{previousValue;currentValue;firstChange;constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}},Wo=(()=>{let t=()=>dD;return t.ngInherit=!0,t})();function dD(t){return t.type.prototype.ngOnChanges&&(t.setInput=mx),px}function px(){let t=fD(this),e=t?.current;if(e){let n=t.previous;if(n===Or)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function mx(t,e,n,r,i){let o=this.declaredInputs[r],s=fD(t)||gx(t,{previous:Or,current:null}),a=s.current||(s.current={}),u=s.previous,l=u[o];a[o]=new Ml(l&&l.currentValue,n,u===Or),lD(t,e,i,n)}var hD="__ngSimpleChanges__";function fD(t){return t[hD]||null}function gx(t,e){return t[hD]=e}var kC=[];var Te=function(t,e=null,n){for(let r=0;r<kC.length;r++){let i=kC[r];i(t,e,n)}},Ee=(function(t){return t[t.TemplateCreateStart=0]="TemplateCreateStart",t[t.TemplateCreateEnd=1]="TemplateCreateEnd",t[t.TemplateUpdateStart=2]="TemplateUpdateStart",t[t.TemplateUpdateEnd=3]="TemplateUpdateEnd",t[t.LifecycleHookStart=4]="LifecycleHookStart",t[t.LifecycleHookEnd=5]="LifecycleHookEnd",t[t.OutputStart=6]="OutputStart",t[t.OutputEnd=7]="OutputEnd",t[t.BootstrapApplicationStart=8]="BootstrapApplicationStart",t[t.BootstrapApplicationEnd=9]="BootstrapApplicationEnd",t[t.BootstrapComponentStart=10]="BootstrapComponentStart",t[t.BootstrapComponentEnd=11]="BootstrapComponentEnd",t[t.ChangeDetectionStart=12]="ChangeDetectionStart",t[t.ChangeDetectionEnd=13]="ChangeDetectionEnd",t[t.ChangeDetectionSyncStart=14]="ChangeDetectionSyncStart",t[t.ChangeDetectionSyncEnd=15]="ChangeDetectionSyncEnd",t[t.AfterRenderHooksStart=16]="AfterRenderHooksStart",t[t.AfterRenderHooksEnd=17]="AfterRenderHooksEnd",t[t.ComponentStart=18]="ComponentStart",t[t.ComponentEnd=19]="ComponentEnd",t[t.DeferBlockStateStart=20]="DeferBlockStateStart",t[t.DeferBlockStateEnd=21]="DeferBlockStateEnd",t[t.DynamicComponentStart=22]="DynamicComponentStart",t[t.DynamicComponentEnd=23]="DynamicComponentEnd",t[t.HostBindingsUpdateStart=24]="HostBindingsUpdateStart",t[t.HostBindingsUpdateEnd=25]="HostBindingsUpdateEnd",t})(Ee||{});function yx(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=dD(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function vx(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),u&&(t.viewHooks??=[]).push(-n,u),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),h!=null&&(t.destroyHooks??=[]).push(n,h)}}function Tl(t,e,n){pD(t,e,3,n)}function Sl(t,e,n,r){(t[ae]&3)===n&&pD(t,e,n,r)}function Fm(t,e){let n=t[ae];(n&3)===e&&(n&=16383,n+=1,t[ae]=n)}function pD(t,e,n,r){let i=r!==void 0?t[ki]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(t[ki]+=65536),(a<o||o==-1)&&(_x(t,n,e,u),t[ki]=(t[ki]&4294901760)+u+2),u++}function FC(t,e){Te(Ee.LifecycleHookStart,t,e);let n=Y(null);try{e.call(t)}finally{Y(n),Te(Ee.LifecycleHookEnd,t,e)}}function _x(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=t[s];i?t[ae]>>14<t[ki]>>16&&(t[ae]&3)===e&&(t[ae]+=16384,FC(a,o)):FC(a,o)}var $o=-1,Bi=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,n,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=n,this.injectImpl=r}};function Ex(t){return(t.flags&8)!==0}function Ix(t){return(t.flags&16)!==0}function wx(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{let o=i,s=n[++r];Dx(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function Cx(t){return t===3||t===4||t===6}function Dx(t){return t.charCodeAt(0)===64}function Ho(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?LC(t,n,i,null,e[++r]):LC(t,n,i,null,null))}}return t}function LC(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){i!==null&&(t[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),i!==null&&t.splice(o++,0,i)}function mD(t){return t!==$o}function Nl(t){return t&32767}function bx(t){return t>>16}function xl(t,e){let n=bx(t),r=e;for(;n>0;)r=r[Pi],n--;return r}var Gm=!0;function Pl(t){let e=Gm;return Gm=t,e}var Tx=256,gD=Tx-1,yD=5,Sx=0,kn={};function Ax(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Mi)&&(r=n[Mi]),r==null&&(r=n[Mi]=Sx++);let i=r&gD,o=1<<i;e.data[t+(i>>yD)]|=o}function Ol(t,e){let n=vD(t,e);if(n!==-1)return n;let r=e[Z];r.firstCreatePass&&(t.injectorIndex=e.length,Lm(r.data,t),Lm(e,null),Lm(r.blueprint,null));let i=fg(t,e),o=t.injectorIndex;if(mD(i)){let s=Nl(i),a=xl(i,e),u=a[Z].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function Lm(t,e){t.push(0,0,0,0,0,0,0,0,e)}function vD(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function fg(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=CD(i),r===null)return $o;if(n++,i=i[Pi],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return $o}function Wm(t,e,n){Ax(t,e,n)}function _D(t,e,n){if(n&8||t!==void 0)return t;hl(e,"NodeInjector")}function ED(t,e,n,r){if(n&8&&r===void 0&&(r=null),(n&3)===0){let i=t[rr],o=Tt(void 0);try{return i?i.get(e,r,n&8):nm(e,r,n&8)}finally{Tt(o)}}return _D(r,e,n)}function ID(t,e,n,r=0,i){if(t!==null){if(e[ae]&2048&&!(r&2)){let s=Px(t,e,n,r,kn);if(s!==kn)return s}let o=wD(t,e,n,r,kn);if(o!==kn)return o}return ED(e,n,r,i)}function wD(t,e,n,r,i){let o=Nx(n);if(typeof o=="function"){if(!Tm(e,t,r))return r&1?_D(i,n,r):ED(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&8))hl(n);else return s}finally{Sm()}}else if(typeof o=="number"){let s=null,a=vD(t,e),u=$o,l=r&1?e[Bt][Xt]:null;for((a===-1||r&4)&&(u=a===-1?fg(t,e):e[a+8],u===$o||!jC(r,!1)?a=-1:(s=e[Z],a=Nl(u),e=xl(u,e)));a!==-1;){let h=e[Z];if(VC(o,a,h.data)){let p=Rx(a,e,n,s,r,l);if(p!==kn)return p}u=e[a+8],u!==$o&&jC(r,e[Z].data[a+8]===l)&&VC(o,a,e)?(s=h,a=Nl(u),e=xl(u,e)):a=-1}}return i}function Rx(t,e,n,r,i,o){let s=e[Z],a=s.data[t+8],u=r==null?Fr(a)&&Gm:r!=s&&(a.type&3)!==0,l=i&1&&o===a,h=Mx(a,s,n,u,l);return h!==null?kl(e,s,h,a,i):kn}function Mx(t,e,n,r,i){let o=t.providerIndexes,s=e.data,a=o&1048575,u=t.directiveStart,l=t.directiveEnd,h=o>>20,p=r?a:a+h,g=i?a+h:l;for(let y=p;y<g;y++){let T=s[y];if(y<u&&n===T||y>=u&&T.type===n)return y}if(i){let y=s[u];if(y&&Pn(y)&&y.type===n)return u}return null}function kl(t,e,n,r,i){let o=t[n],s=e.data;if(o instanceof Bi){let a=o;if(a.resolving){let y=qw(s[n]);throw tm(y)}let u=Pl(a.canSeeViewProviders);a.resolving=!0;let l=s[n].type||s[n],h,p=a.injectImpl?Tt(a.injectImpl):null,g=Tm(t,r,0);try{o=t[n]=a.factory(void 0,i,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&yx(n,s[n],e)}finally{p!==null&&Tt(p),Pl(u),a.resolving=!1,Sm()}}return o}function Nx(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Mi)?t[Mi]:void 0;return typeof e=="number"?e>=0?e&gD:xx:e}function VC(t,e,n){let r=1<<t;return!!(n[e+(t>>yD)]&r)}function jC(t,e){return!(t&2)&&!(t&1&&e)}var ji=class{_tNode;_lView;constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return ID(this._tNode,this._lView,e,Ti(r),n)}};function xx(){return new ji(Pt(),ye())}function Ko(t){return Ua(()=>{let e=t.prototype.constructor,n=e[ga]||Km(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[ga]||Km(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Km(t){return Gp(t)?()=>{let e=Km(ht(t));return e&&e()}:Nr(t)}function Px(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[ae]&2048&&!jo(s);){let a=wD(o,s,n,r|2,kn);if(a!==kn)return a;let u=o.parent;if(!u){let l=s[lm];if(l){let h=l.get(n,kn,r);if(h!==kn)return h}u=CD(s),s=s[Pi]}o=u}return i}function CD(t){let e=t[Z],n=e.type;return n===2?e.declTNode:n===1?t[Xt]:null}function Ox(){return pg(Pt(),ye())}function pg(t,e){return new Qo(yn(t,e))}var Qo=(()=>{class t{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=Ox}return t})();function DD(t){return(t.flags&128)===128}var mg=(function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t})(mg||{}),bD=new Map,kx=0;function Fx(){return kx++}function Lx(t){bD.set(t[ba],t)}function Qm(t){bD.delete(t[ba])}var BC="__ngContext__";function zo(t,e){xn(e)?(t[BC]=e[ba],Lx(e)):t[BC]=e}function TD(t){return AD(t[Vo])}function SD(t){return AD(t[Zt])}function AD(t){for(;t!==null&&!gn(t);)t=t[Zt];return t}var Vx;function gg(t){Vx=t}var Kl=new q("",{factory:()=>jx}),jx="ng";var Ql=new q(""),$a=new q("",{providedIn:"platform",factory:()=>"unknown"});var Yl=new q("",{factory:()=>P(Ze).body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var RD="r";var MD="di";var ND=!1,xD=new q("",{factory:()=>ND});var Bx=(t,e,n,r)=>{};function Ux(t,e,n,r){Bx(t,e,n,r)}function yg(t){return(t.flags&32)===32}var $x=()=>null;function PD(t,e,n=!1){return $x(t,e,n)}function OD(t,e){let n=t.contentQueries;if(n!==null){let r=Y(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=t.data[s];bm(o),a.contentQueries(2,e[s],s)}}}finally{Y(r)}}}function Ym(t,e,n){bm(0);let r=Y(null);try{e(t,n)}finally{Y(r)}}function kD(t,e,n){if(hm(e)){let r=Y(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=t.data[s];if(a.contentQueries){let u=n[s];a.contentQueries(1,u,s)}}}finally{Y(r)}}}var _n=(function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t[t.ExperimentalIsolatedShadowDom=4]="ExperimentalIsolatedShadowDom",t})(_n||{});var Fl=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${ul})`}};function vg(t){return t instanceof Fl?t.changingThisBreaksApplicationSecurity:t}function FD(t,e){let n=LD(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${ul})`)}return n===e}function LD(t){return t instanceof Fl&&t.getTypeName()||null}var Hx=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function VD(t){return t=String(t),t.match(Hx)?t:"unsafe:"+t}function zx(t,e){return t.createText(e)}function qx(t,e,n){t.setValue(e,n)}function jD(t,e,n){return t.createElement(e,n)}function Ll(t,e,n,r,i){t.insertBefore(e,n,r,i)}function BD(t,e,n){t.appendChild(e,n)}function UC(t,e,n,r,i){r!==null?Ll(t,e,n,r,i):BD(t,e,n)}function UD(t,e,n,r){t.removeChild(null,e,n,r)}function Gx(t,e,n){t.setAttribute(e,"style",n)}function Wx(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function $D(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&wx(t,e,r),i!==null&&Wx(t,e,i),o!==null&&Gx(t,e,o)}var _g=(function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t})(_g||{});function Ht(t){let e=Kx();return e?e.sanitize(_g.URL,t)||"":FD(t,"URL")?vg(t):VD(Ia(t))}function Kx(){let t=ye();return t&&t[Nn].sanitizer}function HD(t){return t instanceof Function?t():t}function Qx(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}var zD="ng-template";function Yx(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&Qx(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(Eg(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function Eg(t){return t.type===4&&t.value!==zD}function Jx(t,e,n){let r=t.type===4&&!n?zD:t.value;return e===r}function Zx(t,e,n){let r=4,i=t.attrs,o=i!==null?t1(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!vn(r)&&!vn(u))return!1;if(s&&vn(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!Jx(t,u,n)||u===""&&e.length===1){if(vn(r))return!1;s=!0}}else if(r&8){if(i===null||!Yx(t,i,u,n)){if(vn(r))return!1;s=!0}}else{let l=e[++a],h=Xx(u,i,Eg(t),n);if(h===-1){if(vn(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(vn(r))return!1;s=!0}}}}return vn(r)||s}function vn(t){return(t&1)===0}function Xx(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return n1(e,t)}function e1(t,e,n=!1){for(let r=0;r<e.length;r++)if(Zx(t,e[r],n))return!0;return!1}function t1(t){for(let e=0;e<t.length;e++){let n=t[e];if(Cx(n))return e}return t.length}function n1(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function $C(t,e){return t?":not("+e.trim()+")":e}function r1(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!vn(s)&&(e+=$C(o,i),i=""),r=s,o=o||!vn(r);n++}return i!==""&&(e+=$C(o,i)),e}function i1(t){return t.map(r1).join(",")}function o1(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!vn(i))break;i=o}r++}return n.length&&e.push(1,...n),e}var Ln={};function Ig(t,e,n,r,i,o,s,a,u,l,h){let p=Qe+r,g=p+i,y=s1(p,g),T=typeof l=="function"?l():l;return y[Z]={type:t,blueprint:y,template:n,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:T,incompleteFirstPass:!1,ssrId:h}}function s1(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:Ln);return n}function a1(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=Ig(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function wg(t,e,n,r,i,o,s,a,u,l,h){let p=e.blueprint.slice();return p[mn]=i,p[ae]=r|4|128|8|64|1024,(l!==null||t&&t[ae]&2048)&&(p[ae]|=2048),mm(p),p[it]=p[Pi]=t,p[ke]=n,p[Nn]=s||t&&t[Nn],p[Me]=a||t&&t[Me],p[rr]=u||t&&t[rr]||null,p[Xt]=o,p[ba]=Fx(),p[Fo]=h,p[lm]=l,p[Bt]=e.type==2?t[Bt]:p,p}function c1(t,e,n){let r=yn(e,t),i=a1(n),o=t[Nn].rendererFactory,s=Cg(t,wg(t,i,null,qD(n),r,e,null,o.createRenderer(r,n),null,null,null));return t[e.index]=s}function qD(t){let e=16;return t.signals?e=4096:t.onPush&&(e=64),e}function GD(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function Cg(t,e){return t[Vo]?t[um][Zt]=e:t[Vo]=e,t[um]=e,e}function k(t=1){WD(ot(),ye(),Vr()+t,!1)}function WD(t,e,n,r){if(!r)if((e[ae]&3)===3){let o=t.preOrderCheckHooks;o!==null&&Tl(e,o,n)}else{let o=t.preOrderHooks;o!==null&&Sl(e,o,0,n)}jr(n)}var Jl=(function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t})(Jl||{});function Jm(t,e,n,r){let i=Y(null);try{let[o,s,a]=t.inputs[n],u=null;(s&Jl.SignalBased)!==0&&(u=e[o][Ct]),u!==null&&u.transformFn!==void 0?r=u.transformFn(r):a!==null&&(r=a.call(e,r)),t.setInput!==null?t.setInput(e,u,r,n,o):lD(e,u,o,r)}finally{Y(i)}}var Fn=(function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t})(Fn||{}),u1;function Dg(t,e){return u1(t,e)}var Ui=new Set,bg=(function(t){return t[t.CHANGE_DETECTION=0]="CHANGE_DETECTION",t[t.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",t})(bg||{}),Ha=new q(""),HC=new Set;function Gi(t){HC.has(t)||(HC.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var KD=(()=>{class t{impl=null;execute(){this.impl?.execute()}static \u0275prov=K({token:t,providedIn:"root",factory:()=>new t})}return t})();var QD=new q("",{factory:()=>({queue:new Set,isScheduled:!1,scheduler:null,injector:P(ft)})});function YD(t,e,n){let r=t.get(QD);if(Array.isArray(e))for(let i of e)r.queue.add(i),n?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),n?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(t)}function l1(t,e){let n=t.get(QD);if(e.detachedLeaveAnimationFns){for(let r of e.detachedLeaveAnimationFns)n.queue.delete(r);e.detachedLeaveAnimationFns=void 0}}function d1(t,e){for(let[n,r]of e)YD(t,r.animateFns)}function zC(t,e,n,r){let i=t?.[Li]?.enter;e!==null&&i&&i.has(n.index)&&d1(r,i)}function Uo(t,e,n,r,i,o,s,a){if(i!=null){let u,l=!1;gn(i)?u=i:xn(i)&&(l=!0,i=i[mn]);let h=en(i);t===0&&r!==null?(zC(a,r,o,n),s==null?BD(e,r,h):Ll(e,r,h,s||null,!0)):t===1&&r!==null?(zC(a,r,o,n),Ll(e,r,h,s||null,!0)):t===2?qC(a,o,n,p=>{UD(e,h,l,p)}):t===3&&qC(a,o,n,()=>{e.destroyNode(h)}),u!=null&&D1(e,t,n,u,o,r,s)}}function h1(t,e){JD(t,e),e[mn]=null,e[Xt]=null}function f1(t,e,n,r,i,o){r[mn]=i,r[Xt]=e,Xl(t,r,n,1,i,o)}function JD(t,e){e[Nn].changeDetectionScheduler?.notify(9),Xl(t,e,e[Me],2,null,null)}function p1(t){let e=t[Vo];if(!e)return Vm(t[Z],t);for(;e;){let n=null;if(xn(e))n=e[Vo];else{let r=e[Fe];r&&(n=r)}if(!n){for(;e&&!e[Zt]&&e!==t;)xn(e)&&Vm(e[Z],e),e=e[it];e===null&&(e=t),xn(e)&&Vm(e[Z],e),n=e&&e[Zt]}e=n}}function Tg(t,e){let n=t[Aa],r=n.indexOf(e);n.splice(r,1)}function Zl(t,e){if(Vi(e))return;let n=e[Me];n.destroyNode&&Xl(t,e,n,3,null,null),p1(e)}function Vm(t,e){if(Vi(e))return;let n=Y(null);try{e[ae]&=-129,e[ae]|=256,e[Ut]&&ua(e[Ut]),y1(t,e),g1(t,e),e[Z].type===1&&e[Me].destroy();let r=e[Oi];if(r!==null&&gn(e[it])){r!==e[it]&&Tg(r,e);let i=e[Fi];i!==null&&i.detachView(t)}Qm(e)}finally{Y(n)}}function qC(t,e,n,r){let i=t?.[Li];if(i==null||i.leave==null||!i.leave.has(e.index))return r(!1);t&&Ui.add(t),YD(n,()=>{if(i.leave&&i.leave.has(e.index)){let s=i.leave.get(e.index),a=[];if(s){for(let u=0;u<s.animateFns.length;u++){let l=s.animateFns[u],{promise:h}=l();a.push(h)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(a),m1(t,r)}else t&&Ui.delete(t),r(!1)},i)}function m1(t,e){let n=t[Li]?.running;if(n){n.then(()=>{t[Li].running=void 0,Ui.delete(t),e(!0)});return}e(!1)}function g1(t,e){let n=t.cleanup,r=e[Lo];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let a=n[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[n[s+1]];n[s].call(a)}r!==null&&(e[Lo]=null);let i=e[Xn];if(i!==null){e[Xn]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[Ta];if(o!==null){e[Ta]=null;for(let s of o)s.destroy()}}function y1(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof Bi)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];Te(Ee.LifecycleHookStart,a,u);try{u.call(a)}finally{Te(Ee.LifecycleHookEnd,a,u)}}else{Te(Ee.LifecycleHookStart,i,o);try{o.call(i)}finally{Te(Ee.LifecycleHookEnd,i,o)}}}}}function v1(t,e,n){return _1(t,e.parent,n)}function _1(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[mn];if(Fr(r)){let{encapsulation:i}=t.data[r.directiveStart+r.componentOffset];if(i===_n.None||i===_n.Emulated)return null}return yn(r,n)}function E1(t,e,n){return w1(t,e,n)}function I1(t,e,n){return t.type&40?yn(t,n):null}var w1=I1,GC;function Sg(t,e,n,r){let i=v1(t,r,e),o=e[Me],s=r.parent||e[Xt],a=E1(s,r,e);if(i!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)UC(o,i,n[u],a,!1);else UC(o,i,n,a,!1);GC!==void 0&&GC(o,r,e,n,i)}function Oa(t,e){if(e!==null){let n=e.type;if(n&3)return yn(e,t);if(n&4)return Zm(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return Oa(t,r);{let i=t[e.index];return gn(i)?Zm(-1,i):en(i)}}else{if(n&128)return Oa(t,e.next);if(n&32)return Dg(e,t)()||en(t[e.index]);{let r=ZD(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=xr(t[Bt]);return Oa(i,r)}else return Oa(t,e.next)}}}return null}function ZD(t,e){if(e!==null){let r=t[Bt][Xt],i=e.projection;return r.projection[i]}return null}function Zm(t,e){let n=Fe+t+1;if(n<e.length){let r=e[n],i=r[Z].firstChild;if(i!==null)return Oa(r,i)}return e[kr]}function Ag(t,e,n,r,i,o,s){for(;n!=null;){let a=r[rr];if(n.type===128){n=n.next;continue}let u=r[n.index],l=n.type;if(s&&e===0&&(u&&zo(en(u),r),n.flags|=2),!yg(n))if(l&8)Ag(t,e,n.child,r,i,o,!1),Uo(e,t,a,i,u,n,o,r);else if(l&32){let h=Dg(n,r),p;for(;p=h();)Uo(e,t,a,i,p,n,o,r);Uo(e,t,a,i,u,n,o,r)}else l&16?C1(t,e,r,n,i,o):Uo(e,t,a,i,u,n,o,r);n=s?n.projectionNext:n.next}}function Xl(t,e,n,r,i,o){Ag(n,r,t.firstChild,e,i,o,!1)}function C1(t,e,n,r,i,o){let s=n[Bt],u=s[Xt].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];Uo(e,t,n[rr],i,h,r,o,n)}else{let l=u,h=s[it];DD(r)&&(l.flags|=128),Ag(t,e,l,h,i,o,!0)}}function D1(t,e,n,r,i,o,s){let a=r[kr],u=en(r);a!==u&&Uo(e,t,n,o,a,i,s);for(let l=Fe;l<r.length;l++){let h=r[l];Xl(h[Z],h,t,e,o,a)}}function b1(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:Fn.DashCase;i==null?t.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Fn.Important),t.setStyle(n,r,i,o))}}function XD(t,e,n,r,i){let o=Vr(),s=r&2;try{jr(-1),s&&e.length>Qe&&WD(t,e,Qe,!1);let a=s?Ee.TemplateUpdateStart:Ee.TemplateCreateStart;Te(a,i,n),n(r,i)}finally{jr(o);let a=s?Ee.TemplateUpdateEnd:Ee.TemplateCreateEnd;Te(a,i,n)}}function eb(t,e,n){N1(t,e,n),(n.flags&64)===64&&x1(t,e,n)}function Rg(t,e,n=yn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(e,t):t[s];t[i++]=a}}}function T1(t,e,n,r){let o=r.get(xD,ND)||n===_n.ShadowDom||n===_n.ExperimentalIsolatedShadowDom,s=t.selectRootElement(e,o);return S1(s),s}function S1(t){A1(t)}var A1=()=>null;function R1(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function tb(t,e,n,r,i,o){let s=e[Z];if(Mg(t,s,e,n,r)){Fr(t)&&M1(e,t.index);return}t.type&3&&(n=R1(n)),nb(t,e,n,r,i,o)}function nb(t,e,n,r,i,o){if(t.type&3){let s=yn(t,e);r=o!=null?o(r,t.value||"",n):r,i.setProperty(s,n,r)}else t.type&12}function M1(t,e){let n=tn(e,t);n[ae]&16||(n[ae]|=64)}function N1(t,e,n){let r=n.directiveStart,i=n.directiveEnd;Fr(n)&&c1(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||Ol(n,e);let o=n.initialInputs;for(let s=r;s<i;s++){let a=t.data[s],u=kl(e,t,s,n);if(zo(u,e),o!==null&&L1(e,s-r,u,a,n,o),Pn(a)){let l=tn(n.index,e);l[ke]=kl(e,t,s,n)}}}function x1(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=CC();try{jr(o);for(let a=r;a<i;a++){let u=t.data[a],l=e[a];El(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&P1(u,l)}}finally{jr(-1),El(s)}}function P1(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function O1(t,e){let n=t.directiveRegistry,r=null;if(n)for(let i=0;i<n.length;i++){let o=n[i];e1(e,o.selectors,!1)&&(r??=[],Pn(o)?r.unshift(o):r.push(o))}return r}function k1(t,e,n,r,i,o){let s=yn(t,e);F1(e[Me],s,o,t.value,n,r,i)}function F1(t,e,n,r,i,o,s){if(o==null)t.removeAttribute(e,i,n);else{let a=s==null?Ia(o):s(o,r||"",i);t.setAttribute(e,i,a,n)}}function L1(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let u=s[a],l=s[a+1];Jm(r,n,u,l)}}function rb(t,e,n,r,i){let o=Qe+n,s=e[Z],a=i(s,e,t,r,n);e[o]=a,Bo(t,!0);let u=t.type===2;return u?($D(e[Me],a,t),(hC()===0||yl(t))&&zo(a,e),fC()):zo(a,e),Cl()&&(!u||!yg(t))&&Sg(s,e,a,t),t}function ib(t){let e=t;return wm()?yC():(e=e.parent,Bo(e,!1)),e}function V1(t,e){let n=t[rr];if(!n)return;let r;try{r=n.get(rn,null)}catch{r=null}r?.(e)}function Mg(t,e,n,r,i){let o=t.inputs?.[r],s=t.hostDirectiveInputs?.[r],a=!1;if(s)for(let u=0;u<s.length;u+=2){let l=s[u],h=s[u+1],p=e.data[l];Jm(p,n[l],h,i),a=!0}if(o)for(let u of o){let l=n[u],h=e.data[u];Jm(h,l,r,i),a=!0}return a}function j1(t,e){let n=tn(e,t),r=n[Z];B1(r,n);let i=n[mn];i!==null&&n[Fo]===null&&(n[Fo]=PD(i,n[rr])),Te(Ee.ComponentStart);try{Ng(r,n,n[ke])}finally{Te(Ee.ComponentEnd,n[ke])}}function B1(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function Ng(t,e,n){Il(e);try{let r=t.viewQuery;r!==null&&Ym(1,r,n);let i=t.template;i!==null&&XD(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Fi]?.finishViewCreation(t),t.staticContentQueries&&OD(t,e),t.staticViewQueries&&Ym(2,t.viewQuery,n);let o=t.components;o!==null&&U1(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[ae]&=-5,wl()}}function U1(t,e){for(let n=0;n<e.length;n++)j1(t,e[n])}function xg(t,e,n,r){let i=Y(null);try{let o=e.tView,a=t[ae]&4096?4096:16,u=wg(t,o,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];u[Oi]=l;let h=t[Fi];return h!==null&&(u[Fi]=h.createEmbeddedView(o)),Ng(o,u,n),u}finally{Y(i)}}function Fa(t,e){return!e||e.firstChild===null||DD(t)}function La(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let o=e[n.index];o!==null&&r.push(en(o)),gn(o)&&ob(o,r);let s=n.type;if(s&8)La(t,e,n.child,r);else if(s&32){let a=Dg(n,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=ZD(e,n);if(Array.isArray(a))r.push(...a);else{let u=xr(e[Bt]);La(u[Z],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function ob(t,e){for(let n=Fe;n<t.length;n++){let r=t[n],i=r[Z].firstChild;i!==null&&La(r[Z],r,i,e)}t[kr]!==t[mn]&&e.push(t[kr])}function sb(t){if(t[gl]!==null){for(let e of t[gl])e.impl.addSequence(e);t[gl].length=0}}var ab=[];function $1(t){return t[Ut]??H1(t)}function H1(t){let e=ab.pop()??Object.create(q1);return e.lView=t,e}function z1(t){t.lView[Ut]!==t&&(t.lView=null,ab.push(t))}var q1=J(M({},sa),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{Na(t.lView)},consumerOnSignalRead(){this.lView[Ut]=this}});function G1(t){let e=t[Ut]??Object.create(W1);return e.lView=t,e}var W1=J(M({},sa),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{let e=xr(t.lView);for(;e&&!cb(e[Z]);)e=xr(e);e&&gm(e)},consumerOnSignalRead(){this.lView[Ut]=this}});function cb(t){return t.type!==2}function ub(t){if(t[Ta]===null)return;let e=!0;for(;e;){let n=!1;for(let r of t[Ta])r.dirty&&(n=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=n&&!!(t[ae]&8192)}}var K1=100;function lb(t,e=0){let r=t[Nn].rendererFactory,i=!1;i||r.begin?.();try{Q1(t,e)}finally{i||r.end?.()}}function Q1(t,e){let n=Cm();try{Dm(!0),Xm(t,e);let r=0;for(;Ma(t);){if(r===K1)throw new z(103,!1);r++,Xm(t,1)}}finally{Dm(n)}}function Y1(t,e,n,r){if(Vi(e))return;let i=e[ae],o=!1,s=!1;Il(e);let a=!0,u=null,l=null;o||(cb(t)?(l=$1(e),u=ca(l)):Ru()===null?(a=!1,l=G1(e),u=ca(l)):e[Ut]&&(ua(e[Ut]),e[Ut]=null));try{mm(e),_C(t.bindingStartIndex),n!==null&&XD(t,e,n,2,r);let h=(i&3)===3;if(!o)if(h){let y=t.preOrderCheckHooks;y!==null&&Tl(e,y,null)}else{let y=t.preOrderHooks;y!==null&&Sl(e,y,0,null),Fm(e,0)}if(s||J1(e),ub(e),db(e,0),t.contentQueries!==null&&OD(t,e),!o)if(h){let y=t.contentCheckHooks;y!==null&&Tl(e,y)}else{let y=t.contentHooks;y!==null&&Sl(e,y,1),Fm(e,1)}X1(t,e);let p=t.components;p!==null&&fb(e,p,0);let g=t.viewQuery;if(g!==null&&Ym(2,g,r),!o)if(h){let y=t.viewCheckHooks;y!==null&&Tl(e,y)}else{let y=t.viewHooks;y!==null&&Sl(e,y,2),Fm(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[ml]){for(let y of e[ml])y();e[ml]=null}o||(sb(e),e[ae]&=-73)}catch(h){throw o||Na(e),h}finally{l!==null&&(Mu(l,u),a&&z1(l)),wl()}}function db(t,e){for(let n=TD(t);n!==null;n=SD(n))for(let r=Fe;r<n.length;r++){let i=n[r];hb(i,e)}}function J1(t){for(let e=TD(t);e!==null;e=SD(e)){if(!(e[ae]&2))continue;let n=e[Aa];for(let r=0;r<n.length;r++){let i=n[r];gm(i)}}}function Z1(t,e,n){Te(Ee.ComponentStart);let r=tn(e,t);try{hb(r,n)}finally{Te(Ee.ComponentEnd,r[ke])}}function hb(t,e){vl(t)&&Xm(t,e)}function Xm(t,e){let r=t[Z],i=t[ae],o=t[Ut],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Nu(o)),s||=!1,o&&(o.dirty=!1),t[ae]&=-9217,s)Y1(r,t,r.template,t[ke]);else if(i&8192){let a=Y(null);try{ub(t),db(t,1);let u=r.components;u!==null&&fb(t,u,1),sb(t)}finally{Y(a)}}}function fb(t,e,n){for(let r=0;r<e.length;r++)Z1(t,e[r],n)}function X1(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)jr(~i);else{let o=i,s=n[++r],a=n[++r];wC(s,o);let u=e[o];Te(Ee.HostBindingsUpdateStart,u);try{a(2,u)}finally{Te(Ee.HostBindingsUpdateEnd,u)}}}}finally{jr(-1)}}function Pg(t,e){let n=Cm()?64:1088;for(t[Nn].changeDetectionScheduler?.notify(e);t;){t[ae]|=n;let r=xr(t);if(jo(t)&&!r)return t;t=r}return null}function pb(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function mb(t,e){let n=Fe+e;if(n<t.length)return t[n]}function ed(t,e,n,r=!0){let i=e[Z];if(eP(i,e,t,n),r){let s=Zm(n,t),a=e[Me],u=a.parentNode(t[kr]);u!==null&&f1(i,t[Xt],a,e,u,s)}let o=e[Fo];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function gb(t,e){let n=Va(t,e);return n!==void 0&&Zl(n[Z],n),n}function Va(t,e){if(t.length<=Fe)return;let n=Fe+e,r=t[n];if(r){let i=r[Oi];i!==null&&i!==t&&Tg(i,r),e>0&&(t[n-1][Zt]=r[Zt]);let o=wa(t,Fe+e);h1(r[Z],r);let s=o[Fi];s!==null&&s.detachView(o[Z]),r[it]=null,r[Zt]=null,r[ae]&=-129}return r}function eP(t,e,n,r){let i=Fe+r,o=n.length;r>0&&(n[i-1][Zt]=e),r<o-Fe?(e[Zt]=n[i],rm(n,Fe+r,e)):(n.push(e),e[Zt]=null),e[it]=n;let s=e[Oi];s!==null&&n!==s&&yb(s,e);let a=e[Fi];a!==null&&a.insertView(t),_l(e),e[ae]|=128}function yb(t,e){let n=t[Aa],r=e[it];if(xn(r))t[ae]|=2;else{let i=r[it][Bt];e[Bt]!==i&&(t[ae]|=2)}n===null?t[Aa]=[e]:n.push(e)}var $i=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,n=e[Z];return La(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n}get context(){return this._lView[ke]}set context(e){this._lView[ke]=e}get destroyed(){return Vi(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[it];if(gn(e)){let n=e[Sa],r=n?n.indexOf(this):-1;r>-1&&(Va(e,r),wa(n,r))}this._attachedToViewContainer=!1}Zl(this._lView[Z],this._lView)}onDestroy(e){ym(this._lView,e)}markForCheck(){Pg(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ae]&=-129}reattach(){_l(this._lView),this._lView[ae]|=128}detectChanges(){this._lView[ae]|=1024,lb(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new z(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=jo(this._lView),n=this._lView[Oi];n!==null&&!e&&Tg(n,this._lView),JD(this._lView[Z],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new z(902,!1);this._appRef=e;let n=jo(this._lView),r=this._lView[Oi];r!==null&&!n&&yb(r,this._lView),_l(this._lView)}};function td(t,e,n,r,i){let o=t.data[e];if(o===null)o=tP(t,e,n,r,i),IC()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=gC();o.injectorIndex=s===null?-1:s.injectorIndex}return Bo(o,!0),o}function tP(t,e,n,r,i){let o=Im(),s=wm(),a=s?o:o&&o.parent,u=t.data[e]=rP(t,a,n,e,r,i);return nP(t,u,o,s),u}function nP(t,e,n,r){t.firstChild===null&&(t.firstChild=e),n!==null&&(r?n.child==null&&e.parent!==null&&(n.child=e):n.next===null&&(n.next=e,e.prev=n))}function rP(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return mC()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,fieldIndex:-1,customControlIndex:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function iP(t){let e=t[dm]??[],r=t[it][Me],i=[];for(let o of e)o.data[MD]!==void 0?i.push(o):oP(o,r);t[dm]=i}function oP(t,e){let n=0,r=t.firstChild;if(r){let i=t.data[RD];for(;n<i;){let o=r.nextSibling;UD(e,r,!1),r=o,n++}}}var sP=()=>null,aP=()=>null;function eg(t,e){return sP(t,e)}function vb(t,e,n){return aP(t,e,n)}var _b=class{},nd=class{},tg=class{resolveComponentFactory(e){throw new z(917,!1)}},za=class{static NULL=new tg},Hi=class{},qa=(()=>{class t{destroyNode=null;static __NG_ELEMENT_ID__=()=>cP()}return t})();function cP(){let t=ye(),e=Pt(),n=tn(e.index,t);return(xn(n)?n:t)[Me]}var Eb=(()=>{class t{static \u0275prov=K({token:t,providedIn:"root",factory:()=>null})}return t})();var Al={},ng=class{injector;parentInjector;constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){let i=this.injector.get(e,Al,r);return i!==Al||n===Al?i:this.parentInjector.get(e,n,r)}};function Vl(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=qp(i,a);else if(o==2){let u=a,l=e[++s];r=qp(r,u+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function Be(t,e=0){let n=ye();if(n===null)return ue(t,e);let r=Pt();return ID(r,n,ht(t),e)}function uP(t,e,n,r,i){let o=r===null?null:{"":-1},s=i(t,n);if(s!==null){let a=s,u=null,l=null;for(let h of s)if(h.resolveHostDirectives!==null){[a,u,l]=h.resolveHostDirectives(s);break}hP(t,e,n,a,o,u,l)}o!==null&&r!==null&&lP(n,r,o)}function lP(t,e,n){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new z(-301,!1);r.push(e[i],o)}}function dP(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function hP(t,e,n,r,i,o,s){let a=r.length,u=null;for(let g=0;g<a;g++){let y=r[g];u===null&&Pn(y)&&(u=y,dP(t,n,g)),Wm(Ol(n,e),t,y.type)}vP(n,t.data.length,a),u?.viewProvidersResolver&&u.viewProvidersResolver(u);for(let g=0;g<a;g++){let y=r[g];y.providersResolver&&y.providersResolver(y)}let l=!1,h=!1,p=GD(t,e,a,null);a>0&&(n.directiveToIndex=new Map);for(let g=0;g<a;g++){let y=r[g];if(n.mergedAttrs=Ho(n.mergedAttrs,y.hostAttrs),pP(t,n,e,p,y),yP(p,y,i),s!==null&&s.has(y)){let[R,A]=s.get(y);n.directiveToIndex.set(y.type,[p,R+n.directiveStart,A+n.directiveStart])}else(o===null||!o.has(y))&&n.directiveToIndex.set(y.type,p);y.contentQueries!==null&&(n.flags|=4),(y.hostBindings!==null||y.hostAttrs!==null||y.hostVars!==0)&&(n.flags|=64);let T=y.type.prototype;!l&&(T.ngOnChanges||T.ngOnInit||T.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),l=!0),!h&&(T.ngOnChanges||T.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),h=!0),p++}fP(t,n,o)}function fP(t,e,n){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=t.data[r];if(n===null||!n.has(i))WC(0,e,i,r),WC(1,e,i,r),QC(e,r,!1);else{let o=n.get(i);KC(0,e,o,r),KC(1,e,o,r),QC(e,r,!0)}}}function WC(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;t===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),Ib(e,o)}}function KC(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;t===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),Ib(e,s)}}function Ib(t,e){e==="class"?t.flags|=8:e==="style"&&(t.flags|=16)}function QC(t,e,n){let{attrs:r,inputs:i,hostDirectiveInputs:o}=t;if(r===null||!n&&i===null||n&&o===null||Eg(t)){t.initialInputs??=[],t.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let u=r[a];if(u===0){a+=4;continue}else if(u===5){a+=2;continue}else if(typeof u=="number")break;if(!n&&i.hasOwnProperty(u)){let l=i[u];for(let h of l)if(h===e){s??=[],s.push(u,r[a+1]);break}}else if(n&&o.hasOwnProperty(u)){let l=o[u];for(let h=0;h<l.length;h+=2)if(l[h]===e){s??=[],s.push(l[h+1],r[a+1]);break}}a+=2}t.initialInputs??=[],t.initialInputs.push(s)}function pP(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=Nr(i.type,!0)),s=new Bi(o,Pn(i),Be,null);t.blueprint[r]=s,n[r]=s,mP(t,e,r,GD(t,n,i.hostVars,Ln),i)}function mP(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;gP(s)!=a&&s.push(a),s.push(n,r,o)}}function gP(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function yP(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Pn(e)&&(n[""]=t)}}function vP(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function wb(t,e,n,r,i,o,s,a){let u=e[Z],l=u.consts,h=On(l,s),p=td(u,t,n,r,h);return o&&uP(u,e,p,On(l,a),i),p.mergedAttrs=Ho(p.mergedAttrs,p.attrs),p.attrs!==null&&Vl(p,p.attrs,!1),p.mergedAttrs!==null&&Vl(p,p.mergedAttrs,!0),u.queries!==null&&u.queries.elementStart(u,p),p}function Cb(t,e){vx(t,e),hm(e)&&t.queries.elementEnd(e)}function _P(t,e,n,r,i,o){let s=e.consts,a=On(s,i),u=td(e,t,n,r,a);if(u.mergedAttrs=Ho(u.mergedAttrs,u.attrs),o!=null){let l=On(s,o);u.localNames=[];for(let h=0;h<l.length;h+=2)u.localNames.push(l[h],-1)}return u.attrs!==null&&Vl(u,u.attrs,!1),u.mergedAttrs!==null&&Vl(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function EP(t,e,n){return t[e]=n}function ir(t,e,n){if(n===Ln)return!1;let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function Rl(t,e,n){return function r(i){let o=Fr(t)?tn(t.index,e):e;Pg(o,5);let s=e[ke],a=YC(e,s,n,i),u=r.__ngNextListenerFn__;for(;u;)a=YC(e,s,u,i)&&a,u=u.__ngNextListenerFn__;return a}}function YC(t,e,n,r){let i=Y(null);try{return Te(Ee.OutputStart,e,n),n(r)!==!1}catch(o){return V1(t,o),!1}finally{Te(Ee.OutputEnd,e,n),Y(i)}}function Db(t,e,n,r,i,o,s,a){let u=yl(t),l=!1,h=null;if(!r&&u&&(h=wP(e,n,o,t.index)),h!==null){let p=h.__ngLastListenerFn__||h;p.__ngNextListenerFn__=s,h.__ngLastListenerFn__=s,l=!0}else{let p=yn(t,n),g=r?r(p):p;Ux(n,g,o,a);let y=i.listen(g,o,a);if(!IP(o)){let T=r?R=>r(en(R[t.index])):t.index;bb(T,e,n,o,a,y,!1)}}return l}function IP(t){return t.startsWith("animation")||t.startsWith("transition")}function wP(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=e[Lo],u=i[o+2];return a&&a.length>u?a[u]:null}typeof s=="string"&&(o+=2)}return null}function bb(t,e,n,r,i,o,s){let a=e.firstCreatePass?dC(e):null,u=lC(n),l=u.length;u.push(i,o),a&&a.push(r,t,l,(l+1)*(s?-1:1))}function JC(t,e,n,r,i,o){let s=e[n],a=e[Z],l=a.data[n].outputs[r],p=s[l].subscribe(o);bb(t.index,a,e,i,o,p,!0)}var rg=Symbol("BINDING");var jl=class extends za{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=Pr(e);return new qo(n,this.ngModule)}};function CP(t){return Object.keys(t).map(e=>{let[n,r,i]=t[e],o={propName:n,templateName:e,isSignal:(r&Jl.SignalBased)!==0};return i&&(o.transform=i),o})}function DP(t){return Object.keys(t).map(e=>({propName:t[e],templateName:e}))}function bP(t,e,n){let r=e instanceof ft?e:e?.injector;return r&&t.getStandaloneInjector!==null&&(r=t.getStandaloneInjector(r)||r),r?new ng(n,r):n}function TP(t){let e=t.get(Hi,null);if(e===null)throw new z(407,!1);let n=t.get(Eb,null),r=t.get(Po,null);return{rendererFactory:e,sanitizer:n,changeDetectionScheduler:r,ngReflect:!1}}function SP(t,e){let n=Tb(t);return jD(e,n,n==="svg"?iC:n==="math"?oC:null)}function Tb(t){return(t.selectors[0][0]||"div").toLowerCase()}var qo=class extends nd{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=CP(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=DP(this.componentDef.outputs),this.cachedOutputs}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=i1(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!n}create(e,n,r,i,o,s){Te(Ee.DynamicComponentStart);let a=Y(null);try{let u=this.componentDef,l=AP(r,u,s,o),h=bP(u,i||this.ngModule,e),p=TP(h),g=p.rendererFactory.createRenderer(null,u),y=r?T1(g,r,u.encapsulation,h):SP(u,g),T=s?.some(ZC)||o?.some(F=>typeof F!="function"&&F.bindings.some(ZC)),R=wg(null,l,null,512|qD(u),null,null,p,g,h,null,PD(y,h,!0));R[Qe]=y,Il(R);let A=null;try{let F=wb(Qe,R,2,"#host",()=>l.directiveRegistry,!0,0);$D(g,y,F),zo(y,R),eb(l,R,F),kD(l,F,R),Cb(l,F),n!==void 0&&MP(F,this.ngContentSelectors,n),A=tn(F.index,R),R[ke]=A[ke],Ng(l,R,null)}catch(F){throw A!==null&&Qm(A),Qm(R),F}finally{Te(Ee.DynamicComponentEnd),wl()}return new Bl(this.componentType,R,!!T)}finally{Y(a)}}};function AP(t,e,n,r){let i=t?["ng-version","21.0.6"]:o1(e.selectors[0]),o=null,s=null,a=0;if(n)for(let h of n)a+=h[rg].requiredVars,h.create&&(h.targetIdx=0,(o??=[]).push(h)),h.update&&(h.targetIdx=0,(s??=[]).push(h));if(r)for(let h=0;h<r.length;h++){let p=r[h];if(typeof p!="function")for(let g of p.bindings){a+=g[rg].requiredVars;let y=h+1;g.create&&(g.targetIdx=y,(o??=[]).push(g)),g.update&&(g.targetIdx=y,(s??=[]).push(g))}}let u=[e];if(r)for(let h of r){let p=typeof h=="function"?h:h.type,g=em(p);u.push(g)}return Ig(0,null,RP(o,s),1,a,u,null,null,null,[i],null)}function RP(t,e){return!t&&!e?null:n=>{if(n&1&&t)for(let r of t)r.create();if(n&2&&e)for(let r of e)r.update()}}function ZC(t){let e=t[rg].kind;return e==="input"||e==="twoWay"}var Bl=class extends _b{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,n,r){super(),this._rootLView=n,this._hasInputBindings=r,this._tNode=Ra(n[Z],Qe),this.location=pg(this._tNode,n),this.instance=tn(this._tNode.index,n)[ke],this.hostView=this.changeDetectorRef=new $i(n,void 0),this.componentType=e}setInput(e,n){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let i=this._rootLView,o=Mg(r,i[Z],i,e,n);this.previousInputValues.set(e,n);let s=tn(r.index,i);Pg(s,1)}get injector(){return new ji(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function MP(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null&&o.length?Array.from(o):null)}}var Ga=(()=>{class t{static __NG_ELEMENT_ID__=NP}return t})();function NP(){let t=Pt();return PP(t,ye())}var xP=Ga,Sb=class extends xP{_lContainer;_hostTNode;_hostLView;constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return pg(this._hostTNode,this._hostLView)}get injector(){return new ji(this._hostTNode,this._hostLView)}get parentInjector(){let e=fg(this._hostTNode,this._hostLView);if(mD(e)){let n=xl(e,this._hostLView),r=Nl(e),i=n[Z].data[r+8];return new ji(i,n)}else return new ji(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=XC(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-Fe}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=eg(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,Fa(this._hostTNode,s)),a}createComponent(e,n,r,i,o,s,a){let u=e&&!fx(e),l;if(u)l=n;else{let A=n||{};l=A.index,r=A.injector,i=A.projectableNodes,o=A.environmentInjector||A.ngModuleRef,s=A.directives,a=A.bindings}let h=u?e:new qo(Pr(e)),p=r||this.parentInjector;if(!o&&h.ngModule==null){let F=(u?p:this.parentInjector).get(ft,null);F&&(o=F)}let g=Pr(h.componentType??{}),y=eg(this._lContainer,g?.id??null),T=y?.firstChild??null,R=h.create(p,i,T,o,s,a);return this.insertImpl(R.hostView,l,Fa(this._hostTNode,y)),R}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(aC(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[it],l=new Sb(u,u[Xt],u[it]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return ed(s,i,o,r),e.attachToViewContainerRef(),rm(jm(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=XC(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=Va(this._lContainer,n);r&&(wa(jm(this._lContainer),n),Zl(r[Z],r))}detach(e){let n=this._adjustIndex(e,-1),r=Va(this._lContainer,n);return r&&wa(jm(this._lContainer),n)!=null?new $i(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function XC(t){return t[Sa]}function jm(t){return t[Sa]||(t[Sa]=[])}function PP(t,e){let n,r=e[t.index];return gn(r)?n=r:(n=pb(r,e,null,t),e[t.index]=n,Cg(e,n)),kP(n,e,t,r),new Sb(n,t,e)}function OP(t,e){let n=t[Me],r=n.createComment(""),i=yn(e,t),o=n.parentNode(i);return Ll(n,o,r,n.nextSibling(i),!1),r}var kP=VP,FP=()=>!1;function LP(t,e,n){return FP(t,e,n)}function VP(t,e,n,r){if(t[kr])return;let i;n.type&8?i=en(r):i=OP(e,n),t[kr]=i}var zi=class{},rd=class{};var Ul=class extends zi{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new jl(this);constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n;let o=Xp(e);this._bootstrapComponents=HD(o.bootstrap),this._r3Injector=Am(e,n,[{provide:zi,useValue:this},{provide:za,useValue:this.componentFactoryResolver},...r],er(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},$l=class extends rd{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new Ul(this.moduleType,e,[])}};var ja=class extends zi{injector;componentFactoryResolver=new jl(this);instance=null;constructor(e){super();let n=new Ai([...e.providers,{provide:zi,useValue:this},{provide:za,useValue:this.componentFactoryResolver}],e.parent||Da(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Wa(t,e,n=null){return new ja({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var jP=(()=>{class t{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=sm(!1,n.type),i=r.length>0?Wa([r],this._injector,""):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=K({token:t,providedIn:"environment",factory:()=>new t(ue(ft))})}return t})();function En(t){return Ua(()=>{let e=Ab(t),n=J(M({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===mg.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(jP).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||_n.Emulated,styles:t.styles||Vt,_:null,schemas:t.schemas||null,tView:null,id:""});e.standalone&&Gi("NgStandalone"),Rb(n);let r=t.dependencies;return n.directiveDefs=eD(r,BP),n.pipeDefs=eD(r,zw),n.id=HP(n),n})}function BP(t){return Pr(t)||em(t)}function Ur(t){return Ua(()=>({type:t.type,bootstrap:t.bootstrap||Vt,declarations:t.declarations||Vt,imports:t.imports||Vt,exports:t.exports||Vt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function UP(t,e){if(t==null)return Or;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,a,u;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,u=i[3]||null):(o=i,s=i,a=Jl.None,u=null),n[o]=[r,a,u],e[o]=s}return n}function $P(t){if(t==null)return Or;let e={};for(let n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function Vn(t){return Ua(()=>{let e=Ab(t);return Rb(e),e})}function Og(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone??!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function Ab(t){let e={};return{type:t.type,providersResolver:null,viewProvidersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputConfig:t.inputs||Or,exportAs:t.exportAs||null,standalone:t.standalone??!0,signals:t.signals===!0,selectors:t.selectors||Vt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:UP(t.inputs,e),outputs:$P(t.outputs),debugInfo:null}}function Rb(t){t.features?.forEach(e=>e(t))}function eD(t,e){return t?()=>{let n=typeof t=="function"?t():t,r=[];for(let i of n){let o=e(i);o!==null&&r.push(o)}return r}:null}function HP(t){let e=0,n=typeof t.consts=="function"?"":t.consts,r=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,n,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function zP(t){return Object.getPrototypeOf(t.prototype).constructor}function Wi(t){let e=zP(t.type),n=!0,r=[t];for(;e;){let i;if(Pn(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new z(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let s=t;s.inputs=Bm(t.inputs),s.declaredInputs=Bm(t.declaredInputs),s.outputs=Bm(t.outputs);let a=i.hostBindings;a&&QP(t,a);let u=i.viewQuery,l=i.contentQueries;if(u&&WP(t,u),l&&KP(t,l),qP(t,i),Hw(t.outputs,i.outputs),Pn(i)&&i.data.animation){let h=t.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(t),a===Wi&&(n=!1)}}e=Object.getPrototypeOf(e)}GP(r)}function qP(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n])}}function GP(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Ho(i.hostAttrs,n=Ho(n,i.hostAttrs))}}function Bm(t){return t===Or?{}:t===Vt?[]:t}function WP(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function KP(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,o)=>{e(r,i,o),n(r,i,o)}:t.contentQueries=e}function QP(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function YP(t,e,n,r,i,o,s,a){if(n.firstCreatePass){t.mergedAttrs=Ho(t.mergedAttrs,t.attrs);let h=t.tView=Ig(2,t,i,o,s,n.directiveRegistry,n.pipeRegistry,null,n.schemas,n.consts,null);n.queries!==null&&(n.queries.template(n,t),h.queries=n.queries.embeddedTView(t))}a&&(t.flags|=a),Bo(t,!1);let u=JP(n,e,t,r);Cl()&&Sg(n,e,u,t),zo(u,e);let l=pb(u,e,u,t);e[r+Qe]=l,Cg(e,l),LP(l,t,e)}function Hl(t,e,n,r,i,o,s,a,u,l,h){let p=n+Qe,g;if(e.firstCreatePass){if(g=td(e,p,4,s||null,a||null),l!=null){let y=On(e.consts,l);g.localNames=[];for(let T=0;T<y.length;T+=2)g.localNames.push(y[T],-1)}}else g=e.data[p];return YP(g,t,e,n,r,i,o,u),l!=null&&Rg(t,g,h),g}var JP=ZP;function ZP(t,e,n,r){return Dl(!0),e[Me].createComment("")}var kg=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=K({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();function Mb(t){return typeof t=="function"&&t[Ct]!==void 0}function Fg(t){return Mb(t)&&typeof t.set=="function"}var Lg=new q("");function or(t){return!!t&&typeof t.then=="function"}function id(t){return!!t&&typeof t.subscribe=="function"}var Nb=new q("");var Vg=(()=>{class t{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=P(Nb,{optional:!0})??[];injector=P(Jt);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let o=St(this.injector,i);if(or(o))n.push(o);else if(id(o)){let s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});n.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||t)};static \u0275prov=K({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),od=new q("");function xb(){fp(()=>{let t="";throw new z(600,t)})}function Pb(t){return t.isBoundToModule}var XP=10;var Ki=(()=>{class t{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=P(rn);afterRenderManager=P(KD);zonelessEnabled=P(Pa);rootEffectScheduler=P(km);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new rt;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=P(Br);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(Ae(n=>!n))}constructor(){P(Ha,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=P(ft);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){return this.bootstrapImpl(n,r)}bootstrapImpl(n,r,i=Jt.NULL){return this._injector.get(jt).run(()=>{Te(Ee.BootstrapComponentStart);let s=n instanceof nd;if(!this._injector.get(Vg).done){let T="";throw new z(405,T)}let u;s?u=n:u=this._injector.get(za).resolveComponentFactory(n),this.componentTypes.push(u.componentType);let l=Pb(u)?void 0:this._injector.get(zi),h=r||u.selector,p=u.create(i,[],h,l),g=p.location.nativeElement,y=p.injector.get(Lg,null);return y?.registerApplication(g),p.onDestroy(()=>{this.detachView(p.hostView),ka(this.components,p),y?.unregisterApplication(g)}),this._loadComponent(p),Te(Ee.BootstrapComponentEnd,p),p})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Te(Ee.ChangeDetectionStart),this.tracingSnapshot!==null?this.tracingSnapshot.run(bg.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw Te(Ee.ChangeDetectionEnd),new z(101,!1);let n=Y(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,Y(n),this.afterTick.next(),Te(Ee.ChangeDetectionEnd)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Hi,null,{optional:!0}));let n=0;for(;this.dirtyFlags!==0&&n++<XP;){Te(Ee.ChangeDetectionSyncStart);try{this.synchronizeOnce()}finally{Te(Ee.ChangeDetectionSyncEnd)}}}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let n=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!Ma(i))continue;let o=r&&!this.zonelessEnabled?0:1;lb(i,o),n=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}n||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>Ma(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;ka(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(n),this._injector.get(od,[]).forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>ka(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new z(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||t)};static \u0275prov=K({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function ka(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function sr(t,e,n,r){let i=ye(),o=Lr();if(ir(i,o,e)){let s=ot(),a=xa();k1(a,i,t,e,n,r)}return sr}var T8=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";var ig=class{destroy(e){}updateValue(e,n){}swap(e,n){let r=Math.min(e,n),i=Math.max(e,n),o=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(e,n){this.attach(n,this.detach(e))}};function Um(t,e,n,r,i){return t===n&&Object.is(e,r)?1:Object.is(i(t,e),i(n,r))?-1:0}function eO(t,e,n,r){let i,o,s=0,a=t.length-1,u=void 0;if(Array.isArray(e)){Y(r);let l=e.length-1;for(Y(null);s<=a&&s<=l;){let h=t.at(s),p=e[s],g=Um(s,h,s,p,n);if(g!==0){g<0&&t.updateValue(s,p),s++;continue}let y=t.at(a),T=e[l],R=Um(a,y,l,T,n);if(R!==0){R<0&&t.updateValue(a,T),a--,l--;continue}let A=n(s,h),F=n(a,y),ee=n(s,p);if(Object.is(ee,F)){let le=n(l,T);Object.is(le,A)?(t.swap(s,a),t.updateValue(a,T),l--,a--):t.move(a,s),t.updateValue(s,p),s++;continue}if(i??=new zl,o??=nD(t,s,a,n),og(t,i,s,ee))t.updateValue(s,p),s++,a++;else if(o.has(ee))i.set(A,t.detach(s)),a--;else{let le=t.create(s,e[s]);t.attach(s,le),s++,a++}}for(;s<=l;)tD(t,i,n,s,e[s]),s++}else if(e!=null){Y(r);let l=e[Symbol.iterator]();Y(null);let h=l.next();for(;!h.done&&s<=a;){let p=t.at(s),g=h.value,y=Um(s,p,s,g,n);if(y!==0)y<0&&t.updateValue(s,g),s++,h=l.next();else{i??=new zl,o??=nD(t,s,a,n);let T=n(s,g);if(og(t,i,s,T))t.updateValue(s,g),s++,a++,h=l.next();else if(!o.has(T))t.attach(s,t.create(s,g)),s++,a++,h=l.next();else{let R=n(s,p);i.set(R,t.detach(s)),a--}}}for(;!h.done;)tD(t,i,n,t.length,h.value),h=l.next()}for(;s<=a;)t.destroy(t.detach(a--));i?.forEach(l=>{t.destroy(l)})}function og(t,e,n,r){return e!==void 0&&e.has(r)?(t.attach(n,e.get(r)),e.delete(r),!0):!1}function tD(t,e,n,r,i){if(og(t,e,r,n(r,i)))t.updateValue(r,i);else{let o=t.create(r,i);t.attach(r,o)}}function nD(t,e,n,r){let i=new Set;for(let o=e;o<=n;o++)i.add(r(o,t.at(o)));return i}var zl=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let n=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(e,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,n){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,n)}else this.kvMap.set(e,n)}forEach(e){for(let[n,r]of this.kvMap)if(e(r,n),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,n)}}};function te(t,e,n,r,i,o,s,a){Gi("NgControlFlow");let u=ye(),l=ot(),h=On(l.consts,o);return Hl(u,l,t,e,n,r,i,h,256,s,a),Qi}function Qi(t,e,n,r,i,o,s,a){Gi("NgControlFlow");let u=ye(),l=ot(),h=On(l.consts,o);return Hl(u,l,t,e,n,r,i,h,512,s,a),Qi}function ne(t,e){Gi("NgControlFlow");let n=ye(),r=Lr(),i=n[r]!==Ln?n[r]:-1,o=i!==-1?ql(n,Qe+i):void 0,s=0;if(ir(n,r,t)){let a=Y(null);try{if(o!==void 0&&gb(o,s),t!==-1){let u=Qe+t,l=ql(n,u),h=ug(n[Z],u),p=vb(l,h,n),g=xg(n,h,e,{dehydratedView:p});ed(l,g,s,Fa(h,p))}}finally{Y(a)}}else if(o!==void 0){let a=mb(o,s);a!==void 0&&(a[ke]=e)}}var sg=class{lContainer;$implicit;$index;constructor(e,n,r){this.lContainer=e,this.$implicit=n,this.$index=r}get $count(){return this.lContainer.length-Fe}};function $r(t,e){return e}var ag=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,n,r){this.hasEmptyBlock=e,this.trackByFn=n,this.liveCollection=r}};function Hr(t,e,n,r,i,o,s,a,u,l,h,p,g){Gi("NgControlFlow");let y=ye(),T=ot(),R=u!==void 0,A=ye(),F=a?s.bind(A[Bt][ke]):s,ee=new ag(R,F);A[Qe+t]=ee,Hl(y,T,t+1,e,n,r,i,On(T.consts,o),256),R&&Hl(y,T,t+2,u,l,h,p,On(T.consts,g),512)}var cg=class extends ig{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,n,r){super(),this.lContainer=e,this.hostLView=n,this.templateTNode=r}get length(){return this.lContainer.length-Fe}at(e){return this.getLView(e)[ke].$implicit}attach(e,n){let r=n[Fo];this.needsIndexUpdate||=e!==this.length,ed(this.lContainer,n,e,Fa(this.templateTNode,r)),tO(this.lContainer,e)}detach(e){return this.needsIndexUpdate||=e!==this.length-1,nO(this.lContainer,e),rO(this.lContainer,e)}create(e,n){let r=eg(this.lContainer,this.templateTNode.tView.ssrId);return xg(this.hostLView,this.templateTNode,new sg(this.lContainer,n,e),{dehydratedView:r})}destroy(e){Zl(e[Z],e)}updateValue(e,n){this.getLView(e)[ke].$implicit=n}reset(){this.needsIndexUpdate=!1}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[ke].$index=e}getLView(e){return iO(this.lContainer,e)}};function zr(t){let e=Y(null),n=Vr();try{let r=ye(),i=r[Z],o=r[n],s=n+1,a=ql(r,s);if(o.liveCollection===void 0){let l=ug(i,s);o.liveCollection=new cg(a,r,l)}else o.liveCollection.reset();let u=o.liveCollection;if(eO(u,t,o.trackByFn,e),u.updateIndexes(),o.hasEmptyBlock){let l=Lr(),h=u.length===0;if(ir(r,l,h)){let p=n+2,g=ql(r,p);if(h){let y=ug(i,p),T=vb(g,y,r),R=xg(r,y,void 0,{dehydratedView:T});ed(g,R,0,Fa(y,T))}else i.firstUpdatePass&&iP(g),gb(g,0)}}}finally{Y(e)}}function ql(t,e){return t[e]}function tO(t,e){if(t.length<=Fe)return;let n=Fe+e,r=t[n],i=r?r[Li]:void 0;if(r&&i&&i.detachedLeaveAnimationFns&&i.detachedLeaveAnimationFns.length>0){let o=r[rr];l1(o,i),Ui.delete(r),i.detachedLeaveAnimationFns=void 0}}function nO(t,e){if(t.length<=Fe)return;let n=Fe+e,r=t[n],i=r?r[Li]:void 0;i&&i.leave&&i.leave.size>0&&(i.detachedLeaveAnimationFns=[])}function rO(t,e){return Va(t,e)}function iO(t,e){return mb(t,e)}function ug(t,e){return Ra(t,e)}function qr(t,e,n){let r=ye(),i=Lr();if(ir(r,i,e)){let o=ot(),s=xa();tb(s,r,t,e,r[Me],n)}return qr}function rD(t,e,n,r,i){Mg(e,t,n,i?"class":"style",r)}function H(t,e,n,r){let i=ye(),o=i[Z],s=t+Qe,a=o.firstCreatePass?wb(s,i,2,e,O1,pC(),n,r):o.data[s];if(rb(a,i,t,e,Ob),yl(a)){let u=i[Z];eb(u,i,a),kD(u,a,i)}return r!=null&&Rg(i,a),H}function W(){let t=ot(),e=Pt(),n=ib(e);return t.firstCreatePass&&Cb(t,n),_m(n)&&Em(),vm(),n.classesWithoutHost!=null&&Ex(n)&&rD(t,n,ye(),n.classesWithoutHost,!0),n.stylesWithoutHost!=null&&Ix(n)&&rD(t,n,ye(),n.stylesWithoutHost,!1),W}function on(t,e,n,r){return H(t,e,n,r),W(),on}function j(t,e,n,r){let i=ye(),o=i[Z],s=t+Qe,a=o.firstCreatePass?_P(s,o,2,e,n,r):o.data[s];return rb(a,i,t,e,Ob),r!=null&&Rg(i,a),j}function B(){let t=Pt(),e=ib(t);return _m(e)&&Em(),vm(),B}function jn(t,e,n,r){return j(t,e,n,r),B(),jn}var Ob=(t,e,n,r,i)=>(Dl(!0),jD(e[Me],r,RC()));function pt(){return ye()}function zt(t,e,n){let r=ye(),i=Lr();if(ir(r,i,e)){let o=ot(),s=xa();nb(s,r,t,e,r[Me],n)}return zt}var Ka="en-US";var oO=Ka;function kb(t){typeof t=="string"&&(oO=t.toLowerCase().replace(/_/g,"-"))}function vt(t,e,n){let r=ye(),i=ot(),o=Pt();return Fb(i,r,r[Me],o,t,e,n),vt}function Gr(t,e,n){let r=ye(),i=ot(),o=Pt();return(o.type&3||n)&&Db(o,i,r,n,r[Me],t,e,Rl(o,r,e)),Gr}function Fb(t,e,n,r,i,o,s){let a=!0,u=null;if((r.type&3||s)&&(u??=Rl(r,e,o),Db(r,t,e,s,n,i,o,u)&&(a=!1)),a){let l=r.outputs?.[i],h=r.hostDirectiveOutputs?.[i];if(h&&h.length)for(let p=0;p<h.length;p+=2){let g=h[p],y=h[p+1];u??=Rl(r,e,o),JC(r,e,g,y,i,u)}if(l&&l.length)for(let p of l)u??=Rl(r,e,o),JC(r,e,p,i,i,u)}}function L(t=1){return AC(t)}function bl(t,e){return t<<17|e<<2}function qi(t){return t>>17&32767}function sO(t){return(t&2)==2}function aO(t,e){return t&131071|e<<17}function lg(t){return t|2}function Go(t){return(t&131068)>>2}function $m(t,e){return t&-131069|e<<2}function cO(t){return(t&1)===1}function dg(t){return t|1}function uO(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=qi(s),u=Go(s);t[r]=n;let l=!1,h;if(Array.isArray(n)){let p=n;h=p[1],(h===null||ko(p,h)>0)&&(l=!0)}else h=n;if(i)if(u!==0){let g=qi(t[a+1]);t[r+1]=bl(g,a),g!==0&&(t[g+1]=$m(t[g+1],r)),t[a+1]=aO(t[a+1],r)}else t[r+1]=bl(a,0),a!==0&&(t[a+1]=$m(t[a+1],r)),a=r;else t[r+1]=bl(u,0),a===0?a=r:t[u+1]=$m(t[u+1],r),u=r;l&&(t[r+1]=lg(t[r+1])),iD(t,h,r,!0),iD(t,h,r,!1),lO(e,h,t,r,o),s=bl(a,u),o?e.classBindings=s:e.styleBindings=s}function lO(t,e,n,r,i){let o=i?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&ko(o,e)>=0&&(n[r+1]=dg(n[r+1]))}function iD(t,e,n,r){let i=t[n+1],o=e===null,s=r?qi(i):Go(i),a=!1;for(;s!==0&&(a===!1||o);){let u=t[s],l=t[s+1];dO(u,e)&&(a=!0,t[s+1]=r?dg(l):lg(l)),s=r?qi(l):Go(l)}a&&(t[n+1]=r?lg(i):dg(i))}function dO(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?ko(t,e)>=0:!1}function In(t,e){return hO(t,e,null,!0),In}function hO(t,e,n,r){let i=ye(),o=ot(),s=EC(2);if(o.firstUpdatePass&&pO(o,t,s,r),e!==Ln&&ir(i,s,e)){let a=o.data[Vr()];_O(o,a,i,i[Me],t,i[s+1]=EO(e,n),r,s)}}function fO(t,e){return e>=t.expandoStartIndex}function pO(t,e,n,r){let i=t.data;if(i[n+1]===null){let o=i[Vr()],s=fO(t,n);IO(o,r)&&e===null&&!s&&(e=!1),e=mO(i,o,e,r),uO(i,o,e,n,s,r)}}function mO(t,e,n,r){let i=DC(t),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=Hm(null,t,e,n,r),n=Ba(n,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==i)if(n=Hm(i,t,e,n,r),o===null){let u=gO(t,e,r);u!==void 0&&Array.isArray(u)&&(u=Hm(null,t,e,u[1],r),u=Ba(u,e.attrs,r),yO(t,e,r,u))}else o=vO(t,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),n}function gO(t,e,n){let r=n?e.classBindings:e.styleBindings;if(Go(r)!==0)return t[qi(r)]}function yO(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[qi(i)]=r}function vO(t,e,n){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=t[o].hostAttrs;r=Ba(r,s,n)}return Ba(r,e.attrs,n)}function Hm(t,e,n,r,i){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=e[a],r=Ba(r,o.hostAttrs,i),o!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function Ba(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),Yw(t,s,n?!0:e[++o]))}return t===void 0?null:t}function _O(t,e,n,r,i,o,s,a){if(!(e.type&3))return;let u=t.data,l=u[a+1],h=cO(l)?oD(u,e,n,i,Go(l),s):void 0;if(!Gl(h)){Gl(o)||sO(l)&&(o=oD(u,null,n,i,a,s));let p=fm(Vr(),n);b1(r,s,p,i,o)}}function oD(t,e,n,r,i,o){let s=e===null,a;for(;i>0;){let u=t[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,g=n[i+1];g===Ln&&(g=p?Vt:void 0);let y=p?pl(g,r):h===r?g:void 0;if(l&&!Gl(y)&&(y=pl(u,r)),Gl(y)&&(a=y,s))return a;let T=t[i+1];i=s?qi(T):Go(T)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(a=pl(u,r))}return a}function Gl(t){return t!==void 0}function EO(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=er(vg(t)))),t}function IO(t,e){return(t.flags&(e?8:16))!==0}function x(t,e=""){let n=ye(),r=ot(),i=t+Qe,o=r.firstCreatePass?td(r,i,1,e,null):r.data[i],s=wO(r,n,o,e,t);n[i]=s,Cl()&&Sg(r,n,s,o),Bo(o,!1)}var wO=(t,e,n,r,i)=>(Dl(!0),zx(e[Me],r));function CO(t,e,n,r=""){return ir(t,Lr(),n)?e+Ia(n)+r:Ln}function be(t){return Xe("",t),be}function Xe(t,e,n){let r=ye(),i=CO(r,t,e,n);return i!==Ln&&DO(r,Vr(),i),Xe}function DO(t,e,n){let r=fm(e,t);qx(t[Me],r,n)}function sd(t,e,n){Fg(e)&&(e=e());let r=ye(),i=Lr();if(ir(r,i,e)){let o=ot(),s=xa();tb(s,r,t,e,r[Me],n)}return sd}function jg(t,e){let n=Fg(t);return n&&t.set(e),n}function ad(t,e){let n=ye(),r=ot(),i=Pt();return Fb(r,n,n[Me],i,t,e),ad}function sD(t,e,n){let r=ot();r.firstCreatePass&&Lb(e,r.data,r.blueprint,Pn(t),n)}function Lb(t,e,n,r,i){if(t=ht(t),Array.isArray(t))for(let o=0;o<t.length;o++)Lb(t[o],e,n,r,i);else{let o=ot(),s=ye(),a=Pt(),u=Si(t)?t:ht(t.provide),l=cm(t),h=a.providerIndexes&1048575,p=a.directiveStart,g=a.providerIndexes>>20;if(Si(t)||!t.multi){let y=new Bi(l,i,Be,null),T=qm(u,e,i?h:h+g,p);T===-1?(Wm(Ol(a,s),o,u),zm(o,t,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(y),s.push(y)):(n[T]=y,s[T]=y)}else{let y=qm(u,e,h+g,p),T=qm(u,e,h,h+g),R=y>=0&&n[y],A=T>=0&&n[T];if(i&&!A||!i&&!R){Wm(Ol(a,s),o,u);let F=SO(i?TO:bO,n.length,i,r,l,t);!i&&A&&(n[T].providerFactory=F),zm(o,t,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(F),s.push(F)}else{let F=Vb(n[i?T:y],l,!i&&r);zm(o,t,y>-1?y:T,F)}!i&&r&&A&&n[T].componentProviders++}}}function zm(t,e,n,r){let i=Si(e),o=tC(e);if(i||o){let u=(o?ht(e.useClass):e).prototype.ngOnDestroy;if(u){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(n);h===-1?l.push(n,[r,u]):l[h+1].push(r,u)}else l.push(n,u)}}}function Vb(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function qm(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function bO(t,e,n,r,i){return hg(this.multi,[])}function TO(t,e,n,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,u=kl(r,r[Z],this.providerFactory.index,i);s=u.slice(0,a),hg(o,s);for(let l=a;l<u.length;l++)s.push(u[l])}else s=[],hg(o,s);return s}function hg(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function SO(t,e,n,r,i,o){let s=new Bi(t,n,Be,null);return s.multi=[],s.index=e,s.componentProviders=0,Vb(s,i,r&&!n),s}function cd(t,e){return n=>{n.providersResolver=(r,i)=>sD(r,i?i(t):t,!1),e&&(n.viewProvidersResolver=(r,i)=>sD(r,i?i(e):e,!0))}}function AO(t,e){let n=t[e];return n===Ln?void 0:n}function RO(t,e,n,r,i,o){let s=e+n;return ir(t,s,i)?EP(t,s+1,o?r.call(o,i):r(i)):AO(t,s+1)}function Yo(t,e){let n=ot(),r,i=t+Qe;n.firstCreatePass?(r=MO(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let o=r.factory||(r.factory=Nr(r.type,!0)),s,a=Tt(Be);try{let u=Pl(!1),l=o();return Pl(u),pm(n,ye(),i,l),l}finally{Tt(a)}}function MO(t,e){if(e)for(let n=e.length-1;n>=0;n--){let r=e[n];if(t===r.name)return r}}function Jo(t,e,n){let r=t+Qe,i=ye(),o=sC(i,r);return NO(i,r)?RO(i,vC(),e,o.transform,n,o):o.transform(n)}function NO(t,e){return t[Z].data[e].pure}var Wl=class{ngModuleFactory;componentFactories;constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},Bg=(()=>{class t{compileModuleSync(n){return new $l(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=Xp(n),o=HD(i.declarations).reduce((s,a)=>{let u=Pr(a);return u&&s.push(new qo(u)),s},[]);return new Wl(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(r){return new(r||t)};static \u0275prov=K({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var jb=(()=>{class t{applicationErrorHandler=P(rn);appRef=P(Ki);taskService=P(Br);ngZone=P(jt);zonelessEnabled=P(Pa);tracing=P(Ha,{optional:!0});zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new dt;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(va):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(P(Om,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()}))}notify(n){if(!this.zonelessEnabled&&n===5)return;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2;break}case 12:{this.appRef.dirtyFlags|=16;break}case 13:{this.appRef.dirtyFlags|=2;break}case 11:break;case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?Mm:Rm;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(va+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(n),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,Mm(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||t)};static \u0275prov=K({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Bb(){return[{provide:Po,useExisting:jb},{provide:jt,useClass:_a},{provide:Pa,useValue:!0}]}function xO(){return typeof $localize<"u"&&$localize.locale||Ka}var ud=new q("",{factory:()=>P(ud,{optional:!0,skipSelf:!0})||xO()});function Qa(t,e){return xu(t,e?.equal)}var Hb=Symbol("InputSignalNode#UNSET"),YO=J(M({},Pu),{transformFn:void 0,applyValueToInputSignal(t,e){la(t,e)}});function zb(t,e){let n=Object.create(YO);n.value=t,n.transformFn=e?.transform;function r(){if(aa(n),n.value===Hb){let i=null;throw new z(-950,i)}return n.value}return r[Ct]=n,r}function Ub(t,e){return zb(t,e)}function JO(t){return zb(Hb,t)}var qb=(Ub.required=JO,Ub);var Ug=new q(""),ZO=new q("");function Ya(t){return!t.moduleRef}function XO(t){let e=Ya(t)?t.r3Injector:t.moduleRef.injector,n=e.get(jt);return n.run(()=>{Ya(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(rn),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:r})}),Ya(t)){let o=()=>e.destroy(),s=t.platformInjector.get(Ug);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>t.moduleRef.destroy(),s=t.platformInjector.get(Ug);s.add(o),t.moduleRef.onDestroy(()=>{ka(t.allPlatformModules,t.moduleRef),i.unsubscribe(),s.delete(o)})}return tk(r,n,()=>{let o=e.get(Br),s=o.add(),a=e.get(Vg);return a.runInitializers(),a.donePromise.then(()=>{let u=e.get(ud,Ka);if(kb(u||Ka),!e.get(ZO,!0))return Ya(t)?e.get(Ki):(t.allPlatformModules.push(t.moduleRef),t.moduleRef);if(Ya(t)){let h=e.get(Ki);return t.rootComponent!==void 0&&h.bootstrap(t.rootComponent),h}else return ek?.(t.moduleRef,t.allPlatformModules),t.moduleRef}).finally(()=>void o.remove(s))})})}var ek;function tk(t,e,n){try{let r=n();return or(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t(r)),r}}var ld=null;function nk(t=[],e){return Jt.create({name:e,providers:[{provide:Ca,useValue:"platform"},{provide:Ug,useValue:new Set([()=>ld=null])},...t]})}function rk(t=[]){if(ld)return ld;let e=nk(t);return ld=e,xb(),ik(e),e}function ik(t){let e=t.get(Ql,null);St(t,()=>{e?.forEach(n=>n())})}var Zo=(()=>{class t{static __NG_ELEMENT_ID__=ok}return t})();function ok(t){return sk(Pt(),ye(),(t&16)===16)}function sk(t,e,n){if(Fr(t)&&!n){let r=tn(t.index,e);return new $i(r,r)}else if(t.type&175){let r=e[Bt];return new $i(r,e)}return null}function Gb(t){let{rootComponent:e,appProviders:n,platformProviders:r,platformRef:i}=t;Te(Ee.BootstrapApplicationStart);try{let o=i?.injector??rk(r),s=[Bb(),PC,...n||[]],a=new ja({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return XO({r3Injector:a.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{Te(Ee.BootstrapApplicationEnd)}}function $g(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}var Wb=null;function sn(){return Wb}function Hg(t){Wb??=t}var Ja=class{},hd=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=K({token:t,factory:()=>P(Kb),providedIn:"platform"})}return t})();var Kb=(()=>{class t extends hd{_location;_history;_doc=P(Ze);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return sn().getBaseHref(this._doc)}onPopState(n){let r=sn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=sn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||t)};static \u0275prov=K({token:t,factory:()=>new t,providedIn:"platform"})}return t})();function Jb(t,e){return t?e?t.endsWith("/")?e.startsWith("/")?t+e.slice(1):t+e:e.startsWith("/")?t+e:`${t}/${e}`:t:e}function Qb(t){let e=t.search(/#|\?|$/);return t[e-1]==="/"?t.slice(0,e-1)+t.slice(e):t}function Wr(t){return t&&t[0]!=="?"?`?${t}`:t}var fd=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=K({token:t,factory:()=>P(ck),providedIn:"root"})}return t})(),ak=new q(""),ck=(()=>{class t extends fd{_platformLocation;_baseHref;_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??P(Ze).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return Jb(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+Wr(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+Wr(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+Wr(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||t)(ue(hd),ue(ak,8))};static \u0275prov=K({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Xo=(()=>{class t{_subject=new rt;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(n){this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=dk(Qb(Yb(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+Wr(r))}normalize(n){return t.stripTrailingSlash(lk(this._basePath,Yb(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Wr(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Wr(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=Wr;static joinWithSlash=Jb;static stripTrailingSlash=Qb;static \u0275fac=function(r){return new(r||t)(ue(fd))};static \u0275prov=K({token:t,factory:()=>uk(),providedIn:"root"})}return t})();function uk(){return new Xo(ue(fd))}function lk(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function Yb(t){return t.replace(/\/index.html$/,"")}function dk(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function hk(t,e){return new z(2100,!1)}var zg=class{createSubscription(e,n,r){return je(()=>e.subscribe({next:n,error:r}))}dispose(e){je(()=>e.unsubscribe())}},qg=class{createSubscription(e,n,r){return e.then(i=>n?.(i),i=>r?.(i)),{unsubscribe:()=>{n=null,r=null}}}dispose(e){e.unsubscribe()}},fk=new qg,pk=new zg,Gg=(()=>{class t{_ref;_latestValue=null;markForCheckOnValueUpdate=!0;_subscription=null;_obj=null;_strategy=null;applicationErrorHandler=P(rn);constructor(n){this._ref=n}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(n){if(!this._obj){if(n)try{this.markForCheckOnValueUpdate=!1,this._subscribe(n)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return n!==this._obj?(this._dispose(),this.transform(n)):this._latestValue}_subscribe(n){this._obj=n,this._strategy=this._selectStrategy(n),this._subscription=this._strategy.createSubscription(n,r=>this._updateLatestValue(n,r),r=>this.applicationErrorHandler(r))}_selectStrategy(n){if(or(n))return fk;if(id(n))return pk;throw hk(t,n)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(n,r){n===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static \u0275fac=function(r){return new(r||t)(Be(Zo,16))};static \u0275pipe=Og({name:"async",type:t,pure:!1})}return t})();var pd=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=Ur({type:t});static \u0275inj=nr({})}return t})();function Wg(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Za=class{};var Zb="browser";var Xa=class{_doc;constructor(e){this._doc=e}manager},md=(()=>{class t extends Xa{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i,o){return n.addEventListener(r,i,o),()=>this.removeEventListener(n,r,i,o)}removeEventListener(n,r,i,o){return n.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||t)(ue(Ze))};static \u0275prov=K({token:t,factory:t.\u0275fac})}return t})(),vd=new q(""),Jg=(()=>{class t{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,r){this._zone=r,n.forEach(s=>{s.manager=this});let i=n.filter(s=>!(s instanceof md));this._plugins=i.slice().reverse();let o=n.find(s=>s instanceof md);o&&this._plugins.push(o)}addEventListener(n,r,i,o){return this._findPluginFor(r).addEventListener(n,r,i,o)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new z(5101,!1);return this._eventNameToPlugin.set(n,r),r}static \u0275fac=function(r){return new(r||t)(ue(vd),ue(jt))};static \u0275prov=K({token:t,factory:t.\u0275fac})}return t})(),Kg="ng-app-id";function Xb(t){for(let e of t)e.remove()}function eT(t,e){let n=e.createElement("style");return n.textContent=t,n}function gk(t,e,n,r){let i=t.head?.querySelectorAll(`style[${Kg}="${e}"],link[${Kg}="${e}"]`);if(i)for(let o of i)o.removeAttribute(Kg),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&n.set(o.textContent,{usage:0,elements:[o]})}function Yg(t,e){let n=e.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",t),n}var Zg=(()=>{class t{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,gk(n,r,this.inline,this.external),this.hosts.add(n.head)}addStyles(n,r){for(let i of n)this.addUsage(i,this.inline,eT);r?.forEach(i=>this.addUsage(i,this.external,Yg))}removeStyles(n,r){for(let i of n)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(n,r,i){let o=r.get(n);o?o.usage++:r.set(n,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(n,this.doc)))})}removeUsage(n,r){let i=r.get(n);i&&(i.usage--,i.usage<=0&&(Xb(i.elements),r.delete(n)))}ngOnDestroy(){for(let[,{elements:n}]of[...this.inline,...this.external])Xb(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(n,eT(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(n,Yg(r,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,r){return this.nonce&&r.setAttribute("nonce",this.nonce),n.appendChild(r)}static \u0275fac=function(r){return new(r||t)(ue(Ze),ue(Kl),ue(Yl,8),ue($a))};static \u0275prov=K({token:t,factory:t.\u0275fac})}return t})(),Qg={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Xg=/%COMP%/g;var nT="%COMP%",yk=`_nghost-${nT}`,vk=`_ngcontent-${nT}`,_k=!0,Ek=new q("",{factory:()=>_k});function Ik(t){return vk.replace(Xg,t)}function wk(t){return yk.replace(Xg,t)}function rT(t,e){return e.map(n=>n.replace(Xg,t))}var ey=(()=>{class t{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;constructor(n,r,i,o,s,a,u=null,l=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.ngZone=a,this.nonce=u,this.tracingService=l,this.defaultRenderer=new ec(n,s,a,this.tracingService)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(n,r);return i instanceof yd?i.applyToHost(n):i instanceof tc&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.tracingService;switch(r.encapsulation){case _n.Emulated:o=new yd(u,l,r,this.appId,h,s,a,p);break;case _n.ShadowDom:return new gd(u,n,r,s,a,this.nonce,p,l);case _n.ExperimentalIsolatedShadowDom:return new gd(u,n,r,s,a,this.nonce,p);default:o=new tc(u,l,r,h,s,a,p);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(n){this.rendererByCompId.delete(n)}static \u0275fac=function(r){return new(r||t)(ue(Jg),ue(Zg),ue(Kl),ue(Ek),ue(Ze),ue(jt),ue(Yl),ue(Ha,8))};static \u0275prov=K({token:t,factory:t.\u0275fac})}return t})(),ec=class{eventManager;doc;ngZone;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.tracingService=i}destroy(){}destroyNode=null;createElement(e,n){return n?this.doc.createElementNS(Qg[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(tT(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(tT(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new z(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=Qg[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=Qg[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Fn.DashCase|Fn.Important)?e.style.setProperty(n,r,i&Fn.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Fn.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r,i){if(typeof e=="string"&&(e=sn().getGlobalEventTarget(this.doc,e),!e))throw new z(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,n,o)),this.eventManager.addEventListener(e,n,o,i)}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;e(n)===!1&&n.preventDefault()}}};function tT(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var gd=class extends ec{hostEl;sharedStylesHost;shadowRoot;constructor(e,n,r,i,o,s,a,u){super(e,i,o,a),this.hostEl=n,this.sharedStylesHost=u,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost&&this.sharedStylesHost.addHost(this.shadowRoot);let l=r.styles;l=rT(r.id,l);for(let p of l){let g=document.createElement("style");s&&g.setAttribute("nonce",s),g.textContent=p,this.shadowRoot.appendChild(g)}let h=r.getExternalStyles?.();if(h)for(let p of h){let g=Yg(p,i);s&&g.setAttribute("nonce",s),this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost&&this.sharedStylesHost.removeHost(this.shadowRoot)}},tc=class extends ec{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,n,r,i,o,s,a,u){super(e,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i;let l=r.styles;this.styles=u?rT(u,l):l,this.styleUrls=r.getExternalStyles?.(u)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&Ui.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},yd=class extends tc{contentAttr;hostAttr;constructor(e,n,r,i,o,s,a,u){let l=i+"-"+r.id;super(e,n,r,o,s,a,u,l),this.contentAttr=Ik(l),this.hostAttr=wk(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}};var _d=class t extends Ja{supportsDOMEvents=!0;static makeCurrent(){Hg(new t)}onAndCancel(e,n,r,i){return e.addEventListener(n,r,i),()=>{e.removeEventListener(n,r,i)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=Ck();return n==null?null:Dk(n)}resetBaseElement(){nc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Wg(document.cookie,e)}},nc=null;function Ck(){return nc=nc||document.head.querySelector("base"),nc?nc.getAttribute("href"):null}function Dk(t){return new URL(t,document.baseURI).pathname}var bk=(()=>{class t{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||t)};static \u0275prov=K({token:t,factory:t.\u0275fac})}return t})(),iT=["alt","control","meta","shift"],Tk={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Sk={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},oT=(()=>{class t extends Xa{constructor(n){super(n)}supports(n){return t.parseEventName(n)!=null}addEventListener(n,r,i,o){let s=t.parseEventName(r),a=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>sn().onAndCancel(n,s.domEventName,a,o))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=t._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),iT.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(n,r){let i=Tk[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),iT.forEach(s=>{if(s!==i){let a=Sk[s];a(n)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{t.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return n==="esc"?"escape":n}static \u0275fac=function(r){return new(r||t)(ue(Ze))};static \u0275prov=K({token:t,factory:t.\u0275fac})}return t})();function ty(t,e,n){let r=M({rootComponent:t,platformRef:n?.platformRef},Ak(e));return Gb(r)}function Ak(t){return{appProviders:[...Pk,...t?.providers??[]],platformProviders:xk}}function Rk(){_d.makeCurrent()}function Mk(){return new tr}function Nk(){return gg(document),document}var xk=[{provide:$a,useValue:Zb},{provide:Ql,useValue:Rk,multi:!0},{provide:Ze,useFactory:Nk}];var Pk=[{provide:Ca,useValue:"root"},{provide:tr,useFactory:Mk},{provide:vd,useClass:md,multi:!0},{provide:vd,useClass:oT,multi:!0},ey,Zg,Jg,{provide:Hi,useExisting:ey},{provide:Za,useClass:bk},[]];var sT=(()=>{class t{_doc;constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static \u0275fac=function(r){return new(r||t)(ue(Ze))};static \u0275prov=K({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var oe="primary",mc=Symbol("RouteTitle"),sy=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Xi(t){return new sy(t)}function mT(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=t[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function bd(t){return new Promise((e,n)=>{t.pipe(Zn()).subscribe({next:r=>e(r),error:r=>n(r)})})}function kk(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Bn(t[n],e[n]))return!1;return!0}function Bn(t,e){let n=t?ay(t):void 0,r=e?ay(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!gT(t[i],e[i]))return!1;return!0}function ay(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function gT(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function yT(t){return t.length>0?t[t.length-1]:null}function to(t){return Zu(t)?t:or(t)?Ve(Promise.resolve(t)):ge(t)}function vT(t){return Zu(t)?bd(t):Promise.resolve(t)}var Fk={exact:ET,subset:IT},_T={exact:Lk,subset:Vk,ignored:()=>!0};function aT(t,e,n){return Fk[n.paths](t.root,e.root,n.matrixParams)&&_T[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function Lk(t,e){return Bn(t,e)}function ET(t,e,n){if(!Ji(t.segments,e.segments)||!wd(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!ET(t.children[r],e.children[r],n))return!1;return!0}function Vk(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>gT(t[n],e[n]))}function IT(t,e,n){return wT(t,e,e.segments,n)}function wT(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!Ji(i,n)||e.hasChildren()||!wd(i,n,r))}else if(t.segments.length===n.length){if(!Ji(t.segments,n)||!wd(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!IT(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!Ji(t.segments,i)||!wd(t.segments,i,r)||!t.children[oe]?!1:wT(t.children[oe],e,o,r)}}function wd(t,e,n){return e.every((r,i)=>_T[n](t[i].parameters,r.parameters))}var Cn=class{root;queryParams;fragment;_queryParamMap;constructor(e=new Ie([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Xi(this.queryParams),this._queryParamMap}toString(){return Uk.serialize(this)}},Ie=class{segments;children;parent=null;constructor(e,n){this.segments=e,this.children=n,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Cd(this)}},Kr=class{path;parameters;_parameterMap;constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=Xi(this.parameters),this._parameterMap}toString(){return DT(this)}};function jk(t,e){return Ji(t,e)&&t.every((n,r)=>Bn(n.parameters,e[r].parameters))}function Ji(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function Bk(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===oe&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==oe&&(n=n.concat(e(i,r)))}),n}var gc=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=K({token:t,factory:()=>new Qr,providedIn:"root"})}return t})(),Qr=class{parse(e){let n=new uy(e);return new Cn(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${rc(e.root,!0)}`,r=zk(e.queryParams),i=typeof e.fragment=="string"?`#${$k(e.fragment)}`:"";return`${n}${r}${i}`}},Uk=new Qr;function Cd(t){return t.segments.map(e=>DT(e)).join("/")}function rc(t,e){if(!t.hasChildren())return Cd(t);if(e){let n=t.children[oe]?rc(t.children[oe],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==oe&&r.push(`${i}:${rc(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=Bk(t,(r,i)=>i===oe?[rc(t.children[oe],!1)]:[`${i}:${rc(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[oe]!=null?`${Cd(t)}/${n[0]}`:`${Cd(t)}/(${n.join("//")})`}}function CT(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ed(t){return CT(t).replace(/%3B/gi,";")}function $k(t){return encodeURI(t)}function cy(t){return CT(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Dd(t){return decodeURIComponent(t)}function cT(t){return Dd(t.replace(/\+/g,"%20"))}function DT(t){return`${cy(t.path)}${Hk(t.parameters)}`}function Hk(t){return Object.entries(t).map(([e,n])=>`;${cy(e)}=${cy(n)}`).join("")}function zk(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${Ed(n)}=${Ed(i)}`).join("&"):`${Ed(n)}=${Ed(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var qk=/^[^\/()?;#]+/;function ny(t){let e=t.match(qk);return e?e[0]:""}var Gk=/^[^\/()?;=#]+/;function Wk(t){let e=t.match(Gk);return e?e[0]:""}var Kk=/^[^=?&#]+/;function Qk(t){let e=t.match(Kk);return e?e[0]:""}var Yk=/^[^&#]+/;function Jk(t){let e=t.match(Yk);return e?e[0]:""}var uy=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ie([],{}):new Ie([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[oe]=new Ie(e,n)),r}parseSegment(){let e=ny(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new z(4009,!1);return this.capture(e),new Kr(Dd(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=Wk(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=ny(this.remaining);i&&(r=i,this.capture(r))}e[Dd(n)]=Dd(r)}parseQueryParam(e){let n=Qk(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=Jk(this.remaining);s&&(r=s,this.capture(r))}let i=cT(n),o=cT(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=ny(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new z(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=oe);let s=this.parseChildren();n[o??oe]=Object.keys(s).length===1&&s[oe]?s[oe]:new Ie([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new z(4011,!1)}};function bT(t){return t.segments.length>0?new Ie([],{[oe]:t}):t}function TT(t){let e={};for(let[r,i]of Object.entries(t.children)){let o=TT(i);if(r===oe&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new Ie(t.segments,e);return Zk(n)}function Zk(t){if(t.numberOfChildren===1&&t.children[oe]){let e=t.children[oe];return new Ie(t.segments.concat(e.segments),e.children)}return t}function rs(t){return t instanceof Cn}function ST(t,e,n=null,r=null,i=new Qr){let o=AT(t);return RT(o,e,n,r,i)}function AT(t){let e;function n(o){let s={};for(let u of o.children){let l=n(u);s[u.outlet]=l}let a=new Ie(o.url,s);return o===t&&(e=a),a}let r=n(t.root),i=bT(r);return e??i}function RT(t,e,n,r,i){let o=t;for(;o.parent;)o=o.parent;if(e.length===0)return ry(o,o,o,n,r,i);let s=Xk(e);if(s.toRoot())return ry(o,o,new Ie([],{}),n,r,i);let a=eF(s,o,t),u=a.processChildren?oc(a.segmentGroup,a.index,s.commands):NT(a.segmentGroup,a.index,s.commands);return ry(o,a.segmentGroup,u,n,r,i)}function Td(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function cc(t){return typeof t=="object"&&t!=null&&t.outlets}function uT(t,e,n){t||="\u0275";let r=new Cn;return r.queryParams={[t]:e},n.parse(n.serialize(r)).queryParams[t]}function ry(t,e,n,r,i,o){let s={};for(let[l,h]of Object.entries(r??{}))s[l]=Array.isArray(h)?h.map(p=>uT(l,p,o)):uT(l,h,o);let a;t===e?a=n:a=MT(t,e,n);let u=bT(TT(a));return new Cn(u,s,i)}function MT(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=MT(o,e,n)}),new Ie(t.segments,r)}var Sd=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Td(r[0]))throw new z(4003,!1);let i=r.find(cc);if(i&&i!==yT(r))throw new z(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function Xk(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Sd(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Sd(n,e,r)}var ts=class{segmentGroup;processChildren;index;constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function eF(t,e,n){if(t.isAbsolute)return new ts(e,!0,0);if(!n)return new ts(e,!1,NaN);if(n.parent===null)return new ts(n,!0,0);let r=Td(t.commands[0])?0:1,i=n.segments.length-1+r;return tF(n,i,t.numberOfDoubleDots)}function tF(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new z(4005,!1);i=r.segments.length}return new ts(r,!1,i-o)}function nF(t){return cc(t[0])?t[0].outlets:{[oe]:t}}function NT(t,e,n){if(t??=new Ie([],{}),t.segments.length===0&&t.hasChildren())return oc(t,e,n);let r=rF(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new Ie(t.segments.slice(0,r.pathIndex),{});return o.children[oe]=new Ie(t.segments.slice(r.pathIndex),t.children),oc(o,0,i)}else return r.match&&i.length===0?new Ie(t.segments,{}):r.match&&!t.hasChildren()?ly(t,e,n):r.match?oc(t,0,i):ly(t,e,n)}function oc(t,e,n){if(n.length===0)return new Ie(t.segments,{});{let r=nF(n),i={};if(Object.keys(r).some(o=>o!==oe)&&t.children[oe]&&t.numberOfChildren===1&&t.children[oe].segments.length===0){let o=oc(t.children[oe],e,n);return new Ie(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=NT(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Ie(t.segments,i)}}function rF(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let s=t.segments[i],a=n[r];if(cc(a))break;let u=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!dT(u,l,s))return o;r+=2}else{if(!dT(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function ly(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if(cc(o)){let u=iF(o.outlets);return new Ie(r,u)}if(i===0&&Td(n[0])){let u=t.segments[e];r.push(new Kr(u.path,lT(n[0]))),i++;continue}let s=cc(o)?o.outlets[oe]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&Td(a)?(r.push(new Kr(s,lT(a))),i+=2):(r.push(new Kr(s,{})),i++)}return new Ie(r,{})}function iF(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=ly(new Ie([],{}),0,r))}),e}function lT(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function dT(t,e,n){return t==n.path&&Bn(e,n.parameters)}var sc="imperative",st=(function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t})(st||{}),Gt=class{id;url;constructor(e,n){this.id=e,this.url=n}},eo=class extends Gt{type=st.NavigationStart;navigationTrigger;restoredState;constructor(e,n,r="imperative",i=null){super(e,n),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},ar=class extends Gt{urlAfterRedirects;type=st.NavigationEnd;constructor(e,n,r){super(e,n),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},At=(function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t[t.Aborted=4]="Aborted",t})(At||{}),uc=(function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t})(uc||{}),Un=class extends Gt{reason;code;type=st.NavigationCancel;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},cr=class extends Gt{reason;code;type=st.NavigationSkipped;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}},is=class extends Gt{error;target;type=st.NavigationError;constructor(e,n,r,i){super(e,n),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},lc=class extends Gt{urlAfterRedirects;state;type=st.RoutesRecognized;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ad=class extends Gt{urlAfterRedirects;state;type=st.GuardsCheckStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Rd=class extends Gt{urlAfterRedirects;state;shouldActivate;type=st.GuardsCheckEnd;constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Md=class extends Gt{urlAfterRedirects;state;type=st.ResolveStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Nd=class extends Gt{urlAfterRedirects;state;type=st.ResolveEnd;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},xd=class{route;type=st.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Pd=class{route;type=st.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Od=class{snapshot;type=st.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},kd=class{snapshot;type=st.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Fd=class{snapshot;type=st.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ld=class{snapshot;type=st.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var dc=class{},os=class{url;navigationBehaviorOptions;constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function oF(t){return!(t instanceof dc)&&!(t instanceof os)}function sF(t,e){return t.providers&&!t._injector&&(t._injector=Wa(t.providers,e,`Route: ${t.path}`)),t._injector??e}function wn(t){return t.outlet||oe}function aF(t,e){let n=t.filter(r=>wn(r)===e);return n.push(...t.filter(r=>wn(r)!==e)),n}function cs(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var Vd=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return cs(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new us(this.rootInjector)}},us=(()=>{class t{rootInjector;contexts=new Map;constructor(n){this.rootInjector=n}onChildOutletCreated(n,r){let i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new Vd(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static \u0275fac=function(r){return new(r||t)(ue(ft))};static \u0275prov=K({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),jd=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=dy(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=dy(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=hy(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return hy(e,this._root).map(n=>n.value)}};function dy(t,e){if(t===e.value)return e;for(let n of e.children){let r=dy(t,n);if(r)return r}return null}function hy(t,e){if(t===e.value)return[e];for(let n of e.children){let r=hy(t,n);if(r.length)return r.unshift(e),r}return[]}var qt=class{value;children;constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function es(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var hc=class extends jd{snapshot;constructor(e,n){super(e),this.snapshot=n,vy(this,e)}toString(){return this.snapshot.toString()}};function xT(t){let e=cF(t),n=new We([new Kr("",{})]),r=new We({}),i=new We({}),o=new We({}),s=new We(""),a=new $n(n,r,o,s,i,oe,t,e.root);return a.snapshot=e.root,new hc(new qt(a,[]),e)}function cF(t){let e={},n={},r={},o=new Zi([],e,r,"",n,oe,t,null,{});return new fc("",new qt(o,[]))}var $n=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,n,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(Ae(l=>l[mc]))??ge(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Ae(e=>Xi(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Ae(e=>Xi(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Bd(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:M(M({},e.params),t.params),data:M(M({},e.data),t.data),resolve:M(M(M(M({},t.data),e.data),i?.data),t._resolvedData)}:r={params:M({},t.params),data:M({},t.data),resolve:M(M({},t.data),t._resolvedData??{})},i&&OT(i)&&(r.resolve[mc]=i.title),r}var Zi=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[mc]}constructor(e,n,r,i,o,s,a,u,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Xi(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Xi(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},fc=class extends jd{url;constructor(e,n){super(n),this.url=e,vy(this,n)}toString(){return PT(this._root)}};function vy(t,e){e.value._routerState=t,e.children.forEach(n=>vy(t,n))}function PT(t){let e=t.children.length>0?` { ${t.children.map(PT).join(", ")} } `:"";return`${t.value}${e}`}function iy(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Bn(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Bn(e.params,n.params)||t.paramsSubject.next(n.params),kk(e.url,n.url)||t.urlSubject.next(n.url),Bn(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function fy(t,e){let n=Bn(t.params,e.params)&&jk(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||fy(t.parent,e.parent))}function OT(t){return typeof t.title=="string"||t.title===null}var kT=new q(""),yc=(()=>{class t{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=oe;activateEvents=new Ke;deactivateEvents=new Ke;attachEvents=new Ke;detachEvents=new Ke;routerOutletData=qb();parentContexts=P(us);location=P(Ga);changeDetector=P(Zo);inputBinder=P(zd,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new z(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new z(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new z(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new z(4013,!1);this._activatedRoute=n;let i=this.location,s=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new py(n,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||t)};static \u0275dir=Vn({type:t,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Wo]})}return t})(),py=class{route;childContexts;parent;outletData;constructor(e,n,r,i){this.route=e,this.childContexts=n,this.parent=r,this.outletData=i}get(e,n){return e===$n?this.route:e===us?this.childContexts:e===kT?this.outletData:this.parent.get(e,n)}},zd=new q("");var _y=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275cmp=En({type:t,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&on(0,"router-outlet")},dependencies:[yc],encapsulation:2})}return t})();function Ey(t){let e=t.children&&t.children.map(Ey),n=e?J(M({},t),{children:e}):M({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==oe&&(n.component=_y),n}function uF(t,e,n){let r=pc(t,e._root,n?n._root:void 0);return new hc(r,e)}function pc(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=lF(t,e,n);return new qt(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>pc(t,a)),s}}let r=dF(e.value),i=e.children.map(o=>pc(t,o));return new qt(r,i)}}function lF(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return pc(t,r,i);return pc(t,r)})}function dF(t){return new $n(new We(t.url),new We(t.params),new We(t.queryParams),new We(t.fragment),new We(t.data),t.outlet,t.component,t)}var ss=class{redirectTo;navigationBehaviorOptions;constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},FT="ngNavigationCancelingError";function Ud(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=rs(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=LT(!1,At.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function LT(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[FT]=!0,n.cancellationCode=e,n}function hF(t){return VT(t)&&rs(t.url)}function VT(t){return!!t&&t[FT]}var fF=(t,e,n,r)=>Ae(i=>(new my(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),my=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),iy(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=es(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=es(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=es(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=es(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Ld(o.value.snapshot))}),e.children.length&&this.forwardEvent(new kd(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(iy(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),iy(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},$d=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},ns=class{component;route;constructor(e,n){this.component=e,this.route=n}};function pF(t,e,n){let r=t._root,i=e?e._root:null;return ic(r,i,n,[r.value])}function mF(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function ls(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!Wp(t)?t:e.get(t):r}function ic(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=es(e);return t.children.forEach(s=>{gF(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>ac(a,n.getContext(s),i)),i}function gF(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=yF(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new $d(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?ic(t,e,a?a.children:null,r,i):ic(t,e,n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new ns(a.outlet.component,s))}else s&&ac(e,a,i),i.canActivateChecks.push(new $d(r)),o.component?ic(t,null,a?a.children:null,r,i):ic(t,null,n,r,i);return i}function yF(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!Ji(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Ji(t.url,e.url)||!Bn(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!fy(t,e)||!Bn(t.queryParams,e.queryParams);case"paramsChange":default:return!fy(t,e)}}function ac(t,e,n){let r=es(t),i=t.value;Object.entries(r).forEach(([o,s])=>{i.component?e?ac(s,e.children.getContext(o),n):ac(s,null,n):ac(s,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new ns(e.outlet.component,i)):n.canDeactivateChecks.push(new ns(null,i)):n.canDeactivateChecks.push(new ns(null,i))}function vc(t){return typeof t=="function"}function vF(t){return typeof t=="boolean"}function _F(t){return t&&vc(t.canLoad)}function EF(t){return t&&vc(t.canActivate)}function IF(t){return t&&vc(t.canActivateChild)}function wF(t){return t&&vc(t.canDeactivate)}function CF(t){return t&&vc(t.canMatch)}function jT(t){return t instanceof Ci||t?.name==="EmptyError"}var Id=Symbol("INITIAL_VALUE");function as(){return Rn(t=>bp(t.map(e=>e.pipe(Jn(1),Rp(Id)))).pipe(Ae(e=>{for(let n of e)if(n!==!0){if(n===Id)return Id;if(n===!1||DF(n))return n}return!0}),An(e=>e!==Id),Jn(1)))}function DF(t){return rs(t)||t instanceof ss}function BT(t){return t.aborted?ge(void 0).pipe(Jn(1)):new de(e=>{let n=()=>{e.next(),e.complete()};return t.addEventListener("abort",n),()=>t.removeEventListener("abort",n)})}function UT(t){return Di(BT(t))}function bF(t,e){return Dt(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?ge(J(M({},n),{guardsResult:!0})):TF(s,r,i,t).pipe(Dt(a=>a&&vF(a)?SF(r,o,t,e):ge(a)),Ae(a=>J(M({},n),{guardsResult:a})))})}function TF(t,e,n,r){return Ve(t).pipe(Dt(i=>xF(i.component,i.route,n,e,r)),Zn(i=>i!==!0,!0))}function SF(t,e,n,r){return Ve(e).pipe(nl(i=>Mo(RF(i.route.parent,r),AF(i.route,r),NF(t,i.path,n),MF(t,i.route,n))),Zn(i=>i!==!0,!0))}function AF(t,e){return t!==null&&e&&e(new Fd(t)),ge(!0)}function RF(t,e){return t!==null&&e&&e(new Od(t)),ge(!0)}function MF(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return ge(!0);let i=r.map(o=>fa(()=>{let s=cs(e)??n,a=ls(o,s),u=EF(a)?a.canActivate(e,t):St(s,()=>a(e,t));return to(u).pipe(Zn())}));return ge(i).pipe(as())}function NF(t,e,n){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>mF(s)).filter(s=>s!==null).map(s=>fa(()=>{let a=s.guards.map(u=>{let l=cs(s.node)??n,h=ls(u,l),p=IF(h)?h.canActivateChild(r,t):St(l,()=>h(r,t));return to(p).pipe(Zn())});return ge(a).pipe(as())}));return ge(o).pipe(as())}function xF(t,e,n,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return ge(!0);let s=o.map(a=>{let u=cs(e)??i,l=ls(a,u),h=wF(l)?l.canDeactivate(t,e,n,r):St(u,()=>l(t,e,n,r));return to(h).pipe(Zn())});return ge(s).pipe(as())}function PF(t,e,n,r,i){let o=e.canLoad;if(o===void 0||o.length===0)return ge(!0);let s=o.map(a=>{let u=ls(a,t),l=_F(u)?u.canLoad(e,n):St(t,()=>u(e,n)),h=to(l);return i?h.pipe(UT(i)):h});return ge(s).pipe(as(),$T(r))}function $T(t){return Ip(bt(e=>{if(typeof e!="boolean")throw Ud(t,e)}),Ae(e=>e===!0))}function OF(t,e,n,r,i){let o=e.canMatch;if(!o||o.length===0)return ge(!0);let s=o.map(a=>{let u=ls(a,t),l=CF(u)?u.canMatch(e,n):St(t,()=>u(e,n)),h=to(l);return i?h.pipe(UT(i)):h});return ge(s).pipe(as(),$T(r))}var Yi=class HT extends Error{segmentGroup;constructor(e){super(),this.segmentGroup=e||null,Object.setPrototypeOf(this,HT.prototype)}},gy=class zT extends Error{urlTree;constructor(e){super(),this.urlTree=e,Object.setPrototypeOf(this,zT.prototype)}};function kF(t){throw new z(4e3,!1)}function FF(t){throw LT(!1,At.GuardRejected)}var LF=class{urlSerializer;urlTree;constructor(e,n){this.urlSerializer=e,this.urlTree=n}async lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return r;if(i.numberOfChildren>1||!i.children[oe])throw kF(`${e.redirectTo}`);i=i.children[oe]}}async applyRedirectCommands(e,n,r,i,o){let s=await VF(n,i,o);if(s instanceof Cn)throw new gy(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if(s[0]==="/")throw new gy(a);return a}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new Cn(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new Ie(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new z(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}};function VF(t,e,n){if(typeof t=="string")return Promise.resolve(t);let r=t,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:u,params:l,data:h,title:p}=e;return bd(to(St(n,()=>r({params:l,data:h,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:u,title:p}))))}var yy={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function jF(t,e,n,r,i,o){let s=qT(t,e,n);return s.matched?(r=sF(e,r),OF(r,e,n,i,o).pipe(Ae(a=>a===!0?s:M({},yy)))):ge(s)}function qT(t,e,n){if(e.path==="**")return BF(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?M({},yy):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||mT)(n,t,e);if(!i)return M({},yy);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?M(M({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function BF(t){return{matched:!0,parameters:t.length>0?yT(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function hT(t,e,n,r){return n.length>0&&HF(t,n,r)?{segmentGroup:new Ie(e,$F(r,new Ie(n,t.children))),slicedSegments:[]}:n.length===0&&zF(t,n,r)?{segmentGroup:new Ie(t.segments,UF(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new Ie(t.segments,t.children),slicedSegments:n}}function UF(t,e,n,r){let i={};for(let o of n)if(qd(t,e,o)&&!r[wn(o)]){let s=new Ie([],{});i[wn(o)]=s}return M(M({},r),i)}function $F(t,e){let n={};n[oe]=e;for(let r of t)if(r.path===""&&wn(r)!==oe){let i=new Ie([],{});n[wn(r)]=i}return n}function HF(t,e,n){return n.some(r=>qd(t,e,r)&&wn(r)!==oe)}function zF(t,e,n){return n.some(r=>qd(t,e,r))}function qd(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function qF(t,e,n){return e.length===0&&!t.children[n]}var GF=class{};async function WF(t,e,n,r,i,o,s="emptyOnly",a){return new QF(t,e,n,r,i,s,o,a).recognize()}var KF=31,QF=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;abortSignal;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,n,r,i,o,s,a,u){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.abortSignal=u,this.applyRedirects=new LF(this.urlSerializer,this.urlTree)}noMatchError(e){return new z(4002,`'${e.segmentGroup}'`)}async recognize(){let e=hT(this.urlTree.root,[],[],this.config).segmentGroup,{children:n,rootSnapshot:r}=await this.match(e),i=new qt(r,n),o=new fc("",i),s=ST(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}async match(e){let n=new Zi([],Object.freeze({}),Object.freeze(M({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),oe,this.rootComponentType,null,{});try{return{children:await this.processSegmentGroup(this.injector,this.config,e,oe,n),rootSnapshot:n}}catch(r){if(r instanceof gy)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Yi?this.noMatchError(r):r}}async processSegmentGroup(e,n,r,i,o){if(r.segments.length===0&&r.hasChildren())return this.processChildren(e,n,r,o);let s=await this.processSegment(e,n,r,r.segments,i,!0,o);return s instanceof qt?[s]:[]}async processChildren(e,n,r,i){let o=[];for(let u of Object.keys(r.children))u==="primary"?o.unshift(u):o.push(u);let s=[];for(let u of o){let l=r.children[u],h=aF(n,u),p=await this.processSegmentGroup(e,h,l,u,i);s.push(...p)}let a=GT(s);return YF(a),a}async processSegment(e,n,r,i,o,s,a){for(let u of n)try{return await this.processSegmentAgainstRoute(u._injector??e,n,u,r,i,o,s,a)}catch(l){if(l instanceof Yi||jT(l))continue;throw l}if(qF(r,i,o))return new GF;throw new Yi(r)}async processSegmentAgainstRoute(e,n,r,i,o,s,a,u){if(wn(r)!==s&&(s===oe||!qd(i,o,r)))throw new Yi(i);if(r.redirectTo===void 0)return this.matchSegmentAgainstRoute(e,i,r,o,s,u);if(this.allowRedirects&&a)return this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s,u);throw new Yi(i)}async expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s,a){let{matched:u,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:g}=qT(n,i,o);if(!u)throw new Yi(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>KF&&(this.allowRedirects=!1));let y=new Zi(o,l,Object.freeze(M({},this.urlTree.queryParams)),this.urlTree.fragment,fT(i),wn(i),i.component??i._loadedComponent??null,i,pT(i)),T=Bd(y,a,this.paramsInheritanceStrategy);if(y.params=Object.freeze(T.params),y.data=Object.freeze(T.data),this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let R=await this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,y,e),A=await this.applyRedirects.lineralizeSegments(i,R);return this.processSegment(e,r,n,A.concat(g),s,!1,a)}async matchSegmentAgainstRoute(e,n,r,i,o,s){if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let a=await bd(jF(n,r,i,e,this.urlSerializer,this.abortSignal));if(r.path==="**"&&(n.children={}),!a?.matched)throw new Yi(n);e=r._injector??e;let{routes:u}=await this.getChildConfig(e,r,i),l=r._loadedInjector??e,{parameters:h,consumedSegments:p,remainingSegments:g}=a,y=new Zi(p,h,Object.freeze(M({},this.urlTree.queryParams)),this.urlTree.fragment,fT(r),wn(r),r.component??r._loadedComponent??null,r,pT(r)),T=Bd(y,s,this.paramsInheritanceStrategy);y.params=Object.freeze(T.params),y.data=Object.freeze(T.data);let{segmentGroup:R,slicedSegments:A}=hT(n,p,g,u);if(A.length===0&&R.hasChildren()){let le=await this.processChildren(l,u,R,y);return new qt(y,le)}if(u.length===0&&A.length===0)return new qt(y,[]);let F=wn(r)===o,ee=await this.processSegment(l,u,R,A,F?oe:o,!0,y);return new qt(y,ee instanceof qt?[ee]:[])}async getChildConfig(e,n,r){if(n.children)return{routes:n.children,injector:e};if(n.loadChildren){if(n._loadedRoutes!==void 0)return{routes:n._loadedRoutes,injector:n._loadedInjector};if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);if(await bd(PF(e,n,r,this.urlSerializer,this.abortSignal))){let o=await this.configLoader.loadChildren(e,n);return n._loadedRoutes=o.routes,n._loadedInjector=o.injector,o}throw FF(n)}return{routes:[],injector:e}}};function YF(t){t.sort((e,n)=>e.value.outlet===oe?-1:n.value.outlet===oe?1:e.value.outlet.localeCompare(n.value.outlet))}function JF(t){let e=t.value.routeConfig;return e&&e.path===""}function GT(t){let e=[],n=new Set;for(let r of t){if(!JF(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=GT(r.children);e.push(new qt(r.value,i))}return e.filter(r=>!n.has(r))}function fT(t){return t.data||{}}function pT(t){return t.resolve||{}}var ZF=new q("",{factory:()=>WF});function XF(t,e,n,r,i,o,s){let a=t.get(ZF);return Dt(u=>ge(u).pipe(Rn(l=>a(t,e,n,r,l.extractedUrl,i,o,s)),Ae(({state:l,tree:h})=>J(M({},u),{targetSnapshot:l,urlAfterRedirects:h}))))}function eL(t,e){return Dt(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return ge(n);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of WT(u))s.add(l);let a=0;return Ve(s).pipe(nl(u=>o.has(u)?tL(u,r,t,e):(u.data=Bd(u,u.parent,t).resolve,ge(void 0))),bt(()=>a++),rl(1),Dt(u=>a===s.size?ge(n):Nt))})}function WT(t){let e=t.children.map(n=>WT(n)).flat();return[t,...e]}function tL(t,e,n,r){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!OT(i)&&(o[mc]=i.title),fa(()=>(t.data=Bd(t,t.parent,n).resolve,nL(o,t,e,r).pipe(Ae(s=>(t._resolvedData=s,t.data=M(M({},t.data),s),null)))))}function nL(t,e,n,r){let i=ay(t);if(i.length===0)return ge({});let o={};return Ve(i).pipe(Dt(s=>rL(t[s],e,n,r).pipe(Zn(),bt(a=>{if(a instanceof ss)throw Ud(new Qr,a);o[s]=a}))),rl(1),Ae(()=>o),pa(s=>jT(s)?Nt:Dp(s)))}function rL(t,e,n,r){let i=cs(e)??r,o=ls(t,i),s=o.resolve?o.resolve(e,n):St(i,()=>o(e,n));return to(s)}function oy(t){return Rn(e=>{let n=t(e);return n?Ve(n).pipe(Ae(()=>e)):ge(e)})}var Iy=(()=>{class t{buildTitle(n){let r,i=n.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===oe);return r}getResolvedTitleForRoute(n){return n.data[mc]}static \u0275fac=function(r){return new(r||t)};static \u0275prov=K({token:t,factory:()=>P(KT),providedIn:"root"})}return t})(),KT=(()=>{class t extends Iy{title;constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||t)(ue(sT))};static \u0275prov=K({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),_c=new q("",{factory:()=>({})}),Ec=new q(""),QT=(()=>{class t{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=P(Bg);async loadComponent(n,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return Promise.resolve(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=(async()=>{try{let o=await vT(St(n,()=>r.loadComponent())),s=await ZT(JT(o));return this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s,s}finally{this.componentLoaders.delete(r)}})();return this.componentLoaders.set(r,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Promise.resolve({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let i=(async()=>{try{let o=await YT(r,this.compiler,n,this.onLoadEndListener);return r._loadedRoutes=o.routes,r._loadedInjector=o.injector,o}finally{this.childrenLoaders.delete(r)}})();return this.childrenLoaders.set(r,i),i}static \u0275fac=function(r){return new(r||t)};static \u0275prov=K({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();async function YT(t,e,n,r){let i=await vT(St(n,()=>t.loadChildren())),o=await ZT(JT(i)),s;o instanceof rd||Array.isArray(o)?s=o:s=await e.compileModuleAsync(o),r&&r(t);let a,u,l=!1;return Array.isArray(s)?(u=s,l=!0):(a=s.create(n).injector,u=a.get(Ec,[],{optional:!0,self:!0}).flat()),{routes:u.map(Ey),injector:a}}function iL(t){return t&&typeof t=="object"&&"default"in t}function JT(t){return iL(t)?t.default:t}async function ZT(t){return t}var Gd=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=K({token:t,factory:()=>P(oL),providedIn:"root"})}return t})(),oL=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static \u0275fac=function(r){return new(r||t)};static \u0275prov=K({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),XT=new q("");var sL=()=>{},e0=new q(""),t0=(()=>{class t{currentNavigation=$t(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=$t(null);events=new rt;transitionAbortWithErrorSubject=new rt;configLoader=P(QT);environmentInjector=P(ft);destroyRef=P(nn);urlSerializer=P(gc);rootContexts=P(us);location=P(Xo);inputBindingEnabled=P(zd,{optional:!0})!==null;titleStrategy=P(Iy);options=P(_c,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=P(Gd);createViewTransition=P(XT,{optional:!0});navigationErrorHandler=P(e0,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>ge(void 0);rootComponentType=null;destroyed=!1;constructor(){let n=i=>this.events.next(new xd(i)),r=i=>this.events.next(new Pd(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;je(()=>{this.transitions?.next(J(M({},n),{extractedUrl:this.urlHandlingStrategy.extract(n.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r}))})}setupNavigations(n){return this.transitions=new We(null),this.transitions.pipe(An(r=>r!==null),Rn(r=>{let i=!1,o=new AbortController;return ge(r).pipe(Rn(s=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",At.SupersededByNewNavigation),Nt;this.currentTransition=r;let a=this.lastSuccessfulNavigation();this.currentNavigation.set({id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,targetBrowserUrl:typeof s.extras.browserUrl=="string"?this.urlSerializer.parse(s.extras.browserUrl):s.extras.browserUrl,trigger:s.source,extras:s.extras,previousNavigation:a?J(M({},a),{previousNavigation:null}):null,abort:()=>o.abort()});let u=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),l=s.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!u&&l!=="reload")return this.events.next(new cr(s.id,this.urlSerializer.serialize(s.rawUrl),"",uc.IgnoredSameUrlNavigation)),s.resolve(!1),Nt;if(this.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return ge(s).pipe(Rn(h=>(this.events.next(new eo(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),h.id!==this.navigationId?Nt:Promise.resolve(h))),XF(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy,o.signal),bt(h=>{r.targetSnapshot=h.targetSnapshot,r.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation.update(g=>(g.finalUrl=h.urlAfterRedirects,g));let p=new lc(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(p)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(s.currentRawUrl)){let{id:h,extractedUrl:p,source:g,restoredState:y,extras:T}=s,R=new eo(h,this.urlSerializer.serialize(p),g,y);this.events.next(R);let A=xT(this.rootComponentType).snapshot;return this.currentTransition=r=J(M({},s),{targetSnapshot:A,urlAfterRedirects:p,extras:J(M({},T),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(F=>(F.finalUrl=p,F)),ge(r)}else return this.events.next(new cr(s.id,this.urlSerializer.serialize(s.extractedUrl),"",uc.IgnoredByUrlHandlingStrategy)),s.resolve(!1),Nt}),bt(s=>{let a=new Ad(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),Ae(s=>(this.currentTransition=r=J(M({},s),{guards:pF(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),r)),bF(this.environmentInjector,s=>this.events.next(s)),bt(s=>{if(r.guardsResult=s.guardsResult,s.guardsResult&&typeof s.guardsResult!="boolean")throw Ud(this.urlSerializer,s.guardsResult);let a=new Rd(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(a)}),An(s=>s.guardsResult?!0:(this.cancelNavigationTransition(s,"",At.GuardRejected),!1)),oy(s=>{if(s.guards.canActivateChecks.length!==0)return ge(s).pipe(bt(a=>{let u=new Md(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(u)}),Rn(a=>{let u=!1;return ge(a).pipe(eL(this.paramsInheritanceStrategy,this.environmentInjector),bt({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(a,"",At.NoDataFromResolver)}}))}),bt(a=>{let u=new Nd(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(u)}))}),oy(s=>{let a=l=>{let h=[];if(l.routeConfig?._loadedComponent)l.component=l.routeConfig?._loadedComponent;else if(l.routeConfig?.loadComponent){let p=cs(l)??this.environmentInjector;h.push(this.configLoader.loadComponent(p,l.routeConfig).then(g=>{l.component=g}))}for(let p of l.children)h.push(...a(p));return h},u=a(s.targetSnapshot.root);return u.length===0?ge(s):Ve(Promise.all(u).then(()=>s))}),oy(()=>this.afterPreactivation()),Rn(()=>{let{currentSnapshot:s,targetSnapshot:a}=r,u=this.createViewTransition?.(this.environmentInjector,s.root,a.root);return u?Ve(u).pipe(Ae(()=>r)):ge(r)}),Ae(s=>{let a=uF(n.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return this.currentTransition=r=J(M({},s),{targetRouterState:a}),this.currentNavigation.update(u=>(u.targetRouterState=a,u)),r}),bt(()=>{this.events.next(new dc)}),fF(this.rootContexts,n.routeReuseStrategy,s=>this.events.next(s),this.inputBindingEnabled),Jn(1),Di(BT(o.signal).pipe(An(()=>!i&&!r.targetRouterState),bt(()=>{this.cancelNavigationTransition(r,o.signal.reason+"",At.Aborted)}))),bt({next:s=>{i=!0,this.currentNavigation.update(a=>(a.abort=sL,a)),this.lastSuccessfulNavigation.set(je(this.currentNavigation)),this.events.next(new ar(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects))),this.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{i=!0}}),Di(this.transitionAbortWithErrorSubject.pipe(bt(s=>{throw s}))),Ap(()=>{o.abort(),i||this.cancelNavigationTransition(r,"",At.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),pa(s=>{if(this.destroyed)return r.resolve(!1),Nt;if(i=!0,VT(s))this.events.next(new Un(r.id,this.urlSerializer.serialize(r.extractedUrl),s.message,s.cancellationCode)),hF(s)?this.events.next(new os(s.url,s.navigationBehaviorOptions)):r.resolve(!1);else{let a=new is(r.id,this.urlSerializer.serialize(r.extractedUrl),s,r.targetSnapshot??void 0);try{let u=St(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(u instanceof ss){let{message:l,cancellationCode:h}=Ud(this.urlSerializer,u);this.events.next(new Un(r.id,this.urlSerializer.serialize(r.extractedUrl),l,h)),this.events.next(new os(u.redirectTo,u.navigationBehaviorOptions))}else throw this.events.next(a),s}catch(u){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(u)}}return Nt}))}))}cancelNavigationTransition(n,r,i){let o=new Un(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(o),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=je(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return n.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||t)};static \u0275prov=K({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function aL(t){return t!==sc}var n0=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=K({token:t,factory:()=>P(cL),providedIn:"root"})}return t})(),Hd=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},cL=(()=>{class t extends Hd{static \u0275fac=(()=>{let n;return function(i){return(n||(n=Ko(t)))(i||t)}})();static \u0275prov=K({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),wy=(()=>{class t{urlSerializer=P(gc);options=P(_c,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=P(Xo);urlHandlingStrategy=P(Gd);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Cn;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:n,initialUrl:r,targetBrowserUrl:i}){let o=n!==void 0?this.urlHandlingStrategy.merge(n,r):r,s=i??o;return s instanceof Cn?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:n,finalUrl:r,initialUrl:i}){r&&n?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=n):this.rawUrlTree=i}routerState=xT(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:n}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n??this.rawUrlTree)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=K({token:t,factory:()=>P(r0),providedIn:"root"})}return t})(),r0=(()=>{class t extends wy{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{n(r.url,r.state,"popstate")})})}handleRouterEvent(n,r){n instanceof eo?this.updateStateMemento():n instanceof cr?this.commitTransition(r):n instanceof lc?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof dc?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof Un&&n.code!==At.SupersededByNewNavigation&&n.code!==At.Redirect?this.restoreHistory(r):n instanceof is?this.restoreHistory(r,!0):n instanceof ar&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(n)||o){let a=this.browserPageId,u=M(M({},s),this.generateNgRouterState(i,a));this.location.replaceState(n,"",u)}else{let a=M(M({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(n,"",a)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===n.finalUrl&&o===0&&(this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static \u0275fac=(()=>{let n;return function(i){return(n||(n=Ko(t)))(i||t)}})();static \u0275prov=K({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Cy(t,e){t.events.pipe(An(n=>n instanceof ar||n instanceof Un||n instanceof is||n instanceof cr),Ae(n=>n instanceof ar||n instanceof cr?0:(n instanceof Un?n.code===At.Redirect||n.code===At.SupersededByNewNavigation:!1)?2:1),An(n=>n!==2),Jn(1)).subscribe(()=>{e()})}var uL={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},lL={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},an=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=P(kg);stateManager=P(wy);options=P(_c,{optional:!0})||{};pendingTasks=P(Br);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=P(t0);urlSerializer=P(gc);location=P(Xo);urlHandlingStrategy=P(Gd);injector=P(ft);_events=new rt;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=P(n0);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=P(Ec,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!P(zd,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}eventsSubscription=new dt;subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=je(this.navigationTransitions.currentNavigation);if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Un&&r.code!==At.Redirect&&r.code!==At.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof ar)this.navigated=!0;else if(r instanceof os){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=M({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||aL(i.source)},s);this.scheduleNavigation(a,sc,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}oF(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),sc,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r,i)=>{this.navigateToSyncWithBrowser(n,i,r)})}navigateToSyncWithBrowser(n,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=M({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let a=this.parseUrl(n);this.scheduleNavigation(a,r,s,o).catch(u=>{this.disposed||this.injector.get(rn)(u)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return je(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(Ey),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=M(M({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let g=i?i.snapshot:this.routerState.snapshot.root;p=AT(g)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),p=this.currentUrlTree.root}return RT(p,n,h,l??null,this.urlSerializer)}navigateByUrl(n,r={skipLocationChange:!1}){let i=rs(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,sc,null,r)}navigate(n,r={skipLocationChange:!1}){return dL(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.console.warn(Oo(4018,!1)),this.urlSerializer.parse("/")}}isActive(n,r){let i;if(r===!0?i=M({},uL):r===!1?i=M({},lL):i=r,rs(n))return aT(this.currentUrlTree,n,i);let o=this.parseUrl(n);return aT(this.currentUrlTree,o,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(n,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,l;s?(a=s.resolve,u=s.reject,l=s.promise):l=new Promise((p,g)=>{a=p,u=g});let h=this.pendingTasks.add();return Cy(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:o,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=K({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function dL(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new z(4008,!1)}var fL=new q("");function Dy(t,...e){return xi([{provide:Ec,multi:!0,useValue:t},[],{provide:$n,useFactory:pL},{provide:od,multi:!0,useFactory:mL},e.map(n=>n.\u0275providers)])}function pL(){return P(an).routerState.root}function mL(){let t=P(Jt);return e=>{let n=t.get(Ki);if(e!==n.components[0])return;let r=t.get(an),i=t.get(gL);t.get(yL)===1&&r.initialNavigation(),t.get(vL,null,{optional:!0})?.setUpPreloading(),t.get(fL,null,{optional:!0})?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var gL=new q("",{factory:()=>new rt}),yL=new q("",{factory:()=>1});var vL=new q("");var d0=(()=>{class t{_renderer;_elementRef;onChange=n=>{};onTouched=()=>{};constructor(n,r){this._renderer=n,this._elementRef=r}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static \u0275fac=function(r){return new(r||t)(Be(qa),Be(Qo))};static \u0275dir=Vn({type:t})}return t})(),EL=(()=>{class t extends d0{static \u0275fac=(()=>{let n;return function(i){return(n||(n=Ko(t)))(i||t)}})();static \u0275dir=Vn({type:t,features:[Wi]})}return t})(),h0=new q("");var IL={provide:h0,useExisting:Ri(()=>Jd),multi:!0};function wL(){let t=sn()?sn().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var CL=new q(""),Jd=(()=>{class t extends d0{_compositionMode;_composing=!1;constructor(n,r,i){super(n,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!wL())}writeValue(n){let r=n??"";this.setProperty("value",r)}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static \u0275fac=function(r){return new(r||t)(Be(qa),Be(Qo),Be(CL,8))};static \u0275dir=Vn({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&vt("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[cd([IL]),Wi]})}return t})();var DL=new q(""),bL=new q("");function f0(t){return t!=null}function p0(t){return or(t)?Ve(t):t}function m0(t){let e={};return t.forEach(n=>{e=n!=null?M(M({},e),n):e}),Object.keys(e).length===0?null:e}function g0(t,e){return e.map(n=>n(t))}function TL(t){return!t.validate}function y0(t){return t.map(e=>TL(e)?e:n=>e.validate(n))}function SL(t){if(!t)return null;let e=t.filter(f0);return e.length==0?null:function(n){return m0(g0(n,e))}}function v0(t){return t!=null?SL(y0(t)):null}function AL(t){if(!t)return null;let e=t.filter(f0);return e.length==0?null:function(n){let r=g0(n,e).map(p0);return Tp(r).pipe(Ae(m0))}}function _0(t){return t!=null?AL(y0(t)):null}function i0(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function RL(t){return t._rawValidators}function ML(t){return t._rawAsyncValidators}function by(t){return t?Array.isArray(t)?t:[t]:[]}function Kd(t,e){return Array.isArray(t)?t.includes(e):t===e}function o0(t,e){let n=by(e);return by(t).forEach(i=>{Kd(n,i)||n.push(i)}),n}function s0(t,e){return by(e).filter(n=>!Kd(t,n))}var Qd=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=v0(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=_0(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},Ty=class extends Qd{name;get formDirective(){return null}get path(){return null}},bc=class extends Qd{_parent=null;name=null;valueAccessor=null},Sy=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}};var E0=(()=>{class t extends Sy{constructor(n){super(n)}static \u0275fac=function(r){return new(r||t)(Be(bc,2))};static \u0275dir=Vn({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&In("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[Wi]})}return t})();var Ic="VALID",Wd="INVALID",ds="PENDING",wc="DISABLED",no=class{},Yd=class extends no{value;source;constructor(e,n){super(),this.value=e,this.source=n}},Cc=class extends no{pristine;source;constructor(e,n){super(),this.pristine=e,this.source=n}},Dc=class extends no{touched;source;constructor(e,n){super(),this.touched=e,this.source=n}},hs=class extends no{status;source;constructor(e,n){super(),this.status=e,this.source=n}};var Ay=class extends no{source;constructor(e){super(),this.source=e}};function NL(t){return(Zd(t)?t.validators:t)||null}function xL(t){return Array.isArray(t)?v0(t):t||null}function PL(t,e){return(Zd(e)?e.asyncValidators:t)||null}function OL(t){return Array.isArray(t)?_0(t):t||null}function Zd(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}var Ry=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,n){this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return je(this.statusReactive)}set status(e){je(()=>this.statusReactive.set(e))}_status=Qa(()=>this.statusReactive());statusReactive=$t(void 0);get valid(){return this.status===Ic}get invalid(){return this.status===Wd}get pending(){return this.status==ds}get disabled(){return this.status===wc}get enabled(){return this.status!==wc}errors;get pristine(){return je(this.pristineReactive)}set pristine(e){je(()=>this.pristineReactive.set(e))}_pristine=Qa(()=>this.pristineReactive());pristineReactive=$t(!0);get dirty(){return!this.pristine}get touched(){return je(this.touchedReactive)}set touched(e){je(()=>this.touchedReactive.set(e))}_touched=Qa(()=>this.touchedReactive());touchedReactive=$t(!1);get untouched(){return!this.touched}_events=new rt;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(o0(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(o0(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(s0(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(s0(e,this._rawAsyncValidators))}hasValidator(e){return Kd(this._rawValidators,e)}hasAsyncValidator(e){return Kd(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let n=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(J(M({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new Dc(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(e))}markAsUntouched(e={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),n&&e.emitEvent!==!1&&this._events.next(new Dc(!1,r))}markAsDirty(e={}){let n=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(J(M({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new Cc(!1,r))}markAsPristine(e={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),n&&e.emitEvent!==!1&&this._events.next(new Cc(!0,r))}markAsPending(e={}){this.status=ds;let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new hs(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(J(M({},e),{sourceControl:n}))}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=wc,this.errors=null,this._forEachChild(i=>{i.disable(J(M({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Yd(this.value,r)),this._events.next(new hs(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(J(M({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Ic,this._forEachChild(r=>{r.enable(J(M({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(J(M({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,n){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ic||this.status===ds)&&this._runAsyncValidator(r,e.emitEvent)}let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Yd(this.value,n)),this._events.next(new hs(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(J(M({},e),{sourceControl:n}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?wc:Ic}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,n){if(this.asyncValidator){this.status=ds,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1,shouldHaveEmitted:e!==!1};let r=p0(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:n,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,n,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new hs(this.status,n)),this._parent&&this._parent._updateControlsErrors(e,n,r)}_initObservables(){this.valueChanges=new Ke,this.statusChanges=new Ke}_calculateStatus(){return this._allControlsDisabled()?wc:this.errors?Wd:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ds)?ds:this._anyControlsHaveStatus(Wd)?Wd:Ic}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,n){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,n),i&&this._events.next(new Cc(this.pristine,n))}_updateTouched(e={},n){this.touched=this._anyControlsTouched(),this._events.next(new Dc(this.touched,n)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,n)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Zd(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=xL(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=OL(this._rawAsyncValidators)}};var I0=new q("",{factory:()=>My}),My="always";function kL(t,e){return[...e.path,t]}function FL(t,e,n=My){VL(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),jL(t,e),UL(t,e),BL(t,e),LL(t,e)}function a0(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function LL(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function VL(t,e){let n=RL(t);e.validator!==null?t.setValidators(i0(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=ML(t);e.asyncValidator!==null?t.setAsyncValidators(i0(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();a0(e._rawValidators,i),a0(e._rawAsyncValidators,i)}function jL(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&w0(t,e)})}function BL(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&w0(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function w0(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function UL(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function $L(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function HL(t){return Object.getPrototypeOf(t.constructor)===EL}function zL(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(o=>{o.constructor===Jd?n=o:HL(o)?r=o:i=o}),i||r||n||null}function c0(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function u0(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var qL=class extends Ry{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,n,r){super(NL(n),PL(r,n)),this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Zd(n)&&(n.nonNullable||n.initialValueIsDefault)&&(u0(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),n.overwriteDefaultValue&&(this.defaultValue=this.value),this._pendingChange=!1,n?.emitEvent!==!1&&this._events.next(new Ay(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){c0(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){c0(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){u0(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var GL={provide:bc,useExisting:Ri(()=>Ny)},l0=Promise.resolve(),Ny=(()=>{class t extends bc{_changeDetectorRef;callSetDisabledState;control=new qL;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new Ke;constructor(n,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=zL(this,o)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){let r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),$L(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){FL(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(n){l0.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){let r=n.isDisabled.currentValue,i=r!==0&&$g(r);l0.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?kL(n,this._parent):[n]}static \u0275fac=function(r){return new(r||t)(Be(Ty,9),Be(DL,10),Be(bL,10),Be(h0,10),Be(Zo,8),Be(I0,8))};static \u0275dir=Vn({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[cd([GL]),Wi,Wo]})}return t})();var WL=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=Ur({type:t});static \u0275inj=nr({})}return t})();var C0=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:I0,useValue:n.callSetDisabledState??My}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=Ur({type:t});static \u0275inj=nr({imports:[WL]})}return t})();var D0=()=>{};var S0=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},QL=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=t[n++],s=t[n++],a=t[n++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},A0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,h=o>>2,p=(o&3)<<4|a>>4,g=(a&15)<<2|l>>6,y=l&63;u||(y=64,s||(g=64)),r.push(n[h],n[p],n[g],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(S0(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):QL(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let p=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||a==null||l==null||p==null)throw new Py;let g=o<<2|a>>4;if(r.push(g),l!==64){let y=a<<4&240|l>>2;if(r.push(y),p!==64){let T=l<<6&192|p;r.push(T)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},Py=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},YL=function(t){let e=S0(t);return A0.encodeByteArray(e,!0)},Sc=function(t){return YL(t).replace(/\./g,"")},eh=function(t){try{return A0.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function R0(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var JL=()=>R0().__FIREBASE_DEFAULTS__,ZL=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},XL=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&eh(t[1]);return e&&JSON.parse(e)},th=()=>{try{return D0()||JL()||ZL()||XL()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},ky=t=>th()?.emulatorHosts?.[t],M0=t=>{let e=ky(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Fy=()=>th()?.config,Ly=t=>th()?.[`_${t}`];var Xd=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function Yr(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function nh(t){return(await fetch(t,{credentials:"include"})).ok}function N0(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=M({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Sc(JSON.stringify(n)),Sc(JSON.stringify(s)),""].join(".")}var Tc={};function eV(){let t={prod:[],emulator:[]};for(let e of Object.keys(Tc))Tc[e]?t.emulator.push(e):t.prod.push(e);return t}function tV(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}var b0=!1;function rh(t,e){if(typeof window>"u"||typeof document>"u"||!Yr(window.location.host)||Tc[t]===e||Tc[t]||b0)return;Tc[t]=e;function n(g){return`__firebase__banner__${g}`}let r="__firebase__banner",o=eV().prod.length>0;function s(){let g=document.getElementById(r);g&&g.remove()}function a(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function u(g,y){g.setAttribute("width","24"),g.setAttribute("id",y),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function l(){let g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{b0=!0,s()},g}function h(g,y){g.setAttribute("id",y),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){let g=tV(r),y=n("text"),T=document.getElementById(y)||document.createElement("span"),R=n("learnmore"),A=document.getElementById(R)||document.createElement("a"),F=n("preprendIcon"),ee=document.getElementById(F)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){let le=g.element;a(le),h(A,R);let lt=l();u(ee,F),le.append(ee,T,A,lt),document.body.appendChild(le)}o?(T.innerText="Preview backend disconnected.",ee.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ee.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,T.innerText="Preview backend running in this workspace."),T.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function at(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function x0(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(at())}function nV(){let t=th()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function P0(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function O0(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function k0(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function F0(){let t=at();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function L0(){return!nV()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Vy(){try{return typeof indexedDB=="object"}catch{return!1}}function V0(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(n){e(n)}})}var rV="FirebaseError",Wt=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=rV,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ur.prototype.create)}},ur=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?iV(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new Wt(i,a,r)}};function iV(t,e){return t.replace(oV,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var oV=/\{\$([^}]+)}/g;function j0(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Hn(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let o=t[i],s=e[i];if(T0(o)&&T0(s)){if(!Hn(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function T0(t){return t!==null&&typeof t=="object"}function Ac(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function B0(t,e){let n=new Oy(t,e);return n.subscribe.bind(n)}var Oy=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");sV(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=xy),i.error===void 0&&(i.error=xy),i.complete===void 0&&(i.complete=xy);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function sV(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function xy(){}var jX=14400*1e3;function Ue(t){return t&&t._delegate?t._delegate:t}var cn=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var ro="[DEFAULT]";var jy=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new Xd;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){let n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(cV(e))try{this.getOrInitializeService({instanceIdentifier:ro})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=ro){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ro){return this.instances.has(e)}getOptions(e=ro){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,n){let r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);let o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:aV(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ro){return this.component?this.component.multipleInstances?e:ro:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function aV(t){return t===ro?void 0:t}function cV(t){return t.instantiationMode==="EAGER"}var ih=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new jy(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var uV=[],fe=(function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t})(fe||{}),lV={debug:fe.DEBUG,verbose:fe.VERBOSE,info:fe.INFO,warn:fe.WARN,error:fe.ERROR,silent:fe.SILENT},dV=fe.INFO,hV={[fe.DEBUG]:"log",[fe.VERBOSE]:"log",[fe.INFO]:"info",[fe.WARN]:"warn",[fe.ERROR]:"error"},fV=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=hV[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Jr=class{constructor(e){this.name=e,this._logLevel=dV,this._logHandler=fV,this._userLogHandler=null,uV.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in fe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?lV[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,fe.DEBUG,...e),this._logHandler(this,fe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,fe.VERBOSE,...e),this._logHandler(this,fe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,fe.INFO,...e),this._logHandler(this,fe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,fe.WARN,...e),this._logHandler(this,fe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,fe.ERROR,...e),this._logHandler(this,fe.ERROR,...e)}};var pV=(t,e)=>e.some(n=>t instanceof n),U0,$0;function mV(){return U0||(U0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function gV(){return $0||($0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var H0=new WeakMap,Uy=new WeakMap,z0=new WeakMap,By=new WeakMap,Hy=new WeakMap;function yV(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(zn(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&H0.set(n,t)}).catch(()=>{}),Hy.set(e,t),e}function vV(t){if(Uy.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});Uy.set(t,e)}var $y={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Uy.get(t);if(e==="objectStoreNames")return t.objectStoreNames||z0.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return zn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function q0(t){$y=t($y)}function _V(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(oh(this),e,...n);return z0.set(r,e.sort?e.sort():[e]),zn(r)}:gV().includes(t)?function(...e){return t.apply(oh(this),e),zn(H0.get(this))}:function(...e){return zn(t.apply(oh(this),e))}}function EV(t){return typeof t=="function"?_V(t):(t instanceof IDBTransaction&&vV(t),pV(t,mV())?new Proxy(t,$y):t)}function zn(t){if(t instanceof IDBRequest)return yV(t);if(By.has(t))return By.get(t);let e=EV(t);return e!==t&&(By.set(t,e),Hy.set(e,t)),e}var oh=t=>Hy.get(t);function W0(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(t,e),a=zn(s);return r&&s.addEventListener("upgradeneeded",u=>{r(zn(s.result),u.oldVersion,u.newVersion,zn(s.transaction),u)}),n&&s.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var IV=["get","getKey","getAll","getAllKeys","count"],wV=["put","add","delete","clear"],zy=new Map;function G0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(zy.get(e))return zy.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=wV.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||IV.includes(n)))return;let o=async function(s,...a){let u=this.transaction(s,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),i&&u.done]))[0]};return zy.set(e,o),o}q0(t=>J(M({},t),{get:(e,n,r)=>G0(e,n)||t.get(e,n,r),has:(e,n)=>!!G0(e,n)||t.has(e,n)}));var Gy=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(CV(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function CV(t){return t.getComponent()?.type==="VERSION"}var Wy="@firebase/app",K0="0.14.6";var lr=new Jr("@firebase/app"),DV="@firebase/app-compat",bV="@firebase/analytics-compat",TV="@firebase/analytics",SV="@firebase/app-check-compat",AV="@firebase/app-check",RV="@firebase/auth",MV="@firebase/auth-compat",NV="@firebase/database",xV="@firebase/data-connect",PV="@firebase/database-compat",OV="@firebase/functions",kV="@firebase/functions-compat",FV="@firebase/installations",LV="@firebase/installations-compat",VV="@firebase/messaging",jV="@firebase/messaging-compat",BV="@firebase/performance",UV="@firebase/performance-compat",$V="@firebase/remote-config",HV="@firebase/remote-config-compat",zV="@firebase/storage",qV="@firebase/storage-compat",GV="@firebase/firestore",WV="@firebase/ai",KV="@firebase/firestore-compat",QV="firebase",YV="12.6.0";var Ky="[DEFAULT]",JV={[Wy]:"fire-core",[DV]:"fire-core-compat",[TV]:"fire-analytics",[bV]:"fire-analytics-compat",[AV]:"fire-app-check",[SV]:"fire-app-check-compat",[RV]:"fire-auth",[MV]:"fire-auth-compat",[NV]:"fire-rtdb",[xV]:"fire-data-connect",[PV]:"fire-rtdb-compat",[OV]:"fire-fn",[kV]:"fire-fn-compat",[FV]:"fire-iid",[LV]:"fire-iid-compat",[VV]:"fire-fcm",[jV]:"fire-fcm-compat",[BV]:"fire-perf",[UV]:"fire-perf-compat",[$V]:"fire-rc",[HV]:"fire-rc-compat",[zV]:"fire-gcs",[qV]:"fire-gcs-compat",[GV]:"fire-fst",[KV]:"fire-fst-compat",[WV]:"fire-vertex","fire-js":"fire-js",[QV]:"fire-js-all"};var sh=new Map,ZV=new Map,Qy=new Map;function Q0(t,e){try{t.container.addComponent(e)}catch(n){lr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Xr(t){let e=t.name;if(Qy.has(e))return lr.debug(`There were multiple attempts to register component ${e}.`),!1;Qy.set(e,t);for(let n of sh.values())Q0(n,t);for(let n of ZV.values())Q0(n,t);return!0}function Mc(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function kt(t){return t==null?!1:t.settings!==void 0}var XV={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Zr=new ur("app","Firebase",XV);var Yy=class{constructor(e,n,r){this._isDeleted=!1,this._options=M({},e),this._config=M({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new cn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Zr.create("app-deleted",{appName:this._name})}};var ei=YV;function Xy(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=M({name:Ky,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw Zr.create("bad-app-name",{appName:String(i)});if(n||(n=Fy()),!n)throw Zr.create("no-options");let o=sh.get(i);if(o){if(Hn(n,o.options)&&Hn(r,o.config))return o;throw Zr.create("duplicate-app",{appName:i})}let s=new ih(i);for(let u of Qy.values())s.addComponent(u);let a=new Yy(n,r,s);return sh.set(i,a),a}function ah(t=Ky){let e=sh.get(t);if(!e&&t===Ky&&Fy())return Xy();if(!e)throw Zr.create("no-app",{appName:t});return e}function Dn(t,e,n){let r=JV[t]??t;n&&(r+=`-${n}`);let i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){let s=[`Unable to register library "${r}" with version "${e}":`];i&&s.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&s.push("and"),o&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),lr.warn(s.join(" "));return}Xr(new cn(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var e2="firebase-heartbeat-database",t2=1,Rc="firebase-heartbeat-store",qy=null;function X0(){return qy||(qy=W0(e2,t2,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Rc)}catch(n){console.warn(n)}}}}).catch(t=>{throw Zr.create("idb-open",{originalErrorMessage:t.message})})),qy}async function n2(t){try{let n=(await X0()).transaction(Rc),r=await n.objectStore(Rc).get(eS(t));return await n.done,r}catch(e){if(e instanceof Wt)lr.warn(e.message);else{let n=Zr.create("idb-get",{originalErrorMessage:e?.message});lr.warn(n.message)}}}async function Y0(t,e){try{let r=(await X0()).transaction(Rc,"readwrite");await r.objectStore(Rc).put(e,eS(t)),await r.done}catch(n){if(n instanceof Wt)lr.warn(n.message);else{let r=Zr.create("idb-set",{originalErrorMessage:n?.message});lr.warn(r.message)}}}function eS(t){return`${t.name}!${t.options.appId}`}var r2=1024,i2=30,Jy=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new Zy(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{let n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=J0();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>i2){let i=s2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){lr.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=J0(),{heartbeatsToSend:n,unsentEntries:r}=o2(this._heartbeatsCache.heartbeats),i=Sc(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return lr.warn(e),""}}};function J0(){return new Date().toISOString().substring(0,10)}function o2(t,e=r2){let n=[],r=t.slice();for(let i of t){let o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),Z0(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Z0(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var Zy=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Vy()?V0().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let n=await n2(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){let r=await this.read();return Y0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){let r=await this.read();return Y0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}};function Z0(t){return Sc(JSON.stringify({version:2,heartbeats:t})).length}function s2(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function a2(t){Xr(new cn("platform-logger",e=>new Gy(e),"PRIVATE")),Xr(new cn("heartbeat",e=>new Jy(e),"PRIVATE")),Dn(Wy,K0,t),Dn(Wy,K0,"esm2020"),Dn("fire-js","")}a2("");function mS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var gS=mS,yS=new ur("auth","Firebase",mS());var fh=new Jr("@firebase/auth");function c2(t,...e){fh.logLevel<=fe.WARN&&fh.warn(`Auth (${ei}): ${t}`,...e)}function uh(t,...e){fh.logLevel<=fe.ERROR&&fh.error(`Auth (${ei}): ${t}`,...e)}function ri(t,...e){throw _v(t,...e)}function io(t,...e){return _v(t,...e)}function vS(t,e,n){let r=J(M({},gS()),{[e]:n});return new ur("auth","Firebase",r).create(e,{appName:t.name})}function fr(t){return vS(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function _v(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return yS.create(t,...e)}function re(t,e,...n){if(!t)throw _v(e,...n)}function dr(t){let e="INTERNAL ASSERTION FAILED: "+t;throw uh(e),new Error(e)}function ii(t,e){t||dr(e)}function rv(){return typeof self<"u"&&self.location?.href||""}function u2(){return tS()==="http:"||tS()==="https:"}function tS(){return typeof self<"u"&&self.location?.protocol||null}function l2(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(u2()||O0()||"connection"in navigator)?navigator.onLine:!0}function d2(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var oo=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,ii(n>e,"Short delay should be less than long delay!"),this.isMobile=x0()||k0()}get(){return l2()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Ev(t,e){ii(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var ph=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;dr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;dr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;dr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var h2={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var f2=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],p2=new oo(3e4,6e4);function Fc(t,e){return t.tenantId&&!e.tenantId?J(M({},e),{tenantId:t.tenantId}):e}async function fs(t,e,n,r,i={}){return _S(t,i,async()=>{let o={},s={};r&&(e==="GET"?s=r:o={body:JSON.stringify(r)});let a=Ac(M({key:t.config.apiKey},s)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);let l=M({method:e,headers:u},o);return P0()||(l.referrerPolicy="no-referrer"),t.emulatorConfig&&Yr(t.emulatorConfig.host)&&(l.credentials="include"),ph.fetch()(await ES(t,t.config.apiHost,n,a),l)})}async function _S(t,e,n){t._canInitEmulator=!1;let r=M(M({},h2),e);try{let i=new iv(t),o=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();let s=await o.json();if("needConfirmation"in s)throw ch(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw ch(t,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw ch(t,"email-already-in-use",s);if(u==="USER_DISABLED")throw ch(t,"user-disabled",s);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw vS(t,h,l);ri(t,h)}}catch(i){if(i instanceof Wt)throw i;ri(t,"network-request-failed",{message:String(i)})}}async function Iv(t,e,n,r,i={}){let o=await fs(t,e,n,r,i);return"mfaPendingCredential"in o&&ri(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function ES(t,e,n,r){let i=`${e}${n}?${r}`,o=t,s=o.config.emulator?Ev(t.config,i):`${t.config.apiScheme}://${i}`;return f2.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s}var iv=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(io(this.auth,"network-request-failed")),p2.get())})}};function ch(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=io(t,e,r);return i.customData._tokenResponse=n,i}async function m2(t,e){return fs(t,"POST","/v1/accounts:delete",e)}async function mh(t,e){return fs(t,"POST","/v1/accounts:lookup",e)}function Nc(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function IS(t,e=!1){let n=Ue(t),r=await n.getIdToken(e),i=wv(r);re(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:Nc(ev(i.auth_time)),issuedAtTime:Nc(ev(i.iat)),expirationTime:Nc(ev(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}}function ev(t){return Number(t)*1e3}function wv(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return uh("JWT malformed, contained fewer than 3 sections"),null;try{let i=eh(n);return i?JSON.parse(i):(uh("Failed to decode base64 JWT payload"),null)}catch(i){return uh("Caught error parsing JWT payload as JSON",i?.toString()),null}}function nS(t){let e=wv(t);return re(e,"internal-error"),re(typeof e.exp<"u","internal-error"),re(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Pc(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Wt&&g2(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function g2({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var ov=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){let n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;let r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};var Oc=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Nc(this.lastLoginAt),this.creationTime=Nc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function gh(t){let e=t.auth,n=await t.getIdToken(),r=await Pc(t,mh(e,{idToken:n}));re(r?.users.length,e,"internal-error");let i=r.users[0];t._notifyReloadListener(i);let o=i.providerUserInfo?.length?CS(i.providerUserInfo):[],s=y2(t.providerData,o),a=t.isAnonymous,u=!(t.email&&i.passwordHash)&&!s?.length,l=a?u:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Oc(i.createdAt,i.lastLoginAt),isAnonymous:l};Object.assign(t,h)}async function wS(t){let e=Ue(t);await gh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function y2(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function CS(t){return t.map(r=>{var i=r,{providerId:e}=i,n=np(i,["providerId"]);return{providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}async function v2(t,e){let n=await _S(t,{},async()=>{let r=Ac({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=await ES(t,i,"/v1/token",`key=${o}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let u={method:"POST",headers:a,body:r};return t.emulatorConfig&&Yr(t.emulatorConfig.host)&&(u.credentials="include"),ph.fetch()(s,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function _2(t,e){return fs(t,"POST","/v2/accounts:revokeToken",Fc(t,e))}var xc=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){re(e.idToken,"internal-error"),re(typeof e.idToken<"u","internal-error"),re(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):nS(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){re(e.length!==0,"internal-error");let n=nS(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(re(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){let{accessToken:r,refreshToken:i,expiresIn:o}=await v2(e,n);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new t;return r&&(re(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(re(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(re(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return dr("not implemented")}};function ti(t,e){re(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var ni=class t{constructor(o){var s=o,{uid:e,auth:n,stsTokenManager:r}=s,i=np(s,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ov(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Oc(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){let n=await Pc(this,this.stsTokenManager.getToken(this.auth,e));return re(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return IS(this,e)}reload(){return wS(this)}_assign(e){this!==e&&(re(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>M({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(J(M({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await gh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(kt(this.auth.app))return Promise.reject(fr(this.auth));let e=await this.getIdToken();return await Pc(this,m2(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return J(M({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>M({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){let r=n.displayName??void 0,i=n.email??void 0,o=n.phoneNumber??void 0,s=n.photoURL??void 0,a=n.tenantId??void 0,u=n._redirectEventId??void 0,l=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:p,emailVerified:g,isAnonymous:y,providerData:T,stsTokenManager:R}=n;re(p&&R,e,"internal-error");let A=xc.fromJSON(this.name,R);re(typeof p=="string",e,"internal-error"),ti(r,e.name),ti(i,e.name),re(typeof g=="boolean",e,"internal-error"),re(typeof y=="boolean",e,"internal-error"),ti(o,e.name),ti(s,e.name),ti(a,e.name),ti(u,e.name),ti(l,e.name),ti(h,e.name);let F=new t({uid:p,auth:e,email:i,emailVerified:g,displayName:r,isAnonymous:y,photoURL:s,phoneNumber:o,tenantId:a,stsTokenManager:A,createdAt:l,lastLoginAt:h});return T&&Array.isArray(T)&&(F.providerData=T.map(ee=>M({},ee))),u&&(F._redirectEventId=u),F}static async _fromIdTokenResponse(e,n,r=!1){let i=new xc;i.updateFromServerResponse(n);let o=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await gh(o),o}static async _fromGetAccountInfoResponse(e,n,r){let i=n.users[0];re(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?CS(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new xc;a.updateFromIdToken(r);let u=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Oc(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(u,l),u}};var rS=new Map;function hr(t){ii(t instanceof Function,"Expected a class definition");let e=rS.get(t);return e?(ii(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,rS.set(t,e),e)}var E2=(()=>{class t{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(n,r){this.storage[n]=r}async _get(n){let r=this.storage[n];return r===void 0?null:r}async _remove(n){delete this.storage[n]}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),sv=E2;function lh(t,e,n){return`firebase:${t}:${e}:${n}`}var yh=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=lh(this.userKey,i.apiKey,o),this.fullPersistenceKey=lh("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let n=await mh(this.auth,{idToken:e}).catch(()=>{});return n?ni._fromGetAccountInfoResponse(this.auth,n,e):null}return ni._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new t(hr(sv),e,r);let i=(await Promise.all(n.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l),o=i[0]||hr(sv),s=lh(r,e.config.apiKey,e.name),a=null;for(let l of n)try{let h=await l._get(s);if(h){let p;if(typeof h=="string"){let g=await mh(e,{idToken:h}).catch(()=>{});if(!g)break;p=await ni._fromGetAccountInfoResponse(e,g,h)}else p=ni._fromJSON(e,h);l!==o&&(a=p),o=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new t(o,e,r):(o=u[0],a&&await o._set(s,a.toJSON()),await Promise.all(n.map(async l=>{if(l!==o)try{await l._remove(s)}catch{}})),new t(o,e,r))}};function iS(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(SS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(DS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(RS(e))return"Blackberry";if(MS(e))return"Webos";if(bS(e))return"Safari";if((e.includes("chrome/")||TS(e))&&!e.includes("edge/"))return"Chrome";if(AS(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function DS(t=at()){return/firefox\//i.test(t)}function bS(t=at()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function TS(t=at()){return/crios\//i.test(t)}function SS(t=at()){return/iemobile/i.test(t)}function AS(t=at()){return/android/i.test(t)}function RS(t=at()){return/blackberry/i.test(t)}function MS(t=at()){return/webos/i.test(t)}function Cv(t=at()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function I2(t=at()){return Cv(t)&&!!window.navigator?.standalone}function w2(){return F0()&&document.documentMode===10}function NS(t=at()){return Cv(t)||AS(t)||MS(t)||RS(t)||/windows phone/i.test(t)||SS(t)}function xS(t,e=[]){let n;switch(t){case"Browser":n=iS(at());break;case"Worker":n=`${iS(at())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ei}/${r}`}var av=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=o=>new Promise((s,a)=>{try{let u=e(o);s(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}};async function C2(t,e={}){return fs(t,"GET","/v2/passwordPolicy",Fc(t,e))}var D2=6,cv=class{constructor(e){let n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??D2,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){let n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var uv=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new vh(this),this.idTokenSubscription=new vh(this),this.beforeStateQueue=new av(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=yS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=hr(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await yh.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let n=await mh(this,{idToken:e}),r=await ni._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(kt(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(s=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(s,s))}):this.directlySetCurrentUser(null)}let n=await this.assertedPersistence.getCurrentUser(),r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let o=this.redirectUser?._redirectEventId,s=r?._redirectEventId,a=await this.tryRedirectSignIn(e);(!o||o===s)&&a?.user&&(r=a.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return re(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await gh(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=d2()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(kt(this.app))return Promise.reject(fr(this));let n=e?Ue(e):null;return n&&re(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&re(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return kt(this.app)?Promise.reject(fr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return kt(this.app)?Promise.reject(fr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(hr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=await C2(this),n=new cv(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ur("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){let n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await _2(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){let r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let n=e&&hr(e)||this._popupRedirectResolver;re(n,this,"argument-error"),this.redirectPersistenceManager=await yh.create(this,[hr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let o=typeof n=="function"?n:n.next.bind(n),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(re(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof n=="function"){let u=e.addObserver(n,r,i);return()=>{s=!0,u()}}else{let u=e.addObserver(n);return()=>{s=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=xS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){let e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);let n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);let r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(kt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&c2(`Error while retrieving App Check token: ${e.error}`),e?.token}};function Lc(t){return Ue(t)}var vh=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=B0(n=>this.observer=n)}get next(){return re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Dv={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function b2(t){Dv=t}function T2(t){return Dv.loadJS(t)}function S2(){return Dv.gapiScript}function PS(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function OS(t,e){let n=Mc(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),o=n.getOptions();if(Hn(o,e??{}))return i;ri(i,"already-initialized")}return n.initialize({options:e})}function A2(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(hr);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function kS(t,e,n){let r=Lc(t);re(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,o=FS(e),{host:s,port:a}=R2(e),u=a===null?"":`:${a}`,l={url:`${o}//${s}${u}/`},h=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){re(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),re(Hn(l,r.config.emulator)&&Hn(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,Yr(s)?(nh(`${o}//${s}${u}`),rh("Auth",!0)):i||M2()}function FS(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function R2(t){let e=FS(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:oS(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:oS(s)}}}function oS(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function M2(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var _h=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return dr("not implemented")}_getIdTokenResponse(e){return dr("not implemented")}_linkToIdToken(e,n){return dr("not implemented")}_getReauthenticationResolver(e){return dr("not implemented")}};async function tv(t,e){return Iv(t,"POST","/v1/accounts:signInWithIdp",Fc(t,e))}var Eh=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var lv=class extends Eh{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};async function N2(t,e){return Iv(t,"POST","/v1/accounts:signUp",Fc(t,e))}var oi=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){let o=await ni._fromIdTokenResponse(e,r,i),s=sS(r);return new t({user:o,providerId:s,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);let i=sS(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})}};function sS(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}async function bv(t){if(kt(t.app))return Promise.reject(fr(t));let e=Lc(t);if(await e._initializationPromise,e.currentUser?.isAnonymous)return new oi({user:e.currentUser,providerId:null,operationType:"signIn"});let n=await N2(e,{returnSecureToken:!0}),r=await oi._fromIdTokenResponse(e,"signIn",n,!0);return await e._updateCurrentUser(r.user),r}var dv=class t extends Wt{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function LS(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?dv._fromErrorAndOperation(t,o,e,r):o})}async function x2(t,e,n=!1){let r=await Pc(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return oi._forOperation(t,"link",r)}async function P2(t,e,n=!1){let{auth:r}=t;if(kt(r.app))return Promise.reject(fr(r));let i="reauthenticate";try{let o=await Pc(t,LS(r,i,e,t),n);re(o.idToken,r,"internal-error");let s=wv(o.idToken);re(s,r,"internal-error");let{sub:a}=s;return re(t.uid===a,r,"user-mismatch"),oi._forOperation(t,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&ri(r,"user-mismatch"),o}}async function O2(t,e,n=!1){if(kt(t.app))return Promise.reject(fr(t));let r="signIn",i=await LS(t,r,e),o=await oi._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(o.user),o}async function k2(t,e){return Iv(t,"POST","/v1/accounts:signInWithCustomToken",Fc(t,e))}async function Tv(t,e){if(kt(t.app))return Promise.reject(fr(t));let n=Lc(t),r=await k2(n,{token:e,returnSecureToken:!0}),i=await oi._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}function Sv(t,e){return Ue(t).setPersistence(e)}function VS(t,e,n,r){return Ue(t).onIdTokenChanged(e,n,r)}function jS(t,e,n){return Ue(t).beforeAuthStateChanged(e,n)}function bh(t,e,n,r){return Ue(t).onAuthStateChanged(e,n,r)}function Av(t){return Ue(t).signOut()}var Ih="__sak";var wh=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ih,"1"),this.storage.removeItem(Ih),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var F2=1e3,L2=10,V2=(()=>{class t extends wh{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=NS(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&n(r,o,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((a,u,l)=>{this.notifyListeners(a,l)});return}let i=n.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);w2()&&s!==n.newValue&&n.newValue!==n.oldValue?setTimeout(o,L2):o()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},F2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(n,r){await super._set(n,r),this.localCache[n]=JSON.stringify(r)}async _get(n){let r=await super._get(n);return this.localCache[n]=JSON.stringify(r),r}async _remove(n){await super._remove(n),delete this.localCache[n]}}return t.type="LOCAL",t})(),Th=V2;var j2=(()=>{class t extends wh{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),Rv=j2;function B2(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}var U2=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(o=>o.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}async handleEvent(n){let r=n,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let u=Array.from(a).map(async h=>h(r.origin,s)),l=await B2(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function BS(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var hv=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,u)=>{let l=BS("",20);i.port1.start();let h=setTimeout(()=>{u(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){let g=p;if(g.data.eventId===l)switch(g.data.status){case"ack":clearTimeout(h),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(g.data.response);break;default:clearTimeout(h),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}};function qn(){return window}function $2(t){qn().location.href=t}function US(){return typeof qn().WorkerGlobalScope<"u"&&typeof qn().importScripts=="function"}async function H2(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function z2(){return navigator?.serviceWorker?.controller||null}function q2(){return US()?self:null}var $S="firebaseLocalStorageDb",G2=1,Ch="firebaseLocalStorage",HS="fbase_key",so=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function Sh(t,e){return t.transaction([Ch],e?"readwrite":"readonly").objectStore(Ch)}function W2(){let t=indexedDB.deleteDatabase($S);return new so(t).toPromise()}function fv(){let t=indexedDB.open($S,G2);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(Ch,{keyPath:HS})}catch(i){n(i)}}),t.addEventListener("success",async()=>{let r=t.result;r.objectStoreNames.contains(Ch)?e(r):(r.close(),await W2(),e(await fv()))})})}async function aS(t,e,n){let r=Sh(t,!0).put({[HS]:e,value:n});return new so(r).toPromise()}async function K2(t,e){let n=Sh(t,!1).get(e),r=await new so(n).toPromise();return r===void 0?null:r.value}function cS(t,e){let n=Sh(t,!0).delete(e);return new so(n).toPromise()}var Q2=800,Y2=3,J2=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await fv(),this.db)}async _withRetries(n){let r=0;for(;;)try{let i=await this._openDb();return await n(i)}catch(i){if(r++>Y2)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return US()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=U2._getInstance(q2()),this.receiver._subscribe("keyChanged",async(n,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(n,r)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await H2(),!this.activeServiceWorker)return;this.sender=new hv(this.activeServiceWorker);let n=await this.sender._send("ping",{},800);n&&n[0]?.fulfilled&&n[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(n){if(!(!this.sender||!this.activeServiceWorker||z2()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;let n=await fv();return await aS(n,Ih,"1"),await cS(n,Ih),!0}catch{}return!1}async _withPendingWrite(n){this.pendingWrites++;try{await n()}finally{this.pendingWrites--}}async _set(n,r){return this._withPendingWrite(async()=>(await this._withRetries(i=>aS(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)))}async _get(n){let r=await this._withRetries(i=>K2(i,n));return this.localCache[n]=r,r}async _remove(n){return this._withPendingWrite(async()=>(await this._withRetries(r=>cS(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)))}async _poll(){let n=await this._withRetries(o=>{let s=Sh(o,!1).getAll();return new so(s).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:o,value:s}of n)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Q2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),zS=J2;var fee=PS("rcb"),pee=new oo(3e4,6e4);function Z2(t,e){return e?hr(e):(re(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var kc=class extends _h{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return tv(e,this._buildIdpRequest())}_linkToIdToken(e,n){return tv(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return tv(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function X2(t){return O2(t.auth,new kc(t),t.bypassAuthState)}function ej(t){let{auth:e,user:n}=t;return re(n,e,"internal-error"),P2(n,new kc(t),t.bypassAuthState)}async function tj(t){let{auth:e,user:n}=t;return re(n,e,"internal-error"),x2(n,new kc(t),t.bypassAuthState)}var pv=class{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){let{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let u={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return X2;case"linkViaPopup":case"linkViaRedirect":return tj;case"reauthViaPopup":case"reauthViaRedirect":return ej;default:ri(this.auth,"internal-error")}}resolve(e){ii(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ii(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var mee=new oo(2e3,1e4);var nj="pendingRedirect",dh=new Map,mv=class extends pv{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=dh.get(this.auth._key());if(!e){try{let r=await rj(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}dh.set(this.auth._key(),e)}return this.bypassAuthState||dh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}};async function rj(t,e){let n=sj(e),r=oj(t);if(!await r._isAvailable())return!1;let i=await r._get(n)==="true";return await r._remove(n),i}function ij(t,e){dh.set(t._key(),e)}function oj(t){return hr(t._redirectPersistence)}function sj(t){return lh(nj,t.config.apiKey,t.name)}async function aj(t,e,n=!1){if(kt(t.app))return Promise.reject(fr(t));let r=Lc(t),i=Z2(r,e),s=await new mv(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,e)),s}var cj=600*1e3,gv=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!uj(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!qS(e)){let r=e.error.code?.split("auth/")[1]||"internal-error";n.onError(io(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=cj&&this.cachedEventUids.clear(),this.cachedEventUids.has(uS(e))}saveEventToCache(e){this.cachedEventUids.add(uS(e)),this.lastProcessedEventTime=Date.now()}};function uS(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function qS({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function uj(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return qS(t);default:return!1}}async function lj(t,e={}){return fs(t,"GET","/v1/projects",e)}var dj=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,hj=/^https?/;async function fj(t){if(t.config.emulator)return;let{authorizedDomains:e}=await lj(t);for(let n of e)try{if(pj(n))return}catch{}ri(t,"unauthorized-domain")}function pj(t){let e=rv(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let s=new URL(t);return s.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!hj.test(n))return!1;if(dj.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var mj=new oo(3e4,6e4);function lS(){let t=qn().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function gj(t){return new Promise((e,n)=>{function r(){lS(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{lS(),n(io(t,"network-request-failed"))},timeout:mj.get()})}if(qn().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(qn().gapi?.load)r();else{let i=PS("iframefcb");return qn()[i]=()=>{gapi.load?r():n(io(t,"network-request-failed"))},T2(`${S2()}?onload=${i}`).catch(o=>n(o))}}).catch(e=>{throw hh=null,e})}var hh=null;function yj(t){return hh=hh||gj(t),hh}var vj=new oo(5e3,15e3),_j="__/auth/iframe",Ej="emulator/auth/iframe",Ij={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},wj=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Cj(t){let e=t.config;re(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?Ev(e,Ej):`https://${t.config.authDomain}/${_j}`,r={apiKey:e.apiKey,appName:t.name,v:ei},i=wj.get(t.config.apiHost);i&&(r.eid=i);let o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${Ac(r).slice(1)}`}async function Dj(t){let e=await yj(t),n=qn().gapi;return re(n,t,"internal-error"),e.open({where:document.body,url:Cj(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ij,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});let s=io(t,"network-request-failed"),a=qn().setTimeout(()=>{o(s)},vj.get());function u(){qn().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{o(s)})}))}var bj={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Tj=500,Sj=600,Aj="_blank",Rj="http://localhost",Dh=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function Mj(t,e,n,r=Tj,i=Sj){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",u=J(M({},bj),{width:r.toString(),height:i.toString(),top:o,left:s}),l=at().toLowerCase();n&&(a=TS(l)?Aj:n),DS(l)&&(e=e||Rj,u.scrollbars="yes");let h=Object.entries(u).reduce((g,[y,T])=>`${g}${y}=${T},`,"");if(I2(l)&&a!=="_self")return Nj(e||"",a),new Dh(null);let p=window.open(e||"",a,h);re(p,t,"popup-blocked");try{p.focus()}catch{}return new Dh(p)}function Nj(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var xj="__/auth/handler",Pj="emulator/auth/handler",Oj=encodeURIComponent("fac");async function dS(t,e,n,r,i,o){re(t.config.authDomain,t,"auth-domain-config-required"),re(t.config.apiKey,t,"invalid-api-key");let s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ei,eventId:i};if(e instanceof Eh){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",j0(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(o||{}))s[h]=p}if(e instanceof lv){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(s.scopes=h.join(","))}t.tenantId&&(s.tid=t.tenantId);let a=s;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let u=await t._getAppCheckToken(),l=u?`#${Oj}=${encodeURIComponent(u)}`:"";return`${kj(t)}?${Ac(a).slice(1)}${l}`}function kj({config:t}){return t.emulator?Ev(t,Pj):`https://${t.authDomain}/${xj}`}var nv="webStorageSupport",yv=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Rv,this._completeRedirectFn=aj,this._overrideRedirectResult=ij}async _openPopup(e,n,r,i){ii(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");let o=await dS(e,n,r,rv(),i);return Mj(e,o,BS())}async _openRedirect(e,n,r,i){await this._originValidation(e);let o=await dS(e,n,r,rv(),i);return $2(o),new Promise(()=>{})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(ii(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){let n=await Dj(e),r=new gv(e);return n.register("authEvent",i=>(re(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(nv,{type:nv},i=>{let o=i?.[0]?.[nv];o!==void 0&&n(!!o),ri(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=fj(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return NS()||bS()||Cv()}},GS=yv;var hS="@firebase/auth",fS="1.12.0";var vv=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function Fj(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Lj(t){Xr(new cn("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;re(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:s,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:xS(t)},l=new uv(r,i,o,u);return A2(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Xr(new cn("auth-internal",e=>{let n=Lc(e.getProvider("auth").getImmediate());return(r=>new vv(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Dn(hS,fS,Fj(t)),Dn(hS,fS,"esm2020")}var Vj=300,jj=Ly("authIdTokenMaxAge")||Vj,pS=null,Bj=t=>async e=>{let n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>jj)return;let i=n?.token;pS!==i&&(pS=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Mv(t=ah()){let e=Mc(t,"auth");if(e.isInitialized())return e.getImmediate();let n=OS(t,{popupRedirectResolver:GS,persistence:[zS,Th,Rv]}),r=Ly("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=Bj(o.toString());jS(n,s,()=>s(n.currentUser)),VS(n,a=>s(a))}}let i=ky("auth");return i&&kS(n,`http://${i}`),n}function Uj(){return document.getElementsByTagName("head")?.[0]??document}b2({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let o=io("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",Uj().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Lj("Browser");var $j="firebase",Hj="12.7.0";Dn($j,Hj,"app");var WS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},KS={};var pr,Nv;(function(){var t;function e(w,v){function E(){}E.prototype=v.prototype,w.F=v.prototype,w.prototype=new E,w.prototype.constructor=w,w.D=function(C,I,b){for(var _=Array(arguments.length-2),Mt=2;Mt<arguments.length;Mt++)_[Mt-2]=arguments[Mt];return v.prototype[I].apply(C,_)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(w,v,E){E||(E=0);let C=Array(16);if(typeof v=="string")for(var I=0;I<16;++I)C[I]=v.charCodeAt(E++)|v.charCodeAt(E++)<<8|v.charCodeAt(E++)<<16|v.charCodeAt(E++)<<24;else for(I=0;I<16;++I)C[I]=v[E++]|v[E++]<<8|v[E++]<<16|v[E++]<<24;v=w.g[0],E=w.g[1],I=w.g[2];let b=w.g[3],_;_=v+(b^E&(I^b))+C[0]+3614090360&4294967295,v=E+(_<<7&4294967295|_>>>25),_=b+(I^v&(E^I))+C[1]+3905402710&4294967295,b=v+(_<<12&4294967295|_>>>20),_=I+(E^b&(v^E))+C[2]+606105819&4294967295,I=b+(_<<17&4294967295|_>>>15),_=E+(v^I&(b^v))+C[3]+3250441966&4294967295,E=I+(_<<22&4294967295|_>>>10),_=v+(b^E&(I^b))+C[4]+4118548399&4294967295,v=E+(_<<7&4294967295|_>>>25),_=b+(I^v&(E^I))+C[5]+1200080426&4294967295,b=v+(_<<12&4294967295|_>>>20),_=I+(E^b&(v^E))+C[6]+2821735955&4294967295,I=b+(_<<17&4294967295|_>>>15),_=E+(v^I&(b^v))+C[7]+4249261313&4294967295,E=I+(_<<22&4294967295|_>>>10),_=v+(b^E&(I^b))+C[8]+1770035416&4294967295,v=E+(_<<7&4294967295|_>>>25),_=b+(I^v&(E^I))+C[9]+2336552879&4294967295,b=v+(_<<12&4294967295|_>>>20),_=I+(E^b&(v^E))+C[10]+4294925233&4294967295,I=b+(_<<17&4294967295|_>>>15),_=E+(v^I&(b^v))+C[11]+2304563134&4294967295,E=I+(_<<22&4294967295|_>>>10),_=v+(b^E&(I^b))+C[12]+1804603682&4294967295,v=E+(_<<7&4294967295|_>>>25),_=b+(I^v&(E^I))+C[13]+4254626195&4294967295,b=v+(_<<12&4294967295|_>>>20),_=I+(E^b&(v^E))+C[14]+2792965006&4294967295,I=b+(_<<17&4294967295|_>>>15),_=E+(v^I&(b^v))+C[15]+1236535329&4294967295,E=I+(_<<22&4294967295|_>>>10),_=v+(I^b&(E^I))+C[1]+4129170786&4294967295,v=E+(_<<5&4294967295|_>>>27),_=b+(E^I&(v^E))+C[6]+3225465664&4294967295,b=v+(_<<9&4294967295|_>>>23),_=I+(v^E&(b^v))+C[11]+643717713&4294967295,I=b+(_<<14&4294967295|_>>>18),_=E+(b^v&(I^b))+C[0]+3921069994&4294967295,E=I+(_<<20&4294967295|_>>>12),_=v+(I^b&(E^I))+C[5]+3593408605&4294967295,v=E+(_<<5&4294967295|_>>>27),_=b+(E^I&(v^E))+C[10]+38016083&4294967295,b=v+(_<<9&4294967295|_>>>23),_=I+(v^E&(b^v))+C[15]+3634488961&4294967295,I=b+(_<<14&4294967295|_>>>18),_=E+(b^v&(I^b))+C[4]+3889429448&4294967295,E=I+(_<<20&4294967295|_>>>12),_=v+(I^b&(E^I))+C[9]+568446438&4294967295,v=E+(_<<5&4294967295|_>>>27),_=b+(E^I&(v^E))+C[14]+3275163606&4294967295,b=v+(_<<9&4294967295|_>>>23),_=I+(v^E&(b^v))+C[3]+4107603335&4294967295,I=b+(_<<14&4294967295|_>>>18),_=E+(b^v&(I^b))+C[8]+1163531501&4294967295,E=I+(_<<20&4294967295|_>>>12),_=v+(I^b&(E^I))+C[13]+2850285829&4294967295,v=E+(_<<5&4294967295|_>>>27),_=b+(E^I&(v^E))+C[2]+4243563512&4294967295,b=v+(_<<9&4294967295|_>>>23),_=I+(v^E&(b^v))+C[7]+1735328473&4294967295,I=b+(_<<14&4294967295|_>>>18),_=E+(b^v&(I^b))+C[12]+2368359562&4294967295,E=I+(_<<20&4294967295|_>>>12),_=v+(E^I^b)+C[5]+4294588738&4294967295,v=E+(_<<4&4294967295|_>>>28),_=b+(v^E^I)+C[8]+2272392833&4294967295,b=v+(_<<11&4294967295|_>>>21),_=I+(b^v^E)+C[11]+1839030562&4294967295,I=b+(_<<16&4294967295|_>>>16),_=E+(I^b^v)+C[14]+4259657740&4294967295,E=I+(_<<23&4294967295|_>>>9),_=v+(E^I^b)+C[1]+2763975236&4294967295,v=E+(_<<4&4294967295|_>>>28),_=b+(v^E^I)+C[4]+1272893353&4294967295,b=v+(_<<11&4294967295|_>>>21),_=I+(b^v^E)+C[7]+4139469664&4294967295,I=b+(_<<16&4294967295|_>>>16),_=E+(I^b^v)+C[10]+3200236656&4294967295,E=I+(_<<23&4294967295|_>>>9),_=v+(E^I^b)+C[13]+681279174&4294967295,v=E+(_<<4&4294967295|_>>>28),_=b+(v^E^I)+C[0]+3936430074&4294967295,b=v+(_<<11&4294967295|_>>>21),_=I+(b^v^E)+C[3]+3572445317&4294967295,I=b+(_<<16&4294967295|_>>>16),_=E+(I^b^v)+C[6]+76029189&4294967295,E=I+(_<<23&4294967295|_>>>9),_=v+(E^I^b)+C[9]+3654602809&4294967295,v=E+(_<<4&4294967295|_>>>28),_=b+(v^E^I)+C[12]+3873151461&4294967295,b=v+(_<<11&4294967295|_>>>21),_=I+(b^v^E)+C[15]+530742520&4294967295,I=b+(_<<16&4294967295|_>>>16),_=E+(I^b^v)+C[2]+3299628645&4294967295,E=I+(_<<23&4294967295|_>>>9),_=v+(I^(E|~b))+C[0]+4096336452&4294967295,v=E+(_<<6&4294967295|_>>>26),_=b+(E^(v|~I))+C[7]+1126891415&4294967295,b=v+(_<<10&4294967295|_>>>22),_=I+(v^(b|~E))+C[14]+2878612391&4294967295,I=b+(_<<15&4294967295|_>>>17),_=E+(b^(I|~v))+C[5]+4237533241&4294967295,E=I+(_<<21&4294967295|_>>>11),_=v+(I^(E|~b))+C[12]+1700485571&4294967295,v=E+(_<<6&4294967295|_>>>26),_=b+(E^(v|~I))+C[3]+2399980690&4294967295,b=v+(_<<10&4294967295|_>>>22),_=I+(v^(b|~E))+C[10]+4293915773&4294967295,I=b+(_<<15&4294967295|_>>>17),_=E+(b^(I|~v))+C[1]+2240044497&4294967295,E=I+(_<<21&4294967295|_>>>11),_=v+(I^(E|~b))+C[8]+1873313359&4294967295,v=E+(_<<6&4294967295|_>>>26),_=b+(E^(v|~I))+C[15]+4264355552&4294967295,b=v+(_<<10&4294967295|_>>>22),_=I+(v^(b|~E))+C[6]+2734768916&4294967295,I=b+(_<<15&4294967295|_>>>17),_=E+(b^(I|~v))+C[13]+1309151649&4294967295,E=I+(_<<21&4294967295|_>>>11),_=v+(I^(E|~b))+C[4]+4149444226&4294967295,v=E+(_<<6&4294967295|_>>>26),_=b+(E^(v|~I))+C[11]+3174756917&4294967295,b=v+(_<<10&4294967295|_>>>22),_=I+(v^(b|~E))+C[2]+718787259&4294967295,I=b+(_<<15&4294967295|_>>>17),_=E+(b^(I|~v))+C[9]+3951481745&4294967295,w.g[0]=w.g[0]+v&4294967295,w.g[1]=w.g[1]+(I+(_<<21&4294967295|_>>>11))&4294967295,w.g[2]=w.g[2]+I&4294967295,w.g[3]=w.g[3]+b&4294967295}r.prototype.v=function(w,v){v===void 0&&(v=w.length);let E=v-this.blockSize,C=this.C,I=this.h,b=0;for(;b<v;){if(I==0)for(;b<=E;)i(this,w,b),b+=this.blockSize;if(typeof w=="string"){for(;b<v;)if(C[I++]=w.charCodeAt(b++),I==this.blockSize){i(this,C),I=0;break}}else for(;b<v;)if(C[I++]=w[b++],I==this.blockSize){i(this,C),I=0;break}}this.h=I,this.o+=v},r.prototype.A=function(){var w=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);w[0]=128;for(var v=1;v<w.length-8;++v)w[v]=0;v=this.o*8;for(var E=w.length-8;E<w.length;++E)w[E]=v&255,v/=256;for(this.v(w),w=Array(16),v=0,E=0;E<4;++E)for(let C=0;C<32;C+=8)w[v++]=this.g[E]>>>C&255;return w};function o(w,v){var E=a;return Object.prototype.hasOwnProperty.call(E,w)?E[w]:E[w]=v(w)}function s(w,v){this.h=v;let E=[],C=!0;for(let I=w.length-1;I>=0;I--){let b=w[I]|0;C&&b==v||(E[I]=b,C=!1)}this.g=E}var a={};function u(w){return-128<=w&&w<128?o(w,function(v){return new s([v|0],v<0?-1:0)}):new s([w|0],w<0?-1:0)}function l(w){if(isNaN(w)||!isFinite(w))return p;if(w<0)return A(l(-w));let v=[],E=1;for(let C=0;w>=E;C++)v[C]=w/E|0,E*=4294967296;return new s(v,0)}function h(w,v){if(w.length==0)throw Error("number format error: empty string");if(v=v||10,v<2||36<v)throw Error("radix out of range: "+v);if(w.charAt(0)=="-")return A(h(w.substring(1),v));if(w.indexOf("-")>=0)throw Error('number format error: interior "-" character');let E=l(Math.pow(v,8)),C=p;for(let b=0;b<w.length;b+=8){var I=Math.min(8,w.length-b);let _=parseInt(w.substring(b,b+I),v);I<8?(I=l(Math.pow(v,I)),C=C.j(I).add(l(_))):(C=C.j(E),C=C.add(l(_)))}return C}var p=u(0),g=u(1),y=u(16777216);t=s.prototype,t.m=function(){if(R(this))return-A(this).m();let w=0,v=1;for(let E=0;E<this.g.length;E++){let C=this.i(E);w+=(C>=0?C:4294967296+C)*v,v*=4294967296}return w},t.toString=function(w){if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(T(this))return"0";if(R(this))return"-"+A(this).toString(w);let v=l(Math.pow(w,6));var E=this;let C="";for(;;){let I=lt(E,v).g;E=F(E,I.j(v));let b=((E.g.length>0?E.g[0]:E.h)>>>0).toString(w);if(E=I,T(E))return b+C;for(;b.length<6;)b="0"+b;C=b+C}},t.i=function(w){return w<0?0:w<this.g.length?this.g[w]:this.h};function T(w){if(w.h!=0)return!1;for(let v=0;v<w.g.length;v++)if(w.g[v]!=0)return!1;return!0}function R(w){return w.h==-1}t.l=function(w){return w=F(this,w),R(w)?-1:T(w)?0:1};function A(w){let v=w.g.length,E=[];for(let C=0;C<v;C++)E[C]=~w.g[C];return new s(E,~w.h).add(g)}t.abs=function(){return R(this)?A(this):this},t.add=function(w){let v=Math.max(this.g.length,w.g.length),E=[],C=0;for(let I=0;I<=v;I++){let b=C+(this.i(I)&65535)+(w.i(I)&65535),_=(b>>>16)+(this.i(I)>>>16)+(w.i(I)>>>16);C=_>>>16,b&=65535,_&=65535,E[I]=_<<16|b}return new s(E,E[E.length-1]&-2147483648?-1:0)};function F(w,v){return w.add(A(v))}t.j=function(w){if(T(this)||T(w))return p;if(R(this))return R(w)?A(this).j(A(w)):A(A(this).j(w));if(R(w))return A(this.j(A(w)));if(this.l(y)<0&&w.l(y)<0)return l(this.m()*w.m());let v=this.g.length+w.g.length,E=[];for(var C=0;C<2*v;C++)E[C]=0;for(C=0;C<this.g.length;C++)for(let I=0;I<w.g.length;I++){let b=this.i(C)>>>16,_=this.i(C)&65535,Mt=w.i(I)>>>16,Cr=w.i(I)&65535;E[2*C+2*I]+=_*Cr,ee(E,2*C+2*I),E[2*C+2*I+1]+=b*Cr,ee(E,2*C+2*I+1),E[2*C+2*I+1]+=_*Mt,ee(E,2*C+2*I+1),E[2*C+2*I+2]+=b*Mt,ee(E,2*C+2*I+2)}for(w=0;w<v;w++)E[w]=E[2*w+1]<<16|E[2*w];for(w=v;w<2*v;w++)E[w]=0;return new s(E,0)};function ee(w,v){for(;(w[v]&65535)!=w[v];)w[v+1]+=w[v]>>>16,w[v]&=65535,v++}function le(w,v){this.g=w,this.h=v}function lt(w,v){if(T(v))throw Error("division by zero");if(T(w))return new le(p,p);if(R(w))return v=lt(A(w),v),new le(A(v.g),A(v.h));if(R(v))return v=lt(w,A(v)),new le(A(v.g),v.h);if(w.g.length>30){if(R(w)||R(v))throw Error("slowDivide_ only works with positive integers.");for(var E=g,C=v;C.l(w)<=0;)E=Rt(E),C=Rt(C);var I=tt(E,1),b=tt(C,1);for(C=tt(C,2),E=tt(E,2);!T(C);){var _=b.add(C);_.l(w)<=0&&(I=I.add(E),b=_),C=tt(C,1),E=tt(E,1)}return v=F(w,I.j(v)),new le(I,v)}for(I=p;w.l(v)>=0;){for(E=Math.max(1,Math.floor(w.m()/v.m())),C=Math.ceil(Math.log(E)/Math.LN2),C=C<=48?1:Math.pow(2,C-48),b=l(E),_=b.j(v);R(_)||_.l(w)>0;)E-=C,b=l(E),_=b.j(v);T(b)&&(b=g),I=I.add(b),w=F(w,_)}return new le(I,w)}t.B=function(w){return lt(this,w).h},t.and=function(w){let v=Math.max(this.g.length,w.g.length),E=[];for(let C=0;C<v;C++)E[C]=this.i(C)&w.i(C);return new s(E,this.h&w.h)},t.or=function(w){let v=Math.max(this.g.length,w.g.length),E=[];for(let C=0;C<v;C++)E[C]=this.i(C)|w.i(C);return new s(E,this.h|w.h)},t.xor=function(w){let v=Math.max(this.g.length,w.g.length),E=[];for(let C=0;C<v;C++)E[C]=this.i(C)^w.i(C);return new s(E,this.h^w.h)};function Rt(w){let v=w.g.length+1,E=[];for(let C=0;C<v;C++)E[C]=w.i(C)<<1|w.i(C-1)>>>31;return new s(E,w.h)}function tt(w,v){let E=v>>5;v%=32;let C=w.g.length-E,I=[];for(let b=0;b<C;b++)I[b]=v>0?w.i(b+E)>>>v|w.i(b+E+1)<<32-v:w.i(b+E);return new s(I,w.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Nv=KS.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.B,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,pr=KS.Integer=s}).apply(typeof WS<"u"?WS:typeof self<"u"?self:typeof window<"u"?window:{});var Ah=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},mr={};var xv,zj,ps,Pv,Vc,Rh,Ov,kv,Fv;(function(){var t,e=Object.defineProperty;function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ah=="object"&&Ah];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var m=0;m<c.length-1;m++){var D=c[m];if(!(D in f))break e;f=f[D]}c=c[c.length-1],m=f[c],d=d(m),d!=m&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}i("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(c){return c||function(d){var f=[],m;for(m in d)Object.prototype.hasOwnProperty.call(d,m)&&f.push([m,d[m]]);return f}});var o=o||{},s=this||self;function a(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function u(c,d,f){return c.call.apply(c.bind,arguments)}function l(c,d,f){return l=u,l.apply(null,arguments)}function h(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var m=f.slice();return m.push.apply(m,arguments),c.apply(this,m)}}function p(c,d){function f(){}f.prototype=d.prototype,c.Z=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Ob=function(m,D,S){for(var V=Array(arguments.length-2),ce=2;ce<arguments.length;ce++)V[ce-2]=arguments[ce];return d.prototype[D].apply(m,V)}}var g=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function y(c){let d=c.length;if(d>0){let f=Array(d);for(let m=0;m<d;m++)f[m]=c[m];return f}return[]}function T(c,d){for(let m=1;m<arguments.length;m++){let D=arguments[m];var f=typeof D;if(f=f!="object"?f:D?Array.isArray(D)?"array":f:"null",f=="array"||f=="object"&&typeof D.length=="number"){f=c.length||0;let S=D.length||0;c.length=f+S;for(let V=0;V<S;V++)c[f+V]=D[V]}else c.push(D)}}class R{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return this.h>0?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function A(c){s.setTimeout(()=>{throw c},0)}function F(){var c=w;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class ee{constructor(){this.h=this.g=null}add(d,f){let m=le.get();m.set(d,f),this.h?this.h.next=m:this.g=m,this.h=m}}var le=new R(()=>new lt,c=>c.reset());class lt{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Rt,tt=!1,w=new ee,v=()=>{let c=Promise.resolve(void 0);Rt=()=>{c.then(E)}};function E(){for(var c;c=F();){try{c.h.call(c.g)}catch(f){A(f)}var d=le;d.j(c),d.h<100&&(d.h++,c.next=d.g,d.g=c)}tt=!1}function C(){this.u=this.u,this.C=this.C}C.prototype.u=!1,C.prototype.dispose=function(){this.u||(this.u=!0,this.N())},C.prototype[Symbol.dispose]=function(){this.dispose()},C.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function I(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}I.prototype.h=function(){this.defaultPrevented=!0};var b=(function(){if(!s.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};s.addEventListener("test",f,d),s.removeEventListener("test",f,d)}catch{}return c})();function _(c){return/^[\s\xa0]*$/.test(c)}function Mt(c,d){I.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,d)}p(Mt,I),Mt.prototype.init=function(c,d){let f=this.type=c.type,m=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget,d||(f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement)),this.relatedTarget=d,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&Mt.Z.h.call(this)},Mt.prototype.h=function(){Mt.Z.h.call(this);let c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Cr="closure_listenable_"+(Math.random()*1e6|0),vM=0;function _M(c,d,f,m,D){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!m,this.ha=D,this.key=++vM,this.da=this.fa=!1}function lu(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function du(c,d,f){for(let m in c)d.call(f,c[m],m,c)}function EM(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function eI(c){let d={};for(let f in c)d[f]=c[f];return d}let tI="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function nI(c,d){let f,m;for(let D=1;D<arguments.length;D++){m=arguments[D];for(f in m)c[f]=m[f];for(let S=0;S<tI.length;S++)f=tI[S],Object.prototype.hasOwnProperty.call(m,f)&&(c[f]=m[f])}}function hu(c){this.src=c,this.g={},this.h=0}hu.prototype.add=function(c,d,f,m,D){let S=c.toString();c=this.g[S],c||(c=this.g[S]=[],this.h++);let V=Pf(c,d,m,D);return V>-1?(d=c[V],f||(d.fa=!1)):(d=new _M(d,this.src,S,!!m,D),d.fa=f,c.push(d)),d};function xf(c,d){let f=d.type;if(f in c.g){var m=c.g[f],D=Array.prototype.indexOf.call(m,d,void 0),S;(S=D>=0)&&Array.prototype.splice.call(m,D,1),S&&(lu(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function Pf(c,d,f,m){for(let D=0;D<c.length;++D){let S=c[D];if(!S.da&&S.listener==d&&S.capture==!!f&&S.ha==m)return D}return-1}var Of="closure_lm_"+(Math.random()*1e6|0),kf={};function rI(c,d,f,m,D){if(m&&m.once)return oI(c,d,f,m,D);if(Array.isArray(d)){for(let S=0;S<d.length;S++)rI(c,d[S],f,m,D);return null}return f=jf(f),c&&c[Cr]?c.J(d,f,a(m)?!!m.capture:!!m,D):iI(c,d,f,!1,m,D)}function iI(c,d,f,m,D,S){if(!d)throw Error("Invalid event type");let V=a(D)?!!D.capture:!!D,ce=Lf(c);if(ce||(c[Of]=ce=new hu(c)),f=ce.add(d,f,m,V,S),f.proxy)return f;if(m=IM(),f.proxy=m,m.src=c,m.listener=f,c.addEventListener)b||(D=V),D===void 0&&(D=!1),c.addEventListener(d.toString(),m,D);else if(c.attachEvent)c.attachEvent(aI(d.toString()),m);else if(c.addListener&&c.removeListener)c.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return f}function IM(){function c(f){return d.call(c.src,c.listener,f)}let d=wM;return c}function oI(c,d,f,m,D){if(Array.isArray(d)){for(let S=0;S<d.length;S++)oI(c,d[S],f,m,D);return null}return f=jf(f),c&&c[Cr]?c.K(d,f,a(m)?!!m.capture:!!m,D):iI(c,d,f,!0,m,D)}function sI(c,d,f,m,D){if(Array.isArray(d))for(var S=0;S<d.length;S++)sI(c,d[S],f,m,D);else m=a(m)?!!m.capture:!!m,f=jf(f),c&&c[Cr]?(c=c.i,S=String(d).toString(),S in c.g&&(d=c.g[S],f=Pf(d,f,m,D),f>-1&&(lu(d[f]),Array.prototype.splice.call(d,f,1),d.length==0&&(delete c.g[S],c.h--)))):c&&(c=Lf(c))&&(d=c.g[d.toString()],c=-1,d&&(c=Pf(d,f,m,D)),(f=c>-1?d[c]:null)&&Ff(f))}function Ff(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[Cr])xf(d.i,c);else{var f=c.type,m=c.proxy;d.removeEventListener?d.removeEventListener(f,m,c.capture):d.detachEvent?d.detachEvent(aI(f),m):d.addListener&&d.removeListener&&d.removeListener(m),(f=Lf(d))?(xf(f,c),f.h==0&&(f.src=null,d[Of]=null)):lu(c)}}}function aI(c){return c in kf?kf[c]:kf[c]="on"+c}function wM(c,d){if(c.da)c=!0;else{d=new Mt(d,this);let f=c.listener,m=c.ha||c.src;c.fa&&Ff(c),c=f.call(m,d)}return c}function Lf(c){return c=c[Of],c instanceof hu?c:null}var Vf="__closure_events_fn_"+(Math.random()*1e9>>>0);function jf(c){return typeof c=="function"?c:(c[Vf]||(c[Vf]=function(d){return c.handleEvent(d)}),c[Vf])}function gt(){C.call(this),this.i=new hu(this),this.M=this,this.G=null}p(gt,C),gt.prototype[Cr]=!0,gt.prototype.removeEventListener=function(c,d,f,m){sI(this,c,d,f,m)};function It(c,d){var f,m=c.G;if(m)for(f=[];m;m=m.G)f.push(m);if(c=c.M,m=d.type||d,typeof d=="string")d=new I(d,c);else if(d instanceof I)d.target=d.target||c;else{var D=d;d=new I(m,c),nI(d,D)}D=!0;let S,V;if(f)for(V=f.length-1;V>=0;V--)S=d.g=f[V],D=fu(S,m,!0,d)&&D;if(S=d.g=c,D=fu(S,m,!0,d)&&D,D=fu(S,m,!1,d)&&D,f)for(V=0;V<f.length;V++)S=d.g=f[V],D=fu(S,m,!1,d)&&D}gt.prototype.N=function(){if(gt.Z.N.call(this),this.i){var c=this.i;for(let d in c.g){let f=c.g[d];for(let m=0;m<f.length;m++)lu(f[m]);delete c.g[d],c.h--}}this.G=null},gt.prototype.J=function(c,d,f,m){return this.i.add(String(c),d,!1,f,m)},gt.prototype.K=function(c,d,f,m){return this.i.add(String(c),d,!0,f,m)};function fu(c,d,f,m){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();let D=!0;for(let S=0;S<d.length;++S){let V=d[S];if(V&&!V.da&&V.capture==f){let ce=V.listener,Ge=V.ha||V.src;V.fa&&xf(c.i,V),D=ce.call(Ge,m)!==!1&&D}}return D&&!m.defaultPrevented}function CM(c,d){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=l(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(d)>2147483647?-1:s.setTimeout(c,d||0)}function cI(c){c.g=CM(()=>{c.g=null,c.i&&(c.i=!1,cI(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class DM extends C{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:cI(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function zs(c){C.call(this),this.h=c,this.g={}}p(zs,C);var uI=[];function lI(c){du(c.g,function(d,f){this.g.hasOwnProperty(f)&&Ff(d)},c),c.g={}}zs.prototype.N=function(){zs.Z.N.call(this),lI(this)},zs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Bf=s.JSON.stringify,bM=s.JSON.parse,TM=class{stringify(c){return s.JSON.stringify(c,void 0)}parse(c){return s.JSON.parse(c,void 0)}};function dI(){}function hI(){}var qs={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Uf(){I.call(this,"d")}p(Uf,I);function $f(){I.call(this,"c")}p($f,I);var mi={},fI=null;function pu(){return fI=fI||new gt}mi.Ia="serverreachability";function pI(c){I.call(this,mi.Ia,c)}p(pI,I);function Gs(c){let d=pu();It(d,new pI(d))}mi.STAT_EVENT="statevent";function mI(c,d){I.call(this,mi.STAT_EVENT,c),this.stat=d}p(mI,I);function wt(c){let d=pu();It(d,new mI(d,c))}mi.Ja="timingevent";function gI(c,d){I.call(this,mi.Ja,c),this.size=d}p(gI,I);function Ws(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){c()},d)}function Ks(){this.g=!0}Ks.prototype.ua=function(){this.g=!1};function SM(c,d,f,m,D,S){c.info(function(){if(c.g)if(S){var V="",ce=S.split("&");for(let Se=0;Se<ce.length;Se++){var Ge=ce[Se].split("=");if(Ge.length>1){let nt=Ge[0];Ge=Ge[1];let Sn=nt.split("_");V=Sn.length>=2&&Sn[1]=="type"?V+(nt+"="+Ge+"&"):V+(nt+"=redacted&")}}}else V=null;else V=S;return"XMLHTTP REQ ("+m+") [attempt "+D+"]: "+d+`
`+f+`
`+V})}function AM(c,d,f,m,D,S,V){c.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+D+"]: "+d+`
`+f+`
`+S+" "+V})}function Io(c,d,f,m){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+MM(c,f)+(m?" "+m:"")})}function RM(c,d){c.info(function(){return"TIMEOUT: "+d})}Ks.prototype.info=function(){};function MM(c,d){if(!c.g)return d;if(!d)return null;try{let S=JSON.parse(d);if(S){for(c=0;c<S.length;c++)if(Array.isArray(S[c])){var f=S[c];if(!(f.length<2)){var m=f[1];if(Array.isArray(m)&&!(m.length<1)){var D=m[0];if(D!="noop"&&D!="stop"&&D!="close")for(let V=1;V<m.length;V++)m[V]=""}}}}return Bf(S)}catch{return d}}var mu={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},yI={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},vI;function Hf(){}p(Hf,dI),Hf.prototype.g=function(){return new XMLHttpRequest},vI=new Hf;function Qs(c){return encodeURIComponent(String(c))}function NM(c){var d=1;c=c.split(":");let f=[];for(;d>0&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function Dr(c,d,f,m){this.j=c,this.i=d,this.l=f,this.S=m||1,this.V=new zs(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new _I}function _I(){this.i=null,this.g="",this.h=!1}var EI={},zf={};function qf(c,d,f){c.M=1,c.A=yu(Tn(d)),c.u=f,c.R=!0,II(c,null)}function II(c,d){c.F=Date.now(),gu(c),c.B=Tn(c.A);var f=c.B,m=c.S;Array.isArray(m)||(m=[String(m)]),OI(f.i,"t",m),c.C=0,f=c.j.L,c.h=new _I,c.g=ZI(c.j,f?d:null,!c.u),c.P>0&&(c.O=new DM(l(c.Y,c,c.g),c.P)),d=c.V,f=c.g,m=c.ba;var D="readystatechange";Array.isArray(D)||(D&&(uI[0]=D.toString()),D=uI);for(let S=0;S<D.length;S++){let V=rI(f,D[S],m||d.handleEvent,!1,d.h||d);if(!V)break;d.g[V.key]=V}d=c.J?eI(c.J):{},c.u?(c.v||(c.v="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,d)):(c.v="GET",c.g.ea(c.B,c.v,null,d)),Gs(),SM(c.i,c.v,c.B,c.l,c.S,c.u)}Dr.prototype.ba=function(c){c=c.target;let d=this.O;d&&Sr(c)==3?d.j():this.Y(c)},Dr.prototype.Y=function(c){try{if(c==this.g)e:{let ce=Sr(this.g),Ge=this.g.ya(),Se=this.g.ca();if(!(ce<3)&&(ce!=3||this.g&&(this.h.h||this.g.la()||UI(this.g)))){this.K||ce!=4||Ge==7||(Ge==8||Se<=0?Gs(3):Gs(2)),Gf(this);var d=this.g.ca();this.X=d;var f=xM(this);if(this.o=d==200,AM(this.i,this.v,this.B,this.l,this.S,ce,d),this.o){if(this.U&&!this.L){t:{if(this.g){var m,D=this.g;if((m=D.g?D.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(m)){var S=m;break t}}S=null}if(c=S)Io(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Wf(this,c);else{this.o=!1,this.m=3,wt(12),gi(this),Ys(this);break e}}if(this.R){c=!0;let nt;for(;!this.K&&this.C<f.length;)if(nt=PM(this,f),nt==zf){ce==4&&(this.m=4,wt(14),c=!1),Io(this.i,this.l,null,"[Incomplete Response]");break}else if(nt==EI){this.m=4,wt(15),Io(this.i,this.l,f,"[Invalid Chunk]"),c=!1;break}else Io(this.i,this.l,nt,null),Wf(this,nt);if(wI(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ce!=4||f.length!=0||this.h.h||(this.m=1,wt(16),c=!1),this.o=this.o&&c,!c)Io(this.i,this.l,f,"[Invalid Chunked Response]"),gi(this),Ys(this);else if(f.length>0&&!this.W){this.W=!0;var V=this.j;V.g==this&&V.aa&&!V.P&&(V.j.info("Great, no buffering proxy detected. Bytes received: "+f.length),ep(V),V.P=!0,wt(11))}}else Io(this.i,this.l,f,null),Wf(this,f);ce==4&&gi(this),this.o&&!this.K&&(ce==4?KI(this.j,this):(this.o=!1,gu(this)))}else WM(this.g),d==400&&f.indexOf("Unknown SID")>0?(this.m=3,wt(12)):(this.m=0,wt(13)),gi(this),Ys(this)}}}catch{}finally{}};function xM(c){if(!wI(c))return c.g.la();let d=UI(c.g);if(d==="")return"";let f="",m=d.length,D=Sr(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return gi(c),Ys(c),"";c.h.i=new s.TextDecoder}for(let S=0;S<m;S++)c.h.h=!0,f+=c.h.i.decode(d[S],{stream:!(D&&S==m-1)});return d.length=0,c.h.g+=f,c.C=0,c.h.g}function wI(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function PM(c,d){var f=c.C,m=d.indexOf(`
`,f);return m==-1?zf:(f=Number(d.substring(f,m)),isNaN(f)?EI:(m+=1,m+f>d.length?zf:(d=d.slice(m,m+f),c.C=m+f,d)))}Dr.prototype.cancel=function(){this.K=!0,gi(this)};function gu(c){c.T=Date.now()+c.H,CI(c,c.H)}function CI(c,d){if(c.D!=null)throw Error("WatchDog timer not null");c.D=Ws(l(c.aa,c),d)}function Gf(c){c.D&&(s.clearTimeout(c.D),c.D=null)}Dr.prototype.aa=function(){this.D=null;let c=Date.now();c-this.T>=0?(RM(this.i,this.B),this.M!=2&&(Gs(),wt(17)),gi(this),this.m=2,Ys(this)):CI(this,this.T-c)};function Ys(c){c.j.I==0||c.K||KI(c.j,c)}function gi(c){Gf(c);var d=c.O;d&&typeof d.dispose=="function"&&d.dispose(),c.O=null,lI(c.V),c.g&&(d=c.g,c.g=null,d.abort(),d.dispose())}function Wf(c,d){try{var f=c.j;if(f.I!=0&&(f.g==c||Kf(f.h,c))){if(!c.L&&Kf(f.h,c)&&f.I==3){try{var m=f.Ba.g.parse(d)}catch{m=null}if(Array.isArray(m)&&m.length==3){var D=m;if(D[0]==0){e:if(!f.v){if(f.g)if(f.g.F+3e3<c.F)Cu(f),Iu(f);else break e;Xf(f),wt(18)}}else f.xa=D[1],0<f.xa-f.K&&D[2]<37500&&f.F&&f.A==0&&!f.C&&(f.C=Ws(l(f.Va,f),6e3));TI(f.h)<=1&&f.ta&&(f.ta=void 0)}else vi(f,11)}else if((c.L||f.g==c)&&Cu(f),!_(d))for(D=f.Ba.g.parse(d),d=0;d<D.length;d++){let Se=D[d],nt=Se[0];if(!(nt<=f.K))if(f.K=nt,Se=Se[1],f.I==2)if(Se[0]=="c"){f.M=Se[1],f.ba=Se[2];let Sn=Se[3];Sn!=null&&(f.ka=Sn,f.j.info("VER="+f.ka));let _i=Se[4];_i!=null&&(f.za=_i,f.j.info("SVER="+f.za));let Ar=Se[5];Ar!=null&&typeof Ar=="number"&&Ar>0&&(m=1.5*Ar,f.O=m,f.j.info("backChannelRequestTimeoutMs_="+m)),m=f;let Rr=c.g;if(Rr){let bu=Rr.g?Rr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(bu){var S=m.h;S.g||bu.indexOf("spdy")==-1&&bu.indexOf("quic")==-1&&bu.indexOf("h2")==-1||(S.j=S.l,S.g=new Set,S.h&&(Qf(S,S.h),S.h=null))}if(m.G){let tp=Rr.g?Rr.g.getResponseHeader("X-HTTP-Session-Id"):null;tp&&(m.wa=tp,Re(m.J,m.G,tp))}}f.I=3,f.l&&f.l.ra(),f.aa&&(f.T=Date.now()-c.F,f.j.info("Handshake RTT: "+f.T+"ms")),m=f;var V=c;if(m.na=JI(m,m.L?m.ba:null,m.W),V.L){SI(m.h,V);var ce=V,Ge=m.O;Ge&&(ce.H=Ge),ce.D&&(Gf(ce),gu(ce)),m.g=V}else GI(m);f.i.length>0&&wu(f)}else Se[0]!="stop"&&Se[0]!="close"||vi(f,7);else f.I==3&&(Se[0]=="stop"||Se[0]=="close"?Se[0]=="stop"?vi(f,7):Zf(f):Se[0]!="noop"&&f.l&&f.l.qa(Se),f.A=0)}}Gs(4)}catch{}}var OM=class{constructor(c,d){this.g=c,this.map=d}};function DI(c){this.l=c||10,s.PerformanceNavigationTiming?(c=s.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function bI(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function TI(c){return c.h?1:c.g?c.g.size:0}function Kf(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function Qf(c,d){c.g?c.g.add(d):c.h=d}function SI(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}DI.prototype.cancel=function(){if(this.i=AI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function AI(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.G);return d}return y(c.i)}var RI=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function kM(c,d){if(c){c=c.split("&");for(let f=0;f<c.length;f++){let m=c[f].indexOf("="),D,S=null;m>=0?(D=c[f].substring(0,m),S=c[f].substring(m+1)):D=c[f],d(D,S?decodeURIComponent(S.replace(/\+/g," ")):"")}}}function br(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let d;c instanceof br?(this.l=c.l,Js(this,c.j),this.o=c.o,this.g=c.g,Zs(this,c.u),this.h=c.h,Yf(this,kI(c.i)),this.m=c.m):c&&(d=String(c).match(RI))?(this.l=!1,Js(this,d[1]||"",!0),this.o=Xs(d[2]||""),this.g=Xs(d[3]||"",!0),Zs(this,d[4]),this.h=Xs(d[5]||"",!0),Yf(this,d[6]||"",!0),this.m=Xs(d[7]||"")):(this.l=!1,this.i=new ta(null,this.l))}br.prototype.toString=function(){let c=[];var d=this.j;d&&c.push(ea(d,MI,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(ea(d,MI,!0),"@"),c.push(Qs(f).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.u,f!=null&&c.push(":",String(f))),(f=this.h)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(ea(f,f.charAt(0)=="/"?VM:LM,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",ea(f,BM)),c.join("")},br.prototype.resolve=function(c){let d=Tn(this),f=!!c.j;f?Js(d,c.j):f=!!c.o,f?d.o=c.o:f=!!c.g,f?d.g=c.g:f=c.u!=null;var m=c.h;if(f)Zs(d,c.u);else if(f=!!c.h){if(m.charAt(0)!="/")if(this.g&&!this.h)m="/"+m;else{var D=d.h.lastIndexOf("/");D!=-1&&(m=d.h.slice(0,D+1)+m)}if(D=m,D==".."||D==".")m="";else if(D.indexOf("./")!=-1||D.indexOf("/.")!=-1){m=D.lastIndexOf("/",0)==0,D=D.split("/");let S=[];for(let V=0;V<D.length;){let ce=D[V++];ce=="."?m&&V==D.length&&S.push(""):ce==".."?((S.length>1||S.length==1&&S[0]!="")&&S.pop(),m&&V==D.length&&S.push("")):(S.push(ce),m=!0)}m=S.join("/")}else m=D}return f?d.h=m:f=c.i.toString()!=="",f?Yf(d,kI(c.i)):f=!!c.m,f&&(d.m=c.m),d};function Tn(c){return new br(c)}function Js(c,d,f){c.j=f?Xs(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function Zs(c,d){if(d){if(d=Number(d),isNaN(d)||d<0)throw Error("Bad port number "+d);c.u=d}else c.u=null}function Yf(c,d,f){d instanceof ta?(c.i=d,UM(c.i,c.l)):(f||(d=ea(d,jM)),c.i=new ta(d,c.l))}function Re(c,d,f){c.i.set(d,f)}function yu(c){return Re(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function Xs(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function ea(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,FM),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function FM(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var MI=/[#\/\?@]/g,LM=/[#\?:]/g,VM=/[#\?]/g,jM=/[#\?@]/g,BM=/#/g;function ta(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function yi(c){c.g||(c.g=new Map,c.h=0,c.i&&kM(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=ta.prototype,t.add=function(c,d){yi(this),this.i=null,c=wo(this,c);let f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function NI(c,d){yi(c),d=wo(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function xI(c,d){return yi(c),d=wo(c,d),c.g.has(d)}t.forEach=function(c,d){yi(this),this.g.forEach(function(f,m){f.forEach(function(D){c.call(d,D,m,this)},this)},this)};function PI(c,d){yi(c);let f=[];if(typeof d=="string")xI(c,d)&&(f=f.concat(c.g.get(wo(c,d))));else for(c=Array.from(c.g.values()),d=0;d<c.length;d++)f=f.concat(c[d]);return f}t.set=function(c,d){return yi(this),this.i=null,c=wo(this,c),xI(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},t.get=function(c,d){return c?(c=PI(this,c),c.length>0?String(c[0]):d):d};function OI(c,d,f){NI(c,d),f.length>0&&(c.i=null,c.g.set(wo(c,d),y(f)),c.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(let m=0;m<d.length;m++){var f=d[m];let D=Qs(f);f=PI(this,f);for(let S=0;S<f.length;S++){let V=D;f[S]!==""&&(V+="="+Qs(f[S])),c.push(V)}}return this.i=c.join("&")};function kI(c){let d=new ta;return d.i=c.i,c.g&&(d.g=new Map(c.g),d.h=c.h),d}function wo(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function UM(c,d){d&&!c.j&&(yi(c),c.i=null,c.g.forEach(function(f,m){let D=m.toLowerCase();m!=D&&(NI(this,m),OI(this,D,f))},c)),c.j=d}function $M(c,d){let f=new Ks;if(s.Image){let m=new Image;m.onload=h(Tr,f,"TestLoadImage: loaded",!0,d,m),m.onerror=h(Tr,f,"TestLoadImage: error",!1,d,m),m.onabort=h(Tr,f,"TestLoadImage: abort",!1,d,m),m.ontimeout=h(Tr,f,"TestLoadImage: timeout",!1,d,m),s.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=c}else d(!1)}function HM(c,d){let f=new Ks,m=new AbortController,D=setTimeout(()=>{m.abort(),Tr(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:m.signal}).then(S=>{clearTimeout(D),S.ok?Tr(f,"TestPingServer: ok",!0,d):Tr(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(D),Tr(f,"TestPingServer: error",!1,d)})}function Tr(c,d,f,m,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),m(f)}catch{}}function zM(){this.g=new TM}function vu(c){this.i=c.Sb||null,this.h=c.ab||!1}p(vu,dI),vu.prototype.g=function(){return new _u(this.i,this.h)};function _u(c,d){gt.call(this),this.H=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(_u,gt),t=_u.prototype,t.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=d,this.readyState=1,ra(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;let d={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(d.body=c),(this.H||s).fetch(new Request(this.D,d)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,na(this)),this.readyState=0},t.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,ra(this)),this.g&&(this.readyState=3,ra(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof s.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;FI(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function FI(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}t.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.B.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?na(this):ra(this),this.readyState==3&&FI(this)}},t.Oa=function(c){this.g&&(this.response=this.responseText=c,na(this))},t.Na=function(c){this.g&&(this.response=c,na(this))},t.ga=function(){this.g&&na(this)};function na(c){c.readyState=4,c.l=null,c.j=null,c.B=null,ra(c)}t.setRequestHeader=function(c,d){this.A.append(c,d)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function ra(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(_u.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function LI(c){let d="";return du(c,function(f,m){d+=m,d+=":",d+=f,d+=`\r
`}),d}function Jf(c,d,f){e:{for(m in f){var m=!1;break e}m=!0}m||(f=LI(f),typeof c=="string"?f!=null&&Qs(f):Re(c,d,f))}function Pe(c){gt.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(Pe,gt);var qM=/^https?$/i,GM=["POST","PUT"];t=Pe.prototype,t.Fa=function(c){this.H=c},t.ea=function(c,d,f,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():vI.g(),this.g.onreadystatechange=g(l(this.Ca,this));try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(S){VI(this,S);return}if(c=f||"",f=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var D in m)f.set(D,m[D]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(let S of m.keys())f.set(S,m.get(S));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(f.keys()).find(S=>S.toLowerCase()=="content-type"),D=s.FormData&&c instanceof s.FormData,!(Array.prototype.indexOf.call(GM,d,void 0)>=0)||m||D||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[S,V]of f)this.g.setRequestHeader(S,V);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(S){VI(this,S)}};function VI(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.o=5,jI(c),Eu(c)}function jI(c){c.A||(c.A=!0,It(c,"complete"),It(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,It(this,"complete"),It(this,"abort"),Eu(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Eu(this,!0)),Pe.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?BI(this):this.Xa())},t.Xa=function(){BI(this)};function BI(c){if(c.h&&typeof o<"u"){if(c.v&&Sr(c)==4)setTimeout(c.Ca.bind(c),0);else if(It(c,"readystatechange"),Sr(c)==4){c.h=!1;try{let S=c.ca();e:switch(S){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var m;if(m=S===0){let V=String(c.D).match(RI)[1]||null;!V&&s.self&&s.self.location&&(V=s.self.location.protocol.slice(0,-1)),m=!qM.test(V?V.toLowerCase():"")}f=m}if(f)It(c,"complete"),It(c,"success");else{c.o=6;try{var D=Sr(c)>2?c.g.statusText:""}catch{D=""}c.l=D+" ["+c.ca()+"]",jI(c)}}finally{Eu(c)}}}}function Eu(c,d){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);let f=c.g;c.g=null,d||It(c,"ready");try{f.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Sr(c){return c.g?c.g.readyState:0}t.ca=function(){try{return Sr(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),bM(d)}};function UI(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function WM(c){let d={};c=(c.g&&Sr(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<c.length;m++){if(_(c[m]))continue;var f=NM(c[m]);let D=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let S=d[D]||[];d[D]=S,S.push(f)}EM(d,function(m){return m.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ia(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function $I(c){this.za=0,this.i=[],this.j=new Ks,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ia("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ia("baseRetryDelayMs",5e3,c),this.Za=ia("retryDelaySeedMs",1e4,c),this.Ta=ia("forwardChannelMaxRetries",2,c),this.va=ia("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new DI(c&&c.concurrentRequestLimit),this.Ba=new zM,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=$I.prototype,t.ka=8,t.I=1,t.connect=function(c,d,f,m){wt(0),this.W=c,this.H=d||{},f&&m!==void 0&&(this.H.OSID=f,this.H.OAID=m),this.F=this.X,this.J=JI(this,null,this.W),wu(this)};function Zf(c){if(HI(c),c.I==3){var d=c.V++,f=Tn(c.J);if(Re(f,"SID",c.M),Re(f,"RID",d),Re(f,"TYPE","terminate"),oa(c,f),d=new Dr(c,c.j,d),d.M=2,d.A=yu(Tn(f)),f=!1,s.navigator&&s.navigator.sendBeacon)try{f=s.navigator.sendBeacon(d.A.toString(),"")}catch{}!f&&s.Image&&(new Image().src=d.A,f=!0),f||(d.g=ZI(d.j,null),d.g.ea(d.A)),d.F=Date.now(),gu(d)}YI(c)}function Iu(c){c.g&&(ep(c),c.g.cancel(),c.g=null)}function HI(c){Iu(c),c.v&&(s.clearTimeout(c.v),c.v=null),Cu(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&s.clearTimeout(c.m),c.m=null)}function wu(c){if(!bI(c.h)&&!c.m){c.m=!0;var d=c.Ea;Rt||v(),tt||(Rt(),tt=!0),w.add(d,c),c.D=0}}function KM(c,d){return TI(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=d.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=Ws(l(c.Ea,c,d),QI(c,c.D)),c.D++,!0)}t.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;let D=new Dr(this,this.j,c),S=this.o;if(this.U&&(S?(S=eI(S),nI(S,this.U)):S=this.U),this.u!==null||this.R||(D.J=S,S=null),this.S)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var m=this.i[f];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(d+=m,d>4096){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=qI(this,D,d),f=Tn(this.J),Re(f,"RID",c),Re(f,"CVER",22),this.G&&Re(f,"X-HTTP-Session-Id",this.G),oa(this,f),S&&(this.R?d="headers="+Qs(LI(S))+"&"+d:this.u&&Jf(f,this.u,S)),Qf(this.h,D),this.Ra&&Re(f,"TYPE","init"),this.S?(Re(f,"$req",d),Re(f,"SID","null"),D.U=!0,qf(D,f,null)):qf(D,f,d),this.I=2}}else this.I==3&&(c?zI(this,c):this.i.length==0||bI(this.h)||zI(this))};function zI(c,d){var f;d?f=d.l:f=c.V++;let m=Tn(c.J);Re(m,"SID",c.M),Re(m,"RID",f),Re(m,"AID",c.K),oa(c,m),c.u&&c.o&&Jf(m,c.u,c.o),f=new Dr(c,c.j,f,c.D+1),c.u===null&&(f.J=c.o),d&&(c.i=d.G.concat(c.i)),d=qI(c,f,1e3),f.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),Qf(c.h,f),qf(f,m,d)}function oa(c,d){c.H&&du(c.H,function(f,m){Re(d,m,f)}),c.l&&du({},function(f,m){Re(d,m,f)})}function qI(c,d,f){f=Math.min(c.i.length,f);let m=c.l?l(c.l.Ka,c.l,c):null;e:{var D=c.i;let ce=-1;for(;;){let Ge=["count="+f];ce==-1?f>0?(ce=D[0].g,Ge.push("ofs="+ce)):ce=0:Ge.push("ofs="+ce);let Se=!0;for(let nt=0;nt<f;nt++){var S=D[nt].g;let Sn=D[nt].map;if(S-=ce,S<0)ce=Math.max(0,D[nt].g-100),Se=!1;else try{S="req"+S+"_"||"";try{var V=Sn instanceof Map?Sn:Object.entries(Sn);for(let[_i,Ar]of V){let Rr=Ar;a(Ar)&&(Rr=Bf(Ar)),Ge.push(S+_i+"="+encodeURIComponent(Rr))}}catch(_i){throw Ge.push(S+"type="+encodeURIComponent("_badmap")),_i}}catch{m&&m(Sn)}}if(Se){V=Ge.join("&");break e}}V=void 0}return c=c.i.splice(0,f),d.G=c,V}function GI(c){if(!c.g&&!c.v){c.Y=1;var d=c.Da;Rt||v(),tt||(Rt(),tt=!0),w.add(d,c),c.A=0}}function Xf(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=Ws(l(c.Da,c),QI(c,c.A)),c.A++,!0)}t.Da=function(){if(this.v=null,WI(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=Ws(l(this.Wa,this),c)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,wt(10),Iu(this),WI(this))};function ep(c){c.B!=null&&(s.clearTimeout(c.B),c.B=null)}function WI(c){c.g=new Dr(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var d=Tn(c.na);Re(d,"RID","rpc"),Re(d,"SID",c.M),Re(d,"AID",c.K),Re(d,"CI",c.F?"0":"1"),!c.F&&c.ia&&Re(d,"TO",c.ia),Re(d,"TYPE","xmlhttp"),oa(c,d),c.u&&c.o&&Jf(d,c.u,c.o),c.O&&(c.g.H=c.O);var f=c.g;c=c.ba,f.M=1,f.A=yu(Tn(d)),f.u=null,f.R=!0,II(f,c)}t.Va=function(){this.C!=null&&(this.C=null,Iu(this),Xf(this),wt(19))};function Cu(c){c.C!=null&&(s.clearTimeout(c.C),c.C=null)}function KI(c,d){var f=null;if(c.g==d){Cu(c),ep(c),c.g=null;var m=2}else if(Kf(c.h,d))f=d.G,SI(c.h,d),m=1;else return;if(c.I!=0){if(d.o)if(m==1){f=d.u?d.u.length:0,d=Date.now()-d.F;var D=c.D;m=pu(),It(m,new gI(m,f)),wu(c)}else GI(c);else if(D=d.m,D==3||D==0&&d.X>0||!(m==1&&KM(c,d)||m==2&&Xf(c)))switch(f&&f.length>0&&(d=c.h,d.i=d.i.concat(f)),D){case 1:vi(c,5);break;case 4:vi(c,10);break;case 3:vi(c,6);break;default:vi(c,2)}}}function QI(c,d){let f=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(f*=2),f*d}function vi(c,d){if(c.j.info("Error code "+d),d==2){var f=l(c.bb,c),m=c.Ua;let D=!m;m=new br(m||"//www.google.com/images/cleardot.gif"),s.location&&s.location.protocol=="http"||Js(m,"https"),yu(m),D?$M(m.toString(),f):HM(m.toString(),f)}else wt(2);c.I=0,c.l&&c.l.pa(d),YI(c),HI(c)}t.bb=function(c){c?(this.j.info("Successfully pinged google.com"),wt(2)):(this.j.info("Failed to ping google.com"),wt(1))};function YI(c){if(c.I=0,c.ja=[],c.l){let d=AI(c.h);(d.length!=0||c.i.length!=0)&&(T(c.ja,d),T(c.ja,c.i),c.h.i.length=0,y(c.i),c.i.length=0),c.l.oa()}}function JI(c,d,f){var m=f instanceof br?Tn(f):new br(f);if(m.g!="")d&&(m.g=d+"."+m.g),Zs(m,m.u);else{var D=s.location;m=D.protocol,d=d?d+"."+D.hostname:D.hostname,D=+D.port;let S=new br(null);m&&Js(S,m),d&&(S.g=d),D&&Zs(S,D),f&&(S.h=f),m=S}return f=c.G,d=c.wa,f&&d&&Re(m,f,d),Re(m,"VER",c.ka),oa(c,m),m}function ZI(c,d,f){if(d&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Aa&&!c.ma?new Pe(new vu({ab:f})):new Pe(c.ma),d.Fa(c.L),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function XI(){}t=XI.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Du(){}Du.prototype.g=function(c,d){return new Lt(c,d)};function Lt(c,d){gt.call(this),this.g=new $I(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.sa&&(c?c["X-WebChannel-Client-Profile"]=d.sa:c={"X-WebChannel-Client-Profile":d.sa}),this.g.U=c,(c=d&&d.Qb)&&!_(c)&&(this.g.u=c),this.A=d&&d.supportsCrossDomainXhr||!1,this.v=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!_(d)&&(this.g.G=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new Co(this)}p(Lt,gt),Lt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Lt.prototype.close=function(){Zf(this.g)},Lt.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.v&&(f={},f.__data__=Bf(c),c=f);d.i.push(new OM(d.Ya++,c)),d.I==3&&wu(d)},Lt.prototype.N=function(){this.g.l=null,delete this.j,Zf(this.g),delete this.g,Lt.Z.N.call(this)};function ew(c){Uf.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}p(ew,Uf);function tw(){$f.call(this),this.status=1}p(tw,$f);function Co(c){this.g=c}p(Co,XI),Co.prototype.ra=function(){It(this.g,"a")},Co.prototype.qa=function(c){It(this.g,new ew(c))},Co.prototype.pa=function(c){It(this.g,new tw)},Co.prototype.oa=function(){It(this.g,"b")},Du.prototype.createWebChannel=Du.prototype.g,Lt.prototype.send=Lt.prototype.o,Lt.prototype.open=Lt.prototype.m,Lt.prototype.close=Lt.prototype.close,Fv=mr.createWebChannelTransport=function(){return new Du},kv=mr.getStatEventTarget=function(){return pu()},Ov=mr.Event=mi,Rh=mr.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},mu.NO_ERROR=0,mu.TIMEOUT=8,mu.HTTP_ERROR=6,Vc=mr.ErrorCode=mu,yI.COMPLETE="complete",Pv=mr.EventType=yI,hI.EventType=qs,qs.OPEN="a",qs.CLOSE="b",qs.ERROR="c",qs.MESSAGE="d",gt.prototype.listen=gt.prototype.J,ps=mr.WebChannel=hI,zj=mr.FetchXmlHttpFactory=vu,Pe.prototype.listenOnce=Pe.prototype.K,Pe.prototype.getLastError=Pe.prototype.Ha,Pe.prototype.getLastErrorCode=Pe.prototype.ya,Pe.prototype.getStatus=Pe.prototype.ca,Pe.prototype.getResponseJson=Pe.prototype.La,Pe.prototype.getResponseText=Pe.prototype.la,Pe.prototype.send=Pe.prototype.ea,Pe.prototype.setWithCredentials=Pe.prototype.Fa,xv=mr.XhrIo=Pe}).apply(typeof Ah<"u"?Ah:typeof self<"u"?self:typeof window<"u"?window:{});var QS="@firebase/firestore",YS="4.9.3";var ct=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};ct.UNAUTHENTICATED=new ct(null),ct.GOOGLE_CREDENTIALS=new ct("google-credentials-uid"),ct.FIRST_PARTY=new ct("first-party-uid"),ct.MOCK_USER=new ct("mock-user");var Vs="12.7.0";var uo=new Jr("@firebase/firestore");function ms(){return uo.logLevel}function U(t,...e){if(uo.logLevel<=fe.DEBUG){let n=e.map(TE);uo.debug(`Firestore (${Vs}): ${t}`,...n)}}function vr(t,...e){if(uo.logLevel<=fe.ERROR){let n=e.map(TE);uo.error(`Firestore (${Vs}): ${t}`,...n)}}function Cs(t,...e){if(uo.logLevel<=fe.WARN){let n=e.map(TE);uo.warn(`Firestore (${Vs}): ${t}`,...n)}}function TE(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function G(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,FA(t,r,n)}function FA(t,e,n){let r=`FIRESTORE (${Vs}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw vr(r),new Error(r)}function _e(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||FA(e,i,r)}function ie(t,e){return t}var N={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},$=class extends Wt{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var bn=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var Fh=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Uv=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ct.UNAUTHENTICATED))}shutdown(){}},$v=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},Hv=class{constructor(e){this.t=e,this.currentUser=ct.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){_e(this.o===void 0,42304);let r=this.i,i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve(),o=new bn;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new bn,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},a=u=>{U("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(U("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new bn)}},0),s()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(U("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(_e(typeof r.accessToken=="string",31837,{l:r}),new Fh(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return _e(e===null||typeof e=="string",2055,{h:e}),new ct(e)}},zv=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=ct.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},qv=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new zv(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(ct.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Lh=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Gv=class{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,kt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){_e(this.o===void 0,3512);let r=o=>{o.error!=null&&U("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,U("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{U("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):U("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Lh(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(_e(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Lh(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function qj(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Gc=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=qj(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%62))}return r}};function pe(t,e){return t<e?-1:t>e?1:0}function Wv(t,e){let n=Math.min(t.length,e.length);for(let r=0;r<n;r++){let i=t.charAt(r),o=e.charAt(r);if(i!==o)return Lv(i)===Lv(o)?pe(i,o):Lv(i)?1:-1}return pe(t.length,e.length)}var Gj=55296,Wj=57343;function Lv(t){let e=t.charCodeAt(0);return e>=Gj&&e<=Wj}function Ds(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var JS="__name__",Vh=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&G(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&G(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let o=t.compareSegments(e.get(i),n.get(i));if(o!==0)return o}return pe(e.length,n.length)}static compareSegments(e,n){let r=t.isNumericId(e),i=t.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?t.extractNumericId(e).compare(t.extractNumericId(n)):Wv(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return pr.fromString(e.substring(4,e.length-2))}},xe=class t extends Vh{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new $(N.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},Kj=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Kt=class t extends Vh{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return Kj.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===JS}static keyField(){return new t([JS])}static fromServerFormat(e){let n=[],r="",i=0,o=()=>{if(r.length===0)throw new $(N.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new $(N.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new $(N.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new $(N.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var Q=class t{constructor(e){this.path=e}static fromPath(e){return new t(xe.fromString(e))}static fromName(e){return new t(xe.fromString(e).popFirst(5))}static empty(){return new t(xe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&xe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return xe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new xe(e.slice()))}};function Qj(t,e,n){if(!n)throw new $(N.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Yj(t,e,n,r){if(e===!0&&r===!0)throw new $(N.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function ZS(t){if(!Q.isDocumentKey(t))throw new $(N.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function LA(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function SE(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":G(12329,{type:typeof t})}function gr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new $(N.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=SE(t);throw new $(N.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function ze(t,e){let n={typeString:t};return e&&(n.value=e),n}function su(t,e){if(!LA(t))throw new $(N.INVALID_ARGUMENT,"JSON must be an object");let n;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}let s=t[r];if(i&&typeof s!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){n=`Expected '${r}' field to equal '${o.value}'`;break}}if(n)throw new $(N.INVALID_ARGUMENT,n);return!0}var XS=-62135596800,eA=1e6,qe=class t{static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*eA);return new t(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new $(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new $(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<XS)throw new $(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new $(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/eA}_compareTo(e){return this.seconds===e.seconds?pe(this.nanoseconds,e.nanoseconds):pe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:t._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(su(e,t._jsonSchema))return new t(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-XS;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};qe._jsonSchemaVersion="firestore/timestamp/1.0",qe._jsonSchema={type:ze("string",qe._jsonSchemaVersion),seconds:ze("number"),nanoseconds:ze("number")};var X=class t{static fromTimestamp(e){return new t(e)}static min(){return new t(new qe(0,0))}static max(){return new t(new qe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Wc=-1,Kv=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};Kv.UNKNOWN_ID=-1;function Jj(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=X.fromTimestamp(r===1e9?new qe(n+1,0):new qe(n,r));return new lo(i,Q.empty(),e)}function Zj(t){return new lo(t.readTime,t.key,Wc)}var lo=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(X.min(),Q.empty(),Wc)}static max(){return new t(X.max(),Q.empty(),Wc)}};function Xj(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Q.comparator(t.documentKey,e.documentKey),n!==0?n:pe(t.largestBatchId,e.largestBatchId))}var eB="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Qv=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};async function js(t){if(t.code!==N.FAILED_PRECONDITION||t.message!==eB)throw t;U("LocalStore","Unexpectedly lost primary lease")}var O=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&G(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},u=>r(u))}),s=!0,o===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let l=u;n(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,n){return new t((r,i)=>{let o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}};function tB(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Bs(t){return t.name==="IndexedDbTransactionError"}var AE=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>r.writeSequenceNumber(i))}ae(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.ue&&this.ue(n),n}}t.ce=-1;return t})(),RE=-1;function au(t){return t==null}function Kc(t){return t===0&&1/t==-1/0}function nB(t){return typeof t=="number"&&Number.isInteger(t)&&!Kc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var VA="";function rB(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=tA(e)),e=iB(t.get(n),e);return tA(e)}function iB(t,e){let n=e,r=t.length;for(let i=0;i<r;i++){let o=t.charAt(i);switch(o){case"\0":n+="";break;case VA:n+="";break;default:n+=o}}return n}function tA(t){return t+VA+""}var oB="remoteDocuments",jA="owner";var BA="mutationQueues";var UA="mutations";var $A="documentMutations",sB="remoteDocumentsV14";var HA="remoteDocumentGlobal";var zA="targets";var qA="targetDocuments";var GA="targetGlobal",WA="collectionParents";var KA="clientMetadata";var QA="bundles";var YA="namedQueries";var aB="indexConfiguration";var cB="indexState";var uB="indexEntries";var JA="documentOverlays";var lB="globals";var dB=[BA,UA,$A,oB,zA,jA,GA,qA,KA,HA,WA,QA,YA],Xte=[...dB,JA],hB=[BA,UA,$A,sB,zA,jA,GA,qA,KA,HA,WA,QA,YA,JA],fB=hB,pB=[...fB,aB,cB,uB];var ene=[...pB,lB];function nA(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function pi(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function ZA(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Oe=class t{constructor(e,n){this.comparator=e,this.root=n||Gn.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Gn.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Gn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new _s(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new _s(this.root,e,this.comparator,!1)}getReverseIterator(){return new _s(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new _s(this.root,e,this.comparator,!0)}},_s=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Gn=class t{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new t(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw G(43730,{key:this.key,value:this.value});if(this.right.isRed())throw G(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw G(27949);return e+(this.isRed()?0:1)}};Gn.EMPTY=null,Gn.RED=!0,Gn.BLACK=!1;Gn.EMPTY=new class{constructor(){this.size=0}get key(){throw G(57766)}get value(){throw G(16141)}get color(){throw G(16727)}get left(){throw G(29726)}get right(){throw G(36894)}copy(e,n,r,i,o){return this}insert(e,n,r){return new Gn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var ut=class t{constructor(e){this.comparator=e,this.data=new Oe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new jh(this.data.getIterator())}getIteratorFrom(e){return new jh(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},jh=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var dn=class t{constructor(e){this.fields=e,e.sort(Kt.comparator)}static empty(){return new t([])}unionWith(e){let n=new ut(Kt.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ds(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var Bh=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Et=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Bh("Invalid base64 string: "+o):o}})(e);return new t(n)}static fromUint8Array(e){let n=(function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o})(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return pe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Et.EMPTY_BYTE_STRING=new Et("");var mB=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function _r(t){if(_e(!!t,39018),typeof t=="string"){let e=0,n=mB.exec(t);if(_e(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ne(t.seconds),nanos:Ne(t.nanos)}}function Ne(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Er(t){return typeof t=="string"?Et.fromBase64String(t):Et.fromUint8Array(t)}var XA="server_timestamp",eR="__type__",tR="__previous_value__",nR="__local_write_time__";function ME(t){return(t?.mapValue?.fields||{})[eR]?.stringValue===XA}function vf(t){let e=t.mapValue.fields[tR];return ME(e)?vf(e):e}function Qc(t){let e=_r(t.mapValue.fields[nR].timestampValue);return new qe(e.seconds,e.nanos)}var Yv=class{constructor(e,n,r,i,o,s,a,u,l,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l,this.isUsingEmulator=h}},Uh="(default)",$h=class t{constructor(e,n){this.projectId=e,this.database=n||Uh}static empty(){return new t("","")}get isDefaultDatabase(){return this.database===Uh}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var NE="__type__",rR="__max__",Mh={mapValue:{fields:{__type__:{stringValue:rR}}}},xE="__vector__",bs="value";function li(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ME(t)?4:oR(t)?9007199254740991:iR(t)?10:11:G(28295,{value:t})}function Kn(t,e){if(t===e)return!0;let n=li(t);if(n!==li(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Qc(t).isEqual(Qc(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=_r(i.timestampValue),a=_r(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,o){return Er(i.bytesValue).isEqual(Er(o.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,o){return Ne(i.geoPointValue.latitude)===Ne(o.geoPointValue.latitude)&&Ne(i.geoPointValue.longitude)===Ne(o.geoPointValue.longitude)})(t,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return Ne(i.integerValue)===Ne(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Ne(i.doubleValue),a=Ne(o.doubleValue);return s===a?Kc(s)===Kc(a):isNaN(s)&&isNaN(a)}return!1})(t,e);case 9:return Ds(t.arrayValue.values||[],e.arrayValue.values||[],Kn);case 10:case 11:return(function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(nA(s)!==nA(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!Kn(s[u],a[u])))return!1;return!0})(t,e);default:return G(52216,{left:t})}}function Yc(t,e){return(t.values||[]).find(n=>Kn(n,e))!==void 0}function Ts(t,e){if(t===e)return 0;let n=li(t),r=li(e);if(n!==r)return pe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return pe(t.booleanValue,e.booleanValue);case 2:return(function(o,s){let a=Ne(o.integerValue||o.doubleValue),u=Ne(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1})(t,e);case 3:return rA(t.timestampValue,e.timestampValue);case 4:return rA(Qc(t),Qc(e));case 5:return Wv(t.stringValue,e.stringValue);case 6:return(function(o,s){let a=Er(o),u=Er(s);return a.compareTo(u)})(t.bytesValue,e.bytesValue);case 7:return(function(o,s){let a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=pe(a[l],u[l]);if(h!==0)return h}return pe(a.length,u.length)})(t.referenceValue,e.referenceValue);case 8:return(function(o,s){let a=pe(Ne(o.latitude),Ne(s.latitude));return a!==0?a:pe(Ne(o.longitude),Ne(s.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return iA(t.arrayValue,e.arrayValue);case 10:return(function(o,s){let a=o.fields||{},u=s.fields||{},l=a[bs]?.arrayValue,h=u[bs]?.arrayValue,p=pe(l?.values?.length||0,h?.values?.length||0);return p!==0?p:iA(l,h)})(t.mapValue,e.mapValue);case 11:return(function(o,s){if(o===Mh.mapValue&&s===Mh.mapValue)return 0;if(o===Mh.mapValue)return 1;if(s===Mh.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),l=s.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let g=Wv(u[p],h[p]);if(g!==0)return g;let y=Ts(a[u[p]],l[h[p]]);if(y!==0)return y}return pe(u.length,h.length)})(t.mapValue,e.mapValue);default:throw G(23264,{he:n})}}function rA(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return pe(t,e);let n=_r(t),r=_r(e),i=pe(n.seconds,r.seconds);return i!==0?i:pe(n.nanos,r.nanos)}function iA(t,e){let n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){let o=Ts(n[i],r[i]);if(o)return o}return pe(n.length,r.length)}function Ss(t){return Jv(t)}function Jv(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){let r=_r(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return Er(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return Q.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",i=!0;for(let o of n.values||[])i?i=!1:r+=",",r+=Jv(o);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){let r=Object.keys(n.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${Jv(n.fields[s])}`;return i+"}"})(t.mapValue):G(61005,{value:t})}function Ph(t){switch(li(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=vf(t);return e?16+Ph(e):16;case 5:return 2*t.stringValue.length;case 6:return Er(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,o)=>i+Ph(o),0)})(t.arrayValue);case 10:case 11:return(function(r){let i=0;return pi(r.fields,(o,s)=>{i+=o.length+Ph(s)}),i})(t.mapValue);default:throw G(13486,{value:t})}}function Zv(t){return!!t&&"integerValue"in t}function PE(t){return!!t&&"arrayValue"in t}function oA(t){return!!t&&"nullValue"in t}function sA(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Oh(t){return!!t&&"mapValue"in t}function iR(t){return(t?.mapValue?.fields||{})[NE]?.stringValue===xE}function Uc(t){if(t.geoPointValue)return{geoPointValue:M({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:M({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return pi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Uc(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Uc(t.arrayValue.values[n]);return e}return M({},t)}function oR(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===rR}var nne={mapValue:{fields:{[NE]:{stringValue:xE},[bs]:{arrayValue:{}}}}};var Ft=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Oh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Uc(n)}setAll(e){let n=Kt.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){let u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=Uc(s):i.push(a.lastSegment())});let o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){let n=this.field(e.popLast());Oh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Kn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Oh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){pi(n,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new t(Uc(this.value))}};function sR(t){let e=[];return pi(t.fields,(n,r)=>{let i=new Kt([n]);if(Oh(r)){let o=sR(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new dn(e)}var Yt=class t{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new t(e,0,X.min(),X.min(),X.min(),Ft.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,X.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,X.min(),X.min(),Ft.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,X.min(),X.min(),Ft.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(X.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ft.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ft.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=X.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var As=class{constructor(e,n){this.position=e,this.inclusive=n}};function aA(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let o=e[i],s=t.position[i];if(o.field.isKeyField()?r=Q.comparator(Q.fromName(s.referenceValue),n.key):r=Ts(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function cA(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Kn(t.position[n],e.position[n]))return!1;return!0}var Rs=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function gB(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var Hh=class{},et=class t extends Hh{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new e_(e,n,r):n==="array-contains"?new r_(e,r):n==="in"?new i_(e,r):n==="not-in"?new o_(e,r):n==="array-contains-any"?new s_(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new t_(e,r):new n_(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ts(n,this.value)):n!==null&&li(this.value)===li(n)&&this.matchesComparison(Ts(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return G(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Qn=class t extends Hh{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new t(e,n)}matches(e){return aR(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}};function aR(t){return t.op==="and"}function cR(t){return yB(t)&&aR(t)}function yB(t){for(let e of t.filters)if(e instanceof Qn)return!1;return!0}function Xv(t){if(t instanceof et)return t.field.canonicalString()+t.op.toString()+Ss(t.value);if(cR(t))return t.filters.map(e=>Xv(e)).join(",");{let e=t.filters.map(n=>Xv(n)).join(",");return`${t.op}(${e})`}}function uR(t,e){return t instanceof et?(function(r,i){return i instanceof et&&r.op===i.op&&r.field.isEqual(i.field)&&Kn(r.value,i.value)})(t,e):t instanceof Qn?(function(r,i){return i instanceof Qn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&uR(s,i.filters[a]),!0):!1})(t,e):void G(19439)}function lR(t){return t instanceof et?(function(n){return`${n.field.canonicalString()} ${n.op} ${Ss(n.value)}`})(t):t instanceof Qn?(function(n){return n.op.toString()+" {"+n.getFilters().map(lR).join(" ,")+"}"})(t):"Filter"}var e_=class extends et{constructor(e,n,r){super(e,n,r),this.key=Q.fromName(r.referenceValue)}matches(e){let n=Q.comparator(e.key,this.key);return this.matchesComparison(n)}},t_=class extends et{constructor(e,n){super(e,"in",n),this.keys=dR("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},n_=class extends et{constructor(e,n){super(e,"not-in",n),this.keys=dR("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function dR(t,e){return(e.arrayValue?.values||[]).map(n=>Q.fromName(n.referenceValue))}var r_=class extends et{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return PE(n)&&Yc(n.arrayValue,this.value)}},i_=class extends et{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&Yc(this.value.arrayValue,n)}},o_=class extends et{constructor(e,n){super(e,"not-in",n)}matches(e){if(Yc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Yc(this.value.arrayValue,n)}},s_=class extends et{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!PE(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Yc(this.value.arrayValue,r))}};var a_=class{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Te=null}};function uA(t,e=null,n=[],r=[],i=null,o=null,s=null){return new a_(t,e,n,r,i,o,s)}function OE(t){let e=ie(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Xv(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>(function(o){return o.field.canonicalString()+o.dir})(r)).join(","),au(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ss(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ss(r)).join(",")),e.Te=n}return e.Te}function kE(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!gB(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!uR(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!cA(t.startAt,e.startAt)&&cA(t.endAt,e.endAt)}function c_(t){return Q.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var Ms=class{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}};function vB(t,e,n,r,i,o,s,a){return new Ms(t,e,n,r,i,o,s,a)}function _f(t){return new Ms(t)}function lA(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function _B(t){return t.collectionGroup!==null}function $c(t){let e=ie(t);if(e.Ie===null){e.Ie=[];let n=new Set;for(let o of e.explicitOrderBy)e.Ie.push(o),n.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new ut(Kt.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new Rs(o,r))}),n.has(Kt.keyField().canonicalString())||e.Ie.push(new Rs(Kt.keyField(),r))}return e.Ie}function Wn(t){let e=ie(t);return e.Ee||(e.Ee=EB(e,$c(t))),e.Ee}function EB(t,e){if(t.limitType==="F")return uA(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Rs(i.field,o)});let n=t.endAt?new As(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new As(t.startAt.position,t.startAt.inclusive):null;return uA(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function u_(t,e,n){return new Ms(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ef(t,e){return kE(Wn(t),Wn(e))&&t.limitType===e.limitType}function hR(t){return`${OE(Wn(t))}|lt:${t.limitType}`}function gs(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>lR(i)).join(", ")}]`),au(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Ss(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Ss(i)).join(",")),`Target(${r})`})(Wn(t))}; limitType=${t.limitType})`}function If(t,e){return e.isFoundDocument()&&(function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Q.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(t,e)&&(function(r,i){for(let o of $c(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(t,e)&&(function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0})(t,e)&&(function(r,i){return!(r.startAt&&!(function(s,a,u){let l=aA(s,a,u);return s.inclusive?l<=0:l<0})(r.startAt,$c(r),i)||r.endAt&&!(function(s,a,u){let l=aA(s,a,u);return s.inclusive?l>=0:l>0})(r.endAt,$c(r),i))})(t,e)}function IB(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function fR(t){return(e,n)=>{let r=!1;for(let i of $c(t)){let o=wB(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function wB(t,e,n){let r=t.field.isKeyField()?Q.comparator(e.key,n.key):(function(o,s,a){let u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?Ts(u,l):G(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return G(19790,{direction:t.dir})}}var Ir=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){pi(this.inner,(n,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return ZA(this.inner)}size(){return this.innerSize}};var CB=new Oe(Q.comparator);function wr(){return CB}var pR=new Oe(Q.comparator);function jc(...t){let e=pR;for(let n of t)e=e.insert(n.key,n);return e}function mR(t){let e=pR;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ao(){return Hc()}function gR(){return Hc()}function Hc(){return new Ir(t=>t.toString(),(t,e)=>t.isEqual(e))}var DB=new Oe(Q.comparator),bB=new ut(Q.comparator);function me(...t){let e=bB;for(let n of t)e=e.add(n);return e}var TB=new ut(pe);function SB(){return TB}function FE(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Kc(e)?"-0":e}}function yR(t){return{integerValue:""+t}}function AB(t,e){return nB(e)?yR(e):FE(t,e)}var Ns=class{constructor(){this._=void 0}};function RB(t,e,n){return t instanceof ho?(function(i,o){let s={fields:{[eR]:{stringValue:XA},[nR]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&ME(o)&&(o=vf(o)),o&&(s.fields[tR]=o),{mapValue:s}})(n,e):t instanceof fo?_R(t,e):t instanceof po?ER(t,e):(function(i,o){let s=vR(i,o),a=dA(s)+dA(i.Ae);return Zv(s)&&Zv(i.Ae)?yR(a):FE(i.serializer,a)})(t,e)}function MB(t,e,n){return t instanceof fo?_R(t,e):t instanceof po?ER(t,e):n}function vR(t,e){return t instanceof xs?(function(r){return Zv(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}var ho=class extends Ns{},fo=class extends Ns{constructor(e){super(),this.elements=e}};function _R(t,e){let n=IR(e);for(let r of t.elements)n.some(i=>Kn(i,r))||n.push(r);return{arrayValue:{values:n}}}var po=class extends Ns{constructor(e){super(),this.elements=e}};function ER(t,e){let n=IR(e);for(let r of t.elements)n=n.filter(i=>!Kn(i,r));return{arrayValue:{values:n}}}var xs=class extends Ns{constructor(e,n){super(),this.serializer=e,this.Ae=n}};function dA(t){return Ne(t.integerValue||t.doubleValue)}function IR(t){return PE(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var l_=class{constructor(e,n){this.field=e,this.transform=n}};function NB(t,e){return t.field.isEqual(e.field)&&(function(r,i){return r instanceof fo&&i instanceof fo||r instanceof po&&i instanceof po?Ds(r.elements,i.elements,Kn):r instanceof xs&&i instanceof xs?Kn(r.Ae,i.Ae):r instanceof ho&&i instanceof ho})(t.transform,e.transform)}var d_=class{constructor(e,n){this.version=e,this.transformResults=n}},ln=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function kh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var Ps=class{};function wR(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Jc(t.key,ln.none()):new mo(t.key,t.data,ln.none());{let n=t.data,r=Ft.empty(),i=new ut(Kt.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Yn(t.key,r,new dn(i.toArray()),ln.none())}}function xB(t,e,n){t instanceof mo?(function(i,o,s){let a=i.value.clone(),u=fA(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()})(t,e,n):t instanceof Yn?(function(i,o,s){if(!kh(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=fA(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(CR(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()})(t,e,n):(function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,n)}function zc(t,e,n,r){return t instanceof mo?(function(o,s,a,u){if(!kh(o.precondition,s))return a;let l=o.value.clone(),h=pA(o.fieldTransforms,u,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null})(t,e,n,r):t instanceof Yn?(function(o,s,a,u){if(!kh(o.precondition,s))return a;let l=pA(o.fieldTransforms,u,s),h=s.data;return h.setAll(CR(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))})(t,e,n,r):(function(o,s,a){return kh(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a})(t,e,n)}function PB(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),o=vR(r.transform,i||null);o!=null&&(n===null&&(n=Ft.empty()),n.set(r.field,o))}return n||null}function hA(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ds(r,i,(o,s)=>NB(o,s))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var mo=class extends Ps{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Yn=class extends Ps{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function CR(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function fA(t,e,n){let r=new Map;_e(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){let o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,MB(s,a,n[i]))}return r}function pA(t,e,n){let r=new Map;for(let i of t){let o=i.transform,s=n.data.field(i.field);r.set(i.field,RB(o,s,e))}return r}var Jc=class extends Ps{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},zh=class extends Ps{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var h_=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&xB(o,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=zc(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=zc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=gR();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;let u=wR(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(X.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),me())}isEqual(e){return this.batchId===e.batchId&&Ds(this.mutations,e.mutations,(n,r)=>hA(n,r))&&Ds(this.baseMutations,e.baseMutations,(n,r)=>hA(n,r))}},f_=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){_e(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return DB})(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)}};var p_=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var m_=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var $e,ve;function DR(t){switch(t){case N.OK:return G(64938);case N.CANCELLED:case N.UNKNOWN:case N.DEADLINE_EXCEEDED:case N.RESOURCE_EXHAUSTED:case N.INTERNAL:case N.UNAVAILABLE:case N.UNAUTHENTICATED:return!1;case N.INVALID_ARGUMENT:case N.NOT_FOUND:case N.ALREADY_EXISTS:case N.PERMISSION_DENIED:case N.FAILED_PRECONDITION:case N.ABORTED:case N.OUT_OF_RANGE:case N.UNIMPLEMENTED:case N.DATA_LOSS:return!0;default:return G(15467,{code:t})}}function bR(t){if(t===void 0)return vr("GRPC error has no .code"),N.UNKNOWN;switch(t){case $e.OK:return N.OK;case $e.CANCELLED:return N.CANCELLED;case $e.UNKNOWN:return N.UNKNOWN;case $e.DEADLINE_EXCEEDED:return N.DEADLINE_EXCEEDED;case $e.RESOURCE_EXHAUSTED:return N.RESOURCE_EXHAUSTED;case $e.INTERNAL:return N.INTERNAL;case $e.UNAVAILABLE:return N.UNAVAILABLE;case $e.UNAUTHENTICATED:return N.UNAUTHENTICATED;case $e.INVALID_ARGUMENT:return N.INVALID_ARGUMENT;case $e.NOT_FOUND:return N.NOT_FOUND;case $e.ALREADY_EXISTS:return N.ALREADY_EXISTS;case $e.PERMISSION_DENIED:return N.PERMISSION_DENIED;case $e.FAILED_PRECONDITION:return N.FAILED_PRECONDITION;case $e.ABORTED:return N.ABORTED;case $e.OUT_OF_RANGE:return N.OUT_OF_RANGE;case $e.UNIMPLEMENTED:return N.UNIMPLEMENTED;case $e.DATA_LOSS:return N.DATA_LOSS;default:return G(39323,{code:t})}}(ve=$e||($e={}))[ve.OK=0]="OK",ve[ve.CANCELLED=1]="CANCELLED",ve[ve.UNKNOWN=2]="UNKNOWN",ve[ve.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ve[ve.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ve[ve.NOT_FOUND=5]="NOT_FOUND",ve[ve.ALREADY_EXISTS=6]="ALREADY_EXISTS",ve[ve.PERMISSION_DENIED=7]="PERMISSION_DENIED",ve[ve.UNAUTHENTICATED=16]="UNAUTHENTICATED",ve[ve.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ve[ve.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ve[ve.ABORTED=10]="ABORTED",ve[ve.OUT_OF_RANGE=11]="OUT_OF_RANGE",ve[ve.UNIMPLEMENTED=12]="UNIMPLEMENTED",ve[ve.INTERNAL=13]="INTERNAL",ve[ve.UNAVAILABLE=14]="UNAVAILABLE",ve[ve.DATA_LOSS=15]="DATA_LOSS";var OB=null;function kB(){return new TextEncoder}var FB=new pr([4294967295,4294967295],0);function mA(t){let e=kB().encode(t),n=new Nv;return n.update(e),new Uint8Array(n.digest())}function gA(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new pr([n,r],0),new pr([i,o],0)]}var g_=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new co(`Invalid padding: ${n}`);if(r<0)throw new co(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new co(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new co(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=pr.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(pr.fromNumber(r)));return i.compare(FB)===1&&(i=new pr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;let n=mA(e),[r,i]=gA(n);for(let o=0;o<this.hashCount;o++){let s=this.ye(r,i,o);if(!this.we(s))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new t(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.ge===0)return;let n=mA(e),[r,i]=gA(n);for(let o=0;o<this.hashCount;o++){let s=this.ye(r,i,o);this.Se(s)}}Se(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},co=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var qh=class t{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,Zc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(X.min(),i,new Oe(pe),wr(),me())}},Zc=class t{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,me(),me(),me())}};var Es=class{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}},Gh=class{constructor(e,n){this.targetId=e,this.Ce=n}},Wh=class{constructor(e,n,r=Et.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},Kh=class{constructor(){this.ve=0,this.Fe=yA(),this.Me=Et.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=me(),n=me(),r=me();return this.Fe.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:G(38017,{changeType:o})}}),new Zc(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=yA()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,_e(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}},y_=class{constructor(e){this.Ge=e,this.ze=new Map,this.je=wr(),this.Je=Nh(),this.He=Nh(),this.Ye=new Oe(pe)}Ze(e){for(let n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(let n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{let r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:G(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,i)=>{this.rt(i)&&n(i)})}st(e){let n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){let o=i.target;if(c_(o))if(r===0){let s=new Q(o.path);this.et(n,s,Yt.newNoDocument(s,X.min()))}else _e(r===1,20013,{expectedCount:r});else{let s=this._t(n);if(s!==r){let a=this.ut(e),u=a?this.ct(a,e,s):1;if(u!==0){this.it(n);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,l)}OB?.lt((function(h,p,g,y,T){let R={localCacheCount:h,existenceFilterCount:p.count,databaseId:g.database,projectId:g.projectId},A=p.unchangedNames;return A&&(R.bloomFilter={applied:T===0,hashCount:A?.hashCount??0,bitmapLength:A?.bits?.bitmap?.length??0,padding:A?.bits?.padding??0,mightContain:F=>y?.mightContain(F)??!1}),R})(s,e.Ce,this.Ge.ht(),a,u))}}}}ut(e){let n=e.Ce.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n,s,a;try{s=Er(r).toUint8Array()}catch(u){if(u instanceof Bh)return Cs("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new g_(s,i,o)}catch(u){return Cs(u instanceof co?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.ge===0?null:a}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){let r=this.Ge.getRemoteKeysForTarget(n),i=0;return r.forEach(o=>{let s=this.Ge.ht(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.et(n,o,null),i++)}),i}Tt(e){let n=new Map;this.ze.forEach((o,s)=>{let a=this.ot(s);if(a){if(o.current&&c_(a.target)){let u=new Q(a.target.path);this.It(u).has(s)||this.Et(s,u)||this.et(s,u,Yt.newNoDocument(u,e))}o.Be&&(n.set(s,o.ke()),o.qe())}});let r=me();this.He.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let l=this.ot(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.je.forEach((o,s)=>s.setReadTime(e));let i=new qh(e,n,this.Ye,this.je,r);return this.je=wr(),this.Je=Nh(),this.He=Nh(),this.Ye=new Oe(pe),i}Xe(e,n){if(!this.rt(e))return;let r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;let i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){let n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Kh,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new ut(pe),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new ut(pe),this.Je=this.Je.insert(e,n)),n}rt(e){let n=this.ot(e)!==null;return n||U("WatchChangeAggregator","Detected inactive target",e),n}ot(e){let n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Kh),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}};function Nh(){return new Oe(Q.comparator)}function yA(){return new Oe(Q.comparator)}var LB={asc:"ASCENDING",desc:"DESCENDING"},VB={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},jB={and:"AND",or:"OR"},v_=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function __(t,e){return t.useProto3Json||au(e)?e:{value:e}}function Qh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function TR(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function BB(t,e){return Qh(t,e.toTimestamp())}function Qt(t){return _e(!!t,49232),X.fromTimestamp((function(n){let r=_r(n);return new qe(r.seconds,r.nanos)})(t))}function LE(t,e){return E_(t,e).canonicalString()}function E_(t,e){let n=(function(i){return new xe(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?n:n.child(e)}function SR(t){let e=xe.fromString(t);return _e(PR(e),10190,{key:e.toString()}),e}function Yh(t,e){return LE(t.databaseId,e.path)}function qc(t,e){let n=SR(e);if(n.get(1)!==t.databaseId.projectId)throw new $(N.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new $(N.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Q(RR(n))}function AR(t,e){return LE(t.databaseId,e)}function UB(t){let e=SR(t);return e.length===4?xe.emptyPath():RR(e)}function I_(t){return new xe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function RR(t){return _e(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function vA(t,e,n){return{name:Yh(t,e),fields:n.value.mapValue.fields}}function $B(t,e){return"found"in e?(function(r,i){_e(!!i.found,43571),i.found.name,i.found.updateTime;let o=qc(r,i.found.name),s=Qt(i.found.updateTime),a=i.found.createTime?Qt(i.found.createTime):X.min(),u=new Ft({mapValue:{fields:i.found.fields}});return Yt.newFoundDocument(o,s,a,u)})(t,e):"missing"in e?(function(r,i){_e(!!i.missing,3894),_e(!!i.readTime,22933);let o=qc(r,i.missing),s=Qt(i.readTime);return Yt.newNoDocument(o,s)})(t,e):G(7234,{result:e})}function HB(t,e){let n;if("targetChange"in e){e.targetChange;let r=(function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:G(39313,{state:l})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(l,h){return l.useProto3Json?(_e(h===void 0||typeof h=="string",58123),Et.fromBase64String(h||"")):(_e(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Et.fromUint8Array(h||new Uint8Array))})(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&(function(l){let h=l.code===void 0?N.UNKNOWN:bR(l.code);return new $(h,l.message||"")})(s);n=new Wh(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=qc(t,r.document.name),o=Qt(r.document.updateTime),s=r.document.createTime?Qt(r.document.createTime):X.min(),a=new Ft({mapValue:{fields:r.document.fields}}),u=Yt.newFoundDocument(i,o,s,a),l=r.targetIds||[],h=r.removedTargetIds||[];n=new Es(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=qc(t,r.document),o=r.readTime?Qt(r.readTime):X.min(),s=Yt.newNoDocument(i,o),a=r.removedTargetIds||[];n=new Es([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=qc(t,r.document),o=r.removedTargetIds||[];n=new Es([],o,i,null)}else{if(!("filter"in e))return G(11601,{Rt:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new m_(i,o),a=r.targetId;n=new Gh(a,s)}}return n}function MR(t,e){let n;if(e instanceof mo)n={update:vA(t,e.key,e.value)};else if(e instanceof Jc)n={delete:Yh(t,e.key)};else if(e instanceof Yn)n={update:vA(t,e.key,e.data),updateMask:ZB(e.fieldMask)};else{if(!(e instanceof zh))return G(16599,{Vt:e.type});n={verify:Yh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>(function(o,s){let a=s.transform;if(a instanceof ho)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof fo)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof po)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof xs)return{fieldPath:s.field.canonicalString(),increment:a.Ae};throw G(20930,{transform:s.transform})})(0,r))),e.precondition.isNone||(n.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:BB(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:G(27497)})(t,e.precondition)),n}function zB(t,e){return t&&t.length>0?(_e(e!==void 0,14353),t.map(n=>(function(i,o){let s=i.updateTime?Qt(i.updateTime):Qt(o);return s.isEqual(X.min())&&(s=Qt(o)),new d_(s,i.transformResults||[])})(n,e))):[]}function qB(t,e){return{documents:[AR(t,e.path)]}}function GB(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=AR(t,i);let o=(function(l){if(l.length!==0)return xR(Qn.create(l,"and"))})(e.filters);o&&(n.structuredQuery.where=o);let s=(function(l){if(l.length!==0)return l.map(h=>(function(g){return{field:ys(g.field),direction:QB(g.dir)}})(h))})(e.orderBy);s&&(n.structuredQuery.orderBy=s);let a=__(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=(function(l){return{before:l.inclusive,values:l.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(l){return{before:!l.inclusive,values:l.position}})(e.endAt)),{ft:n,parent:i}}function WB(t){let e=UB(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){_e(r===1,65062);let h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];n.where&&(o=(function(p){let g=NR(p);return g instanceof Qn&&cR(g)?g.getFilters():[g]})(n.where));let s=[];n.orderBy&&(s=(function(p){return p.map(g=>(function(T){return new Rs(vs(T.field),(function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(T.direction))})(g))})(n.orderBy));let a=null;n.limit&&(a=(function(p){let g;return g=typeof p=="object"?p.value:p,au(g)?null:g})(n.limit));let u=null;n.startAt&&(u=(function(p){let g=!!p.before,y=p.values||[];return new As(y,g)})(n.startAt));let l=null;return n.endAt&&(l=(function(p){let g=!p.before,y=p.values||[];return new As(y,g)})(n.endAt)),vB(e,i,s,o,a,"F",u,l)}function KB(t,e){let n=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return G(28987,{purpose:i})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function NR(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=vs(n.unaryFilter.field);return et.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=vs(n.unaryFilter.field);return et.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=vs(n.unaryFilter.field);return et.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=vs(n.unaryFilter.field);return et.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return G(61313);default:return G(60726)}})(t):t.fieldFilter!==void 0?(function(n){return et.create(vs(n.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return G(58110);default:return G(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Qn.create(n.compositeFilter.filters.map(r=>NR(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return G(1026)}})(n.compositeFilter.op))})(t):G(30097,{filter:t})}function QB(t){return LB[t]}function YB(t){return VB[t]}function JB(t){return jB[t]}function ys(t){return{fieldPath:t.canonicalString()}}function vs(t){return Kt.fromServerFormat(t.fieldPath)}function xR(t){return t instanceof et?(function(n){if(n.op==="=="){if(sA(n.value))return{unaryFilter:{field:ys(n.field),op:"IS_NAN"}};if(oA(n.value))return{unaryFilter:{field:ys(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(sA(n.value))return{unaryFilter:{field:ys(n.field),op:"IS_NOT_NAN"}};if(oA(n.value))return{unaryFilter:{field:ys(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ys(n.field),op:YB(n.op),value:n.value}}})(t):t instanceof Qn?(function(n){let r=n.getFilters().map(i=>xR(i));return r.length===1?r[0]:{compositeFilter:{op:JB(n.op),filters:r}}})(t):G(54877,{filter:t})}function ZB(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function PR(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var Xc=class t{constructor(e,n,r,i,o=X.min(),s=X.min(),a=Et.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var w_=class{constructor(e){this.yt=e}};function XB(t){let e=WB({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?u_(e,e.limit,"L"):e}var Jh=class{constructor(){}Dt(e,n){this.Ct(e,n),n.vt()}Ct(e,n){if("nullValue"in e)this.Ft(n,5);else if("booleanValue"in e)this.Ft(n,10),n.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(n,15),n.Mt(Ne(e.integerValue));else if("doubleValue"in e){let r=Ne(e.doubleValue);isNaN(r)?this.Ft(n,13):(this.Ft(n,15),Kc(r)?n.Mt(0):n.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(n,20),typeof r=="string"&&(r=_r(r)),n.xt(`${r.seconds||""}`),n.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,n),this.Nt(n);else if("bytesValue"in e)this.Ft(n,30),n.Bt(Er(e.bytesValue)),this.Nt(n);else if("referenceValue"in e)this.Lt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ft(n,45),n.Mt(r.latitude||0),n.Mt(r.longitude||0)}else"mapValue"in e?oR(e)?this.Ft(n,Number.MAX_SAFE_INTEGER):iR(e)?this.kt(e.mapValue,n):(this.qt(e.mapValue,n),this.Nt(n)):"arrayValue"in e?(this.Qt(e.arrayValue,n),this.Nt(n)):G(19022,{$t:e})}Ot(e,n){this.Ft(n,25),this.Ut(e,n)}Ut(e,n){n.xt(e)}qt(e,n){let r=e.fields||{};this.Ft(n,55);for(let i of Object.keys(r))this.Ot(i,n),this.Ct(r[i],n)}kt(e,n){let r=e.fields||{};this.Ft(n,53);let i=bs,o=r[i].arrayValue?.values?.length||0;this.Ft(n,15),n.Mt(Ne(o)),this.Ot(i,n),this.Ct(r[i],n)}Qt(e,n){let r=e.values||[];this.Ft(n,50);for(let i of r)this.Ct(i,n)}Lt(e,n){this.Ft(n,37),Q.fromName(e).path.forEach(r=>{this.Ft(n,60),this.Ut(r,n)})}Ft(e,n){e.Mt(n)}Nt(e){e.Mt(2)}};Jh.Kt=new Jh;var C_=class{constructor(){this.Cn=new D_}addToCollectionParentIndex(e,n){return this.Cn.add(n),O.resolve()}getCollectionParents(e,n){return O.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return O.resolve()}deleteFieldIndex(e,n){return O.resolve()}deleteAllFieldIndexes(e){return O.resolve()}createTargetIndexes(e,n){return O.resolve()}getDocumentsMatchingTarget(e,n){return O.resolve(null)}getIndexType(e,n){return O.resolve(0)}getFieldIndexes(e,n){return O.resolve([])}getNextCollectionGroupToUpdate(e){return O.resolve(null)}getMinOffset(e,n){return O.resolve(lo.min())}getMinOffsetFromCollectionGroup(e,n){return O.resolve(lo.min())}updateCollectionGroup(e,n,r){return O.resolve()}updateIndexEntries(e,n){return O.resolve()}},D_=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new ut(xe.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new ut(xe.comparator)).toArray()}};var rne=new Uint8Array(0);var _A={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},OR=41943040,un=class t{static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}};un.DEFAULT_COLLECTION_PERCENTILE=10,un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,un.DEFAULT=new un(OR,un.DEFAULT_COLLECTION_PERCENTILE,un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),un.DISABLED=new un(-1,0,0);var eu=class t{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new t(0)}static cr(){return new t(-1)}};var EA="LruGarbageCollector",eU=1048576;function IA([t,e],[n,r]){let i=pe(t,n);return i===0?pe(e,r):i}var b_=class{constructor(e){this.Ir=e,this.buffer=new ut(IA),this.Er=0}dr(){return++this.Er}Ar(e){let n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{let r=this.buffer.last();IA(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}},T_=class{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){U(EA,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Bs(n)?U(EA,"Ignoring IndexedDB error during garbage collection: ",n):await js(n)}await this.Vr(3e5)})}},S_=class{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return O.resolve(AE.ce);let r=new b_(n);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(U("LruGarbageCollector","Garbage collection skipped; disabled"),O.resolve(_A)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(U("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),_A):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,o,s,a,u,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(U("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,n))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),ms()<=fe.DEBUG&&U("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-h}ms`),O.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function tU(t,e){return new S_(t,e)}var A_=class{constructor(){this.changes=new Ir(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Yt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?O.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var R_=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var M_=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&zc(r.mutation,i,dn.empty(),qe.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,me()).next(()=>r))}getLocalViewOfDocuments(e,n,r=me()){let i=ao();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=jc();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){let r=ao();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,me()))}populateOverlays(e,n,r){let i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,i){let o=wr(),s=Hc(),a=(function(){return Hc()})();return n.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof Yn)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),zc(h.mutation,l,h.mutation.getFieldMask(),qe.now())):s.set(l.key,dn.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,h)=>s.set(l,h)),n.forEach((l,h)=>a.set(l,new R_(h,s.get(l)??null))),a))}recalculateAndSaveOverlays(e,n){let r=Hc(),i=new Oe((s,a)=>s-a),o=me();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(let a of s)a.keys().forEach(u=>{let l=n.get(u);if(l===null)return;let h=r.get(u)||dn.empty();h=a.applyToLocalView(l,h),r.set(u,h);let p=(i.get(a.batchId)||me()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,p=gR();h.forEach(g=>{if(!o.has(g)){let y=wR(n.get(g),r.get(g));y!==null&&p.set(g,y),o=o.add(g)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return O.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return(function(s){return Q.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):_B(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):O.resolve(ao()),a=Wc,u=o;return s.next(l=>O.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?O.resolve():this.remoteDocumentCache.getEntry(e,h).next(g=>{u=u.insert(h,g)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,me())).next(h=>({batchId:a,changes:mR(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Q(n)).next(r=>{let i=jc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let o=n.collectionGroup,s=jc();return this.indexManager.getCollectionParents(e,o).next(a=>O.forEach(a,u=>{let l=(function(p,g){return new Ms(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(n,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,g)=>{s=s.insert(p,g)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((u,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,Yt.newInvalidDocument(h)))});let a=jc();return s.forEach((u,l)=>{let h=o.get(u);h!==void 0&&zc(h.mutation,l,dn.empty(),qe.now()),If(n,l)&&(a=a.insert(u,l))}),a})}};var N_=class{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return O.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(i){return{id:i.id,version:i.version,createTime:Qt(i.createTime)}})(n)),O.resolve()}getNamedQuery(e,n){return O.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(i){return{name:i.name,query:XB(i.bundledQuery),readTime:Qt(i.readTime)}})(n)),O.resolve()}};var x_=class{constructor(){this.overlays=new Oe(Q.comparator),this.qr=new Map}getOverlay(e,n){return O.resolve(this.overlays.get(n))}getOverlays(e,n){let r=ao();return O.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.St(e,n,o)}),O.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.qr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.qr.delete(r)),O.resolve()}getOverlaysForCollection(e,n,r){let i=ao(),o=n.length+1,s=new Q(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return O.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new Oe((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=ao(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=ao(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return O.resolve(a)}St(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new p_(n,r));let o=this.qr.get(n);o===void 0&&(o=me(),this.qr.set(n,o)),this.qr.set(n,o.add(r.key))}};var P_=class{constructor(){this.sessionToken=Et.EMPTY_BYTE_STRING}getSessionToken(e){return O.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,O.resolve()}};var tu=class{constructor(){this.Qr=new ut(He.$r),this.Ur=new ut(He.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){let r=new He(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new He(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){let n=new Q(new xe([])),r=new He(n,e),i=new He(n,e+1),o=[];return this.Ur.forEachInRange([r,i],s=>{this.Gr(s),o.push(s.key)}),o}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){let n=new Q(new xe([])),r=new He(n,e),i=new He(n,e+1),o=me();return this.Ur.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let n=new He(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},He=class{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Q.comparator(e.key,n.key)||pe(e.Yr,n.Yr)}static Kr(e,n){return pe(e.Yr,n.Yr)||Q.comparator(e.key,n.key)}};var O_=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new ut(He.$r)}checkEmpty(e){return O.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new h_(o,n,r,i);this.mutationQueue.push(s);for(let a of i)this.Zr=this.Zr.add(new He(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return O.resolve(s)}lookupMutationBatch(e,n){return O.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.ei(r),o=i<0?0:i;return O.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return O.resolve(this.mutationQueue.length===0?RE:this.tr-1)}getAllMutationBatches(e){return O.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new He(n,0),i=new He(n,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([r,i],s=>{let a=this.Xr(s.Yr);o.push(a)}),O.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ut(pe);return n.forEach(i=>{let o=new He(i,0),s=new He(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,s],a=>{r=r.add(a.Yr)})}),O.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=r;Q.isDocumentKey(o)||(o=o.child(""));let s=new He(new Q(o),0),a=new ut(pe);return this.Zr.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.Yr)),!0)},s),O.resolve(this.ti(a))}ti(e){let n=[];return e.forEach(r=>{let i=this.Xr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){_e(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return O.forEach(n.mutations,i=>{let o=new He(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){let r=new He(n,0),i=this.Zr.firstAfterOrEqual(r);return O.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,O.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){let n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var k_=class{constructor(e){this.ri=e,this.docs=(function(){return new Oe(Q.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return O.resolve(r?r.document.mutableCopy():Yt.newInvalidDocument(n))}getEntries(e,n){let r=wr();return n.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Yt.newInvalidDocument(i))}),O.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=wr(),s=n.path,a=new Q(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||Xj(Zj(h),r)<=0||(i.has(h.key)||If(n,h))&&(o=o.insert(h.key,h.mutableCopy()))}return O.resolve(o)}getAllFromCollectionGroup(e,n,r,i){G(9500)}ii(e,n){return O.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new F_(this)}getSize(e){return O.resolve(this.size)}},F_=class extends A_{constructor(e){super(),this.Nr=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),O.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}};var L_=class{constructor(e){this.persistence=e,this.si=new Ir(n=>OE(n),kE),this.lastRemoteSnapshotVersion=X.min(),this.highestTargetId=0,this.oi=0,this._i=new tu,this.targetCount=0,this.ai=eu.ur()}forEachTarget(e,n){return this.si.forEach((r,i)=>n(i)),O.resolve()}getLastRemoteSnapshotVersion(e){return O.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return O.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),O.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),O.resolve()}Pr(e){this.si.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.ai=new eu(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,O.resolve()}updateTargetData(e,n){return this.Pr(n),O.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,O.resolve()}removeTargets(e,n,r){let i=0,o=[];return this.si.forEach((s,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.si.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),O.waitFor(o).next(()=>i)}getTargetCount(e){return O.resolve(this.targetCount)}getTargetData(e,n){let r=this.si.get(n)||null;return O.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),O.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);let i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),O.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),O.resolve()}getMatchingKeysForTargetId(e,n){let r=this._i.Hr(n);return O.resolve(r)}containsKey(e,n){return O.resolve(this._i.containsKey(n))}};var Zh=class{constructor(e,n){this.ui={},this.overlays={},this.ci=new AE(0),this.li=!1,this.li=!0,this.hi=new P_,this.referenceDelegate=e(this),this.Pi=new L_(this),this.indexManager=new C_,this.remoteDocumentCache=(function(i){return new k_(i)})(r=>this.referenceDelegate.Ti(r)),this.serializer=new w_(n),this.Ii=new N_(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new x_,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new O_(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){U("MemoryPersistence","Starting transaction:",e);let i=new V_(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ai(e,n){return O.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}},V_=class extends Qv{constructor(e){super(),this.currentSequenceNumber=e}},j_=class t{constructor(e){this.persistence=e,this.Ri=new tu,this.Vi=null}static mi(e){return new t(e)}get fi(){if(this.Vi)return this.Vi;throw G(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),O.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),O.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),O.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(i=>this.fi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.fi.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return O.forEach(this.fi,r=>{let i=Q.fromPath(r);return this.gi(e,i).next(o=>{o||n.removeEntry(i,X.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return O.or([()=>O.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}},Xh=class t{constructor(e,n){this.persistence=e,this.pi=new Ir(r=>rB(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=tU(this,n)}static mi(e,n){return new t(e,n)}Ei(){}di(e){return O.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){let n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return O.forEach(this.pi,(r,i)=>this.br(e,r,i).next(o=>o?O.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ii(e,s=>this.br(e,s,n).next(a=>{a||(r++,o.removeEntry(s,X.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),O.resolve()}removeTarget(e,n){let r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),O.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),O.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),O.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Ph(e.data.value)),n}br(e,n,r){return O.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{let i=this.pi.get(n);return O.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var B_=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=me(),i=me();for(let o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new t(e,n.fromCache,r,i)}};var U_=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var $_=class{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return L0()?8:tB(at())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){let o={result:null};return this.ys(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ws(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new U_;return this.Ss(e,n,s).next(a=>{if(o.result=a,this.Vs)return this.bs(e,n,s,a.size)})}).next(()=>o.result)}bs(e,n,r,i){return r.documentReadCount<this.fs?(ms()<=fe.DEBUG&&U("QueryEngine","SDK will not create cache indexes for query:",gs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),O.resolve()):(ms()<=fe.DEBUG&&U("QueryEngine","Query:",gs(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(ms()<=fe.DEBUG&&U("QueryEngine","The SDK decides to create cache indexes for query:",gs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Wn(n))):O.resolve())}ys(e,n){if(lA(n))return O.resolve(null);let r=Wn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=u_(n,null,"F"),r=Wn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=me(...o);return this.ps.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.Ds(n,a);return this.Cs(n,l,s,u.readTime)?this.ys(e,u_(n,null,"F")):this.vs(e,l,n,u)}))})))}ws(e,n,r,i){return lA(n)||i.isEqual(X.min())?O.resolve(null):this.ps.getDocuments(e,r).next(o=>{let s=this.Ds(n,o);return this.Cs(n,s,r,i)?O.resolve(null):(ms()<=fe.DEBUG&&U("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),gs(n)),this.vs(e,s,n,Jj(i,Wc)).next(a=>a))})}Ds(e,n){let r=new ut(fR(e));return n.forEach((i,o)=>{If(e,o)&&(r=r.add(o))}),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ss(e,n,r){return ms()<=fe.DEBUG&&U("QueryEngine","Using full collection scan to execute query:",gs(n)),this.ps.getDocumentsMatchingQuery(e,n,lo.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}};var VE="LocalStore",nU=3e8,H_=class{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new Oe(pe),this.xs=new Ir(o=>OE(o),kE),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new M_(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}};function rU(t,e,n,r){return new H_(t,e,n,r)}async function kR(t,e){let n=ie(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=me();for(let l of i){s.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of o){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(l=>({Ls:l,removedBatchIds:s,addedBatchIds:a}))})})}function iU(t,e){let n=ie(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(a,u,l,h){let p=l.batch,g=p.keys(),y=O.resolve();return g.forEach(T=>{y=y.next(()=>h.getEntry(u,T)).next(R=>{let A=l.docVersions.get(T);_e(A!==null,48541),R.version.compareTo(A)<0&&(p.applyToRemoteDocument(R,l),R.isValidDocument()&&(R.setReadTime(l.commitVersion),h.addEntry(R)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,p))})(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let u=me();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u})(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function FR(t){let e=ie(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function oU(t,e){let n=ie(t),r=e.snapshotVersion,i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;let a=[];e.targetChanges.forEach((h,p)=>{let g=i.get(p);if(!g)return;a.push(n.Pi.removeMatchingKeys(o,h.removedDocuments,p).next(()=>n.Pi.addMatchingKeys(o,h.addedDocuments,p)));let y=g.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(Et.EMPTY_BYTE_STRING,X.min()).withLastLimboFreeSnapshotVersion(X.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(p,y),(function(R,A,F){return R.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=nU?!0:F.addedDocuments.size+F.modifiedDocuments.size+F.removedDocuments.size>0})(g,y,h)&&a.push(n.Pi.updateTargetData(o,y))});let u=wr(),l=me();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(sU(o,s,e.documentUpdates).next(h=>{u=h.ks,l=h.qs})),!r.isEqual(X.min())){let h=n.Pi.getLastRemoteSnapshotVersion(o).next(p=>n.Pi.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return O.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(n.Ms=i,o))}function sU(t,e,n){let r=me(),i=me();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=wr();return n.forEach((a,u)=>{let l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(X.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):U(VE,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{ks:s,qs:i}})}function aU(t,e){let n=ie(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=RE),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function cU(t,e){let n=ie(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Pi.getTargetData(r,e).next(o=>o?(i=o,O.resolve(i)):n.Pi.allocateTargetId(r).next(s=>(i=new Xc(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function z_(t,e,n){let r=ie(t),i=r.Ms.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!Bs(s))throw s;U(VE,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function wA(t,e,n){let r=ie(t),i=X.min(),o=me();return r.persistence.runTransaction("Execute query","readwrite",s=>(function(u,l,h){let p=ie(u),g=p.xs.get(h);return g!==void 0?O.resolve(p.Ms.get(g)):p.Pi.getTargetData(l,h)})(r,s,Wn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.Fs.getDocumentsMatchingQuery(s,e,n?i:X.min(),n?o:me())).next(a=>(uU(r,IB(e),a),{documents:a,Qs:o})))}function uU(t,e,n){let r=t.Os.get(e)||X.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.Os.set(e,r)}var ef=class{constructor(){this.activeTargetIds=SB()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var q_=class{constructor(){this.Mo=new ef,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new ef,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var G_=class{Oo(e){}shutdown(){}};var CA="ConnectivityMonitor",tf=class{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){U(CA,"Network connectivity changed: AVAILABLE");for(let e of this.qo)e(0)}ko(){U(CA,"Network connectivity changed: UNAVAILABLE");for(let e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var xh=null;function W_(){return xh===null?xh=(function(){return 268435456+Math.round(2147483648*Math.random())})():xh++,"0x"+xh.toString(16)}var Vv="RestConnection",lU={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},K_=class{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===Uh?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,o){let s=W_(),a=this.zo(e,n.toUriEncodedString());U(Vv,`Sending RPC '${e}' ${s}:`,a,r);let u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,i,o);let{host:l}=new URL(a),h=Yr(l);return this.Jo(e,a,u,r,h).then(p=>(U(Vv,`Received RPC '${e}' ${s}: `,p),p),p=>{throw Cs(Vv,`RPC '${e}' ${s} failed with error: `,p,"url: ",a,"request:",r),p})}Ho(e,n,r,i,o,s){return this.Go(e,n,r,i,o)}jo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Vs})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}zo(e,n){let r=lU[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}};var Q_=class{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}};var _t="WebChannelConnection",Y_=class extends K_{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,o){let s=W_();return new Promise((a,u)=>{let l=new xv;l.setWithCredentials(!0),l.listenOnce(Pv.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Vc.NO_ERROR:let p=l.getResponseJson();U(_t,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),a(p);break;case Vc.TIMEOUT:U(_t,`RPC '${e}' ${s} timed out`),u(new $(N.DEADLINE_EXCEEDED,"Request time out"));break;case Vc.HTTP_ERROR:let g=l.getStatus();if(U(_t,`RPC '${e}' ${s} failed with status:`,g,"response text:",l.getResponseText()),g>0){let y=l.getResponseJson();Array.isArray(y)&&(y=y[0]);let T=y?.error;if(T&&T.status&&T.message){let R=(function(F){let ee=F.toLowerCase().replace(/_/g,"-");return Object.values(N).indexOf(ee)>=0?ee:N.UNKNOWN})(T.status);u(new $(R,T.message))}else u(new $(N.UNKNOWN,"Server responded with status "+l.getStatus()))}else u(new $(N.UNAVAILABLE,"Connection failed."));break;default:G(9055,{l_:e,streamId:s,h_:l.getLastErrorCode(),P_:l.getLastError()})}}finally{U(_t,`RPC '${e}' ${s} completed.`)}});let h=JSON.stringify(i);U(_t,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",h,r,15)})}T_(e,n,r){let i=W_(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Fv(),a=kv(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;let h=o.join("");U(_t,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=s.createWebChannel(h,u);this.I_(p);let g=!1,y=!1,T=new Q_({Yo:A=>{y?U(_t,`Not sending because RPC '${e}' stream ${i} is closed:`,A):(g||(U(_t,`Opening RPC '${e}' stream ${i} transport.`),p.open(),g=!0),U(_t,`RPC '${e}' stream ${i} sending:`,A),p.send(A))},Zo:()=>p.close()}),R=(A,F,ee)=>{A.listen(F,le=>{try{ee(le)}catch(lt){setTimeout(()=>{throw lt},0)}})};return R(p,ps.EventType.OPEN,()=>{y||(U(_t,`RPC '${e}' stream ${i} transport opened.`),T.o_())}),R(p,ps.EventType.CLOSE,()=>{y||(y=!0,U(_t,`RPC '${e}' stream ${i} transport closed`),T.a_(),this.E_(p))}),R(p,ps.EventType.ERROR,A=>{y||(y=!0,Cs(_t,`RPC '${e}' stream ${i} transport errored. Name:`,A.name,"Message:",A.message),T.a_(new $(N.UNAVAILABLE,"The operation could not be completed")))}),R(p,ps.EventType.MESSAGE,A=>{if(!y){let F=A.data[0];_e(!!F,16349);let ee=F,le=ee?.error||ee[0]?.error;if(le){U(_t,`RPC '${e}' stream ${i} received error:`,le);let lt=le.status,Rt=(function(v){let E=$e[v];if(E!==void 0)return bR(E)})(lt),tt=le.message;Rt===void 0&&(Rt=N.INTERNAL,tt="Unknown error status: "+lt+" with message "+le.message),y=!0,T.a_(new $(Rt,tt)),p.close()}else U(_t,`RPC '${e}' stream ${i} received:`,F),T.u_(F)}}),R(a,Ov.STAT_EVENT,A=>{A.stat===Rh.PROXY?U(_t,`RPC '${e}' stream ${i} detected buffering proxy`):A.stat===Rh.NOPROXY&&U(_t,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{T.__()},0),T}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}};function jv(){return typeof document<"u"?document:null}function wf(t){return new v_(t,!0)}var nu=class{constructor(e,n,r=1e3,i=1.5,o=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();let n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&U("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}};var DA="PersistentStream",nf=class{constructor(e,n,r,i,o,s,a,u){this.Mi=e,this.S_=r,this.b_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new nu(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===N.RESOURCE_EXHAUSTED?(vr(n.toString()),vr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===N.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;let e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===n&&this.G_(r,i)},r=>{e(()=>{let i=new $(N.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,n){let r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return U(DA,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(U(DA,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},J_=class extends nf{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();let n=HB(this.serializer,e),r=(function(o){if(!("targetChange"in o))return X.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?X.min():s.readTime?Qt(s.readTime):X.min()})(e);return this.listener.H_(n,r)}Y_(e){let n={};n.database=I_(this.serializer),n.addTarget=(function(o,s){let a,u=s.target;if(a=c_(u)?{documents:qB(o,u)}:{query:GB(o,u).ft},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=TR(o,s.resumeToken);let l=__(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(X.min())>0){a.readTime=Qh(o,s.snapshotVersion.toTimestamp());let l=__(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a})(this.serializer,e);let r=KB(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){let n={};n.database=I_(this.serializer),n.removeTarget=e,this.q_(n)}},Z_=class extends nf{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return _e(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,_e(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){_e(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();let n=zB(e.writeResults,e.commitTime),r=Qt(e.commitTime);return this.listener.na(r,n)}ra(){let e={};e.database=I_(this.serializer),this.q_(e)}ea(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>MR(this.serializer,r))};this.q_(n)}};var X_=class{},eE=class extends X_{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new $(N.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Go(e,E_(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new $(N.UNKNOWN,o.toString())})}Ho(e,n,r,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Ho(e,E_(n,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new $(N.UNKNOWN,s.toString())})}terminate(){this.ia=!0,this.connection.terminate()}},tE=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(vr(n),this.aa=!1):U("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}};var go="RemoteStore",nE=class{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo(s=>{r.enqueueAndForget(async()=>{yo(this)&&(U(go,"Restarting streams for network reachability change."),await(async function(u){let l=ie(u);l.Ea.add(4),await cu(l),l.Ra.set("Unknown"),l.Ea.delete(4),await Cf(l)})(this))})}),this.Ra=new tE(r,i)}};async function Cf(t){if(yo(t))for(let e of t.da)await e(!0)}async function cu(t){for(let e of t.da)await e(!1)}function LR(t,e){let n=ie(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),$E(n)?UE(n):Us(n).O_()&&BE(n,e))}function jE(t,e){let n=ie(t),r=Us(n);n.Ia.delete(e),r.O_()&&VR(n,e),n.Ia.size===0&&(r.O_()?r.L_():yo(n)&&n.Ra.set("Unknown"))}function BE(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(X.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Us(t).Y_(e)}function VR(t,e){t.Va.Ue(e),Us(t).Z_(e)}function UE(t){t.Va=new y_({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Us(t).start(),t.Ra.ua()}function $E(t){return yo(t)&&!Us(t).x_()&&t.Ia.size>0}function yo(t){return ie(t).Ea.size===0}function jR(t){t.Va=void 0}async function dU(t){t.Ra.set("Online")}async function hU(t){t.Ia.forEach((e,n)=>{BE(t,e)})}async function fU(t,e){jR(t),$E(t)?(t.Ra.ha(e),UE(t)):t.Ra.set("Unknown")}async function pU(t,e,n){if(t.Ra.set("Online"),e instanceof Wh&&e.state===2&&e.cause)try{await(async function(i,o){let s=o.cause;for(let a of o.targetIds)i.Ia.has(a)&&(await i.remoteSyncer.rejectListen(a,s),i.Ia.delete(a),i.Va.removeTarget(a))})(t,e)}catch(r){U(go,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await rf(t,r)}else if(e instanceof Es?t.Va.Ze(e):e instanceof Gh?t.Va.st(e):t.Va.tt(e),!n.isEqual(X.min()))try{let r=await FR(t.localStore);n.compareTo(r)>=0&&await(function(o,s){let a=o.Va.Tt(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=o.Ia.get(l);h&&o.Ia.set(l,h.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{let h=o.Ia.get(u);if(!h)return;o.Ia.set(u,h.withResumeToken(Et.EMPTY_BYTE_STRING,h.snapshotVersion)),VR(o,u);let p=new Xc(h.target,u,l,h.sequenceNumber);BE(o,p)}),o.remoteSyncer.applyRemoteEvent(a)})(t,n)}catch(r){U(go,"Failed to raise snapshot:",r),await rf(t,r)}}async function rf(t,e,n){if(!Bs(e))throw e;t.Ea.add(1),await cu(t),t.Ra.set("Offline"),n||(n=()=>FR(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{U(go,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Cf(t)})}function BR(t,e){return e().catch(n=>rf(t,n,e))}async function Df(t){let e=ie(t),n=di(e),r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:RE;for(;mU(e);)try{let i=await aU(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,gU(e,i)}catch(i){await rf(e,i)}UR(e)&&$R(e)}function mU(t){return yo(t)&&t.Ta.length<10}function gU(t,e){t.Ta.push(e);let n=di(t);n.O_()&&n.X_&&n.ea(e.mutations)}function UR(t){return yo(t)&&!di(t).x_()&&t.Ta.length>0}function $R(t){di(t).start()}async function yU(t){di(t).ra()}async function vU(t){let e=di(t);for(let n of t.Ta)e.ea(n.mutations)}async function _U(t,e,n){let r=t.Ta.shift(),i=f_.from(r,e,n);await BR(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Df(t)}async function EU(t,e){e&&di(t).X_&&await(async function(r,i){if((function(s){return DR(s)&&s!==N.ABORTED})(i.code)){let o=r.Ta.shift();di(r).B_(),await BR(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await Df(r)}})(t,e),UR(t)&&$R(t)}async function bA(t,e){let n=ie(t);n.asyncQueue.verifyOperationInProgress(),U(go,"RemoteStore received new credentials");let r=yo(n);n.Ea.add(3),await cu(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Cf(n)}async function IU(t,e){let n=ie(t);e?(n.Ea.delete(2),await Cf(n)):e||(n.Ea.add(2),await cu(n),n.Ra.set("Unknown"))}function Us(t){return t.ma||(t.ma=(function(n,r,i){let o=ie(n);return o.sa(),new J_(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(t.datastore,t.asyncQueue,{Xo:dU.bind(null,t),t_:hU.bind(null,t),r_:fU.bind(null,t),H_:pU.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),$E(t)?UE(t):t.Ra.set("Unknown")):(await t.ma.stop(),jR(t))})),t.ma}function di(t){return t.fa||(t.fa=(function(n,r,i){let o=ie(n);return o.sa(),new Z_(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:yU.bind(null,t),r_:EU.bind(null,t),ta:vU.bind(null,t),na:_U.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Df(t)):(await t.fa.stop(),t.Ta.length>0&&(U(go,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}var rE=class t{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new bn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){let s=Date.now()+r,a=new t(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new $(N.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function HE(t,e){if(vr("AsyncQueue",`${e}: ${t}`),Bs(t))return new $(N.UNAVAILABLE,`${e}: ${t}`);throw t}var of=class t{static emptySet(e){return new t(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Q.comparator(n.key,r.key):(n,r)=>Q.comparator(n.key,r.key),this.keyedMap=jc(),this.sortedSet=new Oe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var sf=class{constructor(){this.ga=new Oe(Q.comparator)}track(e){let n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):G(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){let e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}},Os=class t{constructor(e,n,r,i,o,s,a,u,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,o){let s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new t(e,n,of.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ef(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var iE=class{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}},oE=class{constructor(){this.queries=TA(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){let i=ie(n),o=i.queries;i.queries=TA(),o.forEach((s,a)=>{for(let u of a.Sa)u.onError(r)})})(this,new $(N.ABORTED,"Firestore shutting down"))}};function TA(){return new Ir(t=>hR(t),Ef)}async function HR(t,e){let n=ie(t),r=3,i=e.query,o=n.queries.get(i);o?!o.ba()&&e.Da()&&(r=2):(o=new iE,r=e.Da()?0:1);try{switch(r){case 0:o.wa=await n.onListen(i,!0);break;case 1:o.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(s){let a=HE(s,`Initialization of query '${gs(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,o),o.Sa.push(e),e.va(n.onlineState),o.wa&&e.Fa(o.wa)&&zE(n)}async function zR(t,e){let n=ie(t),r=e.query,i=3,o=n.queries.get(r);if(o){let s=o.Sa.indexOf(e);s>=0&&(o.Sa.splice(s,1),o.Sa.length===0?i=e.Da()?0:1:!o.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function wU(t,e){let n=ie(t),r=!1;for(let i of e){let o=i.query,s=n.queries.get(o);if(s){for(let a of s.Sa)a.Fa(i)&&(r=!0);s.wa=i}}r&&zE(n)}function CU(t,e,n){let r=ie(t),i=r.queries.get(e);if(i)for(let o of i.Sa)o.onError(n);r.queries.delete(e)}function zE(t){t.Ca.forEach(e=>{e.next()})}var sE,SA;(SA=sE||(sE={})).Ma="default",SA.Cache="cache";var af=class{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Os(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;let r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;let n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Os.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==sE.Cache}};var cf=class{constructor(e){this.key=e}},uf=class{constructor(e){this.key=e}},aE=class{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=me(),this.mutatedKeys=me(),this.eu=fR(e),this.tu=new of(this.eu)}get nu(){return this.Ya}ru(e,n){let r=n?n.iu:new sf,i=n?n.tu:this.tu,o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let g=i.get(h),y=If(this.query,p)?p:null,T=!!g&&this.mutatedKeys.has(g.key),R=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),A=!1;g&&y?g.data.isEqual(y.data)?T!==R&&(r.track({type:3,doc:y}),A=!0):this.su(g,y)||(r.track({type:2,doc:y}),A=!0,(u&&this.eu(y,u)>0||l&&this.eu(y,l)<0)&&(a=!0)):!g&&y?(r.track({type:0,doc:y}),A=!0):g&&!y&&(r.track({type:1,doc:g}),A=!0,(u||l)&&(a=!0)),A&&(y?(s=s.add(y),o=R?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{tu:s,iu:r,Cs:a,mutatedKeys:o}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;let s=e.iu.ya();s.sort((h,p)=>(function(y,T){let R=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return G(20277,{Rt:A})}};return R(y)-R(T)})(h.type,p.type)||this.eu(h.doc,p.doc)),this.ou(r),i=i??!1;let a=n&&!i?this._u():[],u=this.Xa.size===0&&this.current&&!i?1:0,l=u!==this.Za;return this.Za=u,s.length!==0||l?{snapshot:new Os(this.query,e.tu,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new sf,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];let e=this.Xa;this.Xa=me(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});let n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new uf(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new cf(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=me();let n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Os.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}},qE="SyncEngine",cE=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},uE=class{constructor(e){this.key=e,this.hu=!1}},lE=class{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new Ir(a=>hR(a),Ef),this.Iu=new Map,this.Eu=new Set,this.du=new Oe(Q.comparator),this.Au=new Map,this.Ru=new tu,this.Vu={},this.mu=new Map,this.fu=eu.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}};async function DU(t,e,n=!0){let r=YR(t),i,o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=await qR(r,e,n,!0),i}async function bU(t,e){let n=YR(t);await qR(n,e,!0,!1)}async function qR(t,e,n,r){let i=await cU(t.localStore,Wn(e)),o=i.targetId,s=t.sharedClientState.addLocalQueryTarget(o,n),a;return r&&(a=await TU(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&LR(t.remoteStore,i),a}async function TU(t,e,n,r,i){t.pu=(p,g,y)=>(async function(R,A,F,ee){let le=A.view.ru(F);le.Cs&&(le=await wA(R.localStore,A.query,!1).then(({documents:w})=>A.view.ru(w,le)));let lt=ee&&ee.targetChanges.get(A.targetId),Rt=ee&&ee.targetMismatches.get(A.targetId)!=null,tt=A.view.applyChanges(le,R.isPrimaryClient,lt,Rt);return RA(R,A.targetId,tt.au),tt.snapshot})(t,p,g,y);let o=await wA(t.localStore,e,!0),s=new aE(e,o.Qs),a=s.ru(o.documents),u=Zc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=s.applyChanges(a,t.isPrimaryClient,u);RA(t,n,l.au);let h=new cE(e,n,s);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),l.snapshot}async function SU(t,e,n){let r=ie(t),i=r.Tu.get(e),o=r.Iu.get(i.targetId);if(o.length>1)return r.Iu.set(i.targetId,o.filter(s=>!Ef(s,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await z_(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&jE(r.remoteStore,i.targetId),dE(r,i.targetId)}).catch(js)):(dE(r,i.targetId),await z_(r.localStore,i.targetId,!0))}async function AU(t,e){let n=ie(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),jE(n.remoteStore,r.targetId))}async function RU(t,e,n){let r=FU(t);try{let i=await(function(s,a){let u=ie(s),l=qe.now(),h=a.reduce((y,T)=>y.add(T.key),me()),p,g;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let T=wr(),R=me();return u.Ns.getEntries(y,h).next(A=>{T=A,T.forEach((F,ee)=>{ee.isValidDocument()||(R=R.add(F))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,T)).next(A=>{p=A;let F=[];for(let ee of a){let le=PB(ee,p.get(ee.key).overlayedDocument);le!=null&&F.push(new Yn(ee.key,le,sR(le.value.mapValue),ln.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,F,a)}).next(A=>{g=A;let F=A.applyToLocalDocumentSet(p,R);return u.documentOverlayCache.saveOverlays(y,A.batchId,F)})}).then(()=>({batchId:g.batchId,changes:mR(p)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(s,a,u){let l=s.Vu[s.currentUser.toKey()];l||(l=new Oe(pe)),l=l.insert(a,u),s.Vu[s.currentUser.toKey()]=l})(r,i.batchId,n),await uu(r,i.changes),await Df(r.remoteStore)}catch(i){let o=HE(i,"Failed to persist write");n.reject(o)}}async function GR(t,e){let n=ie(t);try{let r=await oU(n.localStore,e);e.targetChanges.forEach((i,o)=>{let s=n.Au.get(o);s&&(_e(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.hu=!0:i.modifiedDocuments.size>0?_e(s.hu,14607):i.removedDocuments.size>0&&(_e(s.hu,42227),s.hu=!1))}),await uu(n,r,e)}catch(r){await js(r)}}function AA(t,e,n){let r=ie(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.Tu.forEach((o,s)=>{let a=s.view.va(e);a.snapshot&&i.push(a.snapshot)}),(function(s,a){let u=ie(s);u.onlineState=a;let l=!1;u.queries.forEach((h,p)=>{for(let g of p.Sa)g.va(a)&&(l=!0)}),l&&zE(u)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function MU(t,e,n){let r=ie(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Au.get(e),o=i&&i.key;if(o){let s=new Oe(Q.comparator);s=s.insert(o,Yt.newNoDocument(o,X.min()));let a=me().add(o),u=new qh(X.min(),new Map,new Oe(pe),s,a);await GR(r,u),r.du=r.du.remove(o),r.Au.delete(e),GE(r)}else await z_(r.localStore,e,!1).then(()=>dE(r,e,n)).catch(js)}async function NU(t,e){let n=ie(t),r=e.batch.batchId;try{let i=await iU(n.localStore,e);KR(n,r,null),WR(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await uu(n,i)}catch(i){await js(i)}}async function xU(t,e,n){let r=ie(t);try{let i=await(function(s,a){let u=ie(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(_e(p!==null,37113),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})})(r.localStore,e);KR(r,e,n),WR(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await uu(r,i)}catch(i){await js(i)}}function WR(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function KR(t,e,n){let r=ie(t),i=r.Vu[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function dE(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||QR(t,r)})}function QR(t,e){t.Eu.delete(e.path.canonicalString());let n=t.du.get(e);n!==null&&(jE(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),GE(t))}function RA(t,e,n){for(let r of n)r instanceof cf?(t.Ru.addReference(r.key,e),PU(t,r)):r instanceof uf?(U(qE,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||QR(t,r.key)):G(19791,{wu:r})}function PU(t,e){let n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(U(qE,"New document in limbo: "+n),t.Eu.add(r),GE(t))}function GE(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){let e=t.Eu.values().next().value;t.Eu.delete(e);let n=new Q(xe.fromString(e)),r=t.fu.next();t.Au.set(r,new uE(n)),t.du=t.du.insert(n,r),LR(t.remoteStore,new Xc(Wn(_f(n.path)),r,"TargetPurposeLimboResolution",AE.ce))}}async function uu(t,e,n){let r=ie(t),i=[],o=[],s=[];r.Tu.isEmpty()||(r.Tu.forEach((a,u)=>{s.push(r.pu(u,e,n).then(l=>{if((l||n)&&r.isPrimaryClient){let h=l?!l.fromCache:n?.targetChanges.get(u.targetId)?.current;r.sharedClientState.updateQueryState(u.targetId,h?"current":"not-current")}if(l){i.push(l);let h=B_.As(u.targetId,l);o.push(h)}}))}),await Promise.all(s),r.Pu.H_(i),await(async function(u,l){let h=ie(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>O.forEach(l,g=>O.forEach(g.Es,y=>h.persistence.referenceDelegate.addReference(p,g.targetId,y)).next(()=>O.forEach(g.ds,y=>h.persistence.referenceDelegate.removeReference(p,g.targetId,y)))))}catch(p){if(!Bs(p))throw p;U(VE,"Failed to update sequence numbers: "+p)}for(let p of l){let g=p.targetId;if(!p.fromCache){let y=h.Ms.get(g),T=y.snapshotVersion,R=y.withLastLimboFreeSnapshotVersion(T);h.Ms=h.Ms.insert(g,R)}}})(r.localStore,o))}async function OU(t,e){let n=ie(t);if(!n.currentUser.isEqual(e)){U(qE,"User change. New user:",e.toKey());let r=await kR(n.localStore,e);n.currentUser=e,(function(o,s){o.mu.forEach(a=>{a.forEach(u=>{u.reject(new $(N.CANCELLED,s))})}),o.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await uu(n,r.Ls)}}function kU(t,e){let n=ie(t),r=n.Au.get(e);if(r&&r.hu)return me().add(r.key);{let i=me(),o=n.Iu.get(e);if(!o)return i;for(let s of o){let a=n.Tu.get(s);i=i.unionWith(a.view.nu)}return i}}function YR(t){let e=ie(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=GR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=kU.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=MU.bind(null,e),e.Pu.H_=wU.bind(null,e.eventManager),e.Pu.yu=CU.bind(null,e.eventManager),e}function FU(t){let e=ie(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=NU.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=xU.bind(null,e),e}var JR=(()=>{class t{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(n){this.serializer=wf(n.databaseInfo.databaseId),this.sharedClientState=this.Du(n),this.persistence=this.Cu(n),await this.persistence.start(),this.localStore=this.vu(n),this.gcScheduler=this.Fu(n,this.localStore),this.indexBackfillerScheduler=this.Mu(n,this.localStore)}Fu(n,r){return null}Mu(n,r){return null}vu(n){return rU(this.persistence,new $_,n.initialUser,this.serializer)}Cu(n){return new Zh(j_.mi,this.serializer)}Du(n){return new q_}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}return t.provider={build:()=>new t},t})(),hE=class extends JR{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){_e(this.persistence.referenceDelegate instanceof Xh,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new T_(r,e.asyncQueue,n)}Cu(e){let n=this.cacheSizeBytes!==void 0?un.withCacheSize(this.cacheSizeBytes):un.DEFAULT;return new Zh(r=>Xh.mi(r,n),this.serializer)}};var LU=(()=>{class t{async initialize(n,r){this.localStore||(this.localStore=n.localStore,this.sharedClientState=n.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!n.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>AA(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=OU.bind(null,this.syncEngine),await IU(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(n){return(function(){return new oE})()}createDatastore(n){let r=wf(n.databaseInfo.databaseId),i=(function(s){return new Y_(s)})(n.databaseInfo);return(function(s,a,u,l){return new eE(s,a,u,l)})(n.authCredentials,n.appCheckCredentials,i,r)}createRemoteStore(n){return(function(i,o,s,a,u){return new nE(i,o,s,a,u)})(this.localStore,this.datastore,n.asyncQueue,r=>AA(this.syncEngine,r,0),(function(){return tf.v()?new tf:new G_})())}createSyncEngine(n,r){return(function(o,s,a,u,l,h,p){let g=new lE(o,s,a,u,l,h);return p&&(g.gu=!0),g})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,r)}async terminate(){await(async function(r){let i=ie(r);U(go,"RemoteStore shutting down."),i.Ea.add(5),await cu(i),i.Aa.shutdown(),i.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}return t.provider={build:()=>new t},t})();var lf=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):vr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}};var fE=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new $(N.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let n=await(async function(i,o){let s=ie(i),a={documents:o.map(p=>Yh(s.serializer,p))},u=await s.Ho("BatchGetDocuments",s.serializer.databaseId,xe.emptyPath(),a,o.length),l=new Map;u.forEach(p=>{let g=$B(s.serializer,p);l.set(g.key.toString(),g)});let h=[];return o.forEach(p=>{let g=l.get(p.toString());_e(!!g,55234,{key:p}),h.push(g)}),h})(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Jc(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{let i=Q.fromPath(r);this.mutations.push(new zh(i,this.precondition(i)))}),await(async function(r,i){let o=ie(r),s={writes:i.map(a=>MR(o.serializer,a))};await o.Go("Commit",o.serializer.databaseId,xe.emptyPath(),s)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw G(50498,{Gu:e.constructor.name});n=X.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new $(N.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){let n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(X.min())?ln.exists(!1):ln.updateTime(n):ln.none()}preconditionForUpdate(e){let n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(X.min()))throw new $(N.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ln.updateTime(n)}return ln.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var pE=class{constructor(e,n,r,i,o){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=o,this.zu=r.maxAttempts,this.M_=new nu(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_(async()=>{let e=new fE(this.datastore),n=this.Hu(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.Yu(i)}))}).catch(r=>{this.Yu(r)})})}Hu(e){try{let n=this.updateFunction(e);return!au(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ju(),Promise.resolve()))):this.deferred.reject(e)}Zu(e){if(e?.name==="FirebaseError"){let n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!DR(n)}return!1}};var hi="FirestoreClient",mE=class{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=ct.UNAUTHENTICATED,this.clientId=Gc.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async s=>{U(hi,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(U(hi,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new bn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=HE(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}};async function Bv(t,e){t.asyncQueue.verifyOperationInProgress(),U(hi,"Initializing OfflineComponentProvider");let n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await kR(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function MA(t,e){t.asyncQueue.verifyOperationInProgress();let n=await VU(t);U(hi,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>bA(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>bA(e.remoteStore,i)),t._onlineComponents=e}async function VU(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){U(hi,"Using user provided OfflineComponentProvider");try{await Bv(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!(function(i){return i.name==="FirebaseError"?i.code===N.FAILED_PRECONDITION||i.code===N.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(n))throw n;Cs("Error using user provided cache. Falling back to memory cache: "+n),await Bv(t,new JR)}}else U(hi,"Using default OfflineComponentProvider"),await Bv(t,new hE(void 0));return t._offlineComponents}async function WE(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(U(hi,"Using user provided OnlineComponentProvider"),await MA(t,t._uninitializedComponentsProvider._online)):(U(hi,"Using default OnlineComponentProvider"),await MA(t,new LU))),t._onlineComponents}function jU(t){return WE(t).then(e=>e.syncEngine)}function BU(t){return WE(t).then(e=>e.datastore)}async function gE(t){let e=await WE(t),n=e.eventManager;return n.onListen=DU.bind(null,e.syncEngine),n.onUnlisten=SU.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=bU.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=AU.bind(null,e.syncEngine),n}function UU(t,e,n={}){let r=new bn;return t.asyncQueue.enqueueAndForget(async()=>(function(o,s,a,u,l){let h=new lf({next:g=>{h.Nu(),s.enqueueAndForget(()=>zR(o,p));let y=g.docs.has(a);!y&&g.fromCache?l.reject(new $(N.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&g.fromCache&&u&&u.source==="server"?l.reject(new $(N.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(g)},error:g=>l.reject(g)}),p=new af(_f(a.path),h,{includeMetadataChanges:!0,qa:!0});return HR(o,p)})(await gE(t),t.asyncQueue,e,n,r)),r.promise}function ZR(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var NA=new Map;var XR="firestore.googleapis.com",xA=!0,df=class{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new $(N.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=XR,this.ssl=xA}else this.host=e.host,this.ssl=e.ssl??xA;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=OR;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<eU)throw new $(N.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Yj("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ZR(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new $(N.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new $(N.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new $(N.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},ru=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new df({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new $(N.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new $(N.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new df(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new Uv;switch(r.type){case"firstParty":return new qv(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new $(N.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){let r=NA.get(n);r&&(U("ComponentProvider","Removing Datastore"),NA.delete(n),r.terminate())})(this),Promise.resolve()}};function $U(t,e,n,r={}){t=gr(t,ru);let i=Yr(e),o=t._getSettings(),s=J(M({},o),{emulatorOptions:t._getEmulatorOptions()}),a=`${e}:${n}`;i&&(nh(`https://${a}`),rh("Firestore",!0)),o.host!==XR&&o.host!==a&&Cs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let u=J(M({},o),{host:a,ssl:i,emulatorOptions:r});if(!Hn(u,s)&&(t._setSettings(u),r.mockUserToken)){let l,h;if(typeof r.mockUserToken=="string")l=r.mockUserToken,h=ct.MOCK_USER;else{l=N0(r.mockUserToken,t._app?.options.projectId);let p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new $(N.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new ct(p)}t._authCredentials=new $v(new Fh(l,h))}}var hf=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},mt=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new iu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}toJSON(){return{type:t._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(su(n,t._jsonSchema))return new t(e,r||null,new Q(xe.fromString(n.referencePath)))}};mt._jsonSchemaVersion="firestore/documentReference/1.0",mt._jsonSchema={type:ze("string",mt._jsonSchemaVersion),referencePath:ze("string")};var iu=class t extends hf{constructor(e,n,r){super(e,n,_f(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new mt(this.firestore,null,new Q(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function eM(t,e,...n){if(t=Ue(t),arguments.length===1&&(e=Gc.newId()),Qj("doc","path",e),t instanceof ru){let r=xe.fromString(e,...n);return ZS(r),new mt(t,null,new Q(r))}{if(!(t instanceof mt||t instanceof iu))throw new $(N.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(xe.fromString(e,...n));return ZS(r),new mt(t.firestore,t instanceof iu?t.converter:null,new Q(r))}}var PA="AsyncQueue",ff=class{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new nu(this,"async_queue_retry"),this._c=()=>{let r=jv();r&&U(PA,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;let n=jv();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;let n=jv();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});let n=new bn;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Bs(e))throw e;U(PA,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){let n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,vr("INTERNAL UNHANDLED ERROR: ",OA(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);let i=rE.createAndSchedule(this,e,n,r,o=>this.hc(o));return this.tc.push(i),i}uc(){this.nc&&G(47125,{Pc:OA(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(let n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){let n=this.tc.indexOf(e);this.tc.splice(n,1)}};function OA(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}function kA(t){return(function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1})(t,["next","error","complete"])}var fi=class extends ru{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new ff,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new ff(e),this._firestoreClient=void 0,await e}}};function tM(t,e){let n=typeof t=="object"?t:ah(),r=typeof t=="string"?t:e||Uh,i=Mc(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=M0("firestore");o&&$U(i,...o)}return i}function bf(t){if(t._terminated)throw new $(N.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||HU(t),t._firestoreClient}function HU(t){let e=t._freezeSettings(),n=(function(i,o,s,a){return new Yv(i,o,s,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,ZR(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator)})(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new mE(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(i){let o=i?._online.build();return{_offline:i?._offline.build(o),_online:o}})(t._componentsProvider))}var yr=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(Et.fromBase64String(e))}catch(n){throw new $(N.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(Et.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:t._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(su(e,t._jsonSchema))return t.fromBase64String(e.bytes)}};yr._jsonSchemaVersion="firestore/bytes/1.0",yr._jsonSchema={type:ze("string",yr._jsonSchemaVersion),bytes:ze("string")};var ks=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new $(N.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Kt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Fs=class{constructor(e){this._methodName=e}};var ai=class t{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new $(N.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new $(N.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return pe(this._lat,e._lat)||pe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:t._jsonSchemaVersion}}static fromJSON(e){if(su(e,t._jsonSchema))return new t(e.latitude,e.longitude)}};ai._jsonSchemaVersion="firestore/geoPoint/1.0",ai._jsonSchema={type:ze("string",ai._jsonSchemaVersion),latitude:ze("number"),longitude:ze("number")};var ci=class t{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:t._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(su(e,t._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new t(e.vectorValues);throw new $(N.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};ci._jsonSchemaVersion="firestore/vectorValue/1.0",ci._jsonSchema={type:ze("string",ci._jsonSchemaVersion),vectorValues:ze("object")};var zU=/^__.*__$/,yE=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Yn(e,this.data,this.fieldMask,n,this.fieldTransforms):new mo(e,this.data,n,this.fieldTransforms)}},pf=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Yn(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function nM(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw G(40011,{Ac:t})}}var vE=class t{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new t(M(M({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){let n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){let n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return gf(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(nM(this.Ac)&&zU.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}},_E=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||wf(e)}Cc(e,n,r,i=!1){return new vE({Ac:e,methodName:n,Dc:r,path:Kt.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function rM(t){let e=t._freezeSettings(),n=wf(t._databaseId);return new _E(t._databaseId,!!e.ignoreUndefinedProperties,n)}function iM(t,e,n,r,i,o={}){let s=t.Cc(o.merge||o.mergeFields?2:0,e,n,i);KE("Data must be an object, but it was:",s,r);let a=oM(r,s),u,l;if(o.merge)u=new dn(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let g=IE(e,p,n);if(!s.contains(g))throw new $(N.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);aM(h,g)||h.push(g)}u=new dn(h),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new yE(new Ft(a),u,l)}var mf=class t extends Fs{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};var EE=class t extends Fs{_toFieldTransform(e){return new l_(e.path,new ho)}isEqual(e){return e instanceof t}};function qU(t,e,n,r){let i=t.Cc(1,e,n);KE("Data must be an object, but it was:",i,r);let o=[],s=Ft.empty();pi(r,(u,l)=>{let h=QE(e,u,n);l=Ue(l);let p=i.yc(h);if(l instanceof mf)o.push(h);else{let g=Tf(l,p);g!=null&&(o.push(h),s.set(h,g))}});let a=new dn(o);return new pf(s,a,i.fieldTransforms)}function GU(t,e,n,r,i,o){let s=t.Cc(1,e,n),a=[IE(e,r,n)],u=[i];if(o.length%2!=0)throw new $(N.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<o.length;g+=2)a.push(IE(e,o[g])),u.push(o[g+1]);let l=[],h=Ft.empty();for(let g=a.length-1;g>=0;--g)if(!aM(l,a[g])){let y=a[g],T=u[g];T=Ue(T);let R=s.yc(y);if(T instanceof mf)l.push(y);else{let A=Tf(T,R);A!=null&&(l.push(y),h.set(y,A))}}let p=new dn(l);return new pf(h,p,s.fieldTransforms)}function Tf(t,e){if(sM(t=Ue(t)))return KE("Unsupported field value:",e,t),oM(t,e);if(t instanceof Fs)return(function(r,i){if(!nM(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){let o=[],s=0;for(let a of r){let u=Tf(a,i.wc(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}})(t,e)}return(function(r,i){if((r=Ue(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return AB(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=qe.fromDate(r);return{timestampValue:Qh(i.serializer,o)}}if(r instanceof qe){let o=new qe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Qh(i.serializer,o)}}if(r instanceof ai)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof yr)return{bytesValue:TR(i.serializer,r._byteString)};if(r instanceof mt){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Sc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:LE(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof ci)return(function(s,a){return{mapValue:{fields:{[NE]:{stringValue:xE},[bs]:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw a.Sc("VectorValues must only contain numeric values.");return FE(a.serializer,l)})}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${SE(r)}`)})(t,e)}function oM(t,e){let n={};return ZA(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):pi(t,(r,i)=>{let o=Tf(i,e.mc(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function sM(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof qe||t instanceof ai||t instanceof yr||t instanceof mt||t instanceof Fs||t instanceof ci)}function KE(t,e,n){if(!sM(n)||!LA(n)){let r=SE(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function IE(t,e,n){if((e=Ue(e))instanceof ks)return e._internalPath;if(typeof e=="string")return QE(t,e);throw gf("Field path arguments must be of type string or ",t,!1,void 0,n)}var WU=new RegExp("[~\\*/\\[\\]]");function QE(t,e,n){if(e.search(WU)>=0)throw gf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ks(...e.split("."))._internalPath}catch{throw gf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function gf(t,e,n,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new $(N.INVALID_ARGUMENT,a+t+u)}function aM(t,e){return t.some(n=>n.isEqual(e))}var Ls=class{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new mt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new wE(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(cM("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},wE=class extends Ls{data(){return super.data()}};function cM(t,e){return typeof e=="string"?QE(t,e):e instanceof ks?e._internalPath:e._delegate._internalPath}function KU(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new $(N.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var yf=class{convertValue(e,n="none"){switch(li(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ne(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Er(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw G(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return pi(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){let n=e.fields?.[bs].arrayValue?.values?.map(r=>Ne(r.doubleValue));return new ci(n)}convertGeoPoint(e){return new ai(Ne(e.latitude),Ne(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=vf(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Qc(e));default:return null}}convertTimestamp(e){let n=_r(e);return new qe(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=xe.fromString(e);_e(PR(r),9688,{name:e});let i=new $h(r.get(1),r.get(3)),o=new Q(r.popFirst(5));return i.isEqual(n)||vr(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};function uM(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var CE=class extends yf{constructor(e){super(),this.firestore=e}convertBytes(e){return new yr(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new mt(this.firestore,null,n)}};var si=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},ui=class t extends Ls{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new Is(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(cM("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new $(N.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,n={};return n.type=t._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}};ui._jsonSchemaVersion="firestore/documentSnapshot/1.0",ui._jsonSchema={type:ze("string",ui._jsonSchemaVersion),bundleSource:ze("string","DocumentSnapshot"),bundleName:ze("string"),bundle:ze("string")};var Is=class extends ui{data(e={}){return super.data(e)}},ws=class t{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new si(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Is(this._firestore,this._userDataWriter,r.key,r,new si(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new $(N.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new Is(i._firestore,i._userDataWriter,a.doc.key,a.doc,new si(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new Is(i._firestore,i._userDataWriter,a.doc.key,a.doc,new si(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:QU(a.type),doc:u,oldIndex:l,newIndex:h}})}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new $(N.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=t._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Gc.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let n=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function QU(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return G(61501,{type:t})}}function lM(t){t=gr(t,mt);let e=gr(t.firestore,fi);return UU(bf(e),t._key).then(n=>hM(e,t,n))}ws._jsonSchemaVersion="firestore/querySnapshot/1.0",ws._jsonSchema={type:ze("string",ws._jsonSchemaVersion),bundleSource:ze("string","QuerySnapshot"),bundleName:ze("string"),bundle:ze("string")};var ou=class extends yf{constructor(e){super(),this.firestore=e}convertBytes(e){return new yr(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new mt(this.firestore,null,n)}};function YE(t,e,n){t=gr(t,mt);let r=gr(t.firestore,fi),i=uM(t.converter,e,n);return YU(r,[iM(rM(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,ln.none())])}function dM(t,...e){t=Ue(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||kA(e[r])||(n=e[r++]);let i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(kA(e[r])){let u=e[r];e[r]=u.next?.bind(u),e[r+1]=u.error?.bind(u),e[r+2]=u.complete?.bind(u)}let o,s,a;if(t instanceof mt)s=gr(t.firestore,fi),a=_f(t._key.path),o={next:u=>{e[r]&&e[r](hM(s,t,u))},error:e[r+1],complete:e[r+2]};else{let u=gr(t,hf);s=gr(u.firestore,fi),a=u._query;let l=new ou(s);o={next:h=>{e[r]&&e[r](new ws(s,l,u,h))},error:e[r+1],complete:e[r+2]},KU(t._query)}return(function(l,h,p,g){let y=new lf(g),T=new af(h,y,p);return l.asyncQueue.enqueueAndForget(async()=>HR(await gE(l),T)),()=>{y.Nu(),l.asyncQueue.enqueueAndForget(async()=>zR(await gE(l),T))}})(bf(s),a,i,o)}function YU(t,e){return(function(r,i){let o=new bn;return r.asyncQueue.enqueueAndForget(async()=>RU(await jU(r),i,o)),o.promise})(bf(t),e)}function hM(t,e,n){let r=n.docs.get(e._key),i=new ou(t);return new ui(t,i,e._key,r,new si(n.hasPendingWrites,n.fromCache),e.converter)}var JU={maxAttempts:5};function Bc(t,e){if((t=Ue(t)).firestore!==e)throw new $(N.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var DE=class{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=rM(e)}get(e){let n=Bc(e,this._firestore),r=new CE(this._firestore);return this._transaction.lookup([n._key]).then(i=>{if(!i||i.length!==1)return G(24041);let o=i[0];if(o.isFoundDocument())return new Ls(this._firestore,r,o.key,o,n.converter);if(o.isNoDocument())return new Ls(this._firestore,r,n._key,null,n.converter);throw G(18433,{doc:o})})}set(e,n,r){let i=Bc(e,this._firestore),o=uM(i.converter,n,r),s=iM(this._dataReader,"Transaction.set",i._key,o,i.converter!==null,r);return this._transaction.set(i._key,s),this}update(e,n,r,...i){let o=Bc(e,this._firestore),s;return s=typeof(n=Ue(n))=="string"||n instanceof ks?GU(this._dataReader,"Transaction.update",o._key,n,r,i):qU(this._dataReader,"Transaction.update",o._key,n),this._transaction.update(o._key,s),this}delete(e){let n=Bc(e,this._firestore);return this._transaction.delete(n._key),this}};var bE=class extends DE{constructor(e,n){super(e,n),this._firestore=e}get(e){let n=Bc(e,this._firestore),r=new ou(this._firestore);return super.get(e).then(i=>new ui(this._firestore,r,n._key,i._document,new si(!1,!1),n.converter))}};function $s(t,e,n){t=gr(t,fi);let r=M(M({},JU),n);return(function(o){if(o.maxAttempts<1)throw new $(N.INVALID_ARGUMENT,"Max attempts must be at least 1")})(r),(function(o,s,a){let u=new bn;return o.asyncQueue.enqueueAndForget(async()=>{let l=await BU(o);new pE(o.asyncQueue,l,a,s,u).ju()}),u.promise})(bf(t),i=>e(new bE(t,i)),r)}function vo(){return new EE("serverTimestamp")}(function(e,n=!0){(function(i){Vs=i})(ei),Xr(new cn("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new fi(new Hv(r.getProvider("auth-internal")),new Gv(s,r.getProvider("app-check-internal")),(function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new $(N.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new $h(l.options.projectId,h)})(s,i),s);return o=M({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Dn(QS,YS,e),Dn(QS,YS,"esm2020")})();var ZU={apiKey:"AIzaSyD1m1RhdiM9NtlEv9-lk-TT9bQhBUvC2d0",authDomain:"clouset-cs2.firebaseapp.com",projectId:"clouset-cs2",storageBucket:"clouset-cs2.firebasestorage.app",messagingSenderId:"129931894882",appId:"1:129931894882:web:a45936fa981264e8ee713b"},fM=Xy(ZU),_o=Mv(fM),Eo=tM(fM);var hn=class t{user$=new de(e=>{let n=bh(_o,r=>e.next(r),r=>e.error(r));return()=>n()});async ensurePersistence(){await Sv(_o,Th)}async getUserOnce(){return await new Promise(e=>{let n=bh(_o,r=>{n(),e(r??null)})})}async isLoggedInOnce(){return!!await this.getUserOnce()}async loginWithCustomToken(e){return await this.ensurePersistence(),(await Tv(_o,e)).user}async logout(){await Av(_o)}async loginAnonymous(){return await this.ensurePersistence(),(await bv(_o)).user}static \u0275fac=function(n){return new(n||t)};static \u0275prov=K({token:t,factory:t.\u0275fac,providedIn:"root"})};function XU(t,e){if(t&1){let n=pt();H(0,"div",5)(1,"label",8),x(2,"SteamID (dev)"),W(),H(3,"input",9),ad("ngModelChange",function(i){Ye(n);let o=L();return jg(o.devSteamId,i)||(o.devSteamId=i),Je(i)}),W(),H(4,"button",10),vt("click",function(){Ye(n);let i=L();return Je(i.loginDev())}),H(5,"span"),x(6,"Login fake (dev)"),W()(),H(7,"div",11),x(8,"Solo disponible en entornos locales/dev."),W()()}if(t&2){let n=L();k(3),sd("ngModel",n.devSteamId)}}function e$(t,e){t&1&&(H(0,"p",6),x(1,"Procesando..."),W())}function t$(t,e){if(t&1&&(H(0,"p",7),x(1),W()),t&2){let n=L();k(),be(n.error)}}var Sf=class t{auth=P(hn);route=P($n);router=P(an);loading=!1;error="";isDevHost=!1;devSteamId="";async ngOnInit(){this.isDevHost=this.checkDevHost(),this.isDevHost&&(this.devSteamId=localStorage.getItem("devSteamId")??"76561198000000000");let e=this.route.snapshot.queryParamMap.get("token"),n=this.route.snapshot.queryParamMap.get("error");if(n&&(this.error=n),e){this.loading=!0;try{await this.auth.loginWithCustomToken(e),await this.router.navigateByUrl("/dashboard")}catch(r){this.error=r?.message??"Error al iniciar sesi\xF3n"}finally{this.loading=!1}}}loginSteam(){let e=`${window.location.origin}/login`,n=`/api/auth/steam/start?redirect=${encodeURIComponent(e)}`;window.location.href=n}loginDev(){let e=this.devSteamId.trim();if(!/^\d{15,20}$/.test(e)){this.error="SteamID inv\xE1lido para login dev";return}localStorage.setItem("devSteamId",e);let n=`${window.location.origin}/login`,r=`/api/auth/steam/dev?steamId=${encodeURIComponent(e)}&redirect=${encodeURIComponent(n)}`;window.location.href=r}async loginAnon(){this.loading=!0,this.error="";try{await this.auth.loginAnonymous(),await this.router.navigateByUrl("/dashboard")}catch(e){this.error=e?.message??"Error en login an\xF3nimo"}finally{this.loading=!1}}checkDevHost(){let e=window.location.hostname;return e?e==="localhost"||e==="127.0.0.1"||e.endsWith(".dev"):!1}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=En({type:t,selectors:[["ng-component"]],decls:14,vars:3,consts:[[1,"custom-wrapper"],[1,"custom-card"],["src","clouset.png",1,"img-logo"],["role","button",1,"button-27","steam-btn",3,"click"],["src","steam-logo.png","alt","Steam",1,"img-button"],[1,"dev-login"],[2,"margin-top","12px"],[2,"color","#b00020","margin-top","12px"],["for","devSteamId",1,"dev-label"],["id","devSteamId","type","text","inputmode","numeric","placeholder","76561198000000000",1,"dev-input",3,"ngModelChange","ngModel"],["role","button",1,"button-27","steam-btn","dev-btn",3,"click"],[1,"dev-note"]],template:function(n,r){n&1&&(H(0,"div",0)(1,"div",1)(2,"h1"),on(3,"img",2),W(),H(4,"button",3),vt("click",function(){return r.loginSteam()}),on(5,"img",4),H(6,"span"),x(7,"Login con Steam"),W()(),H(8,"button",3),vt("click",function(){return r.loginAnon()}),H(9,"span"),x(10,"Login con Anon"),W()(),te(11,XU,9,1,"div",5),te(12,e$,2,0,"p",6),te(13,t$,2,1,"p",7),W()()),n&2&&(k(11),ne(r.isDevHost?11:-1),k(),ne(r.loading?12:-1),k(),ne(r.error?13:-1))},dependencies:[pd,C0,Jd,E0,Ny],styles:[".steam-btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:12px}.img-button[_ngcontent-%COMP%]{height:100%;max-height:32px;width:auto;display:block}.dev-login[_ngcontent-%COMP%]{margin-top:16px;display:flex;flex-direction:column;gap:8px}.dev-label[_ngcontent-%COMP%]{font-size:12px;color:#666;text-align:left}.dev-input[_ngcontent-%COMP%]{padding:10px 12px;border:1px solid #ddd;border-radius:6px;font-size:14px}.dev-note[_ngcontent-%COMP%]{font-size:12px;color:#999}"]})};function JE(t){t||(t=P(nn));let e=new de(n=>{if(t.destroyed){n.next();return}return t.onDestroy(n.next.bind(n))});return n=>n.pipe(Di(e))}var n$=["matches","current"],Af=["de_inferno","de_mirage","de_nuke","de_overpass","de_ancient","de_vertigo","de_anubis"],r$=["esperando_jugadores","seleccionando_lideres","armando_equipos","seleccionando_mapa","en_curso"];function ZE(){return{estado:"esperando_jugadores",map:null,team1:{name:"Team A",players:[]},team2:{name:"Team B",players:[]},queue:[],mapPool:[...Af],bannedMaps:[],mapTurn:"team1",mapBanCount:0,updatedAt:vo()}}function XE(t){return typeof t=="string"&&r$.includes(t)}function i$(t){let e={};if(XE(t.estado)||(e.estado="esperando_jugadores"),t.map===void 0&&(e.map=null),Array.isArray(t.queue)||(e.queue=[]),Array.isArray(t.mapPool)||(e.mapPool=[...Af]),Array.isArray(t.bannedMaps)||(e.bannedMaps=[]),!t.team1||typeof t.team1!="object")e.team1={name:"Team A",players:[]};else{let n={};t.team1.name||(n.name="Team A"),Array.isArray(t.team1.players)||(n.players=[]),Object.keys(n).length&&(e.team1=M(M({},t.team1),n))}if(!t.team2||typeof t.team2!="object")e.team2={name:"Team B",players:[]};else{let n={};t.team2.name||(n.name="Team B"),Array.isArray(t.team2.players)||(n.players=[]),Object.keys(n).length&&(e.team2=M(M({},t.team2),n))}return e}var Hs=class t{matchRef=eM(Eo,...n$);_match$=new We(null);match$=this._match$.asObservable();unsub=null;async ensureAndSubscribe(){let e=await lM(this.matchRef);if(!e.exists())await YE(this.matchRef,ZE(),{merge:!1});else{let n=e.data(),r=i$(n);Object.keys(r).length>0&&await YE(this.matchRef,r,{merge:!0})}this.unsub||(this.unsub=dM(this.matchRef,n=>{this._match$.next(n.data()??null)},n=>{console.error("Match onSnapshot error:",n),this._match$.next(null)}))}async joinQueue(e){e&&await $s(Eo,async n=>{let r=await n.get(this.matchRef);if(!r.exists()){n.set(this.matchRef,ZE(),{merge:!1});return}let i=r.data(),o=XE(i.estado)?i.estado:"esperando_jugadores";if(o!=="esperando_jugadores")throw new Error(`No se puede unirse: estado actual = ${o}`);let s=Array.isArray(i.queue)?[...i.queue]:[];if(s.includes(e))return;if(s.length>=10)throw new Error("La queue ya est\xE1 completa (10 jugadores).");s.push(e);let a={queue:s,updatedAt:vo()};XE(i.estado)||(a.estado="esperando_jugadores"),n.update(this.matchRef,a)})}async leaveQueue(e){e&&await $s(Eo,async n=>{let r=await n.get(this.matchRef);if(!r.exists())return;let i=r.data();if(i.estado!=="esperando_jugadores")return;let s=(Array.isArray(i.queue)?[...i.queue]:[]).filter(a=>a!==e);n.update(this.matchRef,{queue:s,updatedAt:vo()})})}async pickPlayer(e,n){!e||!n||await $s(Eo,async r=>{let i=await r.get(this.matchRef);if(!i.exists())throw new Error("Match no existe.");let o=i.data();if(o.estado!=="armando_equipos")throw new Error(`No se puede pickear: estado = ${o.estado}`);let s=o.team1?.players?[...o.team1.players]:[],a=o.team2?.players?[...o.team2.players]:[],u=s[0]??null,l=a[0]??null;if(!u||!l)throw new Error("No hay l\xEDderes definidos todav\xEDa.");let h=o.turn||"team1";if(h==="team1"){if(e!==u)throw new Error("No sos el l\xEDder de Team A o no es tu turno.")}else if(e!==l)throw new Error("No sos el l\xEDder de Team B o no es tu turno.");let p=Array.isArray(o.unassigned)?[...o.unassigned]:Array.isArray(o.queue)?[...o.queue]:[];if(!p.includes(n))throw new Error("Ese jugador ya no est\xE1 disponible para pick.");if(n===u||n===l)throw new Error("No pod\xE9s pickear a un l\xEDder.");if(s.includes(n)||a.includes(n))throw new Error("Ese jugador ya est\xE1 en un equipo.");if(h==="team1"&&s.length>=5)throw new Error("Team A ya est\xE1 completo.");if(h==="team2"&&a.length>=5)throw new Error("Team B ya est\xE1 completo.");let g=p.filter(ee=>ee!==n),y=s,T=a;h==="team1"?y=[...s,n]:T=[...a,n];let R=h==="team1"?"team2":"team1",A=y.length===5&&T.length===5,F={team1:J(M({},o.team1??{name:"Team A"}),{players:y}),team2:J(M({},o.team2??{name:"Team B"}),{players:T}),unassigned:g,turn:R,updatedAt:vo()};A&&(F.estado="seleccionando_mapa",F.queue=[],F.unassigned=[],F.mapTurn="team1",F.mapBanCount=0,F.bannedMaps=[],F.mapPool=Array.isArray(o.mapPool)?[...o.mapPool]:[...Af]),r.update(this.matchRef,F)})}async banMap(e,n){if(!e||!n)return;let r=["team1","team1","team2","team2","team1","team2"];await $s(Eo,async i=>{let o=await i.get(this.matchRef);if(!o.exists())throw new Error("Match no existe.");let s=o.data();if(s.estado!=="seleccionando_mapa")throw new Error(`No se puede banear: estado = ${s.estado}`);let a=s.team1?.players??[],u=s.team2?.players??[],l=a[0]??null,h=u[0]??null;if(!l||!h)throw new Error("No hay l\xEDderes definidos.");let p=Array.isArray(s.bannedMaps)?[...s.bannedMaps]:[],g=p.length,y=r[g];if(!y)throw new Error("No hay m\xE1s mapas para banear.");if(y==="team1"&&e!==l)throw new Error("No sos el l\xEDder de Team A o no es tu turno.");if(y==="team2"&&e!==h)throw new Error("No sos el l\xEDder de Team B o no es tu turno.");let T=Array.isArray(s.mapPool)&&s.mapPool.length>0?[...s.mapPool]:[...Af];if(!T.includes(n))throw new Error("Ese mapa no est\xE1 en el pool.");if(p.includes(n))throw new Error("Ese mapa ya est\xE1 baneado.");let R=[...p,n],A=T.filter(lt=>!R.includes(lt));if(A.length===0)throw new Error("No quedan mapas disponibles.");let F=g+1,ee=r[g+1]??null,le={bannedMaps:R,mapTurn:ee,mapBanCount:F,mapPool:T,updatedAt:vo()};A.length===1&&(le.map=A[0]),i.update(this.matchRef,le)})}async requestFinalizeMatch(e){e&&await $s(Eo,async n=>{let r=await n.get(this.matchRef);if(!r.exists())throw new Error("Match no existe.");let i=r.data();if(i.estado!=="en_curso")throw new Error(`No se puede finalizar: estado = ${i.estado}`);let o=i.team1?.players??[],s=i.team2?.players??[],a=o[0]??null,u=s[0]??null;if(!a||!u)throw new Error("No hay l\xEDderes definidos.");if(e!==a&&e!==u)throw new Error("Solo los l\xEDderes pueden finalizar el match.");let l=Array.isArray(i.finalizeBy)?[...i.finalizeBy]:[];if(l.includes(e))return;if(l.push(e),l.includes(a)&&l.includes(u)){n.set(this.matchRef,ZE(),{merge:!1});return}n.update(this.matchRef,{finalizeBy:l,updatedAt:vo()})})}async cancelMatch(){let e=await fetch("/api/match/cancel",{method:"POST"});if(!e.ok){let n=await e.text().catch(()=>"");throw new Error(`No se pudo cancelar el match (${e.status}) ${n}`.trim())}}dispose(){this.unsub&&this.unsub(),this.unsub=null,this._match$.next(null)}static \u0275fac=function(n){return new(n||t)};static \u0275prov=K({token:t,factory:t.\u0275fac,providedIn:"root"})};function o$(t,e){if(t&1&&(j(0,"span"),x(1,"Mapa: "),j(2,"b"),x(3),B()()),t&2){let n=L();k(3),be(n.match.map)}}function s$(t,e){if(t&1&&(j(0,"span"),x(1,"Turno: "),j(2,"b"),x(3),B()()),t&2){let n=L();k(3),be(n.turn==="team1"?(n.match.team1==null?null:n.match.team1.name)??"Team A":(n.match.team2==null?null:n.match.team2.name)??"Team B")}}function a$(t,e){t&1&&(j(0,"div",5),x(1," Est\xE1s fuera. Activ\xE1 "),j(2,"b"),x(3,"Ver match"),B(),x(4," para ver el detalle. "),B())}function c$(t,e){if(t&1&&(jn(0,"img",15),j(1,"div",14),x(2),B()),t&2){let n=e,r=L().$implicit,i=L(2);In("leaderAvatar",i.isLeaderA(r)),zt("src",n.avatar,Ht),k(2),be(n.personaName)}}function u$(t,e){if(t&1&&(j(0,"div",14),x(1),B()),t&2){let n=L().$implicit;k(),be(n)}}function l$(t,e){if(t&1&&(j(0,"div",13),te(1,c$,3,4)(2,u$,2,1,"div",14),B()),t&2){let n,r=e.$implicit,i=L(2);In("leader",i.isLeaderA(r)),sr("title",i.titleFor(r)),k(),ne((n=i.profileOf(r))?1:2,n)}}function d$(t,e){t&1&&(j(0,"div",11),x(1,"Vac\xEDo"),B())}function h$(t,e){if(t&1&&(jn(0,"img",15),j(1,"div",19),x(2),B()),t&2){let n=e;zt("src",n.avatar,Ht),k(2),be(n.personaName)}}function f$(t,e){if(t&1&&(j(0,"div",19),x(1),B()),t&2){let n=L().$implicit;k(),be(n)}}function p$(t,e){if(t&1&&(j(0,"div",18),te(1,h$,3,2)(2,f$,2,1,"div",19),B()),t&2){let n,r=e.$implicit,i=L(3);sr("title",i.titleFor(r)),k(),ne((n=i.profileOf(r))?1:2,n)}}function m$(t,e){t&1&&(j(0,"div",11),x(1,"No hay nadie todav\xEDa"),B())}function g$(t,e){if(t&1&&(j(0,"div",16),x(1,"Jugadores en cola"),B(),j(2,"div",17),Hr(3,p$,3,2,"div",18,$r),te(5,m$,2,0,"div",11),B()),t&2){let n=L(2);k(3),zr(n.queue),k(2),ne(n.queue.length===0?5:-1)}}function y$(t,e){if(t&1&&(jn(0,"img",15),j(1,"div",19),x(2),B()),t&2){let n=e;zt("src",n.avatar,Ht),k(2),be(n.personaName)}}function v$(t,e){if(t&1&&(j(0,"div",19),x(1),B()),t&2){let n=L().$implicit;k(),be(n)}}function _$(t,e){if(t&1&&(j(0,"div",18),te(1,y$,3,2)(2,v$,2,1,"div",19),B()),t&2){let n,r=e.$implicit,i=L(3);sr("title",i.titleFor(r)),k(),ne((n=i.profileOf(r))?1:2,n)}}function E$(t,e){if(t&1&&(j(0,"div",16),x(1,"Seleccionando l\xEDderes\u2026"),B(),j(2,"div",11),x(3,"En unos segundos se asignan 2 l\xEDderes y pasan a los equipos."),B(),j(4,"div",17),Hr(5,_$,3,2,"div",18,$r),B()),t&2){let n=L(2);k(5),zr(n.queue)}}function I$(t,e){t&1&&(j(0,"div",11),x(1,"Es tu turno. Eleg\xED un jugador y apret\xE1 Pickear."),B())}function w$(t,e){t&1&&(j(0,"div",11),x(1,"Solo el l\xEDder del turno puede pickear."),B())}function C$(t,e){if(t&1&&(jn(0,"img",15),j(1,"div",19),x(2),B()),t&2){let n=e;zt("src",n.avatar,Ht),k(2),be(n.personaName)}}function D$(t,e){if(t&1&&(j(0,"div",19),x(1),B()),t&2){let n=L().$implicit;k(),be(n)}}function b$(t,e){if(t&1){let n=pt();j(0,"div",24),Gr("click",function(){let i=Ye(n).$implicit,o=L(3);return Je(o.onSelect(i))}),te(1,C$,3,2)(2,D$,2,1,"div",19),B()}if(t&2){let n,r=e.$implicit,i=L(3);In("selected",i.selectedId===r),sr("title",i.titleFor(r)),k(),ne((n=i.profileOf(r))?1:2,n)}}function T$(t,e){t&1&&(j(0,"div",11),x(1,"No hay disponibles"),B())}function S$(t,e){if(t&1&&(j(0,"div",21),x(1),B()),t&2){let n=L(3);k(),Xe(" ",n.pickErr," ")}}function A$(t,e){if(t&1){let n=pt();j(0,"div",16),x(1,"Jugadores disponibles"),B(),te(2,I$,2,0,"div",11)(3,w$,2,0,"div",11),j(4,"div",17),Hr(5,b$,3,4,"div",20,$r),te(7,T$,2,0,"div",11),B(),te(8,S$,2,1,"div",21),j(9,"div",22)(10,"button",23),Gr("click",function(){Ye(n);let i=L(2);return Je(i.onPick())}),x(11),B()()}if(t&2){let n=L(2);k(2),ne(n.canPick?2:3),k(3),zr(n.availableIds),k(2),ne(n.availableIds.length===0?7:-1),k(),ne(n.pickErr?8:-1),k(2),zt("disabled",!n.canPick||!n.selectedId||n.busyPick),k(),Xe(" ",n.busyPick?"Pickeando\u2026":"Pickear"," ")}}function R$(t,e){t&1&&(j(0,"div",11),x(1,"Es tu turno. Eleg\xED un mapa para banear."),B())}function M$(t,e){t&1&&(j(0,"div",11),x(1,"Solo el l\xEDder del turno puede banear."),B())}function N$(t,e){if(t&1){let n=pt();j(0,"div",27),jn(1,"div",28),j(2,"div",29),x(3),B(),j(4,"button",30),Gr("click",function(){let i=Ye(n).$implicit,o=L(3);return Je(o.onBanMap(i))}),x(5),B()()}if(t&2){let n=e.$implicit,r=L(3);In("banned",r.isBanned(n)),k(3),be(n),k(),zt("disabled",r.busyBan||!r.canBan||r.isBanned(n)),k(),Xe(" ",r.isBanned(n)?"Baneado":r.busyBan?"Baneando\u2026":"Ban"," ")}}function x$(t,e){if(t&1&&(j(0,"div",21),x(1),B()),t&2){let n=L(3);k(),Xe(" ",n.banErr," ")}}function P$(t,e){if(t&1&&(j(0,"div",16),x(1,"Baneo de mapas"),B(),j(2,"div",11),x(3," Turno: "),j(4,"b"),x(5),B(),x(6," \xB7 Bans: "),j(7,"b"),x(8),B(),x(9," \xB7 Restantes: "),j(10,"b"),x(11),B()(),te(12,R$,2,0,"div",11)(13,M$,2,0,"div",11),j(14,"div",25),Hr(15,N$,6,5,"div",26,$r),B(),te(17,x$,2,1,"div",21)),t&2){let n=L(2);k(5),be(n.mapTurn==="team1"?(n.match.team1==null?null:n.match.team1.name)??"Team A":(n.match.team2==null?null:n.match.team2.name)??"Team B"),k(3),be(n.match.mapBanCount??0),k(3),be(n.mapPool.length-n.bannedMaps.length),k(),ne(n.canBan?12:13),k(3),zr(n.mapPool),k(2),ne(n.banErr?17:-1)}}function O$(t,e){if(t&1&&(j(0,"a",34),x(1),B()),t&2){let n=L(3);zt("href",n.isParticipant?n.connection.connectUrl:n.connection.spectateUrl,Ht),k(),Xe(" ",n.isParticipant?"Ingresar al servidor":"Ingresar como espectador"," ")}}function k$(t,e){t&1&&(j(0,"div",11),x(1,"Esperando confirmaci\xF3n del otro l\xEDder\u2026"),B())}function F$(t,e){if(t&1&&(j(0,"div",21),x(1),B()),t&2){let n=L(4);k(),be(n.finalizeErr)}}function L$(t,e){if(t&1){let n=pt();j(0,"div",35),x(1," Para reiniciar el match, ambos l\xEDderes deben confirmar. "),B(),j(2,"button",36),Gr("click",function(){Ye(n);let i=L(3);return Je(i.onFinalize())}),x(3),B(),te(4,k$,2,0,"div",11),te(5,F$,2,1,"div",21)}if(t&2){let n=L(3);k(2),zt("disabled",n.busyFinalize||n.hasFinalized),k(),Xe(" ",n.hasFinalized?"Confirmado":n.busyFinalize?"Finalizando\u2026":"Finalizar match"," "),k(),ne(n.hasFinalized?4:-1),k(),ne(n.finalizeErr?5:-1)}}function V$(t,e){if(t&1&&(j(0,"div",21),x(1),B()),t&2){let n=L(4);k(),be(n.cancelErr)}}function j$(t,e){if(t&1){let n=pt();j(0,"button",37),Gr("click",function(){Ye(n);let i=L(3);return Je(i.onCancel())}),x(1),B(),te(2,V$,2,1,"div",21)}if(t&2){let n=L(3);zt("disabled",n.busyCancel),k(),Xe(" ",n.busyCancel?"Cancelando\u2026":"Cancelar match"," "),k(),ne(n.cancelErr?2:-1)}}function B$(t,e){if(t&1&&(j(0,"div",16),x(1,"Match en curso"),B(),j(2,"div",31),jn(3,"div",32),j(4,"div",33),x(5),B(),te(6,O$,2,2,"a",34),B(),te(7,L$,6,4),te(8,j$,3,3)),t&2){let n=L(2);k(5),be(n.match.map??"Mapa no definido"),k(),ne(n.connection?6:-1),k(),ne(n.canFinalize?7:-1),k(),ne(n.canCancel?8:-1)}}function U$(t,e){if(t&1&&(jn(0,"img",15),j(1,"div",14),x(2),B()),t&2){let n=e,r=L().$implicit,i=L(2);In("leaderAvatar",i.isLeaderB(r)),zt("src",n.avatar,Ht),k(2),be(n.personaName)}}function $$(t,e){if(t&1&&(j(0,"div",14),x(1),B()),t&2){let n=L().$implicit;k(),be(n)}}function H$(t,e){if(t&1&&(j(0,"div",13),te(1,U$,3,4)(2,$$,2,1,"div",14),B()),t&2){let n,r=e.$implicit,i=L(2);In("leader",i.isLeaderB(r)),sr("title",i.titleFor(r)),k(),ne((n=i.profileOf(r))?1:2,n)}}function z$(t,e){t&1&&(j(0,"div",11),x(1,"Vac\xEDo"),B())}function q$(t,e){if(t&1&&(j(0,"div",6)(1,"section",7)(2,"div",8),x(3),B(),j(4,"div",9),Hr(5,l$,3,4,"div",10,$r),te(7,d$,2,0,"div",11),B()(),j(8,"section",12),te(9,g$,6,1)(10,E$,7,0)(11,A$,12,5)(12,P$,18,5)(13,B$,9,4),B(),j(14,"section",7)(15,"div",8),x(16),B(),j(17,"div",9),Hr(18,H$,3,4,"div",10,$r),te(20,z$,2,0,"div",11),B()()()),t&2){let n,r=L();k(3),be((r.match.team1==null?null:r.match.team1.name)??"Team A"),k(2),zr(r.teamA),k(2),ne(r.teamA.length===0?7:-1),k(2),ne((n=r.match.estado)==="esperando_jugadores"?9:n==="seleccionando_lideres"?10:n==="armando_equipos"?11:n==="seleccionando_mapa"?12:n==="en_curso"?13:-1),k(7),be((r.match.team2==null?null:r.match.team2.name)??"Team B"),k(2),zr(r.teamB),k(2),ne(r.teamB.length===0?20:-1)}}var Rf=class t{matchSvc=P(Hs);mapPool=["de_inferno","de_mirage","de_nuke","de_overpass","de_ancient","de_vertigo","de_anubis"];match;showDetails=!0;profileOf;mySteamId=null;leaderA=null;leaderB=null;connection=null;selectedId=null;busyPick=!1;pickErr="";busyBan=!1;banErr="";busyFinalize=!1;finalizeErr="";busyCancel=!1;cancelErr="";get teamA(){return this.match?.team1?.players??[]}get teamB(){return this.match?.team2?.players??[]}get queue(){return this.match?.queue??[]}get unassigned(){let e=this.match;return Array.isArray(e.unassigned)?e.unassigned:[]}get leaderAId(){return this.leaderA??this.teamA[0]??null}get leaderBId(){return this.leaderB??this.teamB[0]??null}get turn(){return this.match?.turn==="team2"?"team2":"team1"}get mapTurn(){return this.match?.mapTurn==="team2"?"team2":"team1"}get finalizeBy(){return Array.isArray(this.match?.finalizeBy)?this.match.finalizeBy:[]}isLeaderA(e){return!!e&&e===this.leaderAId}isLeaderB(e){return!!e&&e===this.leaderBId}get canPick(){return this.match?.estado!=="armando_equipos"||!this.mySteamId?!1:this.turn==="team1"?this.mySteamId===this.leaderAId:this.mySteamId===this.leaderBId}get canBan(){return this.match?.estado!=="seleccionando_mapa"||this.match?.map||!this.mySteamId?!1:this.mapTurn==="team1"?this.mySteamId===this.leaderAId:this.mySteamId===this.leaderBId}get isParticipant(){return this.mySteamId?this.teamA.includes(this.mySteamId)||this.teamB.includes(this.mySteamId):!1}get canFinalize(){return this.match?.estado!=="en_curso"||!this.mySteamId?!1:this.mySteamId===this.leaderAId||this.mySteamId===this.leaderBId}get canCancel(){return this.match?.estado!=="en_curso"||!this.mySteamId?!1:this.mySteamId===this.leaderAId||this.mySteamId===this.leaderBId}get hasFinalized(){return this.mySteamId?this.finalizeBy.includes(this.mySteamId):!1}get bannedMaps(){return Array.isArray(this.match?.bannedMaps)?this.match.bannedMaps:[]}isBanned(e){return this.bannedMaps.includes(e)}get availableIds(){let e=this.unassigned.length?this.unassigned:this.queue,n=this.leaderAId,r=this.leaderBId;return e.filter(i=>i&&i!==n&&i!==r)}titleFor(e){return this.profileOf?.(e)?.personaName??e}onSelect(e){e&&this.match?.estado==="armando_equipos"&&(this.selectedId=this.selectedId===e?null:e,this.pickErr="")}async onBanMap(e){if(this.canBan&&!(!e||this.isBanned(e)))try{this.busyBan=!0,this.banErr="",await this.matchSvc.banMap(this.mySteamId,e)}catch(n){this.banErr=n?.message??String(n)}finally{this.busyBan=!1}}async onPick(){if(this.canPick&&this.selectedId)try{this.busyPick=!0,this.pickErr="",await this.matchSvc.pickPlayer(this.mySteamId,this.selectedId),this.selectedId=null}catch(e){this.pickErr=e?.message??String(e)}finally{this.busyPick=!1}}async onFinalize(){if(!(!this.canFinalize||this.hasFinalized))try{this.busyFinalize=!0,this.finalizeErr="",await this.matchSvc.requestFinalizeMatch(this.mySteamId)}catch(e){this.finalizeErr=e?.message??String(e)}finally{this.busyFinalize=!1}}async onCancel(){if(this.canCancel)try{this.busyCancel=!0,this.cancelErr="",await this.matchSvc.cancelMatch()}catch(e){this.cancelErr=e?.message??String(e)}finally{this.busyCancel=!1}}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=En({type:t,selectors:[["app-match-board"]],inputs:{match:"match",showDetails:"showDetails",profileOf:"profileOf",mySteamId:"mySteamId",leaderA:"leaderA",leaderB:"leaderB",connection:"connection"},decls:17,vars:5,consts:[[1,"custom-wrapper","match-board-wrapper"],[1,"board","custom-card"],[1,"board__header"],[1,"state"],[1,"meta"],[1,"board__locked"],[1,"board__grid"],[1,"col","custom-card"],[1,"col__title"],[1,"stack"],[1,"player-card",3,"leader"],[1,"hint"],[1,"center","custom-card"],[1,"player-card"],[1,"name"],["alt","avatar",1,"avatar",3,"src"],[1,"center__title"],[1,"centerGrid"],[1,"player-card","tile"],[1,"name","tiny"],[1,"player-card","tile","selectable",3,"selected"],[1,"err"],[2,"margin-top","12px","display","flex","gap","10px"],["type","button",1,"btn","primary",2,"width","100%",3,"click","disabled"],[1,"player-card","tile","selectable",3,"click"],[1,"mapList"],[1,"mapRow",3,"banned"],[1,"mapRow"],[1,"mapThumb"],[1,"mapName"],["type","button",1,"btn",3,"click","disabled"],[1,"mapCard"],[1,"mapThumb","big"],[1,"mapName","big"],[1,"btn","primary",3,"href"],[1,"hint",2,"margin-top","12px"],["type","button",1,"btn",2,"margin-top","8px","width","100%",3,"click","disabled"],["type","button",1,"btn","danger",2,"margin-top","8px","width","100%",3,"click","disabled"]],template:function(n,r){n&1&&(j(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"span"),x(5,"Estado:"),B(),j(6,"b"),x(7),B()(),j(8,"div",4)(9,"span"),x(10,"Queue: "),j(11,"b"),x(12),B()(),te(13,o$,4,1,"span"),te(14,s$,4,1,"span"),B()(),te(15,a$,5,0,"div",5)(16,q$,21,5,"div",6),B()()),n&2&&(k(7),be(r.match.estado),k(5),Xe("",r.queue.length,"/10"),k(),ne(r.match.map?13:-1),k(),ne(r.match.estado==="armando_equipos"?14:-1),k(),ne(r.showDetails?16:15))},styles:[".custom-wrapper.match-board-wrapper[_ngcontent-%COMP%]{height:100%;width:100%}.board.custom-card[_ngcontent-%COMP%]{padding:16px;width:min(1100px,100%);text-align:left}.board__header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:12px;padding-bottom:10px;border-bottom:1px solid rgba(255,255,255,.08);margin-bottom:10px;font-size:13px}.meta[_ngcontent-%COMP%]{display:flex;gap:12px;opacity:.85;flex-wrap:wrap}.board__locked[_ngcontent-%COMP%]{padding:16px;font-size:13px;opacity:.75}.board__grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1.3fr 1fr;gap:12px;align-items:start}.col.custom-card[_ngcontent-%COMP%], .center.custom-card[_ngcontent-%COMP%]{padding:12px;min-height:360px;text-align:left}.col__title[_ngcontent-%COMP%], .center__title[_ngcontent-%COMP%]{font-weight:800;font-size:12px;margin-bottom:10px}.stack[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px;padding:4px}.player-card[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;width:calc(100% - 8px);box-sizing:border-box;margin:4px;min-height:52px}.player-card.leader[_ngcontent-%COMP%]{border-style:solid;border-width:2px;border-color:#ff8a00}.avatar[_ngcontent-%COMP%]{width:auto;height:100%;max-height:46px;border-radius:8px;object-fit:cover;flex:0 0 auto}.avatar.leaderAvatar[_ngcontent-%COMP%]{outline:2px solid #ff8a00;outline-offset:1px}.name[_ngcontent-%COMP%]{font-size:12px;font-weight:600;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:flex;align-items:center}.tiny[_ngcontent-%COMP%]{font-size:11px;font-weight:600}.hint[_ngcontent-%COMP%]{font-size:12px;opacity:.7;padding:6px 0}.centerGrid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:8px;padding:4px}.tile[_ngcontent-%COMP%]{min-height:52px}.selectable[_ngcontent-%COMP%]{cursor:pointer}.tile.selected[_ngcontent-%COMP%]{border-width:2px;border-color:#fffffe}.err[_ngcontent-%COMP%]{margin-top:10px;padding:10px;border:1px solid #b00020;border-radius:12px;font-size:12px}.mapList[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.mapRow[_ngcontent-%COMP%]{display:grid;grid-template-columns:44px 1fr 70px;gap:10px;align-items:center;border:1px solid #ddd;border-radius:12px;padding:8px}.mapRow.banned[_ngcontent-%COMP%]{opacity:.55}.mapThumb[_ngcontent-%COMP%]{width:44px;height:28px;border-radius:8px;border:1px dashed #bbb}.mapThumb.big[_ngcontent-%COMP%]{width:100%;height:110px}.mapName[_ngcontent-%COMP%]{font-size:12px;font-weight:700}.mapName.big[_ngcontent-%COMP%]{text-align:center;font-size:14px;margin-top:8px}.mapCard[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;align-items:stretch}.btn[_ngcontent-%COMP%]{padding:8px 10px;border:1px solid #ddd;border-radius:12px;background:transparent;cursor:pointer;font-size:12px}.btn.primary[_ngcontent-%COMP%]{font-weight:800}.btn.danger[_ngcontent-%COMP%]{border-color:#b00020;color:#b00020;font-weight:700}.btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}"]})};function G$(t,e){if(t&1&&(on(0,"img",12),H(1,"div",13)(2,"div",14),x(3),W(),H(4,"div",15),x(5),W(),H(6,"a",16),x(7," Ver perfil "),W()()),t&2){let n=e;qr("src",n.avatar,Ht),k(3),Xe(" ",n.personaName," "),k(2),be(n.steamId),k(),qr("href",n.profileUrl,Ht)}}function W$(t,e){t&1&&(H(0,"div",5),x(1,"Cargando perfil Steam\u2026"),W())}function K$(t,e){t&1&&(H(0,"div",17),x(1," Estado: "),H(2,"b"),x(3,"En cola"),W()())}function Q$(t,e){t&1&&(H(0,"div",17),x(1," Estado: "),H(2,"b"),x(3,"En match (Team A)"),W()())}function Y$(t,e){t&1&&(H(0,"div",17),x(1," Estado: "),H(2,"b"),x(3,"En match (Team B)"),W()())}function J$(t,e){t&1&&(H(0,"div",17),x(1," Estado: "),H(2,"b"),x(3,"Fuera"),W()())}function Z$(t,e){if(t&1&&te(0,K$,4,0,"div",17)(1,Q$,4,0,"div",17)(2,Y$,4,0,"div",17)(3,J$,4,0,"div",17),t&2){let n,r=L(),i=L(2);ne((n=i.myStatus(e,r))==="cola"?0:n==="team1"?1:n==="team2"?2:3)}}function X$(t,e){t&1&&(H(0,"div",5),x(1,"Cargando match\u2026"),W())}function eH(t,e){if(t&1){let n=pt();H(0,"button",8),vt("click",function(){Ye(n);let i=L(2),o=L(),s=L(2);return Je(s.leave(i,o))}),x(1," Salir del match "),W()}}function tH(t,e){if(t&1){let n=pt();H(0,"button",8),vt("click",function(){Ye(n);let i=L(2),o=L(),s=L(2);return Je(s.join(i,o))}),x(1," Ingresar al match "),W()}}function nH(t,e){if(t&1&&(H(0,"div",18),x(1),W(),te(2,eH,2,0,"button",19)(3,tH,2,0,"button",19)),t&2){let n=L(),r=L(),i=L(2);k(),Xe(" Esperando jugadores (",n.queue.length,"/10) "),k(),ne(i.myStatus(n,r)==="cola"?2:3)}}function rH(t,e){t&1&&(H(0,"div",21),x(1," Activ\xE1 \u201CVer match\u201D para ver el detalle del estado. "),W())}function iH(t,e){if(t&1){let n=pt();H(0,"button",8),vt("click",function(){Ye(n);let i=L(5);return Je(i.toggleWatch())}),x(1),W(),te(2,rH,2,0,"div",21)}if(t&2){let n=L(5);k(),Xe(" ",n.watchMatch?"Dejar de ver":"Ver match"," "),k(),ne(n.watchMatch?-1:2)}}function oH(t,e){t&1&&(H(0,"div",20),x(1," Est\xE1s dentro. Vas a ver el estado completo a la derecha. "),W())}function sH(t,e){if(t&1&&(H(0,"div",18),x(1," Seleccionando l\xEDderes\u2026 "),W(),te(2,iH,3,2)(3,oH,2,0,"div",20)),t&2){let n=L(),r=L(),i=L(2);k(2),ne(i.myStatus(n,r)==="fuera"?2:3)}}function aH(t,e){if(t&1){let n=pt();H(0,"button",8),vt("click",function(){Ye(n);let i=L(5);return Je(i.toggleWatch())}),x(1),W()}if(t&2){let n=L(5);k(),Xe(" ",n.watchMatch?"Dejar de ver":"Ver match"," ")}}function cH(t,e){t&1&&(H(0,"div",20),x(1," Seleccion\xE1 jugadores en el panel de la derecha. "),W())}function uH(t,e){if(t&1&&(H(0,"div",18),x(1," Armando equipos\u2026 "),W(),te(2,aH,2,1,"button",19)(3,cH,2,0,"div",20)),t&2){let n=L(),r=L(),i=L(2);k(2),ne(i.myStatus(n,r)==="fuera"?2:3)}}function lH(t,e){if(t&1){let n=pt();H(0,"button",8),vt("click",function(){Ye(n);let i=L(5);return Je(i.toggleWatch())}),x(1),W()}if(t&2){let n=L(5);k(),Xe(" ",n.watchMatch?"Dejar de ver":"Ver match"," ")}}function dH(t,e){t&1&&(H(0,"div",20),x(1," Bane\xE1 mapas en el panel de la derecha. "),W())}function hH(t,e){if(t&1&&(H(0,"div",18),x(1," Baneando mapas\u2026 "),W(),te(2,lH,2,1,"button",19)(3,dH,2,0,"div",20)),t&2){let n=L(),r=L(),i=L(2);k(2),ne(i.myStatus(n,r)==="fuera"?2:3)}}function fH(t,e){if(t&1&&(H(0,"a",24),x(1," Ingresar como espectador "),W()),t&2){let n=L();qr("href",n.spectateUrl,Ht)}}function pH(t,e){if(t&1&&(H(0,"a",24),x(1," Ingresar al servidor "),W()),t&2){let n=L();qr("href",n.connectUrl,Ht)}}function mH(t,e){if(t&1&&te(0,fH,2,1,"a",24)(1,pH,2,1,"a",24),t&2){let n=L(2),r=L(),i=L(2);ne(i.myStatus(n,r)==="fuera"?0:1)}}function gH(t,e){if(t&1&&(H(0,"div",23),x(1),W()),t&2){let n=L(5);k(),Xe(" ",n.serverConnectionError," ")}}function yH(t,e){if(t&1&&(H(0,"div",18),x(1," Match en curso "),W(),H(2,"div",22),x(3," Mapa: "),H(4,"b"),x(5),W()(),te(6,mH,2,1),te(7,gH,2,1,"div",23)),t&2){let n,r=L(),i=L(3);k(5),be(r.map??"\u2014"),k(),ne((n=i.activeServerConnection)?6:-1,n),k(),ne(i.serverConnectionError?7:-1)}}function vH(t,e){if(t&1&&te(0,nH,4,2)(1,sH,4,1)(2,uH,4,1)(3,hH,4,1)(4,yH,8,3),t&2){let n;ne((n=e.estado)==="esperando_jugadores"?0:n==="seleccionando_lideres"?1:n==="armando_equipos"?2:n==="seleccionando_mapa"?3:n==="en_curso"?4:-1)}}function _H(t,e){t&1&&(H(0,"div",5),x(1,"Cargando match\u2026"),W())}function EH(t,e){if(t&1&&on(0,"app-match-board",11),t&2){let n=e,r=L(),i=L(2);qr("match",n)("showDetails",i.myStatus(n,r)!=="fuera"||i.watchMatch)("profileOf",i.profileOf.bind(i))("leaderA",(n.team1==null||n.team1.players==null?null:n.team1.players[0])??null)("leaderB",(n.team2==null||n.team2.players==null?null:n.team2.players[0])??null)("mySteamId",r)("connection",i.activeServerConnection)}}function IH(t,e){if(t&1){let n=pt();H(0,"div",1)(1,"div",2)(2,"section",3)(3,"div",4),te(4,G$,8,4)(5,W$,2,0,"div",5),W(),H(6,"div",6),te(7,Z$,4,1),Yo(8,"async"),Qi(9,X$,2,0,"div",5),W(),H(10,"div",7)(11,"button",8),vt("click",function(){Ye(n);let i=L(2);return Je(i.logout())}),x(12," Logout "),W()()(),H(13,"section",3)(14,"h3",9),x(15,"Acciones"),W(),te(16,vH,5,1),Yo(17,"async"),Qi(18,_H,2,0,"div",5),W()(),H(19,"div",10),te(20,EH,1,7,"app-match-board",11),Yo(21,"async"),W()()}if(t&2){let n,r,i,o,s=L(2);k(4),ne((n=s.profileOf(e))?4:5,n),k(3),ne((r=Jo(8,4,s.match$))?7:9,r),k(9),ne((i=Jo(17,6,s.match$))?16:18,i),k(4),ne((o=Jo(21,8,s.match$))?20:-1,o)}}function wH(t,e){if(t&1){let n=pt();H(0,"button",8),vt("click",function(){Ye(n);let i=L(2);return Je(i.logout())}),x(1,"Logoff"),W(),H(2,"div"),x(3,"No permitido login an\xF3nimo"),W()}}function CH(t,e){if(t&1&&te(0,IH,22,10,"div",1)(1,wH,4,0),t&2){let n,r=L();ne((n=r.steamIdFromUid(e.uid))?0:1,n)}}function DH(t,e){t&1&&(H(0,"p"),x(1,"Cargando sesi\xF3n\u2026"),W())}var Mf=class t{auth=P(hn);matchSvc=P(Hs);router=P(an);destroyRef=P(nn);watchMatch=!1;serverConnection=null;serverConnectionError="";fallbackServerConnection={host:"45.235.98.222",port:27159,spectatePort:27159,connectUrl:"steam://connect/45.235.98.222:27159",spectateUrl:"steam://connect/45.235.98.222:27159"};steamMe=null;steamErr="";profileCache=new Map;inflight=new Set;match$=this.matchSvc.match$;constructor(){this.matchSvc.ensureAndSubscribe().catch(e=>console.error("ensureAndSubscribe error",e)),this.matchSvc.match$.pipe(JE(this.destroyRef)).subscribe(e=>{if(!e)return;let n=new Set([...e.team1?.players??[],...e.team2?.players??[],...e.queue??[],...e.unassigned??[]]);for(let r of n)this.ensureProfile(r).catch(()=>{})}),this.auth.user$.pipe(JE(this.destroyRef)).subscribe(e=>{let n=this.steamIdFromUid(e?.uid??"");n&&this.ensureProfile(n).then(r=>this.steamMe=r).catch(()=>{})}),this.loadServerConnection().catch(e=>console.error("loadServerConnection error",e))}steamIdFromUid(e){return e?.startsWith("steam:")?e.slice(6):null}profileOf(e){return this.profileCache.get(e)??null}async ensureProfile(e){if(!e)return null;let n=this.profileCache.get(e);if(n)return n;if(this.inflight.has(e))return null;try{this.inflight.add(e);let r=await fetch(`/api/steam/me?steamId=${encodeURIComponent(e)}`);if(!r.ok){let o=await r.text().catch(()=>"");throw new Error(`SteamMe HTTP ${r.status} ${o}`.trim())}let i=await r.json();return this.profileCache.set(e,i),i}finally{this.inflight.delete(e)}}async loadServerConnection(){try{let e=await fetch("/api/server/connection");if(!e.ok){let n=await e.text().catch(()=>"");this.serverConnectionError=`No se pudo obtener el servidor (${e.status}) ${n}`.trim();return}this.serverConnection=await e.json(),this.serverConnectionError=""}catch(e){this.serverConnectionError=e?.message??String(e)}}get activeServerConnection(){return this.serverConnection??this.fallbackServerConnection}myStatus(e,n){return!e||!n?"fuera":(e.team1?.players??[]).includes(n)?"team1":(e.team2?.players??[]).includes(n)?"team2":(e.queue??[]).includes(n)?"cola":"fuera"}async join(e,n){!e||!n||await this.matchSvc.joinQueue(n)}async leave(e,n){!e||!n||await this.matchSvc.leaveQueue(n)}toggleWatch(){this.watchMatch=!this.watchMatch}async logout(){await this.auth.logout(),await this.router.navigateByUrl("/login")}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=En({type:t,selectors:[["app-dashboard"]],decls:4,vars:3,consts:[[1,"dashboard"],[1,"dashboard-grid"],[1,"dashboard-left"],[1,"custom-card"],[1,"dashboard-profile"],[1,"dashboard-muted"],[1,"dashboard-status"],[1,"dashboard-space-top"],[1,"button-27",3,"click"],[1,"dashboard-actions-title"],[1,"dashboard-match"],[3,"match","showDetails","profileOf","leaderA","leaderB","mySteamId","connection"],["alt","avatar",1,"dashboard-avatar",3,"src"],[1,"dashboard-profile-text"],[1,"dashboard-name"],[1,"dashboard-meta"],["target","_blank","rel","noreferrer",1,"dashboard-link",3,"href"],[1,"dashboard-status-text"],[1,"dashboard-muted","dashboard-space-bottom"],[1,"button-27"],[1,"dashboard-note"],[1,"dashboard-note","dashboard-space-top-sm"],[1,"dashboard-status-text","dashboard-space-bottom"],[1,"dashboard-error"],[1,"dashboard-button","dashboard-link-button",3,"href"]],template:function(n,r){if(n&1&&(H(0,"div",0),te(1,CH,2,1),Yo(2,"async"),Qi(3,DH,2,0,"p"),W()),n&2){let i;k(),ne((i=Jo(2,1,r.auth.user$))?1:3,i)}},dependencies:[Rf,Gg],styles:[".dashboard[_ngcontent-%COMP%]{padding:16px;font-family:system-ui}.dashboard-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 2.2fr;gap:16px;align-items:start}.dashboard-left[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.dashboard-match[_ngcontent-%COMP%]{min-width:0}.dashboard-card[_ngcontent-%COMP%]{border:1px solid #e5e5e5;border-radius:12px;padding:12px}.dashboard-profile[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center}.dashboard-avatar[_ngcontent-%COMP%]{width:56px;height:56px;border-radius:12px;object-fit:cover}.dashboard-profile-text[_ngcontent-%COMP%]{min-width:0}.dashboard-name[_ngcontent-%COMP%]{font-weight:800;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.dashboard-meta[_ngcontent-%COMP%]{font-size:12px;opacity:.7}.dashboard-link[_ngcontent-%COMP%]{font-size:12px}.dashboard-status[_ngcontent-%COMP%]{margin-top:12px;border-top:1px solid #eee;padding-top:12px}.dashboard-status-text[_ngcontent-%COMP%]{font-size:13px}.dashboard-button[_ngcontent-%COMP%]{padding:10px 14px;cursor:pointer;width:100%}.dashboard-link-button[_ngcontent-%COMP%]{display:inline-block;text-align:center;text-decoration:none;border:1px solid #ccc;border-radius:6px}.dashboard-actions-title[_ngcontent-%COMP%]{margin:0 0 8px}.dashboard-muted[_ngcontent-%COMP%]{font-size:13px;opacity:.8}.dashboard-note[_ngcontent-%COMP%]{font-size:13px;opacity:.7}.dashboard-error[_ngcontent-%COMP%]{font-size:12px;opacity:.7;margin-top:8px}.dashboard-space-top[_ngcontent-%COMP%]{margin-top:12px}.dashboard-space-top-sm[_ngcontent-%COMP%]{margin-top:10px}.dashboard-space-bottom[_ngcontent-%COMP%]{margin-bottom:10px}"]})};var pM=async()=>{let t=P(hn),e=P(an);return await t.isLoggedInOnce()?!0:(e.navigateByUrl("/login"),!1)};var mM=async()=>{let t=P(hn),e=P(an);return await t.isLoggedInOnce()?(e.navigateByUrl("/dashboard"),!1):!0};var gM=[{path:"",pathMatch:"full",redirectTo:"dashboard"},{path:"login",component:Sf,canActivate:[mM]},{path:"dashboard",component:Mf,canActivate:[pM]},{path:"**",redirectTo:"dashboard"}];var yM={providers:[Pm(),Dy(gM)]};var Nf=class t{auth=P(hn);title=$t("myapp");async ngOnInit(){await this.auth.ensurePersistence()}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=En({type:t,selectors:[["app-root"]],decls:1,vars:0,template:function(n,r){n&1&&on(0,"router-outlet")},dependencies:[yc],encapsulation:2})};ty(Nf,yM).catch(t=>console.error(t));
