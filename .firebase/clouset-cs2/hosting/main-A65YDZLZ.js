var OR=Object.defineProperty,kR=Object.defineProperties;var LR=Object.getOwnPropertyDescriptors;var ru=Object.getOwnPropertySymbols;var cI=Object.prototype.hasOwnProperty,uI=Object.prototype.propertyIsEnumerable;var aI=(t,e,n)=>e in t?OR(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,x=(t,e)=>{for(var n in e||={})cI.call(e,n)&&aI(t,n,e[n]);if(ru)for(var n of ru(e))uI.call(e,n)&&aI(t,n,e[n]);return t},le=(t,e)=>kR(t,LR(e));var bf=(t,e)=>{var n={};for(var r in t)cI.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&ru)for(var r of ru(t))e.indexOf(r)<0&&uI.call(t,r)&&(n[r]=t[r]);return n};var ct=null,iu=!1,Af=1,FR=null,Gt=Symbol("SIGNAL");function K(t){let e=ct;return ct=t,e}function ou(){return ct}var su={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function au(t){if(iu)throw new Error("");if(ct===null)return;ct.consumerOnSignalRead(t);let e=ct.producersTail;if(e!==void 0&&e.producer===t)return;let n,r=ct.recomputing;if(r&&(n=e!==void 0?e.nextProducer:ct.producers,n!==void 0&&n.producer===t)){ct.producersTail=n,n.lastReadVersion=t.version;return}let i=t.consumersTail;if(i!==void 0&&i.consumer===ct&&(!r||jR(i,ct)))return;let o=po(ct),s={producer:t,consumer:ct,nextProducer:n,prevConsumer:i,lastReadVersion:t.version,nextConsumer:void 0};ct.producersTail=s,e!==void 0?e.nextProducer=s:ct.producers=s,o&&pI(t,s)}function lI(){Af++}function dI(t){if(!(po(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===Af)){if(!t.producerMustRecompute(t)&&!uu(t)){Sf(t);return}t.producerRecomputeValue(t),Sf(t)}}function Rf(t){if(t.consumers===void 0)return;let e=iu;iu=!0;try{for(let n=t.consumers;n!==void 0;n=n.nextConsumer){let r=n.consumer;r.dirty||VR(r)}}finally{iu=e}}function Nf(){return ct?.consumerAllowSignalWrites!==!1}function VR(t){t.dirty=!0,Rf(t),t.consumerMarkedDirty?.(t)}function Sf(t){t.dirty=!1,t.lastCleanEpoch=Af}function cu(t){return t&&hI(t),K(t)}function hI(t){t.producersTail=void 0,t.recomputing=!0}function Mf(t,e){K(e),t&&fI(t)}function fI(t){t.recomputing=!1;let e=t.producersTail,n=e!==void 0?e.nextProducer:t.producers;if(n!==void 0){if(po(t))do n=xf(n);while(n!==void 0);e!==void 0?e.nextProducer=void 0:t.producers=void 0}}function uu(t){for(let e=t.producers;e!==void 0;e=e.nextProducer){let n=e.producer,r=e.lastReadVersion;if(r!==n.version||(dI(n),r!==n.version))return!0}return!1}function qs(t){if(po(t)){let e=t.producers;for(;e!==void 0;)e=xf(e)}t.producers=void 0,t.producersTail=void 0,t.consumers=void 0,t.consumersTail=void 0}function pI(t,e){let n=t.consumersTail,r=po(t);if(n!==void 0?(e.nextConsumer=n.nextConsumer,n.nextConsumer=e):(e.nextConsumer=void 0,t.consumers=e),e.prevConsumer=n,t.consumersTail=e,!r)for(let i=t.producers;i!==void 0;i=i.nextProducer)pI(i.producer,i)}function xf(t){let e=t.producer,n=t.nextProducer,r=t.nextConsumer,i=t.prevConsumer;if(t.nextConsumer=void 0,t.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!po(e)){let o=e.producers;for(;o!==void 0;)o=xf(o)}return n}function po(t){return t.consumerIsAlwaysLive||t.consumers!==void 0}function mI(t){FR?.(t)}function jR(t,e){let n=e.producersTail;if(n!==void 0){let r=e.producers;do{if(r===t)return!0;if(r===n)break;r=r.nextProducer}while(r!==void 0)}return!1}function gI(t,e){return Object.is(t,e)}function BR(){throw new Error}var yI=BR;function vI(t){yI(t)}function Pf(t){yI=t}var UR=null;function Of(t,e){let n=Object.create(lu);n.value=t,e!==void 0&&(n.equal=e);let r=()=>_I(n);return r[Gt]=n,mI(n),[r,s=>Gs(n,s),s=>EI(n,s)]}function _I(t){return au(t),t.value}function Gs(t,e){Nf()||vI(t),t.equal(t.value,e)||(t.value=e,$R(t))}function EI(t,e){Nf()||vI(t),Gs(t,e(t.value))}var lu=le(x({},su),{equal:gI,value:void 0,kind:"signal"});function $R(t){t.version++,lI(),Rf(t),UR?.(t)}function kf(t){let e=K(null);try{return t()}finally{K(e)}}function ie(t){return typeof t=="function"}function mo(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var du=mo(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Ws(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var it=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(ie(r))try{r()}catch(o){e=o instanceof du?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{II(o)}catch(s){e=e??[],s instanceof du?e=[...e,...s.errors]:e.push(s)}}if(e)throw new du(e)}}add(e){var n;if(e&&e!==this)if(this.closed)II(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Ws(n,e)}remove(e){let{_finalizers:n}=this;n&&Ws(n,e),e instanceof t&&e._removeParent(this)}};it.EMPTY=(()=>{let t=new it;return t.closed=!0,t})();var Lf=it.EMPTY;function hu(t){return t instanceof it||t&&"closed"in t&&ie(t.remove)&&ie(t.add)&&ie(t.unsubscribe)}function II(t){ie(t)?t():t.unsubscribe()}var on={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var go={setTimeout(t,e,...n){let{delegate:r}=go;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=go;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function fu(t){go.setTimeout(()=>{let{onUnhandledError:e}=on;if(e)e(t);else throw t})}function Ks(){}var wI=Ff("C",void 0,void 0);function CI(t){return Ff("E",void 0,t)}function TI(t){return Ff("N",t,void 0)}function Ff(t,e,n){return{kind:t,value:e,error:n}}var hi=null;function yo(t){if(on.useDeprecatedSynchronousErrorHandling){let e=!hi;if(e&&(hi={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=hi;if(hi=null,n)throw r}}else t()}function DI(t){on.useDeprecatedSynchronousErrorHandling&&hi&&(hi.errorThrown=!0,hi.error=t)}var fi=class extends it{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,hu(e)&&e.add(this)):this.destination=qR}static create(e,n,r){return new vo(e,n,r)}next(e){this.isStopped?jf(TI(e),this):this._next(e)}error(e){this.isStopped?jf(CI(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?jf(wI,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},HR=Function.prototype.bind;function Vf(t,e){return HR.call(t,e)}var Bf=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){pu(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){pu(r)}else pu(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){pu(n)}}},vo=class extends fi{constructor(e,n,r){super();let i;if(ie(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&on.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Vf(e.next,o),error:e.error&&Vf(e.error,o),complete:e.complete&&Vf(e.complete,o)}):i=e}this.destination=new Bf(i)}};function pu(t){on.useDeprecatedSynchronousErrorHandling?DI(t):fu(t)}function zR(t){throw t}function jf(t,e){let{onStoppedNotification:n}=on;n&&go.setTimeout(()=>n(t,e))}var qR={closed:!0,next:Ks,error:zR,complete:Ks};var _o=typeof Symbol=="function"&&Symbol.observable||"@@observable";function sn(t){return t}function Uf(...t){return $f(t)}function $f(t){return t.length===0?sn:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var me=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=WR(n)?n:new vo(n,r,i);return yo(()=>{let{operator:s,source:c}=this;o.add(s?s.call(o,c):c?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=bI(r),new r((i,o)=>{let s=new vo({next:c=>{try{n(c)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[_o](){return this}pipe(...n){return $f(n)(this)}toPromise(n){return n=bI(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function bI(t){var e;return(e=t??on.Promise)!==null&&e!==void 0?e:Promise}function GR(t){return t&&ie(t.next)&&ie(t.error)&&ie(t.complete)}function WR(t){return t&&t instanceof fi||GR(t)&&hu(t)}function KR(t){return ie(t?.lift)}function we(t){return e=>{if(KR(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function De(t,e,n,r,i){return new Hf(t,e,n,r,i)}var Hf=class extends fi{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(c){try{n(c)}catch(u){e.error(u)}}:super._next,this._error=i?function(c){try{i(c)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};var SI=mo(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ut=(()=>{class t extends me{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new mu(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new SI}next(n){yo(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){yo(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){yo(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Lf:(this.currentObservers=null,o.push(n),new it(()=>{this.currentObservers=null,Ws(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new me;return n.source=this,n}}return t.create=(e,n)=>new mu(e,n),t})(),mu=class extends ut{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:Lf}};var He=class extends ut{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Dt=new me(t=>t.complete());function AI(t){return t&&ie(t.schedule)}function RI(t){return t[t.length-1]}function NI(t){return ie(RI(t))?t.pop():void 0}function Tr(t){return AI(RI(t))?t.pop():void 0}function xI(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function c(h){try{l(r.next(h))}catch(p){s(p)}}function u(h){try{l(r.throw(h))}catch(p){s(p)}}function l(h){h.done?o(h.value):i(h.value).then(c,u)}l((r=r.apply(t,e||[])).next())})}function MI(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function pi(t){return this instanceof pi?(this.v=t,this):new pi(t)}function PI(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(y){return function(S){return Promise.resolve(S).then(y,p)}}function c(y,S){r[y]&&(i[y]=function(R){return new Promise(function(A,L){o.push([y,R,A,L])>1||u(y,R)})},S&&(i[y]=S(i[y])))}function u(y,S){try{l(r[y](S))}catch(R){g(o[0][3],R)}}function l(y){y.value instanceof pi?Promise.resolve(y.value.v).then(h,p):g(o[0][2],y)}function h(y){u("next",y)}function p(y){u("throw",y)}function g(y,S){y(S),o.shift(),o.length&&u(o[0][0],o[0][1])}}function OI(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof MI=="function"?MI(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(c,u){s=t[o](s),i(c,u,s.done,s.value)})}}function i(o,s,c,u){Promise.resolve(u).then(function(l){o({value:l,done:c})},s)}}var gu=t=>t&&typeof t.length=="number"&&typeof t!="function";function yu(t){return ie(t?.then)}function vu(t){return ie(t[_o])}function _u(t){return Symbol.asyncIterator&&ie(t?.[Symbol.asyncIterator])}function Eu(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function QR(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Iu=QR();function wu(t){return ie(t?.[Iu])}function Cu(t){return PI(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield pi(n.read());if(i)return yield pi(void 0);yield yield pi(r)}}finally{n.releaseLock()}})}function Tu(t){return ie(t?.getReader)}function Ye(t){if(t instanceof me)return t;if(t!=null){if(vu(t))return YR(t);if(gu(t))return JR(t);if(yu(t))return ZR(t);if(_u(t))return kI(t);if(wu(t))return XR(t);if(Tu(t))return eN(t)}throw Eu(t)}function YR(t){return new me(e=>{let n=t[_o]();if(ie(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function JR(t){return new me(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function ZR(t){return new me(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,fu)})}function XR(t){return new me(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function kI(t){return new me(e=>{tN(t,e).catch(n=>e.error(n))})}function eN(t){return kI(Cu(t))}function tN(t,e){var n,r,i,o;return xI(this,void 0,void 0,function*(){try{for(n=OI(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function bt(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function Du(t,e=0){return we((n,r)=>{n.subscribe(De(r,i=>bt(r,t,()=>r.next(i),e),()=>bt(r,t,()=>r.complete(),e),i=>bt(r,t,()=>r.error(i),e)))})}function bu(t,e=0){return we((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function LI(t,e){return Ye(t).pipe(bu(e),Du(e))}function FI(t,e){return Ye(t).pipe(bu(e),Du(e))}function VI(t,e){return new me(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function jI(t,e){return new me(n=>{let r;return bt(n,e,()=>{r=t[Iu](),bt(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>ie(r?.return)&&r.return()})}function Su(t,e){if(!t)throw new Error("Iterable cannot be null");return new me(n=>{bt(n,e,()=>{let r=t[Symbol.asyncIterator]();bt(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function BI(t,e){return Su(Cu(t),e)}function UI(t,e){if(t!=null){if(vu(t))return LI(t,e);if(gu(t))return VI(t,e);if(yu(t))return FI(t,e);if(_u(t))return Su(t,e);if(wu(t))return jI(t,e);if(Tu(t))return BI(t,e)}throw Eu(t)}function Je(t,e){return e?UI(t,e):Ye(t)}function ge(...t){let e=Tr(t);return Je(t,e)}function zf(t,e){let n=ie(t)?t:()=>t,r=i=>i.error(n());return new me(e?i=>e.schedule(r,0,i):r)}function Au(t){return!!t&&(t instanceof me||ie(t.lift)&&ie(t.subscribe))}var mi=mo(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function Re(t,e){return we((n,r)=>{let i=0;n.subscribe(De(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:nN}=Array;function rN(t,e){return nN(e)?t(...e):t(e)}function $I(t){return Re(e=>rN(t,e))}var{isArray:iN}=Array,{getPrototypeOf:oN,prototype:sN,keys:aN}=Object;function HI(t){if(t.length===1){let e=t[0];if(iN(e))return{args:e,keys:null};if(cN(e)){let n=aN(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function cN(t){return t&&typeof t=="object"&&oN(t)===sN}function zI(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function qf(...t){let e=Tr(t),n=NI(t),{args:r,keys:i}=HI(t);if(r.length===0)return Je([],e);let o=new me(uN(r,e,i?s=>zI(i,s):sn));return n?o.pipe($I(n)):o}function uN(t,e,n=sn){return r=>{qI(e,()=>{let{length:i}=t,o=new Array(i),s=i,c=i;for(let u=0;u<i;u++)qI(e,()=>{let l=Je(t[u],e),h=!1;l.subscribe(De(r,p=>{o[u]=p,h||(h=!0,c--),c||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function qI(t,e,n){t?bt(n,t,e):e()}function GI(t,e,n,r,i,o,s,c){let u=[],l=0,h=0,p=!1,g=()=>{p&&!u.length&&!l&&e.complete()},y=R=>l<r?S(R):u.push(R),S=R=>{o&&e.next(R),l++;let A=!1;Ye(n(R,h++)).subscribe(De(e,L=>{i?.(L),o?y(L):e.next(L)},()=>{A=!0},void 0,()=>{if(A)try{for(l--;u.length&&l<r;){let L=u.shift();s?bt(e,s,()=>S(L)):S(L)}g()}catch(L){e.error(L)}}))};return t.subscribe(De(e,y,()=>{p=!0,g()})),()=>{c?.()}}function gt(t,e,n=1/0){return ie(e)?gt((r,i)=>Re((o,s)=>e(r,o,i,s))(Ye(t(r,i))),n):(typeof e=="number"&&(n=e),we((r,i)=>GI(r,i,t,n)))}function WI(t=1/0){return gt(sn,t)}function KI(){return WI(1)}function Eo(...t){return KI()(Je(t,Tr(t)))}function Qs(t){return new me(e=>{Ye(t()).subscribe(e)})}function Tn(t,e){return we((n,r)=>{let i=0;n.subscribe(De(r,o=>t.call(e,o,i++)&&r.next(o)))})}function Ys(t){return we((e,n)=>{let r=null,i=!1,o;r=e.subscribe(De(n,void 0,void 0,s=>{o=Ye(t(s,Ys(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function Ru(t,e){return ie(e)?gt(t,e,1):gt(t,1)}function Gf(t){return we((e,n)=>{let r=!1;e.subscribe(De(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function zn(t){return t<=0?()=>Dt:we((e,n)=>{let r=0;e.subscribe(De(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function QI(t=lN){return we((e,n)=>{let r=!1;e.subscribe(De(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function lN(){return new mi}function Wf(t){return we((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function qn(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Tn((i,o)=>t(i,o,r)):sn,zn(1),n?Gf(e):QI(()=>new mi))}function Nu(t){return t<=0?()=>Dt:we((e,n)=>{let r=[];e.subscribe(De(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function Kf(...t){let e=Tr(t);return we((n,r)=>{(e?Eo(t,n,e):Eo(t,n)).subscribe(r)})}function Dn(t,e){return we((n,r)=>{let i=null,o=0,s=!1,c=()=>s&&!i&&r.complete();n.subscribe(De(r,u=>{i?.unsubscribe();let l=0,h=o++;Ye(t(u,h)).subscribe(i=De(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,c()}))},()=>{s=!0,c()}))})}function gi(t){return we((e,n)=>{Ye(t).subscribe(De(n,()=>n.complete(),Ks)),!n.closed&&e.subscribe(n)})}function yt(t,e,n){let r=ie(t)||e||n?{next:t,error:e,complete:n}:t;return r?we((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let c=!0;i.subscribe(De(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;c=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;c=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;c&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):sn}var Qf;function Mu(){return Qf}function bn(t){let e=Qf;return Qf=t,e}var YI=Symbol("NotFound");function Io(t){return t===YI||t?.name==="\u0275NotFound"}var Fu="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",z=class extends Error{code;constructor(e,n){super(To(e,n)),this.code=e}};function pN(t){return`NG0${Math.abs(t)}`}function To(t,e){return`${pN(t)}${e?": "+e:""}`}function Ce(t){for(let e in t)if(t[e]===Ce)return e;throw Error("")}function Wn(t){if(typeof t=="string")return t;if(Array.isArray(t))return`[${t.map(Wn).join(", ")}]`;if(t==null)return""+t;let e=t.overriddenName||t.name;if(e)return`${e}`;let n=t.toString();if(n==null)return""+n;let r=n.indexOf(`
`);return r>=0?n.slice(0,r):n}function lp(t,e){return t?e?`${t} ${e}`:t:e||""}var mN=Ce({__forward_ref__:Ce});function Vu(t){return t.__forward_ref__=Vu,t.toString=function(){return Wn(this())},t}function St(t){return dp(t)?t():t}function dp(t){return typeof t=="function"&&t.hasOwnProperty(mN)&&t.__forward_ref__===Vu}function G(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Do(t){return{providers:t.providers||[],imports:t.imports||[]}}function na(t){return gN(t,ju)}function hp(t){return na(t)!==null}function gN(t,e){return t.hasOwnProperty(e)&&t[e]||null}function yN(t){let e=t?.[ju]??null;return e||null}function Jf(t){return t&&t.hasOwnProperty(Pu)?t[Pu]:null}var ju=Ce({\u0275prov:Ce}),Pu=Ce({\u0275inj:Ce}),W=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,n){this._desc=e,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=G({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function fp(t){return t&&!!t.\u0275providers}var pp=Ce({\u0275cmp:Ce}),mp=Ce({\u0275dir:Ce}),gp=Ce({\u0275pipe:Ce}),yp=Ce({\u0275mod:Ce}),Zs=Ce({\u0275fac:Ce}),Ei=Ce({__NG_ELEMENT_ID__:Ce}),JI=Ce({__NG_ENV_ID__:Ce});function vp(t){return Bu(t,"@NgModule"),t[yp]||null}function Sr(t){return Bu(t,"@Component"),t[pp]||null}function _p(t){return Bu(t,"@Directive"),t[mp]||null}function tw(t){return Bu(t,"@Pipe"),t[gp]||null}function Bu(t,e){if(t==null)throw new z(-919,!1)}function ra(t){return typeof t=="string"?t:t==null?"":String(t)}function nw(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():ra(t)}var rw=Ce({ngErrorCode:Ce}),vN=Ce({ngErrorMessage:Ce}),_N=Ce({ngTokenPath:Ce});function Ep(t,e){return iw("",-200,e)}function Uu(t,e){throw new z(-201,!1)}function iw(t,e,n){let r=new z(e,t);return r[rw]=e,r[vN]=t,n&&(r[_N]=n),r}function EN(t){return t[rw]}var Zf;function ow(){return Zf}function vt(t){let e=Zf;return Zf=t,e}function Ip(t,e,n){let r=na(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&8)return null;if(e!==void 0)return e;Uu(t,"")}var IN={},yi=IN,wN="__NG_DI_FLAG__",Xf=class{injector;constructor(e){this.injector=e}retrieve(e,n){let r=vi(n)||0;try{return this.injector.get(e,r&8?null:yi,r)}catch(i){if(Io(i))return i;throw i}}};function CN(t,e=0){let n=Mu();if(n===void 0)throw new z(-203,!1);if(n===null)return Ip(t,void 0,e);{let r=TN(e),i=n.retrieve(t,r);if(Io(i)){if(r.optional)return null;throw i}return i}}function ce(t,e=0){return(ow()||CN)(St(t),e)}function P(t,e){return ce(t,vi(e))}function vi(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function TN(t){return{optional:!!(t&8),host:!!(t&1),self:!!(t&2),skipSelf:!!(t&4)}}function ep(t){let e=[];for(let n=0;n<t.length;n++){let r=St(t[n]);if(Array.isArray(r)){if(r.length===0)throw new z(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let c=r[s],u=DN(c);typeof u=="number"?u===-1?i=c.token:o|=u:i=c}e.push(ce(i,o))}else e.push(ce(r))}return e}function DN(t){return t[wN]}function Dr(t,e){let n=t.hasOwnProperty(Zs);return n?t[Zs]:null}function $u(t,e){t.forEach(n=>Array.isArray(n)?$u(n,e):e(n))}function wp(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function ia(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function sw(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let o=i-2;t[i]=t[o],i--}t[e]=n,t[e+1]=r}}function aw(t,e,n){let r=bo(t,e);return r>=0?t[r|1]=n:(r=~r,sw(t,r,e,n)),r}function Hu(t,e){let n=bo(t,e);if(n>=0)return t[n|1]}function bo(t,e){return bN(t,e,1)}function bN(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}var Ii={},Wt=[],wi=new W(""),Cp=new W("",-1),Tp=new W(""),Xs=class{get(e,n=yi){if(n===yi){let i=iw("",-201);throw i.name="\u0275NotFound",i}return n}};function Ci(t){return{\u0275providers:t}}function cw(t){return Ci([{provide:wi,multi:!0,useValue:t}])}function uw(...t){return{\u0275providers:Dp(!0,t),\u0275fromNgModule:!0}}function Dp(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return $u(e,s=>{let c=s;Ou(c,o,[],r)&&(i||=[],i.push(c))}),i!==void 0&&lw(i,o),n}function lw(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];bp(i,o=>{e(o,r)})}}function Ou(t,e,n,r){if(t=St(t),!t)return!1;let i=null,o=Jf(t),s=!o&&Sr(t);if(!o&&!s){let u=t.ngModule;if(o=Jf(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=t}let c=r.has(i);if(s){if(c)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)Ou(l,e,n,r)}}else if(o){if(o.imports!=null&&!c){r.add(i);let l;try{$u(o.imports,h=>{Ou(h,e,n,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&lw(l,e)}if(!c){let l=Dr(i)||(()=>new i);e({provide:i,useFactory:l,deps:Wt},i),e({provide:Tp,useValue:i,multi:!0},i),e({provide:wi,useValue:()=>ce(i),multi:!0},i)}let u=o.providers;if(u!=null&&!c){let l=t;bp(u,h=>{e(h,l)})}}else return!1;return i!==t&&t.providers!==void 0}function bp(t,e){for(let n of t)fp(n)&&(n=n.\u0275providers),Array.isArray(n)?bp(n,e):e(n)}var SN=Ce({provide:String,useValue:Ce});function dw(t){return t!==null&&typeof t=="object"&&SN in t}function AN(t){return!!(t&&t.useExisting)}function RN(t){return!!(t&&t.useFactory)}function ku(t){return typeof t=="function"}var oa=new W(""),xu={},ZI={},Yf;function sa(){return Yf===void 0&&(Yf=new Xs),Yf}var ot=class{},_i=class extends ot{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,np(e,s=>this.processProvider(s)),this.records.set(Cp,wo(void 0,this)),i.has("environment")&&this.records.set(ot,wo(void 0,this));let o=this.records.get(oa);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Tp,Wt,{self:!0}))}retrieve(e,n){let r=vi(n)||0;try{return this.get(e,yi,r)}catch(i){if(Io(i))return i;throw i}}destroy(){Js(this),this._destroyed=!0;let e=K(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),K(e)}}onDestroy(e){return Js(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Js(this);let n=bn(this),r=vt(void 0),i;try{return e()}finally{bn(n),vt(r)}}get(e,n=yi,r){if(Js(this),e.hasOwnProperty(JI))return e[JI](this);let i=vi(r),o,s=bn(this),c=vt(void 0);try{if(!(i&4)){let l=this.records.get(e);if(l===void 0){let h=ON(e)&&na(e);h&&this.injectableDefInScope(h)?l=wo(tp(e),xu):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l,i)}let u=i&2?sa():this.parent;return n=i&8&&n===yi?null:n,u.get(e,n)}catch(u){let l=EN(u);throw l===-200||l===-201?new z(l,null):u}finally{vt(c),bn(s)}}resolveInjectorInitializers(){let e=K(null),n=bn(this),r=vt(void 0),i;try{let o=this.get(wi,Wt,{self:!0});for(let s of o)s()}finally{bn(n),vt(r),K(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(Wn(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=St(e);let n=ku(e)?e:St(e&&e.provide),r=MN(e);if(!ku(e)&&e.multi===!0){let i=this.records.get(n);i||(i=wo(void 0,xu,!0),i.factory=()=>ep(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n,r){let i=K(null);try{if(n.value===ZI)throw Ep(Wn(e));return n.value===xu&&(n.value=ZI,n.value=n.factory(void 0,r)),typeof n.value=="object"&&n.value&&PN(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{K(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=St(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function tp(t){let e=na(t),n=e!==null?e.factory:Dr(t);if(n!==null)return n;if(t instanceof W)throw new z(204,!1);if(t instanceof Function)return NN(t);throw new z(204,!1)}function NN(t){if(t.length>0)throw new z(204,!1);let n=yN(t);return n!==null?()=>n.factory(t):()=>new t}function MN(t){if(dw(t))return wo(void 0,t.useValue);{let e=hw(t);return wo(e,xu)}}function hw(t,e,n){let r;if(ku(t)){let i=St(t);return Dr(i)||tp(i)}else if(dw(t))r=()=>St(t.useValue);else if(RN(t))r=()=>t.useFactory(...ep(t.deps||[]));else if(AN(t))r=(i,o)=>ce(St(t.useExisting),o!==void 0&&o&8?8:void 0);else{let i=St(t&&(t.useClass||t.provide));if(xN(t))r=()=>new i(...ep(t.deps));else return Dr(i)||tp(i)}return r}function Js(t){if(t.destroyed)throw new z(205,!1)}function wo(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function xN(t){return!!t.deps}function PN(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function ON(t){return typeof t=="function"||typeof t=="object"&&t.ngMetadataName==="InjectionToken"}function np(t,e){for(let n of t)Array.isArray(n)?np(n,e):n&&fp(n)?np(n.\u0275providers,e):e(n)}function Et(t,e){let n;t instanceof _i?(Js(t),n=t):n=new Xf(t);let r,i=bn(n),o=vt(void 0);try{return e()}finally{bn(i),vt(o)}}function fw(){return ow()!==void 0||Mu()!=null}var cn=0,J=1,oe=2,Ze=3,Kt=4,Qt=5,So=6,Ao=7,ke=8,Qn=9,Sn=10,Pe=11,Ro=12,Sp=13,Ti=14,Pt=15,Di=16,bi=17,Si=18,aa=19,Ap=20,Gn=21,zu=22,ca=23,Ot=24,qu=25,Ai=26,ze=27,pw=1,Rp=6,Ar=7,ua=8,la=9,Le=10;function Yn(t){return Array.isArray(t)&&typeof t[pw]=="object"}function un(t){return Array.isArray(t)&&t[pw]===!0}function Np(t){return(t.flags&4)!==0}function Rr(t){return t.componentOffset>-1}function Gu(t){return(t.flags&1)===1}function Ri(t){return!!t.template}function No(t){return(t[oe]&512)!==0}function Ni(t){return(t[oe]&256)===256}var mw="svg",gw="math";function Yt(t){for(;Array.isArray(t);)t=t[cn];return t}function Mp(t,e){return Yt(e[t])}function ln(t,e){return Yt(e[t.index])}function da(t,e){return t.data[e]}function yw(t,e){return t[e]}function xp(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}function dn(t,e){let n=e[t];return Yn(n)?n:n[cn]}function Wu(t){return(t[oe]&128)===128}function vw(t){return un(t[Ze])}function An(t,e){return e==null?null:t[e]}function Pp(t){t[bi]=0}function Op(t){t[oe]&1024||(t[oe]|=1024,Wu(t)&&fa(t))}function _w(t,e){for(;t>0;)e=e[Ti],t--;return e}function ha(t){return!!(t[oe]&9216||t[Ot]?.dirty)}function Ku(t){t[Sn].changeDetectionScheduler?.notify(8),t[oe]&64&&(t[oe]|=1024),ha(t)&&fa(t)}function fa(t){t[Sn].changeDetectionScheduler?.notify(0);let e=br(t);for(;e!==null&&!(e[oe]&8192||(e[oe]|=8192,!Wu(e)));)e=br(e)}function kp(t,e){if(Ni(t))throw new z(911,!1);t[Gn]===null&&(t[Gn]=[]),t[Gn].push(e)}function Ew(t,e){if(t[Gn]===null)return;let n=t[Gn].indexOf(e);n!==-1&&t[Gn].splice(n,1)}function br(t){let e=t[Ze];return un(e)?e[Ze]:e}function Iw(t){return t[Ao]??=[]}function ww(t){return t.cleanup??=[]}var de={lFrame:Fw(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var rp=!1;function Cw(){return de.lFrame.elementDepthCount}function Tw(){de.lFrame.elementDepthCount++}function Lp(){de.lFrame.elementDepthCount--}function Dw(){return de.bindingsEnabled}function bw(){return de.skipHydrationRootTNode!==null}function Fp(t){return de.skipHydrationRootTNode===t}function Vp(){de.skipHydrationRootTNode=null}function _e(){return de.lFrame.lView}function At(){return de.lFrame.tView}function lt(t){return de.lFrame.contextLView=t,t[ke]}function dt(t){return de.lFrame.contextLView=null,t}function hn(){let t=jp();for(;t!==null&&t.type===64;)t=t.parent;return t}function jp(){return de.lFrame.currentTNode}function Sw(){let t=de.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Mo(t,e){let n=de.lFrame;n.currentTNode=t,n.isParent=e}function Bp(){return de.lFrame.isParent}function Aw(){de.lFrame.isParent=!1}function Up(){return rp}function $p(t){let e=rp;return rp=t,e}function Rw(){let t=de.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function Nw(t){return de.lFrame.bindingIndex=t}function Mi(){return de.lFrame.bindingIndex++}function Mw(t){let e=de.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function xw(){return de.lFrame.inI18n}function Pw(t,e){let n=de.lFrame;n.bindingIndex=n.bindingRootIndex=t,Qu(e)}function Ow(){return de.lFrame.currentDirectiveIndex}function Qu(t){de.lFrame.currentDirectiveIndex=t}function kw(t){let e=de.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function Hp(t){de.lFrame.currentQueryIndex=t}function kN(t){let e=t[J];return e.type===2?e.declTNode:e.type===1?t[Qt]:null}function zp(t,e,n){if(n&4){let i=e,o=t;for(;i=i.parent,i===null&&!(n&1);)if(i=kN(o),i===null||(o=o[Ti],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=de.lFrame=Lw();return r.currentTNode=e,r.lView=t,!0}function Yu(t){let e=Lw(),n=t[J];de.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function Lw(){let t=de.lFrame,e=t===null?null:t.child;return e===null?Fw(t):e}function Fw(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function Vw(){let t=de.lFrame;return de.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var qp=Vw;function Ju(){let t=Vw();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function jw(t){return(de.lFrame.contextLView=_w(t,de.lFrame.contextLView))[ke]}function Nr(){return de.lFrame.selectedIndex}function Mr(t){de.lFrame.selectedIndex=t}function Zu(){let t=de.lFrame;return da(t.tView,t.selectedIndex)}function Bw(){return de.lFrame.currentNamespace}var Uw=!0;function Xu(){return Uw}function el(t){Uw=t}function ip(t,e=null,n=null,r){let i=Gp(t,e,n,r);return i.resolveInjectorInitializers(),i}function Gp(t,e=null,n=null,r,i=new Set){let o=[n||Wt,uw(t)];return r=r||(typeof t=="object"?void 0:Wn(t)),new _i(o,e||sa(),r||null,i)}var an=class t{static THROW_IF_NOT_FOUND=yi;static NULL=new Xs;static create(e,n){if(Array.isArray(e))return ip({name:""},n,e,"");{let r=e.name??"";return ip({name:r},e.parent,e.providers,r)}}static \u0275prov=G({token:t,providedIn:"any",factory:()=>ce(Cp)});static __NG_ELEMENT_ID__=-1},qe=new W(""),fn=(()=>{class t{static __NG_ELEMENT_ID__=LN;static __NG_ENV_ID__=n=>n}return t})(),op=class extends fn{_lView;constructor(e){super(),this._lView=e}get destroyed(){return Ni(this._lView)}onDestroy(e){let n=this._lView;return kp(n,e),()=>Ew(n,e)}};function LN(){return new op(_e())}var $w=!1,xr=(()=>{class t{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new He(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new me(n=>{n.next(!1),n.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=G({token:t,providedIn:"root",factory:()=>new t})}return t})(),sp=class extends ut{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,fw()&&(this.destroyRef=P(fn,{optional:!0})??void 0,this.pendingTasks=P(xr,{optional:!0})??void 0)}emit(e){let n=K(null);try{super.next(e)}finally{K(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let c=super.subscribe({next:i,error:o,complete:s});return e instanceof it&&e.add(c),c}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(n)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},_t=sp;function Lu(...t){}function Wp(t){let e,n;function r(){t=Lu;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function Kp(t){return queueMicrotask(()=>t()),()=>{t=Lu}}var Qp="isAngularZone",ea=Qp+"_ID",FN=0,xt=class t{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new _t(!1);onMicrotaskEmpty=new _t(!1);onStable=new _t(!1);onError=new _t(!1);constructor(e){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=$w}=e;if(typeof Zone>"u")throw new z(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,BN(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Qp)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new z(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new z(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,VN,Lu,Lu);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},VN={};function Yp(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function jN(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){Wp(()=>{t.callbackScheduled=!1,ap(t),t.isCheckStableRunning=!0,Yp(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),ap(t)}function BN(t){let e=()=>{jN(t)},n=FN++;t._inner=t._inner.fork({name:"angular",properties:{[Qp]:!0,[ea]:n,[ea+n]:!0},onInvokeTask:(r,i,o,s,c,u)=>{if(UN(u))return r.invokeTask(o,s,c,u);try{return XI(t),r.invokeTask(o,s,c,u)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),ew(t)}},onInvoke:(r,i,o,s,c,u,l)=>{try{return XI(t),r.invoke(o,s,c,u,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!$N(u)&&e(),ew(t)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,ap(t),Yp(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function ap(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function XI(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function ew(t){t._nesting--,Yp(t)}var ta=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new _t;onMicrotaskEmpty=new _t;onStable=new _t;onError=new _t;run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function UN(t){return Hw(t,"__ignore_ng_zone__")}function $N(t){return Hw(t,"__scheduler_tick__")}function Hw(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var Kn=class{_console=console;handleError(e){this._console.error("ERROR",e)}},Jt=new W("",{factory:()=>{let t=P(xt),e=P(ot),n;return r=>{t.runOutsideAngular(()=>{e.destroyed&&!n?setTimeout(()=>{throw r}):(n??=e.get(Kn),n.handleError(r))})}}}),zw={provide:wi,useValue:()=>{let t=P(Kn,{optional:!0})},multi:!0},HN=new W("",{factory:()=>{let t=P(qe).defaultView;if(!t)return;let e=P(Jt),n=o=>{e(o.reason),o.preventDefault()},r=o=>{o.error?e(o.error):e(new Error(o.message,{cause:o})),o.preventDefault()},i=()=>{t.addEventListener("unhandledrejection",n),t.addEventListener("error",r)};typeof Zone<"u"?Zone.root.run(i):i(),P(fn).onDestroy(()=>{t.removeEventListener("error",r),t.removeEventListener("unhandledrejection",n)})}});function Jp(){return Ci([cw(()=>void P(HN))])}function Jn(t,e){let[n,r,i]=Of(t,e?.equal),o=n,s=o[Gt];return o.set=r,o.update=i,o.asReadonly=qw.bind(o),o}function qw(){let t=this[Gt];if(t.readonlyFn===void 0){let e=()=>this();e[Gt]=t,t.readonlyFn=e}return t.readonlyFn}var Co=class{},pa=new W("",{factory:()=>!0});var Zp=new W("");var Xp=(()=>{class t{static \u0275prov=G({token:t,providedIn:"root",factory:()=>new cp})}return t})(),cp=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let n=e.zone,r=this.queues.get(n);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let n=e.zone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[n,r]of this.queues)n===null?e||=this.flushQueue(r):e||=n.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let n=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,n=!0,r.run());return n}},up=class{[Gt];constructor(e){this[Gt]=e}destroy(){this[Gt].destroy()}};function kt(t){return kf(t)}function Ca(t){return{toString:t}.toString()}function ZN(t){return typeof t=="function"}function EC(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}var sl=class{previousValue;currentValue;firstChange;constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}},wl=(()=>{let t=()=>IC;return t.ngInherit=!0,t})();function IC(t){return t.type.prototype.ngOnChanges&&(t.setInput=eM),XN}function XN(){let t=CC(this),e=t?.current;if(e){let n=t.previous;if(n===Ii)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function eM(t,e,n,r,i){let o=this.declaredInputs[r],s=CC(t)||tM(t,{previous:Ii,current:null}),c=s.current||(s.current={}),u=s.previous,l=u[o];c[o]=new sl(l&&l.currentValue,n,u===Ii),EC(t,e,i,n)}var wC="__ngSimpleChanges__";function CC(t){return t[wC]||null}function tM(t,e){return t[wC]=e}var Gw=[];var be=function(t,e=null,n){for(let r=0;r<Gw.length;r++){let i=Gw[r];i(t,e,n)}},Ee=(function(t){return t[t.TemplateCreateStart=0]="TemplateCreateStart",t[t.TemplateCreateEnd=1]="TemplateCreateEnd",t[t.TemplateUpdateStart=2]="TemplateUpdateStart",t[t.TemplateUpdateEnd=3]="TemplateUpdateEnd",t[t.LifecycleHookStart=4]="LifecycleHookStart",t[t.LifecycleHookEnd=5]="LifecycleHookEnd",t[t.OutputStart=6]="OutputStart",t[t.OutputEnd=7]="OutputEnd",t[t.BootstrapApplicationStart=8]="BootstrapApplicationStart",t[t.BootstrapApplicationEnd=9]="BootstrapApplicationEnd",t[t.BootstrapComponentStart=10]="BootstrapComponentStart",t[t.BootstrapComponentEnd=11]="BootstrapComponentEnd",t[t.ChangeDetectionStart=12]="ChangeDetectionStart",t[t.ChangeDetectionEnd=13]="ChangeDetectionEnd",t[t.ChangeDetectionSyncStart=14]="ChangeDetectionSyncStart",t[t.ChangeDetectionSyncEnd=15]="ChangeDetectionSyncEnd",t[t.AfterRenderHooksStart=16]="AfterRenderHooksStart",t[t.AfterRenderHooksEnd=17]="AfterRenderHooksEnd",t[t.ComponentStart=18]="ComponentStart",t[t.ComponentEnd=19]="ComponentEnd",t[t.DeferBlockStateStart=20]="DeferBlockStateStart",t[t.DeferBlockStateEnd=21]="DeferBlockStateEnd",t[t.DynamicComponentStart=22]="DynamicComponentStart",t[t.DynamicComponentEnd=23]="DynamicComponentEnd",t[t.HostBindingsUpdateStart=24]="HostBindingsUpdateStart",t[t.HostBindingsUpdateEnd=25]="HostBindingsUpdateEnd",t})(Ee||{});function nM(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=IC(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function rM(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:c,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(t.contentHooks??=[]).push(-n,s),c&&((t.contentHooks??=[]).push(n,c),(t.contentCheckHooks??=[]).push(n,c)),u&&(t.viewHooks??=[]).push(-n,u),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),h!=null&&(t.destroyHooks??=[]).push(n,h)}}function nl(t,e,n){TC(t,e,3,n)}function rl(t,e,n,r){(t[oe]&3)===n&&TC(t,e,n,r)}function em(t,e){let n=t[oe];(n&3)===e&&(n&=16383,n+=1,t[oe]=n)}function TC(t,e,n,r){let i=r!==void 0?t[bi]&65535:0,o=r??-1,s=e.length-1,c=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(c=e[u],r!=null&&c>=r)break}else e[u]<0&&(t[bi]+=65536),(c<o||o==-1)&&(iM(t,n,e,u),t[bi]=(t[bi]&4294901760)+u+2),u++}function Ww(t,e){be(Ee.LifecycleHookStart,t,e);let n=K(null);try{e.call(t)}finally{K(n),be(Ee.LifecycleHookEnd,t,e)}}function iM(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],c=t[s];i?t[oe]>>14<t[bi]>>16&&(t[oe]&3)===e&&(t[oe]+=16384,Ww(c,o)):Ww(c,o)}var Po=-1,ya=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,n,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=n,this.injectImpl=r}};function oM(t){return(t.flags&8)!==0}function sM(t){return(t.flags&16)!==0}function aM(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],c=n[r++];t.setAttribute(e,s,c,o)}else{let o=i,s=n[++r];uM(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function cM(t){return t===3||t===4||t===6}function uM(t){return t.charCodeAt(0)===64}function Cl(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?Kw(t,n,i,null,e[++r]):Kw(t,n,i,null,null))}}return t}function Kw(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let c=t[o++];if(typeof c=="number"){if(c===e){s=-1;break}else if(c>e){s=o-1;break}}}for(;o<t.length;){let c=t[o];if(typeof c=="number")break;if(c===n){i!==null&&(t[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),i!==null&&t.splice(o++,0,i)}function DC(t){return t!==Po}function al(t){return t&32767}function lM(t){return t>>16}function cl(t,e){let n=lM(t),r=e;for(;n>0;)r=r[Ti],n--;return r}var am=!0;function ul(t){let e=am;return am=t,e}var dM=256,bC=dM-1,SC=5,hM=0,Rn={};function fM(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Ei)&&(r=n[Ei]),r==null&&(r=n[Ei]=hM++);let i=r&bC,o=1<<i;e.data[t+(i>>SC)]|=o}function AC(t,e){let n=RC(t,e);if(n!==-1)return n;let r=e[J];r.firstCreatePass&&(t.injectorIndex=e.length,tm(r.data,t),tm(e,null),tm(r.blueprint,null));let i=Sm(t,e),o=t.injectorIndex;if(DC(i)){let s=al(i),c=cl(i,e),u=c[J].data;for(let l=0;l<8;l++)e[o+l]=c[s+l]|u[s+l]}return e[o+8]=i,o}function tm(t,e){t.push(0,0,0,0,0,0,0,0,e)}function RC(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function Sm(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=OC(i),r===null)return Po;if(n++,i=i[Ti],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Po}function pM(t,e,n){fM(t,e,n)}function NC(t,e,n){if(n&8||t!==void 0)return t;Uu(e,"NodeInjector")}function MC(t,e,n,r){if(n&8&&r===void 0&&(r=null),(n&3)===0){let i=t[Qn],o=vt(void 0);try{return i?i.get(e,r,n&8):Ip(e,r,n&8)}finally{vt(o)}}return NC(r,e,n)}function xC(t,e,n,r=0,i){if(t!==null){if(e[oe]&2048&&!(r&2)){let s=_M(t,e,n,r,Rn);if(s!==Rn)return s}let o=PC(t,e,n,r,Rn);if(o!==Rn)return o}return MC(e,n,r,i)}function PC(t,e,n,r,i){let o=yM(n);if(typeof o=="function"){if(!zp(e,t,r))return r&1?NC(i,n,r):MC(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&8))Uu(n);else return s}finally{qp()}}else if(typeof o=="number"){let s=null,c=RC(t,e),u=Po,l=r&1?e[Pt][Qt]:null;for((c===-1||r&4)&&(u=c===-1?Sm(t,e):e[c+8],u===Po||!Yw(r,!1)?c=-1:(s=e[J],c=al(u),e=cl(u,e)));c!==-1;){let h=e[J];if(Qw(o,c,h.data)){let p=mM(c,e,n,s,r,l);if(p!==Rn)return p}u=e[c+8],u!==Po&&Yw(r,e[J].data[c+8]===l)&&Qw(o,c,e)?(s=h,c=al(u),e=cl(u,e)):c=-1}}return i}function mM(t,e,n,r,i,o){let s=e[J],c=s.data[t+8],u=r==null?Rr(c)&&am:r!=s&&(c.type&3)!==0,l=i&1&&o===c,h=gM(c,s,n,u,l);return h!==null?cm(e,s,h,c,i):Rn}function gM(t,e,n,r,i){let o=t.providerIndexes,s=e.data,c=o&1048575,u=t.directiveStart,l=t.directiveEnd,h=o>>20,p=r?c:c+h,g=i?c+h:l;for(let y=p;y<g;y++){let S=s[y];if(y<u&&n===S||y>=u&&S.type===n)return y}if(i){let y=s[u];if(y&&Ri(y)&&y.type===n)return u}return null}function cm(t,e,n,r,i){let o=t[n],s=e.data;if(o instanceof ya){let c=o;if(c.resolving){let y=nw(s[n]);throw Ep(y)}let u=ul(c.canSeeViewProviders);c.resolving=!0;let l=s[n].type||s[n],h,p=c.injectImpl?vt(c.injectImpl):null,g=zp(t,r,0);try{o=t[n]=c.factory(void 0,i,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&nM(n,s[n],e)}finally{p!==null&&vt(p),ul(u),c.resolving=!1,qp()}}return o}function yM(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Ei)?t[Ei]:void 0;return typeof e=="number"?e>=0?e&bC:vM:e}function Qw(t,e,n){let r=1<<t;return!!(n[e+(t>>SC)]&r)}function Yw(t,e){return!(t&2)&&!(t&1&&e)}var xi=class{_tNode;_lView;constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return xC(this._tNode,this._lView,e,vi(r),n)}};function vM(){return new xi(hn(),_e())}function Tl(t){return Ca(()=>{let e=t.prototype.constructor,n=e[Zs]||um(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[Zs]||um(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function um(t){return dp(t)?()=>{let e=um(St(t));return e&&e()}:Dr(t)}function _M(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[oe]&2048&&!No(s);){let c=PC(o,s,n,r|2,Rn);if(c!==Rn)return c;let u=o.parent;if(!u){let l=s[Ap];if(l){let h=l.get(n,Rn,r);if(h!==Rn)return h}u=OC(s),s=s[Ti]}o=u}return i}function OC(t){let e=t[J],n=e.type;return n===2?e.declTNode:n===1?t[Qt]:null}function EM(){return Am(hn(),_e())}function Am(t,e){return new Rm(ln(t,e))}var Rm=(()=>{class t{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=EM}return t})();function kC(t){return(t.flags&128)===128}var Nm=(function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t})(Nm||{}),LC=new Map,IM=0;function wM(){return IM++}function CM(t){LC.set(t[aa],t)}function lm(t){LC.delete(t[aa])}var Jw="__ngContext__";function Oo(t,e){Yn(e)?(t[Jw]=e[aa],CM(e)):t[Jw]=e}function FC(t){return jC(t[Ro])}function VC(t){return jC(t[Kt])}function jC(t){for(;t!==null&&!un(t);)t=t[Kt];return t}var TM;function Mm(t){TM=t}var Dl=new W("",{factory:()=>DM}),DM="ng";var bl=new W(""),Ta=new W("",{providedIn:"platform",factory:()=>"unknown"});var Sl=new W("",{factory:()=>P(qe).body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var BC="r";var UC="di";var $C=!1,HC=new W("",{factory:()=>$C});var bM=(t,e,n,r)=>{};function SM(t,e,n,r){bM(t,e,n,r)}function xm(t){return(t.flags&32)===32}var AM=()=>null;function zC(t,e,n=!1){return AM(t,e,n)}function qC(t,e){let n=t.contentQueries;if(n!==null){let r=K(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let c=t.data[s];Hp(o),c.contentQueries(2,e[s],s)}}}finally{K(r)}}}function dm(t,e,n){Hp(0);let r=K(null);try{e(t,n)}finally{K(r)}}function GC(t,e,n){if(Np(e)){let r=K(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let c=t.data[s];if(c.contentQueries){let u=n[s];c.contentQueries(1,u,s)}}}finally{K(r)}}}var mn=(function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t[t.ExperimentalIsolatedShadowDom=4]="ExperimentalIsolatedShadowDom",t})(mn||{});var ll=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Fu})`}};function Pm(t){return t instanceof ll?t.changingThisBreaksApplicationSecurity:t}function WC(t,e){let n=KC(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${Fu})`)}return n===e}function KC(t){return t instanceof ll&&t.getTypeName()||null}var RM=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function QC(t){return t=String(t),t.match(RM)?t:"unsafe:"+t}function NM(t,e){return t.createText(e)}function MM(t,e,n){t.setValue(e,n)}function YC(t,e,n){return t.createElement(e,n)}function dl(t,e,n,r,i){t.insertBefore(e,n,r,i)}function JC(t,e,n){t.appendChild(e,n)}function Zw(t,e,n,r,i){r!==null?dl(t,e,n,r,i):JC(t,e,n)}function ZC(t,e,n,r){t.removeChild(null,e,n,r)}function xM(t,e,n){t.setAttribute(e,"style",n)}function PM(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function XC(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&aM(t,e,r),i!==null&&PM(t,e,i),o!==null&&xM(t,e,o)}var Om=(function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t})(Om||{});function Lt(t){let e=OM();return e?e.sanitize(Om.URL,t)||"":WC(t,"URL")?Pm(t):QC(ra(t))}function OM(){let t=_e();return t&&t[Sn].sanitizer}function eT(t){return t instanceof Function?t():t}function kM(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}var tT="ng-template";function LM(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&kM(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(km(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function km(t){return t.type===4&&t.value!==tT}function FM(t,e,n){let r=t.type===4&&!n?tT:t.value;return e===r}function VM(t,e,n){let r=4,i=t.attrs,o=i!==null?UM(i):0,s=!1;for(let c=0;c<e.length;c++){let u=e[c];if(typeof u=="number"){if(!s&&!pn(r)&&!pn(u))return!1;if(s&&pn(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!FM(t,u,n)||u===""&&e.length===1){if(pn(r))return!1;s=!0}}else if(r&8){if(i===null||!LM(t,i,u,n)){if(pn(r))return!1;s=!0}}else{let l=e[++c],h=jM(u,i,km(t),n);if(h===-1){if(pn(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(pn(r))return!1;s=!0}}}}return pn(r)||s}function pn(t){return(t&1)===0}function jM(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let c=e[++i];for(;typeof c=="string";)c=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return $M(e,t)}function BM(t,e,n=!1){for(let r=0;r<e.length;r++)if(VM(t,e[r],n))return!0;return!1}function UM(t){for(let e=0;e<t.length;e++){let n=t[e];if(cM(n))return e}return t.length}function $M(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function Xw(t,e){return t?":not("+e.trim()+")":e}function HM(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let c=t[++n];i+="["+s+(c.length>0?'="'+c+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!pn(s)&&(e+=Xw(o,i),i=""),r=s,o=o||!pn(r);n++}return i!==""&&(e+=Xw(o,i)),e}function zM(t){return t.map(HM).join(",")}function qM(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!pn(i))break;i=o}r++}return n.length&&e.push(1,...n),e}var Mn={};function Lm(t,e,n,r,i,o,s,c,u,l,h){let p=ze+r,g=p+i,y=GM(p,g),S=typeof l=="function"?l():l;return y[J]={type:t,blueprint:y,template:n,queries:null,viewQuery:c,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:S,incompleteFirstPass:!1,ssrId:h}}function GM(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:Mn);return n}function WM(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=Lm(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function Fm(t,e,n,r,i,o,s,c,u,l,h){let p=e.blueprint.slice();return p[cn]=i,p[oe]=r|4|128|8|64|1024,(l!==null||t&&t[oe]&2048)&&(p[oe]|=2048),Pp(p),p[Ze]=p[Ti]=t,p[ke]=n,p[Sn]=s||t&&t[Sn],p[Pe]=c||t&&t[Pe],p[Qn]=u||t&&t[Qn]||null,p[Qt]=o,p[aa]=wM(),p[So]=h,p[Ap]=l,p[Pt]=e.type==2?t[Pt]:p,p}function KM(t,e,n){let r=ln(e,t),i=WM(n),o=t[Sn].rendererFactory,s=Vm(t,Fm(t,i,null,nT(n),r,e,null,o.createRenderer(r,n),null,null,null));return t[e.index]=s}function nT(t){let e=16;return t.signals?e=4096:t.onPush&&(e=64),e}function rT(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function Vm(t,e){return t[Ro]?t[Sp][Kt]=e:t[Ro]=e,t[Sp]=e,e}function k(t=1){iT(At(),_e(),Nr()+t,!1)}function iT(t,e,n,r){if(!r)if((e[oe]&3)===3){let o=t.preOrderCheckHooks;o!==null&&nl(e,o,n)}else{let o=t.preOrderHooks;o!==null&&rl(e,o,0,n)}Mr(n)}var Al=(function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t})(Al||{});function hm(t,e,n,r){let i=K(null);try{let[o,s,c]=t.inputs[n],u=null;(s&Al.SignalBased)!==0&&(u=e[o][Gt]),u!==null&&u.transformFn!==void 0?r=u.transformFn(r):c!==null&&(r=c.call(e,r)),t.setInput!==null?t.setInput(e,u,r,n,o):EC(e,u,o,r)}finally{K(i)}}var Nn=(function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t})(Nn||{}),QM;function jm(t,e){return QM(t,e)}var Pi=new Set,Bm=(function(t){return t[t.CHANGE_DETECTION=0]="CHANGE_DETECTION",t[t.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",t})(Bm||{}),Da=new W(""),eC=new Set;function Vi(t){eC.has(t)||(eC.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var oT=(()=>{class t{impl=null;execute(){this.impl?.execute()}static \u0275prov=G({token:t,providedIn:"root",factory:()=>new t})}return t})();var sT=new W("",{factory:()=>({queue:new Set,isScheduled:!1,scheduler:null,injector:P(ot)})});function aT(t,e,n){let r=t.get(sT);if(Array.isArray(e))for(let i of e)r.queue.add(i),n?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),n?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(t)}function YM(t,e){let n=t.get(sT);if(e.detachedLeaveAnimationFns){for(let r of e.detachedLeaveAnimationFns)n.queue.delete(r);e.detachedLeaveAnimationFns=void 0}}function JM(t,e){for(let[n,r]of e)aT(t,r.animateFns)}function tC(t,e,n,r){let i=t?.[Ai]?.enter;e!==null&&i&&i.has(n.index)&&JM(r,i)}function xo(t,e,n,r,i,o,s,c){if(i!=null){let u,l=!1;un(i)?u=i:Yn(i)&&(l=!0,i=i[cn]);let h=Yt(i);t===0&&r!==null?(tC(c,r,o,n),s==null?JC(e,r,h):dl(e,r,h,s||null,!0)):t===1&&r!==null?(tC(c,r,o,n),dl(e,r,h,s||null,!0)):t===2?nC(c,o,n,p=>{ZC(e,h,l,p)}):t===3&&nC(c,o,n,()=>{e.destroyNode(h)}),u!=null&&lx(e,t,n,u,o,r,s)}}function ZM(t,e){cT(t,e),e[cn]=null,e[Qt]=null}function XM(t,e,n,r,i,o){r[cn]=i,r[Qt]=e,Nl(t,r,n,1,i,o)}function cT(t,e){e[Sn].changeDetectionScheduler?.notify(9),Nl(t,e,e[Pe],2,null,null)}function ex(t){let e=t[Ro];if(!e)return nm(t[J],t);for(;e;){let n=null;if(Yn(e))n=e[Ro];else{let r=e[Le];r&&(n=r)}if(!n){for(;e&&!e[Kt]&&e!==t;)Yn(e)&&nm(e[J],e),e=e[Ze];e===null&&(e=t),Yn(e)&&nm(e[J],e),n=e&&e[Kt]}e=n}}function Um(t,e){let n=t[la],r=n.indexOf(e);n.splice(r,1)}function Rl(t,e){if(Ni(e))return;let n=e[Pe];n.destroyNode&&Nl(t,e,n,3,null,null),ex(e)}function nm(t,e){if(Ni(e))return;let n=K(null);try{e[oe]&=-129,e[oe]|=256,e[Ot]&&qs(e[Ot]),rx(t,e),nx(t,e),e[J].type===1&&e[Pe].destroy();let r=e[Di];if(r!==null&&un(e[Ze])){r!==e[Ze]&&Um(r,e);let i=e[Si];i!==null&&i.detachView(t)}lm(e)}finally{K(n)}}function nC(t,e,n,r){let i=t?.[Ai];if(i==null||i.leave==null||!i.leave.has(e.index))return r(!1);t&&Pi.add(t),aT(n,()=>{if(i.leave&&i.leave.has(e.index)){let s=i.leave.get(e.index),c=[];if(s){for(let u=0;u<s.animateFns.length;u++){let l=s.animateFns[u],{promise:h}=l();c.push(h)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(c),tx(t,r)}else t&&Pi.delete(t),r(!1)},i)}function tx(t,e){let n=t[Ai]?.running;if(n){n.then(()=>{t[Ai].running=void 0,Pi.delete(t),e(!0)});return}e(!1)}function nx(t,e){let n=t.cleanup,r=e[Ao];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let c=n[s+3];c>=0?r[c]():r[-c].unsubscribe(),s+=2}else{let c=r[n[s+1]];n[s].call(c)}r!==null&&(e[Ao]=null);let i=e[Gn];if(i!==null){e[Gn]=null;for(let s=0;s<i.length;s++){let c=i[s];c()}}let o=e[ca];if(o!==null){e[ca]=null;for(let s of o)s.destroy()}}function rx(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof ya)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let c=i[o[s]],u=o[s+1];be(Ee.LifecycleHookStart,c,u);try{u.call(c)}finally{be(Ee.LifecycleHookEnd,c,u)}}else{be(Ee.LifecycleHookStart,i,o);try{o.call(i)}finally{be(Ee.LifecycleHookEnd,i,o)}}}}}function ix(t,e,n){return ox(t,e.parent,n)}function ox(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[cn];if(Rr(r)){let{encapsulation:i}=t.data[r.directiveStart+r.componentOffset];if(i===mn.None||i===mn.Emulated)return null}return ln(r,n)}function sx(t,e,n){return cx(t,e,n)}function ax(t,e,n){return t.type&40?ln(t,n):null}var cx=ax,rC;function $m(t,e,n,r){let i=ix(t,r,e),o=e[Pe],s=r.parent||e[Qt],c=sx(s,r,e);if(i!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)Zw(o,i,n[u],c,!1);else Zw(o,i,n,c,!1);rC!==void 0&&rC(o,r,e,n,i)}function ma(t,e){if(e!==null){let n=e.type;if(n&3)return ln(e,t);if(n&4)return fm(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return ma(t,r);{let i=t[e.index];return un(i)?fm(-1,i):Yt(i)}}else{if(n&128)return ma(t,e.next);if(n&32)return jm(e,t)()||Yt(t[e.index]);{let r=uT(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=br(t[Pt]);return ma(i,r)}else return ma(t,e.next)}}}return null}function uT(t,e){if(e!==null){let r=t[Pt][Qt],i=e.projection;return r.projection[i]}return null}function fm(t,e){let n=Le+t+1;if(n<e.length){let r=e[n],i=r[J].firstChild;if(i!==null)return ma(r,i)}return e[Ar]}function Hm(t,e,n,r,i,o,s){for(;n!=null;){let c=r[Qn];if(n.type===128){n=n.next;continue}let u=r[n.index],l=n.type;if(s&&e===0&&(u&&Oo(Yt(u),r),n.flags|=2),!xm(n))if(l&8)Hm(t,e,n.child,r,i,o,!1),xo(e,t,c,i,u,n,o,r);else if(l&32){let h=jm(n,r),p;for(;p=h();)xo(e,t,c,i,p,n,o,r);xo(e,t,c,i,u,n,o,r)}else l&16?ux(t,e,r,n,i,o):xo(e,t,c,i,u,n,o,r);n=s?n.projectionNext:n.next}}function Nl(t,e,n,r,i,o){Hm(n,r,t.firstChild,e,i,o,!1)}function ux(t,e,n,r,i,o){let s=n[Pt],u=s[Qt].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];xo(e,t,n[Qn],i,h,r,o,n)}else{let l=u,h=s[Ze];kC(r)&&(l.flags|=128),Hm(t,e,l,h,i,o,!0)}}function lx(t,e,n,r,i,o,s){let c=r[Ar],u=Yt(r);c!==u&&xo(e,t,n,o,c,i,s);for(let l=Le;l<r.length;l++){let h=r[l];Nl(h[J],h,t,e,o,c)}}function dx(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:Nn.DashCase;i==null?t.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Nn.Important),t.setStyle(n,r,i,o))}}function lT(t,e,n,r,i){let o=Nr(),s=r&2;try{Mr(-1),s&&e.length>ze&&iT(t,e,ze,!1);let c=s?Ee.TemplateUpdateStart:Ee.TemplateCreateStart;be(c,i,n),n(r,i)}finally{Mr(o);let c=s?Ee.TemplateUpdateEnd:Ee.TemplateCreateEnd;be(c,i,n)}}function dT(t,e,n){vx(t,e,n),(n.flags&64)===64&&_x(t,e,n)}function zm(t,e,n=ln){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],c=s===-1?n(e,t):t[s];t[i++]=c}}}function hx(t,e,n,r){let o=r.get(HC,$C)||n===mn.ShadowDom||n===mn.ExperimentalIsolatedShadowDom,s=t.selectRootElement(e,o);return fx(s),s}function fx(t){px(t)}var px=()=>null;function mx(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function gx(t,e,n,r,i,o){let s=e[J];if(qm(t,s,e,n,r)){Rr(t)&&yx(e,t.index);return}t.type&3&&(n=mx(n)),hT(t,e,n,r,i,o)}function hT(t,e,n,r,i,o){if(t.type&3){let s=ln(t,e);r=o!=null?o(r,t.value||"",n):r,i.setProperty(s,n,r)}else t.type&12}function yx(t,e){let n=dn(e,t);n[oe]&16||(n[oe]|=64)}function vx(t,e,n){let r=n.directiveStart,i=n.directiveEnd;Rr(n)&&KM(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||AC(n,e);let o=n.initialInputs;for(let s=r;s<i;s++){let c=t.data[s],u=cm(e,t,s,n);if(Oo(u,e),o!==null&&Tx(e,s-r,u,c,n,o),Ri(c)){let l=dn(n.index,e);l[ke]=cm(e,t,s,n)}}}function _x(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=Ow();try{Mr(o);for(let c=r;c<i;c++){let u=t.data[c],l=e[c];Qu(c),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&Ex(u,l)}}finally{Mr(-1),Qu(s)}}function Ex(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function Ix(t,e){let n=t.directiveRegistry,r=null;if(n)for(let i=0;i<n.length;i++){let o=n[i];BM(e,o.selectors,!1)&&(r??=[],Ri(o)?r.unshift(o):r.push(o))}return r}function wx(t,e,n,r,i,o){let s=ln(t,e);Cx(e[Pe],s,o,t.value,n,r,i)}function Cx(t,e,n,r,i,o,s){if(o==null)t.removeAttribute(e,i,n);else{let c=s==null?ra(o):s(o,r||"",i);t.setAttribute(e,i,c,n)}}function Tx(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let c=0;c<s.length;c+=2){let u=s[c],l=s[c+1];hm(r,n,u,l)}}function fT(t,e,n,r,i){let o=ze+n,s=e[J],c=i(s,e,t,r,n);e[o]=c,Mo(t,!0);let u=t.type===2;return u?(XC(e[Pe],c,t),(Cw()===0||Gu(t))&&Oo(c,e),Tw()):Oo(c,e),Xu()&&(!u||!xm(t))&&$m(s,e,c,t),t}function pT(t){let e=t;return Bp()?Aw():(e=e.parent,Mo(e,!1)),e}function Dx(t,e){let n=t[Qn];if(!n)return;let r;try{r=n.get(Jt,null)}catch{r=null}r?.(e)}function qm(t,e,n,r,i){let o=t.inputs?.[r],s=t.hostDirectiveInputs?.[r],c=!1;if(s)for(let u=0;u<s.length;u+=2){let l=s[u],h=s[u+1],p=e.data[l];hm(p,n[l],h,i),c=!0}if(o)for(let u of o){let l=n[u],h=e.data[u];hm(h,l,r,i),c=!0}return c}function bx(t,e){let n=dn(e,t),r=n[J];Sx(r,n);let i=n[cn];i!==null&&n[So]===null&&(n[So]=zC(i,n[Qn])),be(Ee.ComponentStart);try{Gm(r,n,n[ke])}finally{be(Ee.ComponentEnd,n[ke])}}function Sx(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function Gm(t,e,n){Yu(e);try{let r=t.viewQuery;r!==null&&dm(1,r,n);let i=t.template;i!==null&&lT(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Si]?.finishViewCreation(t),t.staticContentQueries&&qC(t,e),t.staticViewQueries&&dm(2,t.viewQuery,n);let o=t.components;o!==null&&Ax(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[oe]&=-5,Ju()}}function Ax(t,e){for(let n=0;n<e.length;n++)bx(t,e[n])}function Wm(t,e,n,r){let i=K(null);try{let o=e.tView,c=t[oe]&4096?4096:16,u=Fm(t,o,n,c,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];u[Di]=l;let h=t[Si];return h!==null&&(u[Si]=h.createEmbeddedView(o)),Gm(o,u,n),u}finally{K(i)}}function va(t,e){return!e||e.firstChild===null||kC(t)}function _a(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let o=e[n.index];o!==null&&r.push(Yt(o)),un(o)&&mT(o,r);let s=n.type;if(s&8)_a(t,e,n.child,r);else if(s&32){let c=jm(n,e),u;for(;u=c();)r.push(u)}else if(s&16){let c=uT(e,n);if(Array.isArray(c))r.push(...c);else{let u=br(e[Pt]);_a(u[J],u,c,r,!0)}}n=i?n.projectionNext:n.next}return r}function mT(t,e){for(let n=Le;n<t.length;n++){let r=t[n],i=r[J].firstChild;i!==null&&_a(r[J],r,i,e)}t[Ar]!==t[cn]&&e.push(t[Ar])}function gT(t){if(t[qu]!==null){for(let e of t[qu])e.impl.addSequence(e);t[qu].length=0}}var yT=[];function Rx(t){return t[Ot]??Nx(t)}function Nx(t){let e=yT.pop()??Object.create(xx);return e.lView=t,e}function Mx(t){t.lView[Ot]!==t&&(t.lView=null,yT.push(t))}var xx=le(x({},su),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{fa(t.lView)},consumerOnSignalRead(){this.lView[Ot]=this}});function Px(t){let e=t[Ot]??Object.create(Ox);return e.lView=t,e}var Ox=le(x({},su),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{let e=br(t.lView);for(;e&&!vT(e[J]);)e=br(e);e&&Op(e)},consumerOnSignalRead(){this.lView[Ot]=this}});function vT(t){return t.type!==2}function _T(t){if(t[ca]===null)return;let e=!0;for(;e;){let n=!1;for(let r of t[ca])r.dirty&&(n=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=n&&!!(t[oe]&8192)}}var kx=100;function ET(t,e=0){let r=t[Sn].rendererFactory,i=!1;i||r.begin?.();try{Lx(t,e)}finally{i||r.end?.()}}function Lx(t,e){let n=Up();try{$p(!0),pm(t,e);let r=0;for(;ha(t);){if(r===kx)throw new z(103,!1);r++,pm(t,1)}}finally{$p(n)}}function Fx(t,e,n,r){if(Ni(e))return;let i=e[oe],o=!1,s=!1;Yu(e);let c=!0,u=null,l=null;o||(vT(t)?(l=Rx(e),u=cu(l)):ou()===null?(c=!1,l=Px(e),u=cu(l)):e[Ot]&&(qs(e[Ot]),e[Ot]=null));try{Pp(e),Nw(t.bindingStartIndex),n!==null&&lT(t,e,n,2,r);let h=(i&3)===3;if(!o)if(h){let y=t.preOrderCheckHooks;y!==null&&nl(e,y,null)}else{let y=t.preOrderHooks;y!==null&&rl(e,y,0,null),em(e,0)}if(s||Vx(e),_T(e),IT(e,0),t.contentQueries!==null&&qC(t,e),!o)if(h){let y=t.contentCheckHooks;y!==null&&nl(e,y)}else{let y=t.contentHooks;y!==null&&rl(e,y,1),em(e,1)}Bx(t,e);let p=t.components;p!==null&&CT(e,p,0);let g=t.viewQuery;if(g!==null&&dm(2,g,r),!o)if(h){let y=t.viewCheckHooks;y!==null&&nl(e,y)}else{let y=t.viewHooks;y!==null&&rl(e,y,2),em(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[zu]){for(let y of e[zu])y();e[zu]=null}o||(gT(e),e[oe]&=-73)}catch(h){throw o||fa(e),h}finally{l!==null&&(Mf(l,u),c&&Mx(l)),Ju()}}function IT(t,e){for(let n=FC(t);n!==null;n=VC(n))for(let r=Le;r<n.length;r++){let i=n[r];wT(i,e)}}function Vx(t){for(let e=FC(t);e!==null;e=VC(e)){if(!(e[oe]&2))continue;let n=e[la];for(let r=0;r<n.length;r++){let i=n[r];Op(i)}}}function jx(t,e,n){be(Ee.ComponentStart);let r=dn(e,t);try{wT(r,n)}finally{be(Ee.ComponentEnd,r[ke])}}function wT(t,e){Wu(t)&&pm(t,e)}function pm(t,e){let r=t[J],i=t[oe],o=t[Ot],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&uu(o)),s||=!1,o&&(o.dirty=!1),t[oe]&=-9217,s)Fx(r,t,r.template,t[ke]);else if(i&8192){let c=K(null);try{_T(t),IT(t,1);let u=r.components;u!==null&&CT(t,u,1),gT(t)}finally{K(c)}}}function CT(t,e,n){for(let r=0;r<e.length;r++)jx(t,e[r],n)}function Bx(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Mr(~i);else{let o=i,s=n[++r],c=n[++r];Pw(s,o);let u=e[o];be(Ee.HostBindingsUpdateStart,u);try{c(2,u)}finally{be(Ee.HostBindingsUpdateEnd,u)}}}}finally{Mr(-1)}}function Km(t,e){let n=Up()?64:1088;for(t[Sn].changeDetectionScheduler?.notify(e);t;){t[oe]|=n;let r=br(t);if(No(t)&&!r)return t;t=r}return null}function TT(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function DT(t,e){let n=Le+e;if(n<t.length)return t[n]}function Ml(t,e,n,r=!0){let i=e[J];if(Ux(i,e,t,n),r){let s=fm(n,t),c=e[Pe],u=c.parentNode(t[Ar]);u!==null&&XM(i,t[Qt],c,e,u,s)}let o=e[So];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function bT(t,e){let n=Ea(t,e);return n!==void 0&&Rl(n[J],n),n}function Ea(t,e){if(t.length<=Le)return;let n=Le+e,r=t[n];if(r){let i=r[Di];i!==null&&i!==t&&Um(i,r),e>0&&(t[n-1][Kt]=r[Kt]);let o=ia(t,Le+e);ZM(r[J],r);let s=o[Si];s!==null&&s.detachView(o[J]),r[Ze]=null,r[Kt]=null,r[oe]&=-129}return r}function Ux(t,e,n,r){let i=Le+r,o=n.length;r>0&&(n[i-1][Kt]=e),r<o-Le?(e[Kt]=n[i],wp(n,Le+r,e)):(n.push(e),e[Kt]=null),e[Ze]=n;let s=e[Di];s!==null&&n!==s&&ST(s,e);let c=e[Si];c!==null&&c.insertView(t),Ku(e),e[oe]|=128}function ST(t,e){let n=t[la],r=e[Ze];if(Yn(r))t[oe]|=2;else{let i=r[Ze][Pt];e[Pt]!==i&&(t[oe]|=2)}n===null?t[la]=[e]:n.push(e)}var Oi=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,n=e[J];return _a(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n}get context(){return this._lView[ke]}set context(e){this._lView[ke]=e}get destroyed(){return Ni(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Ze];if(un(e)){let n=e[ua],r=n?n.indexOf(this):-1;r>-1&&(Ea(e,r),ia(n,r))}this._attachedToViewContainer=!1}Rl(this._lView[J],this._lView)}onDestroy(e){kp(this._lView,e)}markForCheck(){Km(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[oe]&=-129}reattach(){Ku(this._lView),this._lView[oe]|=128}detectChanges(){this._lView[oe]|=1024,ET(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new z(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=No(this._lView),n=this._lView[Di];n!==null&&!e&&Um(n,this._lView),cT(this._lView[J],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new z(902,!1);this._appRef=e;let n=No(this._lView),r=this._lView[Di];r!==null&&!n&&ST(r,this._lView),Ku(this._lView)}};function xl(t,e,n,r,i){let o=t.data[e];if(o===null)o=$x(t,e,n,r,i),xw()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=Sw();o.injectorIndex=s===null?-1:s.injectorIndex}return Mo(o,!0),o}function $x(t,e,n,r,i){let o=jp(),s=Bp(),c=s?o:o&&o.parent,u=t.data[e]=zx(t,c,n,e,r,i);return Hx(t,u,o,s),u}function Hx(t,e,n,r){t.firstChild===null&&(t.firstChild=e),n!==null&&(r?n.child==null&&e.parent!==null&&(n.child=e):n.next===null&&(n.next=e,e.prev=n))}function zx(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,c=0;return bw()&&(c|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,fieldIndex:-1,customControlIndex:-1,propertyBindings:null,flags:c,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function qx(t){let e=t[Rp]??[],r=t[Ze][Pe],i=[];for(let o of e)o.data[UC]!==void 0?i.push(o):Gx(o,r);t[Rp]=i}function Gx(t,e){let n=0,r=t.firstChild;if(r){let i=t.data[BC];for(;n<i;){let o=r.nextSibling;ZC(e,r,!1),r=o,n++}}}var Wx=()=>null,Kx=()=>null;function mm(t,e){return Wx(t,e)}function AT(t,e,n){return Kx(t,e,n)}var RT=class{},Pl=class{},gm=class{resolveComponentFactory(e){throw new z(917,!1)}},ba=class{static NULL=new gm},ki=class{};var NT=(()=>{class t{static \u0275prov=G({token:t,providedIn:"root",factory:()=>null})}return t})();var il={},ym=class{injector;parentInjector;constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){let i=this.injector.get(e,il,r);return i!==il||n===il?i:this.parentInjector.get(e,n,r)}};function hl(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let c=e[s];if(typeof c=="number")o=c;else if(o==1)i=lp(i,c);else if(o==2){let u=c,l=e[++s];r=lp(r,u+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function Sa(t,e=0){let n=_e();if(n===null)return ce(t,e);let r=hn();return xC(r,n,St(t),e)}function Qx(t,e,n,r,i){let o=r===null?null:{"":-1},s=i(t,n);if(s!==null){let c=s,u=null,l=null;for(let h of s)if(h.resolveHostDirectives!==null){[c,u,l]=h.resolveHostDirectives(s);break}Zx(t,e,n,c,o,u,l)}o!==null&&r!==null&&Yx(n,r,o)}function Yx(t,e,n){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new z(-301,!1);r.push(e[i],o)}}function Jx(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function Zx(t,e,n,r,i,o,s){let c=r.length,u=null;for(let g=0;g<c;g++){let y=r[g];u===null&&Ri(y)&&(u=y,Jx(t,n,g)),pM(AC(n,e),t,y.type)}i1(n,t.data.length,c),u?.viewProvidersResolver&&u.viewProvidersResolver(u);for(let g=0;g<c;g++){let y=r[g];y.providersResolver&&y.providersResolver(y)}let l=!1,h=!1,p=rT(t,e,c,null);c>0&&(n.directiveToIndex=new Map);for(let g=0;g<c;g++){let y=r[g];if(n.mergedAttrs=Cl(n.mergedAttrs,y.hostAttrs),e1(t,n,e,p,y),r1(p,y,i),s!==null&&s.has(y)){let[R,A]=s.get(y);n.directiveToIndex.set(y.type,[p,R+n.directiveStart,A+n.directiveStart])}else(o===null||!o.has(y))&&n.directiveToIndex.set(y.type,p);y.contentQueries!==null&&(n.flags|=4),(y.hostBindings!==null||y.hostAttrs!==null||y.hostVars!==0)&&(n.flags|=64);let S=y.type.prototype;!l&&(S.ngOnChanges||S.ngOnInit||S.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),l=!0),!h&&(S.ngOnChanges||S.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),h=!0),p++}Xx(t,n,o)}function Xx(t,e,n){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=t.data[r];if(n===null||!n.has(i))iC(0,e,i,r),iC(1,e,i,r),sC(e,r,!1);else{let o=n.get(i);oC(0,e,o,r),oC(1,e,o,r),sC(e,r,!0)}}}function iC(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;t===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),MT(e,o)}}function oC(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],c;t===0?c=e.hostDirectiveInputs??={}:c=e.hostDirectiveOutputs??={},c[s]??=[],c[s].push(r,o),MT(e,s)}}function MT(t,e){e==="class"?t.flags|=8:e==="style"&&(t.flags|=16)}function sC(t,e,n){let{attrs:r,inputs:i,hostDirectiveInputs:o}=t;if(r===null||!n&&i===null||n&&o===null||km(t)){t.initialInputs??=[],t.initialInputs.push(null);return}let s=null,c=0;for(;c<r.length;){let u=r[c];if(u===0){c+=4;continue}else if(u===5){c+=2;continue}else if(typeof u=="number")break;if(!n&&i.hasOwnProperty(u)){let l=i[u];for(let h of l)if(h===e){s??=[],s.push(u,r[c+1]);break}}else if(n&&o.hasOwnProperty(u)){let l=o[u];for(let h=0;h<l.length;h+=2)if(l[h]===e){s??=[],s.push(l[h+1],r[c+1]);break}}c+=2}t.initialInputs??=[],t.initialInputs.push(s)}function e1(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=Dr(i.type,!0)),s=new ya(o,Ri(i),Sa,null);t.blueprint[r]=s,n[r]=s,t1(t,e,r,rT(t,n,i.hostVars,Mn),i)}function t1(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let c=~e.index;n1(s)!=c&&s.push(c),s.push(n,r,o)}}function n1(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function r1(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Ri(e)&&(n[""]=t)}}function i1(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function xT(t,e,n,r,i,o,s,c){let u=e[J],l=u.consts,h=An(l,s),p=xl(u,t,n,r,h);return o&&Qx(u,e,p,An(l,c),i),p.mergedAttrs=Cl(p.mergedAttrs,p.attrs),p.attrs!==null&&hl(p,p.attrs,!1),p.mergedAttrs!==null&&hl(p,p.mergedAttrs,!0),u.queries!==null&&u.queries.elementStart(u,p),p}function PT(t,e){rM(t,e),Np(e)&&t.queries.elementEnd(e)}function o1(t,e,n,r,i,o){let s=e.consts,c=An(s,i),u=xl(e,t,n,r,c);if(u.mergedAttrs=Cl(u.mergedAttrs,u.attrs),o!=null){let l=An(s,o);u.localNames=[];for(let h=0;h<l.length;h+=2)u.localNames.push(l[h],-1)}return u.attrs!==null&&hl(u,u.attrs,!1),u.mergedAttrs!==null&&hl(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function s1(t,e,n){return t[e]=n}function Pr(t,e,n){if(n===Mn)return!1;let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function ol(t,e,n){return function r(i){let o=Rr(t)?dn(t.index,e):e;Km(o,5);let s=e[ke],c=aC(e,s,n,i),u=r.__ngNextListenerFn__;for(;u;)c=aC(e,s,u,i)&&c,u=u.__ngNextListenerFn__;return c}}function aC(t,e,n,r){let i=K(null);try{return be(Ee.OutputStart,e,n),n(r)!==!1}catch(o){return Dx(t,o),!1}finally{be(Ee.OutputEnd,e,n),K(i)}}function OT(t,e,n,r,i,o,s,c){let u=Gu(t),l=!1,h=null;if(!r&&u&&(h=c1(e,n,o,t.index)),h!==null){let p=h.__ngLastListenerFn__||h;p.__ngNextListenerFn__=s,h.__ngLastListenerFn__=s,l=!0}else{let p=ln(t,n),g=r?r(p):p;SM(n,g,o,c);let y=i.listen(g,o,c);if(!a1(o)){let S=r?R=>r(Yt(R[t.index])):t.index;kT(S,e,n,o,c,y,!1)}}return l}function a1(t){return t.startsWith("animation")||t.startsWith("transition")}function c1(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let c=e[Ao],u=i[o+2];return c&&c.length>u?c[u]:null}typeof s=="string"&&(o+=2)}return null}function kT(t,e,n,r,i,o,s){let c=e.firstCreatePass?ww(e):null,u=Iw(n),l=u.length;u.push(i,o),c&&c.push(r,t,l,(l+1)*(s?-1:1))}function cC(t,e,n,r,i,o){let s=e[n],c=e[J],l=c.data[n].outputs[r],p=s[l].subscribe(o);kT(t.index,c,e,i,o,p,!0)}var vm=Symbol("BINDING");var fl=class extends ba{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=Sr(e);return new ko(n,this.ngModule)}};function u1(t){return Object.keys(t).map(e=>{let[n,r,i]=t[e],o={propName:n,templateName:e,isSignal:(r&Al.SignalBased)!==0};return i&&(o.transform=i),o})}function l1(t){return Object.keys(t).map(e=>({propName:t[e],templateName:e}))}function d1(t,e,n){let r=e instanceof ot?e:e?.injector;return r&&t.getStandaloneInjector!==null&&(r=t.getStandaloneInjector(r)||r),r?new ym(n,r):n}function h1(t){let e=t.get(ki,null);if(e===null)throw new z(407,!1);let n=t.get(NT,null),r=t.get(Co,null);return{rendererFactory:e,sanitizer:n,changeDetectionScheduler:r,ngReflect:!1}}function f1(t,e){let n=LT(t);return YC(e,n,n==="svg"?mw:n==="math"?gw:null)}function LT(t){return(t.selectors[0][0]||"div").toLowerCase()}var ko=class extends Pl{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=u1(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=l1(this.componentDef.outputs),this.cachedOutputs}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=zM(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!n}create(e,n,r,i,o,s){be(Ee.DynamicComponentStart);let c=K(null);try{let u=this.componentDef,l=p1(r,u,s,o),h=d1(u,i||this.ngModule,e),p=h1(h),g=p.rendererFactory.createRenderer(null,u),y=r?hx(g,r,u.encapsulation,h):f1(u,g),S=s?.some(uC)||o?.some(L=>typeof L!="function"&&L.bindings.some(uC)),R=Fm(null,l,null,512|nT(u),null,null,p,g,h,null,zC(y,h,!0));R[ze]=y,Yu(R);let A=null;try{let L=xT(ze,R,2,"#host",()=>l.directiveRegistry,!0,0);XC(g,y,L),Oo(y,R),dT(l,R,L),GC(l,L,R),PT(l,L),n!==void 0&&g1(L,this.ngContentSelectors,n),A=dn(L.index,R),R[ke]=A[ke],Gm(l,R,null)}catch(L){throw A!==null&&lm(A),lm(R),L}finally{be(Ee.DynamicComponentEnd),Ju()}return new pl(this.componentType,R,!!S)}finally{K(c)}}};function p1(t,e,n,r){let i=t?["ng-version","21.0.6"]:qM(e.selectors[0]),o=null,s=null,c=0;if(n)for(let h of n)c+=h[vm].requiredVars,h.create&&(h.targetIdx=0,(o??=[]).push(h)),h.update&&(h.targetIdx=0,(s??=[]).push(h));if(r)for(let h=0;h<r.length;h++){let p=r[h];if(typeof p!="function")for(let g of p.bindings){c+=g[vm].requiredVars;let y=h+1;g.create&&(g.targetIdx=y,(o??=[]).push(g)),g.update&&(g.targetIdx=y,(s??=[]).push(g))}}let u=[e];if(r)for(let h of r){let p=typeof h=="function"?h:h.type,g=_p(p);u.push(g)}return Lm(0,null,m1(o,s),1,c,u,null,null,null,[i],null)}function m1(t,e){return!t&&!e?null:n=>{if(n&1&&t)for(let r of t)r.create();if(n&2&&e)for(let r of e)r.update()}}function uC(t){let e=t[vm].kind;return e==="input"||e==="twoWay"}var pl=class extends RT{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,n,r){super(),this._rootLView=n,this._hasInputBindings=r,this._tNode=da(n[J],ze),this.location=Am(this._tNode,n),this.instance=dn(this._tNode.index,n)[ke],this.hostView=this.changeDetectorRef=new Oi(n,void 0),this.componentType=e}setInput(e,n){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let i=this._rootLView,o=qm(r,i[J],i,e,n);this.previousInputValues.set(e,n);let s=dn(r.index,i);Km(s,1)}get injector(){return new xi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function g1(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null&&o.length?Array.from(o):null)}}var Aa=(()=>{class t{static __NG_ELEMENT_ID__=y1}return t})();function y1(){let t=hn();return _1(t,_e())}var v1=Aa,FT=class extends v1{_lContainer;_hostTNode;_hostLView;constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Am(this._hostTNode,this._hostLView)}get injector(){return new xi(this._hostTNode,this._hostLView)}get parentInjector(){let e=Sm(this._hostTNode,this._hostLView);if(DC(e)){let n=cl(e,this._hostLView),r=al(e),i=n[J].data[r+8];return new xi(i,n)}else return new xi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=lC(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-Le}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=mm(this._lContainer,e.ssrId),c=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(c,i,va(this._hostTNode,s)),c}createComponent(e,n,r,i,o,s,c){let u=e&&!ZN(e),l;if(u)l=n;else{let A=n||{};l=A.index,r=A.injector,i=A.projectableNodes,o=A.environmentInjector||A.ngModuleRef,s=A.directives,c=A.bindings}let h=u?e:new ko(Sr(e)),p=r||this.parentInjector;if(!o&&h.ngModule==null){let L=(u?p:this.parentInjector).get(ot,null);L&&(o=L)}let g=Sr(h.componentType??{}),y=mm(this._lContainer,g?.id??null),S=y?.firstChild??null,R=h.create(p,i,S,o,s,c);return this.insertImpl(R.hostView,l,va(this._hostTNode,y)),R}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(vw(i)){let c=this.indexOf(e);if(c!==-1)this.detach(c);else{let u=i[Ze],l=new FT(u,u[Qt],u[Ze]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return Ml(s,i,o,r),e.attachToViewContainerRef(),wp(rm(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=lC(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=Ea(this._lContainer,n);r&&(ia(rm(this._lContainer),n),Rl(r[J],r))}detach(e){let n=this._adjustIndex(e,-1),r=Ea(this._lContainer,n);return r&&ia(rm(this._lContainer),n)!=null?new Oi(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function lC(t){return t[ua]}function rm(t){return t[ua]||(t[ua]=[])}function _1(t,e){let n,r=e[t.index];return un(r)?n=r:(n=TT(r,e,null,t),e[t.index]=n,Vm(e,n)),I1(n,e,t,r),new FT(n,t,e)}function E1(t,e){let n=t[Pe],r=n.createComment(""),i=ln(e,t),o=n.parentNode(i);return dl(n,o,r,n.nextSibling(i),!1),r}var I1=T1,w1=()=>!1;function C1(t,e,n){return w1(t,e,n)}function T1(t,e,n,r){if(t[Ar])return;let i;n.type&8?i=Yt(r):i=E1(e,n),t[Ar]=i}var Li=class{},Ol=class{};var ml=class extends Li{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new fl(this);constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n;let o=vp(e);this._bootstrapComponents=eT(o.bootstrap),this._r3Injector=Gp(e,n,[{provide:Li,useValue:this},{provide:ba,useValue:this.componentFactoryResolver},...r],Wn(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},gl=class extends Ol{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new ml(this.moduleType,e,[])}};var Ia=class extends Li{injector;componentFactoryResolver=new fl(this);instance=null;constructor(e){super();let n=new _i([...e.providers,{provide:Li,useValue:this},{provide:ba,useValue:this.componentFactoryResolver}],e.parent||sa(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Ra(t,e,n=null){return new Ia({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var D1=(()=>{class t{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=Dp(!1,n.type),i=r.length>0?Ra([r],this._injector,""):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=G({token:t,providedIn:"environment",factory:()=>new t(ce(ot))})}return t})();function gn(t){return Ca(()=>{let e=VT(t),n=le(x({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Nm.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(D1).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||mn.Emulated,styles:t.styles||Wt,_:null,schemas:t.schemas||null,tView:null,id:""});e.standalone&&Vi("NgStandalone"),jT(n);let r=t.dependencies;return n.directiveDefs=dC(r,b1),n.pipeDefs=dC(r,tw),n.id=R1(n),n})}function b1(t){return Sr(t)||_p(t)}function Na(t){return Ca(()=>({type:t.type,bootstrap:t.bootstrap||Wt,declarations:t.declarations||Wt,imports:t.imports||Wt,exports:t.exports||Wt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function S1(t,e){if(t==null)return Ii;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,c,u;Array.isArray(i)?(c=i[0],o=i[1],s=i[2]??o,u=i[3]||null):(o=i,s=i,c=Al.None,u=null),n[o]=[r,c,u],e[o]=s}return n}function A1(t){if(t==null)return Ii;let e={};for(let n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function kl(t){return Ca(()=>{let e=VT(t);return jT(e),e})}function Qm(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone??!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function VT(t){let e={};return{type:t.type,providersResolver:null,viewProvidersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputConfig:t.inputs||Ii,exportAs:t.exportAs||null,standalone:t.standalone??!0,signals:t.signals===!0,selectors:t.selectors||Wt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:S1(t.inputs,e),outputs:A1(t.outputs),debugInfo:null}}function jT(t){t.features?.forEach(e=>e(t))}function dC(t,e){return t?()=>{let n=typeof t=="function"?t():t,r=[];for(let i of n){let o=e(i);o!==null&&r.push(o)}return r}:null}function R1(t){let e=0,n=typeof t.consts=="function"?"":t.consts,r=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,n,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function N1(t,e,n,r,i,o,s,c){if(n.firstCreatePass){t.mergedAttrs=Cl(t.mergedAttrs,t.attrs);let h=t.tView=Lm(2,t,i,o,s,n.directiveRegistry,n.pipeRegistry,null,n.schemas,n.consts,null);n.queries!==null&&(n.queries.template(n,t),h.queries=n.queries.embeddedTView(t))}c&&(t.flags|=c),Mo(t,!1);let u=M1(n,e,t,r);Xu()&&$m(n,e,u,t),Oo(u,e);let l=TT(u,e,u,t);e[r+ze]=l,Vm(e,l),C1(l,t,e)}function yl(t,e,n,r,i,o,s,c,u,l,h){let p=n+ze,g;if(e.firstCreatePass){if(g=xl(e,p,4,s||null,c||null),l!=null){let y=An(e.consts,l);g.localNames=[];for(let S=0;S<y.length;S+=2)g.localNames.push(y[S],-1)}}else g=e.data[p];return N1(g,t,e,n,r,i,o,u),l!=null&&zm(t,g,h),g}var M1=x1;function x1(t,e,n,r){return el(!0),e[Pe].createComment("")}var Ym=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();var Jm=new W("");function ji(t){return!!t&&typeof t.then=="function"}function Ll(t){return!!t&&typeof t.subscribe=="function"}var BT=new W("");var Zm=(()=>{class t{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=P(BT,{optional:!0})??[];injector=P(an);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let o=Et(this.injector,i);if(ji(o))n.push(o);else if(Ll(o)){let s=new Promise((c,u)=>{o.subscribe({complete:c,error:u})});n.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||t)};static \u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Fl=new W("");function UT(){Pf(()=>{let t="";throw new z(600,t)})}function $T(t){return t.isBoundToModule}var P1=10;var Fo=(()=>{class t{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=P(Jt);afterRenderManager=P(oT);zonelessEnabled=P(pa);rootEffectScheduler=P(Xp);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new ut;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=P(xr);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(Re(n=>!n))}constructor(){P(Da,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=P(ot);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){return this.bootstrapImpl(n,r)}bootstrapImpl(n,r,i=an.NULL){return this._injector.get(xt).run(()=>{be(Ee.BootstrapComponentStart);let s=n instanceof Pl;if(!this._injector.get(Zm).done){let S="";throw new z(405,S)}let u;s?u=n:u=this._injector.get(ba).resolveComponentFactory(n),this.componentTypes.push(u.componentType);let l=$T(u)?void 0:this._injector.get(Li),h=r||u.selector,p=u.create(i,[],h,l),g=p.location.nativeElement,y=p.injector.get(Jm,null);return y?.registerApplication(g),p.onDestroy(()=>{this.detachView(p.hostView),ga(this.components,p),y?.unregisterApplication(g)}),this._loadComponent(p),be(Ee.BootstrapComponentEnd,p),p})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){be(Ee.ChangeDetectionStart),this.tracingSnapshot!==null?this.tracingSnapshot.run(Bm.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw be(Ee.ChangeDetectionEnd),new z(101,!1);let n=K(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,K(n),this.afterTick.next(),be(Ee.ChangeDetectionEnd)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(ki,null,{optional:!0}));let n=0;for(;this.dirtyFlags!==0&&n++<P1;){be(Ee.ChangeDetectionSyncStart);try{this.synchronizeOnce()}finally{be(Ee.ChangeDetectionSyncEnd)}}}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let n=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!ha(i))continue;let o=r&&!this.zonelessEnabled?0:1;ET(i,o),n=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}n||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>ha(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;ga(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(n),this._injector.get(Fl,[]).forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>ga(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new z(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||t)};static \u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function ga(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function Or(t,e,n,r){let i=_e(),o=Mi();if(Pr(i,o,e)){let s=At(),c=Zu();wx(c,i,t,e,n,r)}return Or}var wq=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";var _m=class{destroy(e){}updateValue(e,n){}swap(e,n){let r=Math.min(e,n),i=Math.max(e,n),o=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(e,n){this.attach(n,this.detach(e))}};function im(t,e,n,r,i){return t===n&&Object.is(e,r)?1:Object.is(i(t,e),i(n,r))?-1:0}function O1(t,e,n,r){let i,o,s=0,c=t.length-1,u=void 0;if(Array.isArray(e)){K(r);let l=e.length-1;for(K(null);s<=c&&s<=l;){let h=t.at(s),p=e[s],g=im(s,h,s,p,n);if(g!==0){g<0&&t.updateValue(s,p),s++;continue}let y=t.at(c),S=e[l],R=im(c,y,l,S,n);if(R!==0){R<0&&t.updateValue(c,S),c--,l--;continue}let A=n(s,h),L=n(c,y),Y=n(s,p);if(Object.is(Y,L)){let ue=n(l,S);Object.is(ue,A)?(t.swap(s,c),t.updateValue(c,S),l--,c--):t.move(c,s),t.updateValue(s,p),s++;continue}if(i??=new vl,o??=fC(t,s,c,n),Em(t,i,s,Y))t.updateValue(s,p),s++,c++;else if(o.has(Y))i.set(A,t.detach(s)),c--;else{let ue=t.create(s,e[s]);t.attach(s,ue),s++,c++}}for(;s<=l;)hC(t,i,n,s,e[s]),s++}else if(e!=null){K(r);let l=e[Symbol.iterator]();K(null);let h=l.next();for(;!h.done&&s<=c;){let p=t.at(s),g=h.value,y=im(s,p,s,g,n);if(y!==0)y<0&&t.updateValue(s,g),s++,h=l.next();else{i??=new vl,o??=fC(t,s,c,n);let S=n(s,g);if(Em(t,i,s,S))t.updateValue(s,g),s++,c++,h=l.next();else if(!o.has(S))t.attach(s,t.create(s,g)),s++,c++,h=l.next();else{let R=n(s,p);i.set(R,t.detach(s)),c--}}}for(;!h.done;)hC(t,i,n,t.length,h.value),h=l.next()}for(;s<=c;)t.destroy(t.detach(c--));i?.forEach(l=>{t.destroy(l)})}function Em(t,e,n,r){return e!==void 0&&e.has(r)?(t.attach(n,e.get(r)),e.delete(r),!0):!1}function hC(t,e,n,r,i){if(Em(t,e,r,n(r,i)))t.updateValue(r,i);else{let o=t.create(r,i);t.attach(r,o)}}function fC(t,e,n,r){let i=new Set;for(let o=e;o<=n;o++)i.add(r(o,t.at(o)));return i}var vl=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let n=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(e,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,n){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,n)}else this.kvMap.set(e,n)}forEach(e){for(let[n,r]of this.kvMap)if(e(r,n),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,n)}}};function te(t,e,n,r,i,o,s,c){Vi("NgControlFlow");let u=_e(),l=At(),h=An(l.consts,o);return yl(u,l,t,e,n,r,i,h,256,s,c),Bi}function Bi(t,e,n,r,i,o,s,c){Vi("NgControlFlow");let u=_e(),l=At(),h=An(l.consts,o);return yl(u,l,t,e,n,r,i,h,512,s,c),Bi}function ne(t,e){Vi("NgControlFlow");let n=_e(),r=Mi(),i=n[r]!==Mn?n[r]:-1,o=i!==-1?_l(n,ze+i):void 0,s=0;if(Pr(n,r,t)){let c=K(null);try{if(o!==void 0&&bT(o,s),t!==-1){let u=ze+t,l=_l(n,u),h=Tm(n[J],u),p=AT(l,h,n),g=Wm(n,h,e,{dehydratedView:p});Ml(l,g,s,va(h,p))}}finally{K(c)}}else if(o!==void 0){let c=DT(o,s);c!==void 0&&(c[ke]=e)}}var Im=class{lContainer;$implicit;$index;constructor(e,n,r){this.lContainer=e,this.$implicit=n,this.$index=r}get $count(){return this.lContainer.length-Le}};function kr(t,e){return e}var wm=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,n,r){this.hasEmptyBlock=e,this.trackByFn=n,this.liveCollection=r}};function Lr(t,e,n,r,i,o,s,c,u,l,h,p,g){Vi("NgControlFlow");let y=_e(),S=At(),R=u!==void 0,A=_e(),L=c?s.bind(A[Pt][ke]):s,Y=new wm(R,L);A[ze+t]=Y,yl(y,S,t+1,e,n,r,i,An(S.consts,o),256),R&&yl(y,S,t+2,u,l,h,p,An(S.consts,g),512)}var Cm=class extends _m{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,n,r){super(),this.lContainer=e,this.hostLView=n,this.templateTNode=r}get length(){return this.lContainer.length-Le}at(e){return this.getLView(e)[ke].$implicit}attach(e,n){let r=n[So];this.needsIndexUpdate||=e!==this.length,Ml(this.lContainer,n,e,va(this.templateTNode,r)),k1(this.lContainer,e)}detach(e){return this.needsIndexUpdate||=e!==this.length-1,L1(this.lContainer,e),F1(this.lContainer,e)}create(e,n){let r=mm(this.lContainer,this.templateTNode.tView.ssrId);return Wm(this.hostLView,this.templateTNode,new Im(this.lContainer,n,e),{dehydratedView:r})}destroy(e){Rl(e[J],e)}updateValue(e,n){this.getLView(e)[ke].$implicit=n}reset(){this.needsIndexUpdate=!1}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[ke].$index=e}getLView(e){return V1(this.lContainer,e)}};function Fr(t){let e=K(null),n=Nr();try{let r=_e(),i=r[J],o=r[n],s=n+1,c=_l(r,s);if(o.liveCollection===void 0){let l=Tm(i,s);o.liveCollection=new Cm(c,r,l)}else o.liveCollection.reset();let u=o.liveCollection;if(O1(u,t,o.trackByFn,e),u.updateIndexes(),o.hasEmptyBlock){let l=Mi(),h=u.length===0;if(Pr(r,l,h)){let p=n+2,g=_l(r,p);if(h){let y=Tm(i,p),S=AT(g,y,r),R=Wm(r,y,void 0,{dehydratedView:S});Ml(g,R,0,va(y,S))}else i.firstUpdatePass&&qx(g),bT(g,0)}}}finally{K(e)}}function _l(t,e){return t[e]}function k1(t,e){if(t.length<=Le)return;let n=Le+e,r=t[n],i=r?r[Ai]:void 0;if(r&&i&&i.detachedLeaveAnimationFns&&i.detachedLeaveAnimationFns.length>0){let o=r[Qn];YM(o,i),Pi.delete(r),i.detachedLeaveAnimationFns=void 0}}function L1(t,e){if(t.length<=Le)return;let n=Le+e,r=t[n],i=r?r[Ai]:void 0;i&&i.leave&&i.leave.size>0&&(i.detachedLeaveAnimationFns=[])}function F1(t,e){return Ea(t,e)}function V1(t,e){return DT(t,e)}function Tm(t,e){return da(t,e)}function Vr(t,e,n){let r=_e(),i=Mi();if(Pr(r,i,e)){let o=At(),s=Zu();gx(s,r,t,e,r[Pe],n)}return Vr}function pC(t,e,n,r,i){qm(e,t,n,i?"class":"style",r)}function Z(t,e,n,r){let i=_e(),o=i[J],s=t+ze,c=o.firstCreatePass?xT(s,i,2,e,Ix,Dw(),n,r):o.data[s];if(fT(c,i,t,e,HT),Gu(c)){let u=i[J];dT(u,i,c),GC(u,c,i)}return r!=null&&zm(i,c),Z}function se(){let t=At(),e=hn(),n=pT(e);return t.firstCreatePass&&PT(t,n),Fp(n)&&Vp(),Lp(),n.classesWithoutHost!=null&&oM(n)&&pC(t,n,_e(),n.classesWithoutHost,!0),n.stylesWithoutHost!=null&&sM(n)&&pC(t,n,_e(),n.stylesWithoutHost,!1),se}function Zn(t,e,n,r){return Z(t,e,n,r),se(),Zn}function j(t,e,n,r){let i=_e(),o=i[J],s=t+ze,c=o.firstCreatePass?o1(s,o,2,e,n,r):o.data[s];return fT(c,i,t,e,HT),r!=null&&zm(i,c),j}function B(){let t=hn(),e=pT(t);return Fp(e)&&Vp(),Lp(),B}function Ft(t,e,n,r){return j(t,e,n,r),B(),Ft}var HT=(t,e,n,r,i)=>(el(!0),YC(e[Pe],r,Bw()));function It(){return _e()}function Vt(t,e,n){let r=_e(),i=Mi();if(Pr(r,i,e)){let o=At(),s=Zu();hT(s,r,t,e,r[Pe],n)}return Vt}var Ma="en-US";var j1=Ma;function zT(t){typeof t=="string"&&(j1=t.toLowerCase().replace(/_/g,"-"))}function xn(t,e,n){let r=_e(),i=At(),o=hn();return B1(i,r,r[Pe],o,t,e,n),xn}function yn(t,e,n){let r=_e(),i=At(),o=hn();return(o.type&3||n)&&OT(o,i,r,n,r[Pe],t,e,ol(o,r,e)),yn}function B1(t,e,n,r,i,o,s){let c=!0,u=null;if((r.type&3||s)&&(u??=ol(r,e,o),OT(r,t,e,s,n,i,o,u)&&(c=!1)),c){let l=r.outputs?.[i],h=r.hostDirectiveOutputs?.[i];if(h&&h.length)for(let p=0;p<h.length;p+=2){let g=h[p],y=h[p+1];u??=ol(r,e,o),cC(r,e,g,y,i,u)}if(l&&l.length)for(let p of l)u??=ol(r,e,o),cC(r,e,p,i,i,u)}}function V(t=1){return jw(t)}function tl(t,e){return t<<17|e<<2}function Fi(t){return t>>17&32767}function U1(t){return(t&2)==2}function $1(t,e){return t&131071|e<<17}function Dm(t){return t|2}function Lo(t){return(t&131068)>>2}function om(t,e){return t&-131069|e<<2}function H1(t){return(t&1)===1}function bm(t){return t|1}function z1(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,c=Fi(s),u=Lo(s);t[r]=n;let l=!1,h;if(Array.isArray(n)){let p=n;h=p[1],(h===null||bo(p,h)>0)&&(l=!0)}else h=n;if(i)if(u!==0){let g=Fi(t[c+1]);t[r+1]=tl(g,c),g!==0&&(t[g+1]=om(t[g+1],r)),t[c+1]=$1(t[c+1],r)}else t[r+1]=tl(c,0),c!==0&&(t[c+1]=om(t[c+1],r)),c=r;else t[r+1]=tl(u,0),c===0?c=r:t[u+1]=om(t[u+1],r),u=r;l&&(t[r+1]=Dm(t[r+1])),mC(t,h,r,!0),mC(t,h,r,!1),q1(e,h,t,r,o),s=tl(c,u),o?e.classBindings=s:e.styleBindings=s}function q1(t,e,n,r,i){let o=i?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&bo(o,e)>=0&&(n[r+1]=bm(n[r+1]))}function mC(t,e,n,r){let i=t[n+1],o=e===null,s=r?Fi(i):Lo(i),c=!1;for(;s!==0&&(c===!1||o);){let u=t[s],l=t[s+1];G1(u,e)&&(c=!0,t[s+1]=r?bm(l):Dm(l)),s=r?Fi(l):Lo(l)}c&&(t[n+1]=r?Dm(i):bm(i))}function G1(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?bo(t,e)>=0:!1}function Xn(t,e){return W1(t,e,null,!0),Xn}function W1(t,e,n,r){let i=_e(),o=At(),s=Mw(2);if(o.firstUpdatePass&&Q1(o,t,s,r),e!==Mn&&Pr(i,s,e)){let c=o.data[Nr()];eP(o,c,i,i[Pe],t,i[s+1]=tP(e,n),r,s)}}function K1(t,e){return e>=t.expandoStartIndex}function Q1(t,e,n,r){let i=t.data;if(i[n+1]===null){let o=i[Nr()],s=K1(t,n);nP(o,r)&&e===null&&!s&&(e=!1),e=Y1(i,o,e,r),z1(i,o,e,n,s,r)}}function Y1(t,e,n,r){let i=kw(t),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=sm(null,t,e,n,r),n=wa(n,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==i)if(n=sm(i,t,e,n,r),o===null){let u=J1(t,e,r);u!==void 0&&Array.isArray(u)&&(u=sm(null,t,e,u[1],r),u=wa(u,e.attrs,r),Z1(t,e,r,u))}else o=X1(t,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),n}function J1(t,e,n){let r=n?e.classBindings:e.styleBindings;if(Lo(r)!==0)return t[Fi(r)]}function Z1(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[Fi(i)]=r}function X1(t,e,n){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=t[o].hostAttrs;r=wa(r,s,n)}return wa(r,e.attrs,n)}function sm(t,e,n,r,i){let o=null,s=n.directiveEnd,c=n.directiveStylingLast;for(c===-1?c=n.directiveStart:c++;c<s&&(o=e[c],r=wa(r,o.hostAttrs,i),o!==t);)c++;return t!==null&&(n.directiveStylingLast=c),r}function wa(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),aw(t,s,n?!0:e[++o]))}return t===void 0?null:t}function eP(t,e,n,r,i,o,s,c){if(!(e.type&3))return;let u=t.data,l=u[c+1],h=H1(l)?gC(u,e,n,i,Lo(l),s):void 0;if(!El(h)){El(o)||U1(l)&&(o=gC(u,null,n,i,c,s));let p=Mp(Nr(),n);dx(r,s,p,i,o)}}function gC(t,e,n,r,i,o){let s=e===null,c;for(;i>0;){let u=t[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,g=n[i+1];g===Mn&&(g=p?Wt:void 0);let y=p?Hu(g,r):h===r?g:void 0;if(l&&!El(y)&&(y=Hu(u,r)),El(y)&&(c=y,s))return c;let S=t[i+1];i=s?Fi(S):Lo(S)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(c=Hu(u,r))}return c}function El(t){return t!==void 0}function tP(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=Wn(Pm(t)))),t}function nP(t,e){return(t.flags&(e?8:16))!==0}function M(t,e=""){let n=_e(),r=At(),i=t+ze,o=r.firstCreatePass?xl(r,i,1,e,null):r.data[i],s=rP(r,n,o,e,t);n[i]=s,Xu()&&$m(r,n,s,o),Mo(o,!1)}var rP=(t,e,n,r,i)=>(el(!0),NM(e[Pe],r));function iP(t,e,n,r=""){return Pr(t,Mi(),n)?e+ra(n)+r:Mn}function Te(t){return Ge("",t),Te}function Ge(t,e,n){let r=_e(),i=iP(r,t,e,n);return i!==Mn&&oP(r,Nr(),i),Ge}function oP(t,e,n){let r=Mp(e,t);MM(t[Pe],r,n)}function sP(t,e){let n=t[e];return n===Mn?void 0:n}function aP(t,e,n,r,i,o){let s=e+n;return Pr(t,s,i)?s1(t,s+1,o?r.call(o,i):r(i)):sP(t,s+1)}function Vo(t,e){let n=At(),r,i=t+ze;n.firstCreatePass?(r=cP(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let o=r.factory||(r.factory=Dr(r.type,!0)),s,c=vt(Sa);try{let u=ul(!1),l=o();return ul(u),xp(n,_e(),i,l),l}finally{vt(c)}}function cP(t,e){if(e)for(let n=e.length-1;n>=0;n--){let r=e[n];if(t===r.name)return r}}function jo(t,e,n){let r=t+ze,i=_e(),o=yw(i,r);return uP(i,r)?aP(i,Rw(),e,o.transform,n,o):o.transform(n)}function uP(t,e){return t[J].data[e].pure}var Il=class{ngModuleFactory;componentFactories;constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},Xm=(()=>{class t{compileModuleSync(n){return new gl(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=vp(n),o=eT(i.declarations).reduce((s,c)=>{let u=Sr(c);return u&&s.push(new ko(u)),s},[]);return new Il(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(r){return new(r||t)};static \u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var qT=(()=>{class t{applicationErrorHandler=P(Jt);appRef=P(Fo);taskService=P(xr);ngZone=P(xt);zonelessEnabled=P(pa);tracing=P(Da,{optional:!0});zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new it;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(ea):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(P(Zp,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()}))}notify(n){if(!this.zonelessEnabled&&n===5)return;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2;break}case 12:{this.appRef.dirtyFlags|=16;break}case 13:{this.appRef.dirtyFlags|=2;break}case 11:break;case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?Kp:Wp;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(ea+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(n),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,Kp(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||t)};static \u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function GT(){return[{provide:Co,useExisting:qT},{provide:xt,useClass:ta},{provide:pa,useValue:!0}]}function lP(){return typeof $localize<"u"&&$localize.locale||Ma}var Vl=new W("",{factory:()=>P(Vl,{optional:!0,skipSelf:!0})||lP()});var KT=Symbol("InputSignalNode#UNSET"),RP=le(x({},lu),{transformFn:void 0,applyValueToInputSignal(t,e){Gs(t,e)}});function QT(t,e){let n=Object.create(RP);n.value=t,n.transformFn=e?.transform;function r(){if(au(n),n.value===KT){let i=null;throw new z(-950,i)}return n.value}return r[Gt]=n,r}function WT(t,e){return QT(t,e)}function NP(t){return QT(KT,t)}var YT=(WT.required=NP,WT);var eg=new W(""),MP=new W("");function xa(t){return!t.moduleRef}function xP(t){let e=xa(t)?t.r3Injector:t.moduleRef.injector,n=e.get(xt);return n.run(()=>{xa(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(Jt),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:r})}),xa(t)){let o=()=>e.destroy(),s=t.platformInjector.get(eg);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>t.moduleRef.destroy(),s=t.platformInjector.get(eg);s.add(o),t.moduleRef.onDestroy(()=>{ga(t.allPlatformModules,t.moduleRef),i.unsubscribe(),s.delete(o)})}return OP(r,n,()=>{let o=e.get(xr),s=o.add(),c=e.get(Zm);return c.runInitializers(),c.donePromise.then(()=>{let u=e.get(Vl,Ma);if(zT(u||Ma),!e.get(MP,!0))return xa(t)?e.get(Fo):(t.allPlatformModules.push(t.moduleRef),t.moduleRef);if(xa(t)){let h=e.get(Fo);return t.rootComponent!==void 0&&h.bootstrap(t.rootComponent),h}else return PP?.(t.moduleRef,t.allPlatformModules),t.moduleRef}).finally(()=>void o.remove(s))})})}var PP;function OP(t,e,n){try{let r=n();return ji(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t(r)),r}}var jl=null;function kP(t=[],e){return an.create({name:e,providers:[{provide:oa,useValue:"platform"},{provide:eg,useValue:new Set([()=>jl=null])},...t]})}function LP(t=[]){if(jl)return jl;let e=kP(t);return jl=e,UT(),FP(e),e}function FP(t){let e=t.get(bl,null);Et(t,()=>{e?.forEach(n=>n())})}var Ul=(()=>{class t{static __NG_ELEMENT_ID__=VP}return t})();function VP(t){return jP(hn(),_e(),(t&16)===16)}function jP(t,e,n){if(Rr(t)&&!n){let r=dn(t.index,e);return new Oi(r,r)}else if(t.type&175){let r=e[Pt];return new Oi(r,e)}return null}function JT(t){let{rootComponent:e,appProviders:n,platformProviders:r,platformRef:i}=t;be(Ee.BootstrapApplicationStart);try{let o=i?.injector??LP(r),s=[GT(),zw,...n||[]],c=new Ia({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return xP({r3Injector:c.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{be(Ee.BootstrapApplicationEnd)}}var ZT=null;function er(){return ZT}function tg(t){ZT??=t}var Pa=class{},$l=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=G({token:t,factory:()=>P(XT),providedIn:"platform"})}return t})();var XT=(()=>{class t extends $l{_location;_history;_doc=P(qe);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return er().getBaseHref(this._doc)}onPopState(n){let r=er().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=er().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||t)};static \u0275prov=G({token:t,factory:()=>new t,providedIn:"platform"})}return t})();function nD(t,e){return t?e?t.endsWith("/")?e.startsWith("/")?t+e.slice(1):t+e:e.startsWith("/")?t+e:`${t}/${e}`:t:e}function eD(t){let e=t.search(/#|\?|$/);return t[e-1]==="/"?t.slice(0,e-1)+t.slice(e):t}function jr(t){return t&&t[0]!=="?"?`?${t}`:t}var Hl=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=G({token:t,factory:()=>P(UP),providedIn:"root"})}return t})(),BP=new W(""),UP=(()=>{class t extends Hl{_platformLocation;_baseHref;_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??P(qe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return nD(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+jr(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+jr(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+jr(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||t)(ce($l),ce(BP,8))};static \u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Bo=(()=>{class t{_subject=new ut;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(n){this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=zP(eD(tD(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+jr(r))}normalize(n){return t.stripTrailingSlash(HP(this._basePath,tD(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+jr(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+jr(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=jr;static joinWithSlash=nD;static stripTrailingSlash=eD;static \u0275fac=function(r){return new(r||t)(ce(Hl))};static \u0275prov=G({token:t,factory:()=>$P(),providedIn:"root"})}return t})();function $P(){return new Bo(ce(Hl))}function HP(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function tD(t){return t.replace(/\/index.html$/,"")}function zP(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function qP(t,e){return new z(2100,!1)}var ng=class{createSubscription(e,n,r){return kt(()=>e.subscribe({next:n,error:r}))}dispose(e){kt(()=>e.unsubscribe())}},rg=class{createSubscription(e,n,r){return e.then(i=>n?.(i),i=>r?.(i)),{unsubscribe:()=>{n=null,r=null}}}dispose(e){e.unsubscribe()}},GP=new rg,WP=new ng,ig=(()=>{class t{_ref;_latestValue=null;markForCheckOnValueUpdate=!0;_subscription=null;_obj=null;_strategy=null;applicationErrorHandler=P(Jt);constructor(n){this._ref=n}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(n){if(!this._obj){if(n)try{this.markForCheckOnValueUpdate=!1,this._subscribe(n)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return n!==this._obj?(this._dispose(),this.transform(n)):this._latestValue}_subscribe(n){this._obj=n,this._strategy=this._selectStrategy(n),this._subscription=this._strategy.createSubscription(n,r=>this._updateLatestValue(n,r),r=>this.applicationErrorHandler(r))}_selectStrategy(n){if(ji(n))return GP;if(Ll(n))return WP;throw qP(t,n)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(n,r){n===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static \u0275fac=function(r){return new(r||t)(Sa(Ul,16))};static \u0275pipe=Qm({name:"async",type:t,pure:!1})}return t})();var zl=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=Na({type:t});static \u0275inj=Do({})}return t})();function og(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Oa=class{};var rD="browser";var ka=class{_doc;constructor(e){this._doc=e}manager},ql=(()=>{class t extends ka{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i,o){return n.addEventListener(r,i,o),()=>this.removeEventListener(n,r,i,o)}removeEventListener(n,r,i,o){return n.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||t)(ce(qe))};static \u0275prov=G({token:t,factory:t.\u0275fac})}return t})(),Kl=new W(""),ug=(()=>{class t{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,r){this._zone=r,n.forEach(s=>{s.manager=this});let i=n.filter(s=>!(s instanceof ql));this._plugins=i.slice().reverse();let o=n.find(s=>s instanceof ql);o&&this._plugins.push(o)}addEventListener(n,r,i,o){return this._findPluginFor(r).addEventListener(n,r,i,o)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new z(5101,!1);return this._eventNameToPlugin.set(n,r),r}static \u0275fac=function(r){return new(r||t)(ce(Kl),ce(xt))};static \u0275prov=G({token:t,factory:t.\u0275fac})}return t})(),sg="ng-app-id";function iD(t){for(let e of t)e.remove()}function oD(t,e){let n=e.createElement("style");return n.textContent=t,n}function QP(t,e,n,r){let i=t.head?.querySelectorAll(`style[${sg}="${e}"],link[${sg}="${e}"]`);if(i)for(let o of i)o.removeAttribute(sg),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&n.set(o.textContent,{usage:0,elements:[o]})}function cg(t,e){let n=e.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",t),n}var lg=(()=>{class t{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,QP(n,r,this.inline,this.external),this.hosts.add(n.head)}addStyles(n,r){for(let i of n)this.addUsage(i,this.inline,oD);r?.forEach(i=>this.addUsage(i,this.external,cg))}removeStyles(n,r){for(let i of n)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(n,r,i){let o=r.get(n);o?o.usage++:r.set(n,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(n,this.doc)))})}removeUsage(n,r){let i=r.get(n);i&&(i.usage--,i.usage<=0&&(iD(i.elements),r.delete(n)))}ngOnDestroy(){for(let[,{elements:n}]of[...this.inline,...this.external])iD(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(n,oD(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(n,cg(r,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,r){return this.nonce&&r.setAttribute("nonce",this.nonce),n.appendChild(r)}static \u0275fac=function(r){return new(r||t)(ce(qe),ce(Dl),ce(Sl,8),ce(Ta))};static \u0275prov=G({token:t,factory:t.\u0275fac})}return t})(),ag={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},dg=/%COMP%/g;var aD="%COMP%",YP=`_nghost-${aD}`,JP=`_ngcontent-${aD}`,ZP=!0,XP=new W("",{factory:()=>ZP});function eO(t){return JP.replace(dg,t)}function tO(t){return YP.replace(dg,t)}function cD(t,e){return e.map(n=>n.replace(dg,t))}var hg=(()=>{class t{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;constructor(n,r,i,o,s,c,u=null,l=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.ngZone=c,this.nonce=u,this.tracingService=l,this.defaultRenderer=new La(n,s,c,this.tracingService)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(n,r);return i instanceof Wl?i.applyToHost(n):i instanceof Fa&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,c=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.tracingService;switch(r.encapsulation){case mn.Emulated:o=new Wl(u,l,r,this.appId,h,s,c,p);break;case mn.ShadowDom:return new Gl(u,n,r,s,c,this.nonce,p,l);case mn.ExperimentalIsolatedShadowDom:return new Gl(u,n,r,s,c,this.nonce,p);default:o=new Fa(u,l,r,h,s,c,p);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(n){this.rendererByCompId.delete(n)}static \u0275fac=function(r){return new(r||t)(ce(ug),ce(lg),ce(Dl),ce(XP),ce(qe),ce(xt),ce(Sl),ce(Da,8))};static \u0275prov=G({token:t,factory:t.\u0275fac})}return t})(),La=class{eventManager;doc;ngZone;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.tracingService=i}destroy(){}destroyNode=null;createElement(e,n){return n?this.doc.createElementNS(ag[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(sD(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(sD(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new z(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=ag[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=ag[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Nn.DashCase|Nn.Important)?e.style.setProperty(n,r,i&Nn.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Nn.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r,i){if(typeof e=="string"&&(e=er().getGlobalEventTarget(this.doc,e),!e))throw new z(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,n,o)),this.eventManager.addEventListener(e,n,o,i)}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;e(n)===!1&&n.preventDefault()}}};function sD(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var Gl=class extends La{hostEl;sharedStylesHost;shadowRoot;constructor(e,n,r,i,o,s,c,u){super(e,i,o,c),this.hostEl=n,this.sharedStylesHost=u,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost&&this.sharedStylesHost.addHost(this.shadowRoot);let l=r.styles;l=cD(r.id,l);for(let p of l){let g=document.createElement("style");s&&g.setAttribute("nonce",s),g.textContent=p,this.shadowRoot.appendChild(g)}let h=r.getExternalStyles?.();if(h)for(let p of h){let g=cg(p,i);s&&g.setAttribute("nonce",s),this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost&&this.sharedStylesHost.removeHost(this.shadowRoot)}},Fa=class extends La{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,n,r,i,o,s,c,u){super(e,o,s,c),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i;let l=r.styles;this.styles=u?cD(u,l):l,this.styleUrls=r.getExternalStyles?.(u)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&Pi.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Wl=class extends Fa{contentAttr;hostAttr;constructor(e,n,r,i,o,s,c,u){let l=i+"-"+r.id;super(e,n,r,o,s,c,u,l),this.contentAttr=eO(l),this.hostAttr=tO(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}};var Ql=class t extends Pa{supportsDOMEvents=!0;static makeCurrent(){tg(new t)}onAndCancel(e,n,r,i){return e.addEventListener(n,r,i),()=>{e.removeEventListener(n,r,i)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=nO();return n==null?null:rO(n)}resetBaseElement(){Va=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return og(document.cookie,e)}},Va=null;function nO(){return Va=Va||document.head.querySelector("base"),Va?Va.getAttribute("href"):null}function rO(t){return new URL(t,document.baseURI).pathname}var iO=(()=>{class t{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||t)};static \u0275prov=G({token:t,factory:t.\u0275fac})}return t})(),uD=["alt","control","meta","shift"],oO={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},sO={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},lD=(()=>{class t extends ka{constructor(n){super(n)}supports(n){return t.parseEventName(n)!=null}addEventListener(n,r,i,o){let s=t.parseEventName(r),c=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>er().onAndCancel(n,s.domEventName,c,o))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=t._normalizeKey(r.pop()),s="",c=r.indexOf("code");if(c>-1&&(r.splice(c,1),s="code."),uD.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(n,r){let i=oO[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),uD.forEach(s=>{if(s!==i){let c=sO[s];c(n)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{t.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return n==="esc"?"escape":n}static \u0275fac=function(r){return new(r||t)(ce(qe))};static \u0275prov=G({token:t,factory:t.\u0275fac})}return t})();function fg(t,e,n){let r=x({rootComponent:t,platformRef:n?.platformRef},aO(e));return JT(r)}function aO(t){return{appProviders:[...hO,...t?.providers??[]],platformProviders:dO}}function cO(){Ql.makeCurrent()}function uO(){return new Kn}function lO(){return Mm(document),document}var dO=[{provide:Ta,useValue:rD},{provide:bl,useValue:cO,multi:!0},{provide:qe,useFactory:lO}];var hO=[{provide:oa,useValue:"root"},{provide:Kn,useFactory:uO},{provide:Kl,useClass:ql,multi:!0},{provide:Kl,useClass:lD,multi:!0},hg,lg,ug,{provide:ki,useExisting:hg},{provide:Oa,useClass:iO},[]];var dD=(()=>{class t{_doc;constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static \u0275fac=function(r){return new(r||t)(ce(qe))};static \u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var re="primary",Ja=Symbol("RouteTitle"),vg=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function zi(t){return new vg(t)}function ED(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],c=t[o];if(s[0]===":")i[s.substring(1)]=c;else if(s!==c.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function td(t){return new Promise((e,n)=>{t.pipe(qn()).subscribe({next:r=>e(r),error:r=>n(r)})})}function pO(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Pn(t[n],e[n]))return!1;return!0}function Pn(t,e){let n=t?_g(t):void 0,r=e?_g(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!ID(t[i],e[i]))return!1;return!0}function _g(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function ID(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function wD(t){return t.length>0?t[t.length-1]:null}function Gi(t){return Au(t)?t:ji(t)?Je(Promise.resolve(t)):ge(t)}function CD(t){return Au(t)?td(t):Promise.resolve(t)}var mO={exact:DD,subset:bD},TD={exact:gO,subset:yO,ignored:()=>!0};function hD(t,e,n){return mO[n.paths](t.root,e.root,n.matrixParams)&&TD[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function gO(t,e){return Pn(t,e)}function DD(t,e,n){if(!$i(t.segments,e.segments)||!Zl(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!DD(t.children[r],e.children[r],n))return!1;return!0}function yO(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>ID(t[n],e[n]))}function bD(t,e,n){return SD(t,e,e.segments,n)}function SD(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!$i(i,n)||e.hasChildren()||!Zl(i,n,r))}else if(t.segments.length===n.length){if(!$i(t.segments,n)||!Zl(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!bD(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!$i(t.segments,i)||!Zl(t.segments,i,r)||!t.children[re]?!1:SD(t.children[re],e,o,r)}}function Zl(t,e,n){return e.every((r,i)=>TD[n](t[i].parameters,r.parameters))}var _n=class{root;queryParams;fragment;_queryParamMap;constructor(e=new Ie([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=zi(this.queryParams),this._queryParamMap}toString(){return EO.serialize(this)}},Ie=class{segments;children;parent=null;constructor(e,n){this.segments=e,this.children=n,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Xl(this)}},Br=class{path;parameters;_parameterMap;constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=zi(this.parameters),this._parameterMap}toString(){return RD(this)}};function vO(t,e){return $i(t,e)&&t.every((n,r)=>Pn(n.parameters,e[r].parameters))}function $i(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function _O(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===re&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==re&&(n=n.concat(e(i,r)))}),n}var Za=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=G({token:t,factory:()=>new Ur,providedIn:"root"})}return t})(),Ur=class{parse(e){let n=new Ig(e);return new _n(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${ja(e.root,!0)}`,r=CO(e.queryParams),i=typeof e.fragment=="string"?`#${IO(e.fragment)}`:"";return`${n}${r}${i}`}},EO=new Ur;function Xl(t){return t.segments.map(e=>RD(e)).join("/")}function ja(t,e){if(!t.hasChildren())return Xl(t);if(e){let n=t.children[re]?ja(t.children[re],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==re&&r.push(`${i}:${ja(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=_O(t,(r,i)=>i===re?[ja(t.children[re],!1)]:[`${i}:${ja(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[re]!=null?`${Xl(t)}/${n[0]}`:`${Xl(t)}/(${n.join("//")})`}}function AD(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Yl(t){return AD(t).replace(/%3B/gi,";")}function IO(t){return encodeURI(t)}function Eg(t){return AD(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ed(t){return decodeURIComponent(t)}function fD(t){return ed(t.replace(/\+/g,"%20"))}function RD(t){return`${Eg(t.path)}${wO(t.parameters)}`}function wO(t){return Object.entries(t).map(([e,n])=>`;${Eg(e)}=${Eg(n)}`).join("")}function CO(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${Yl(n)}=${Yl(i)}`).join("&"):`${Yl(n)}=${Yl(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var TO=/^[^\/()?;#]+/;function pg(t){let e=t.match(TO);return e?e[0]:""}var DO=/^[^\/()?;=#]+/;function bO(t){let e=t.match(DO);return e?e[0]:""}var SO=/^[^=?&#]+/;function AO(t){let e=t.match(SO);return e?e[0]:""}var RO=/^[^&#]+/;function NO(t){let e=t.match(RO);return e?e[0]:""}var Ig=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ie([],{}):new Ie([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[re]=new Ie(e,n)),r}parseSegment(){let e=pg(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new z(4009,!1);return this.capture(e),new Br(ed(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=bO(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=pg(this.remaining);i&&(r=i,this.capture(r))}e[ed(n)]=ed(r)}parseQueryParam(e){let n=AO(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=NO(this.remaining);s&&(r=s,this.capture(r))}let i=fD(n),o=fD(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=pg(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new z(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=re);let s=this.parseChildren();n[o??re]=Object.keys(s).length===1&&s[re]?s[re]:new Ie([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new z(4011,!1)}};function ND(t){return t.segments.length>0?new Ie([],{[re]:t}):t}function MD(t){let e={};for(let[r,i]of Object.entries(t.children)){let o=MD(i);if(r===re&&o.segments.length===0&&o.hasChildren())for(let[s,c]of Object.entries(o.children))e[s]=c;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new Ie(t.segments,e);return MO(n)}function MO(t){if(t.numberOfChildren===1&&t.children[re]){let e=t.children[re];return new Ie(t.segments.concat(e.segments),e.children)}return t}function zo(t){return t instanceof _n}function xD(t,e,n=null,r=null,i=new Ur){let o=PD(t);return OD(o,e,n,r,i)}function PD(t){let e;function n(o){let s={};for(let u of o.children){let l=n(u);s[u.outlet]=l}let c=new Ie(o.url,s);return o===t&&(e=c),c}let r=n(t.root),i=ND(r);return e??i}function OD(t,e,n,r,i){let o=t;for(;o.parent;)o=o.parent;if(e.length===0)return mg(o,o,o,n,r,i);let s=xO(e);if(s.toRoot())return mg(o,o,new Ie([],{}),n,r,i);let c=PO(s,o,t),u=c.processChildren?Ua(c.segmentGroup,c.index,s.commands):LD(c.segmentGroup,c.index,s.commands);return mg(o,c.segmentGroup,u,n,r,i)}function nd(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function za(t){return typeof t=="object"&&t!=null&&t.outlets}function pD(t,e,n){t||="\u0275";let r=new _n;return r.queryParams={[t]:e},n.parse(n.serialize(r)).queryParams[t]}function mg(t,e,n,r,i,o){let s={};for(let[l,h]of Object.entries(r??{}))s[l]=Array.isArray(h)?h.map(p=>pD(l,p,o)):pD(l,h,o);let c;t===e?c=n:c=kD(t,e,n);let u=ND(MD(c));return new _n(u,s,i)}function kD(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=kD(o,e,n)}),new Ie(t.segments,r)}var rd=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&nd(r[0]))throw new z(4003,!1);let i=r.find(za);if(i&&i!==wD(r))throw new z(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function xO(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new rd(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let c={};return Object.entries(o.outlets).forEach(([u,l])=>{c[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:c}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((c,u)=>{u==0&&c==="."||(u==0&&c===""?n=!0:c===".."?e++:c!=""&&i.push(c))}),i):[...i,o]},[]);return new rd(n,e,r)}var $o=class{segmentGroup;processChildren;index;constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function PO(t,e,n){if(t.isAbsolute)return new $o(e,!0,0);if(!n)return new $o(e,!1,NaN);if(n.parent===null)return new $o(n,!0,0);let r=nd(t.commands[0])?0:1,i=n.segments.length-1+r;return OO(n,i,t.numberOfDoubleDots)}function OO(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new z(4005,!1);i=r.segments.length}return new $o(r,!1,i-o)}function kO(t){return za(t[0])?t[0].outlets:{[re]:t}}function LD(t,e,n){if(t??=new Ie([],{}),t.segments.length===0&&t.hasChildren())return Ua(t,e,n);let r=LO(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new Ie(t.segments.slice(0,r.pathIndex),{});return o.children[re]=new Ie(t.segments.slice(r.pathIndex),t.children),Ua(o,0,i)}else return r.match&&i.length===0?new Ie(t.segments,{}):r.match&&!t.hasChildren()?wg(t,e,n):r.match?Ua(t,0,i):wg(t,e,n)}function Ua(t,e,n){if(n.length===0)return new Ie(t.segments,{});{let r=kO(n),i={};if(Object.keys(r).some(o=>o!==re)&&t.children[re]&&t.numberOfChildren===1&&t.children[re].segments.length===0){let o=Ua(t.children[re],e,n);return new Ie(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=LD(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Ie(t.segments,i)}}function LO(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let s=t.segments[i],c=n[r];if(za(c))break;let u=`${c}`,l=r<n.length-1?n[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!gD(u,l,s))return o;r+=2}else{if(!gD(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function wg(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if(za(o)){let u=FO(o.outlets);return new Ie(r,u)}if(i===0&&nd(n[0])){let u=t.segments[e];r.push(new Br(u.path,mD(n[0]))),i++;continue}let s=za(o)?o.outlets[re]:`${o}`,c=i<n.length-1?n[i+1]:null;s&&c&&nd(c)?(r.push(new Br(s,mD(c))),i+=2):(r.push(new Br(s,{})),i++)}return new Ie(r,{})}function FO(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=wg(new Ie([],{}),0,r))}),e}function mD(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function gD(t,e,n){return t==n.path&&Pn(e,n.parameters)}var $a="imperative",Xe=(function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t})(Xe||{}),Ut=class{id;url;constructor(e,n){this.id=e,this.url=n}},qi=class extends Ut{type=Xe.NavigationStart;navigationTrigger;restoredState;constructor(e,n,r="imperative",i=null){super(e,n),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},tr=class extends Ut{urlAfterRedirects;type=Xe.NavigationEnd;constructor(e,n,r){super(e,n),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},wt=(function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t[t.Aborted=4]="Aborted",t})(wt||{}),qa=(function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t})(qa||{}),On=class extends Ut{reason;code;type=Xe.NavigationCancel;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},nr=class extends Ut{reason;code;type=Xe.NavigationSkipped;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}},qo=class extends Ut{error;target;type=Xe.NavigationError;constructor(e,n,r,i){super(e,n),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Ga=class extends Ut{urlAfterRedirects;state;type=Xe.RoutesRecognized;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},id=class extends Ut{urlAfterRedirects;state;type=Xe.GuardsCheckStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},od=class extends Ut{urlAfterRedirects;state;shouldActivate;type=Xe.GuardsCheckEnd;constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},sd=class extends Ut{urlAfterRedirects;state;type=Xe.ResolveStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ad=class extends Ut{urlAfterRedirects;state;type=Xe.ResolveEnd;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},cd=class{route;type=Xe.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},ud=class{route;type=Xe.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},ld=class{snapshot;type=Xe.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},dd=class{snapshot;type=Xe.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},hd=class{snapshot;type=Xe.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},fd=class{snapshot;type=Xe.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Wa=class{},Go=class{url;navigationBehaviorOptions;constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function VO(t){return!(t instanceof Wa)&&!(t instanceof Go)}function jO(t,e){return t.providers&&!t._injector&&(t._injector=Ra(t.providers,e,`Route: ${t.path}`)),t._injector??e}function vn(t){return t.outlet||re}function BO(t,e){let n=t.filter(r=>vn(r)===e);return n.push(...t.filter(r=>vn(r)!==e)),n}function Qo(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var pd=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Qo(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Yo(this.rootInjector)}},Yo=(()=>{class t{rootInjector;contexts=new Map;constructor(n){this.rootInjector=n}onChildOutletCreated(n,r){let i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new pd(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static \u0275fac=function(r){return new(r||t)(ce(ot))};static \u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),md=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=Cg(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=Cg(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=Tg(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Tg(e,this._root).map(n=>n.value)}};function Cg(t,e){if(t===e.value)return e;for(let n of e.children){let r=Cg(t,n);if(r)return r}return null}function Tg(t,e){if(t===e.value)return[e];for(let n of e.children){let r=Tg(t,n);if(r.length)return r.unshift(e),r}return[]}var Bt=class{value;children;constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Uo(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var Ka=class extends md{snapshot;constructor(e,n){super(e),this.snapshot=n,Ng(this,e)}toString(){return this.snapshot.toString()}};function FD(t){let e=UO(t),n=new He([new Br("",{})]),r=new He({}),i=new He({}),o=new He({}),s=new He(""),c=new kn(n,r,o,s,i,re,t,e.root);return c.snapshot=e.root,new Ka(new Bt(c,[]),e)}function UO(t){let e={},n={},r={},o=new Hi([],e,r,"",n,re,t,null,{});return new Qa("",new Bt(o,[]))}var kn=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,n,r,i,o,s,c,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=c,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(Re(l=>l[Ja]))??ge(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Re(e=>zi(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Re(e=>zi(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function gd(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:x(x({},e.params),t.params),data:x(x({},e.data),t.data),resolve:x(x(x(x({},t.data),e.data),i?.data),t._resolvedData)}:r={params:x({},t.params),data:x({},t.data),resolve:x(x({},t.data),t._resolvedData??{})},i&&jD(i)&&(r.resolve[Ja]=i.title),r}var Hi=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Ja]}constructor(e,n,r,i,o,s,c,u,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=c,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=zi(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=zi(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},Qa=class extends md{url;constructor(e,n){super(n),this.url=e,Ng(this,n)}toString(){return VD(this._root)}};function Ng(t,e){e.value._routerState=t,e.children.forEach(n=>Ng(t,n))}function VD(t){let e=t.children.length>0?` { ${t.children.map(VD).join(", ")} } `:"";return`${t.value}${e}`}function gg(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Pn(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Pn(e.params,n.params)||t.paramsSubject.next(n.params),pO(e.url,n.url)||t.urlSubject.next(n.url),Pn(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function Dg(t,e){let n=Pn(t.params,e.params)&&vO(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||Dg(t.parent,e.parent))}function jD(t){return typeof t.title=="string"||t.title===null}var BD=new W(""),Xa=(()=>{class t{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=re;activateEvents=new _t;deactivateEvents=new _t;attachEvents=new _t;detachEvents=new _t;routerOutletData=YT();parentContexts=P(Yo);location=P(Aa);changeDetector=P(Ul);inputBinder=P(Ed,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new z(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new z(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new z(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new z(4013,!1);this._activatedRoute=n;let i=this.location,s=n.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,u=new bg(n,c,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||t)};static \u0275dir=kl({type:t,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[wl]})}return t})(),bg=class{route;childContexts;parent;outletData;constructor(e,n,r,i){this.route=e,this.childContexts=n,this.parent=r,this.outletData=i}get(e,n){return e===kn?this.route:e===Yo?this.childContexts:e===BD?this.outletData:this.parent.get(e,n)}},Ed=new W("");var Mg=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275cmp=gn({type:t,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&Zn(0,"router-outlet")},dependencies:[Xa],encapsulation:2})}return t})();function xg(t){let e=t.children&&t.children.map(xg),n=e?le(x({},t),{children:e}):x({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==re&&(n.component=Mg),n}function $O(t,e,n){let r=Ya(t,e._root,n?n._root:void 0);return new Ka(r,e)}function Ya(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=HO(t,e,n);return new Bt(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(c=>Ya(t,c)),s}}let r=zO(e.value),i=e.children.map(o=>Ya(t,o));return new Bt(r,i)}}function HO(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return Ya(t,r,i);return Ya(t,r)})}function zO(t){return new kn(new He(t.url),new He(t.params),new He(t.queryParams),new He(t.fragment),new He(t.data),t.outlet,t.component,t)}var Wo=class{redirectTo;navigationBehaviorOptions;constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},UD="ngNavigationCancelingError";function yd(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=zo(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=$D(!1,wt.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function $D(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[UD]=!0,n.cancellationCode=e,n}function qO(t){return HD(t)&&zo(t.url)}function HD(t){return!!t&&t[UD]}var GO=(t,e,n,r)=>Re(i=>(new Sg(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),Sg=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),gg(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=Uo(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Uo(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),c=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:c})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Uo(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=Uo(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new fd(o.value.snapshot))}),e.children.length&&this.forwardEvent(new dd(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(gg(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let c=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(c.contexts),s.attachRef=c.componentRef,s.route=c.route.value,s.outlet&&s.outlet.attach(c.componentRef,c.route.value),gg(c.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},vd=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Ho=class{component;route;constructor(e,n){this.component=e,this.route=n}};function WO(t,e,n){let r=t._root,i=e?e._root:null;return Ba(r,i,n,[r.value])}function KO(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function Jo(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!hp(t)?t:e.get(t):r}function Ba(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Uo(e);return t.children.forEach(s=>{QO(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,c])=>Ha(c,n.getContext(s),i)),i}function QO(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,c=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=YO(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new vd(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Ba(t,e,c?c.children:null,r,i):Ba(t,e,n,r,i),u&&c&&c.outlet&&c.outlet.isActivated&&i.canDeactivateChecks.push(new Ho(c.outlet.component,s))}else s&&Ha(e,c,i),i.canActivateChecks.push(new vd(r)),o.component?Ba(t,null,c?c.children:null,r,i):Ba(t,null,n,r,i);return i}function YO(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!$i(t.url,e.url);case"pathParamsOrQueryParamsChange":return!$i(t.url,e.url)||!Pn(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Dg(t,e)||!Pn(t.queryParams,e.queryParams);case"paramsChange":default:return!Dg(t,e)}}function Ha(t,e,n){let r=Uo(t),i=t.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Ha(s,e.children.getContext(o),n):Ha(s,null,n):Ha(s,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new Ho(e.outlet.component,i)):n.canDeactivateChecks.push(new Ho(null,i)):n.canDeactivateChecks.push(new Ho(null,i))}function ec(t){return typeof t=="function"}function JO(t){return typeof t=="boolean"}function ZO(t){return t&&ec(t.canLoad)}function XO(t){return t&&ec(t.canActivate)}function ek(t){return t&&ec(t.canActivateChild)}function tk(t){return t&&ec(t.canDeactivate)}function nk(t){return t&&ec(t.canMatch)}function zD(t){return t instanceof mi||t?.name==="EmptyError"}var Jl=Symbol("INITIAL_VALUE");function Ko(){return Dn(t=>qf(t.map(e=>e.pipe(zn(1),Kf(Jl)))).pipe(Re(e=>{for(let n of e)if(n!==!0){if(n===Jl)return Jl;if(n===!1||rk(n))return n}return!0}),Tn(e=>e!==Jl),zn(1)))}function rk(t){return zo(t)||t instanceof Wo}function qD(t){return t.aborted?ge(void 0).pipe(zn(1)):new me(e=>{let n=()=>{e.next(),e.complete()};return t.addEventListener("abort",n),()=>t.removeEventListener("abort",n)})}function GD(t){return gi(qD(t))}function ik(t,e){return gt(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?ge(le(x({},n),{guardsResult:!0})):ok(s,r,i,t).pipe(gt(c=>c&&JO(c)?sk(r,o,t,e):ge(c)),Re(c=>le(x({},n),{guardsResult:c})))})}function ok(t,e,n,r){return Je(t).pipe(gt(i=>dk(i.component,i.route,n,e,r)),qn(i=>i!==!0,!0))}function sk(t,e,n,r){return Je(e).pipe(Ru(i=>Eo(ck(i.route.parent,r),ak(i.route,r),lk(t,i.path,n),uk(t,i.route,n))),qn(i=>i!==!0,!0))}function ak(t,e){return t!==null&&e&&e(new hd(t)),ge(!0)}function ck(t,e){return t!==null&&e&&e(new ld(t)),ge(!0)}function uk(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return ge(!0);let i=r.map(o=>Qs(()=>{let s=Qo(e)??n,c=Jo(o,s),u=XO(c)?c.canActivate(e,t):Et(s,()=>c(e,t));return Gi(u).pipe(qn())}));return ge(i).pipe(Ko())}function lk(t,e,n){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>KO(s)).filter(s=>s!==null).map(s=>Qs(()=>{let c=s.guards.map(u=>{let l=Qo(s.node)??n,h=Jo(u,l),p=ek(h)?h.canActivateChild(r,t):Et(l,()=>h(r,t));return Gi(p).pipe(qn())});return ge(c).pipe(Ko())}));return ge(o).pipe(Ko())}function dk(t,e,n,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return ge(!0);let s=o.map(c=>{let u=Qo(e)??i,l=Jo(c,u),h=tk(l)?l.canDeactivate(t,e,n,r):Et(u,()=>l(t,e,n,r));return Gi(h).pipe(qn())});return ge(s).pipe(Ko())}function hk(t,e,n,r,i){let o=e.canLoad;if(o===void 0||o.length===0)return ge(!0);let s=o.map(c=>{let u=Jo(c,t),l=ZO(u)?u.canLoad(e,n):Et(t,()=>u(e,n)),h=Gi(l);return i?h.pipe(GD(i)):h});return ge(s).pipe(Ko(),WD(r))}function WD(t){return Uf(yt(e=>{if(typeof e!="boolean")throw yd(t,e)}),Re(e=>e===!0))}function fk(t,e,n,r,i){let o=e.canMatch;if(!o||o.length===0)return ge(!0);let s=o.map(c=>{let u=Jo(c,t),l=nk(u)?u.canMatch(e,n):Et(t,()=>u(e,n)),h=Gi(l);return i?h.pipe(GD(i)):h});return ge(s).pipe(Ko(),WD(r))}var Ui=class KD extends Error{segmentGroup;constructor(e){super(),this.segmentGroup=e||null,Object.setPrototypeOf(this,KD.prototype)}},Ag=class QD extends Error{urlTree;constructor(e){super(),this.urlTree=e,Object.setPrototypeOf(this,QD.prototype)}};function pk(t){throw new z(4e3,!1)}function mk(t){throw $D(!1,wt.GuardRejected)}var gk=class{urlSerializer;urlTree;constructor(e,n){this.urlSerializer=e,this.urlTree=n}async lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return r;if(i.numberOfChildren>1||!i.children[re])throw pk(`${e.redirectTo}`);i=i.children[re]}}async applyRedirectCommands(e,n,r,i,o){let s=await yk(n,i,o);if(s instanceof _n)throw new Ag(s);let c=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if(s[0]==="/")throw new Ag(c);return c}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new _n(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let c=o.substring(1);r[i]=n[c]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),s={};return Object.entries(n.children).forEach(([c,u])=>{s[c]=this.createSegmentGroup(e,u,r,i)}),new Ie(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new z(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}};function yk(t,e,n){if(typeof t=="string")return Promise.resolve(t);let r=t,{queryParams:i,fragment:o,routeConfig:s,url:c,outlet:u,params:l,data:h,title:p}=e;return td(Gi(Et(n,()=>r({params:l,data:h,queryParams:i,fragment:o,routeConfig:s,url:c,outlet:u,title:p}))))}var Rg={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function vk(t,e,n,r,i,o){let s=YD(t,e,n);return s.matched?(r=jO(e,r),fk(r,e,n,i,o).pipe(Re(c=>c===!0?s:x({},Rg)))):ge(s)}function YD(t,e,n){if(e.path==="**")return _k(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?x({},Rg):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||ED)(n,t,e);if(!i)return x({},Rg);let o={};Object.entries(i.posParams??{}).forEach(([c,u])=>{o[c]=u.path});let s=i.consumed.length>0?x(x({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function _k(t){return{matched:!0,parameters:t.length>0?wD(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function yD(t,e,n,r){return n.length>0&&wk(t,n,r)?{segmentGroup:new Ie(e,Ik(r,new Ie(n,t.children))),slicedSegments:[]}:n.length===0&&Ck(t,n,r)?{segmentGroup:new Ie(t.segments,Ek(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new Ie(t.segments,t.children),slicedSegments:n}}function Ek(t,e,n,r){let i={};for(let o of n)if(Id(t,e,o)&&!r[vn(o)]){let s=new Ie([],{});i[vn(o)]=s}return x(x({},r),i)}function Ik(t,e){let n={};n[re]=e;for(let r of t)if(r.path===""&&vn(r)!==re){let i=new Ie([],{});n[vn(r)]=i}return n}function wk(t,e,n){return n.some(r=>Id(t,e,r)&&vn(r)!==re)}function Ck(t,e,n){return n.some(r=>Id(t,e,r))}function Id(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function Tk(t,e,n){return e.length===0&&!t.children[n]}var Dk=class{};async function bk(t,e,n,r,i,o,s="emptyOnly",c){return new Ak(t,e,n,r,i,s,o,c).recognize()}var Sk=31,Ak=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;abortSignal;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,n,r,i,o,s,c,u){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=c,this.abortSignal=u,this.applyRedirects=new gk(this.urlSerializer,this.urlTree)}noMatchError(e){return new z(4002,`'${e.segmentGroup}'`)}async recognize(){let e=yD(this.urlTree.root,[],[],this.config).segmentGroup,{children:n,rootSnapshot:r}=await this.match(e),i=new Bt(r,n),o=new Qa("",i),s=xD(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}async match(e){let n=new Hi([],Object.freeze({}),Object.freeze(x({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),re,this.rootComponentType,null,{});try{return{children:await this.processSegmentGroup(this.injector,this.config,e,re,n),rootSnapshot:n}}catch(r){if(r instanceof Ag)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Ui?this.noMatchError(r):r}}async processSegmentGroup(e,n,r,i,o){if(r.segments.length===0&&r.hasChildren())return this.processChildren(e,n,r,o);let s=await this.processSegment(e,n,r,r.segments,i,!0,o);return s instanceof Bt?[s]:[]}async processChildren(e,n,r,i){let o=[];for(let u of Object.keys(r.children))u==="primary"?o.unshift(u):o.push(u);let s=[];for(let u of o){let l=r.children[u],h=BO(n,u),p=await this.processSegmentGroup(e,h,l,u,i);s.push(...p)}let c=JD(s);return Rk(c),c}async processSegment(e,n,r,i,o,s,c){for(let u of n)try{return await this.processSegmentAgainstRoute(u._injector??e,n,u,r,i,o,s,c)}catch(l){if(l instanceof Ui||zD(l))continue;throw l}if(Tk(r,i,o))return new Dk;throw new Ui(r)}async processSegmentAgainstRoute(e,n,r,i,o,s,c,u){if(vn(r)!==s&&(s===re||!Id(i,o,r)))throw new Ui(i);if(r.redirectTo===void 0)return this.matchSegmentAgainstRoute(e,i,r,o,s,u);if(this.allowRedirects&&c)return this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s,u);throw new Ui(i)}async expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s,c){let{matched:u,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:g}=YD(n,i,o);if(!u)throw new Ui(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>Sk&&(this.allowRedirects=!1));let y=new Hi(o,l,Object.freeze(x({},this.urlTree.queryParams)),this.urlTree.fragment,vD(i),vn(i),i.component??i._loadedComponent??null,i,_D(i)),S=gd(y,c,this.paramsInheritanceStrategy);if(y.params=Object.freeze(S.params),y.data=Object.freeze(S.data),this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let R=await this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,y,e),A=await this.applyRedirects.lineralizeSegments(i,R);return this.processSegment(e,r,n,A.concat(g),s,!1,c)}async matchSegmentAgainstRoute(e,n,r,i,o,s){if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let c=await td(vk(n,r,i,e,this.urlSerializer,this.abortSignal));if(r.path==="**"&&(n.children={}),!c?.matched)throw new Ui(n);e=r._injector??e;let{routes:u}=await this.getChildConfig(e,r,i),l=r._loadedInjector??e,{parameters:h,consumedSegments:p,remainingSegments:g}=c,y=new Hi(p,h,Object.freeze(x({},this.urlTree.queryParams)),this.urlTree.fragment,vD(r),vn(r),r.component??r._loadedComponent??null,r,_D(r)),S=gd(y,s,this.paramsInheritanceStrategy);y.params=Object.freeze(S.params),y.data=Object.freeze(S.data);let{segmentGroup:R,slicedSegments:A}=yD(n,p,g,u);if(A.length===0&&R.hasChildren()){let ue=await this.processChildren(l,u,R,y);return new Bt(y,ue)}if(u.length===0&&A.length===0)return new Bt(y,[]);let L=vn(r)===o,Y=await this.processSegment(l,u,R,A,L?re:o,!0,y);return new Bt(y,Y instanceof Bt?[Y]:[])}async getChildConfig(e,n,r){if(n.children)return{routes:n.children,injector:e};if(n.loadChildren){if(n._loadedRoutes!==void 0)return{routes:n._loadedRoutes,injector:n._loadedInjector};if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);if(await td(hk(e,n,r,this.urlSerializer,this.abortSignal))){let o=await this.configLoader.loadChildren(e,n);return n._loadedRoutes=o.routes,n._loadedInjector=o.injector,o}throw mk(n)}return{routes:[],injector:e}}};function Rk(t){t.sort((e,n)=>e.value.outlet===re?-1:n.value.outlet===re?1:e.value.outlet.localeCompare(n.value.outlet))}function Nk(t){let e=t.value.routeConfig;return e&&e.path===""}function JD(t){let e=[],n=new Set;for(let r of t){if(!Nk(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=JD(r.children);e.push(new Bt(r.value,i))}return e.filter(r=>!n.has(r))}function vD(t){return t.data||{}}function _D(t){return t.resolve||{}}var Mk=new W("",{factory:()=>bk});function xk(t,e,n,r,i,o,s){let c=t.get(Mk);return gt(u=>ge(u).pipe(Dn(l=>c(t,e,n,r,l.extractedUrl,i,o,s)),Re(({state:l,tree:h})=>le(x({},u),{targetSnapshot:l,urlAfterRedirects:h}))))}function Pk(t,e){return gt(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return ge(n);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of ZD(u))s.add(l);let c=0;return Je(s).pipe(Ru(u=>o.has(u)?Ok(u,r,t,e):(u.data=gd(u,u.parent,t).resolve,ge(void 0))),yt(()=>c++),Nu(1),gt(u=>c===s.size?ge(n):Dt))})}function ZD(t){let e=t.children.map(n=>ZD(n)).flat();return[t,...e]}function Ok(t,e,n,r){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!jD(i)&&(o[Ja]=i.title),Qs(()=>(t.data=gd(t,t.parent,n).resolve,kk(o,t,e,r).pipe(Re(s=>(t._resolvedData=s,t.data=x(x({},t.data),s),null)))))}function kk(t,e,n,r){let i=_g(t);if(i.length===0)return ge({});let o={};return Je(i).pipe(gt(s=>Lk(t[s],e,n,r).pipe(qn(),yt(c=>{if(c instanceof Wo)throw yd(new Ur,c);o[s]=c}))),Nu(1),Re(()=>o),Ys(s=>zD(s)?Dt:zf(s)))}function Lk(t,e,n,r){let i=Qo(e)??r,o=Jo(t,i),s=o.resolve?o.resolve(e,n):Et(i,()=>o(e,n));return Gi(s)}function yg(t){return Dn(e=>{let n=t(e);return n?Je(n).pipe(Re(()=>e)):ge(e)})}var Pg=(()=>{class t{buildTitle(n){let r,i=n.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===re);return r}getResolvedTitleForRoute(n){return n.data[Ja]}static \u0275fac=function(r){return new(r||t)};static \u0275prov=G({token:t,factory:()=>P(XD),providedIn:"root"})}return t})(),XD=(()=>{class t extends Pg{title;constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||t)(ce(dD))};static \u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),tc=new W("",{factory:()=>({})}),nc=new W(""),eb=(()=>{class t{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=P(Xm);async loadComponent(n,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return Promise.resolve(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=(async()=>{try{let o=await CD(Et(n,()=>r.loadComponent())),s=await rb(nb(o));return this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s,s}finally{this.componentLoaders.delete(r)}})();return this.componentLoaders.set(r,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Promise.resolve({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let i=(async()=>{try{let o=await tb(r,this.compiler,n,this.onLoadEndListener);return r._loadedRoutes=o.routes,r._loadedInjector=o.injector,o}finally{this.childrenLoaders.delete(r)}})();return this.childrenLoaders.set(r,i),i}static \u0275fac=function(r){return new(r||t)};static \u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();async function tb(t,e,n,r){let i=await CD(Et(n,()=>t.loadChildren())),o=await rb(nb(i)),s;o instanceof Ol||Array.isArray(o)?s=o:s=await e.compileModuleAsync(o),r&&r(t);let c,u,l=!1;return Array.isArray(s)?(u=s,l=!0):(c=s.create(n).injector,u=c.get(nc,[],{optional:!0,self:!0}).flat()),{routes:u.map(xg),injector:c}}function Fk(t){return t&&typeof t=="object"&&"default"in t}function nb(t){return Fk(t)?t.default:t}async function rb(t){return t}var wd=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=G({token:t,factory:()=>P(Vk),providedIn:"root"})}return t})(),Vk=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static \u0275fac=function(r){return new(r||t)};static \u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),ib=new W("");var jk=()=>{},ob=new W(""),sb=(()=>{class t{currentNavigation=Jn(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=Jn(null);events=new ut;transitionAbortWithErrorSubject=new ut;configLoader=P(eb);environmentInjector=P(ot);destroyRef=P(fn);urlSerializer=P(Za);rootContexts=P(Yo);location=P(Bo);inputBindingEnabled=P(Ed,{optional:!0})!==null;titleStrategy=P(Pg);options=P(tc,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=P(wd);createViewTransition=P(ib,{optional:!0});navigationErrorHandler=P(ob,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>ge(void 0);rootComponentType=null;destroyed=!1;constructor(){let n=i=>this.events.next(new cd(i)),r=i=>this.events.next(new ud(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;kt(()=>{this.transitions?.next(le(x({},n),{extractedUrl:this.urlHandlingStrategy.extract(n.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r}))})}setupNavigations(n){return this.transitions=new He(null),this.transitions.pipe(Tn(r=>r!==null),Dn(r=>{let i=!1,o=new AbortController;return ge(r).pipe(Dn(s=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",wt.SupersededByNewNavigation),Dt;this.currentTransition=r;let c=this.lastSuccessfulNavigation();this.currentNavigation.set({id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,targetBrowserUrl:typeof s.extras.browserUrl=="string"?this.urlSerializer.parse(s.extras.browserUrl):s.extras.browserUrl,trigger:s.source,extras:s.extras,previousNavigation:c?le(x({},c),{previousNavigation:null}):null,abort:()=>o.abort()});let u=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),l=s.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!u&&l!=="reload")return this.events.next(new nr(s.id,this.urlSerializer.serialize(s.rawUrl),"",qa.IgnoredSameUrlNavigation)),s.resolve(!1),Dt;if(this.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return ge(s).pipe(Dn(h=>(this.events.next(new qi(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),h.id!==this.navigationId?Dt:Promise.resolve(h))),xk(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy,o.signal),yt(h=>{r.targetSnapshot=h.targetSnapshot,r.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation.update(g=>(g.finalUrl=h.urlAfterRedirects,g));let p=new Ga(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(p)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(s.currentRawUrl)){let{id:h,extractedUrl:p,source:g,restoredState:y,extras:S}=s,R=new qi(h,this.urlSerializer.serialize(p),g,y);this.events.next(R);let A=FD(this.rootComponentType).snapshot;return this.currentTransition=r=le(x({},s),{targetSnapshot:A,urlAfterRedirects:p,extras:le(x({},S),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(L=>(L.finalUrl=p,L)),ge(r)}else return this.events.next(new nr(s.id,this.urlSerializer.serialize(s.extractedUrl),"",qa.IgnoredByUrlHandlingStrategy)),s.resolve(!1),Dt}),yt(s=>{let c=new id(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(c)}),Re(s=>(this.currentTransition=r=le(x({},s),{guards:WO(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),r)),ik(this.environmentInjector,s=>this.events.next(s)),yt(s=>{if(r.guardsResult=s.guardsResult,s.guardsResult&&typeof s.guardsResult!="boolean")throw yd(this.urlSerializer,s.guardsResult);let c=new od(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(c)}),Tn(s=>s.guardsResult?!0:(this.cancelNavigationTransition(s,"",wt.GuardRejected),!1)),yg(s=>{if(s.guards.canActivateChecks.length!==0)return ge(s).pipe(yt(c=>{let u=new sd(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}),Dn(c=>{let u=!1;return ge(c).pipe(Pk(this.paramsInheritanceStrategy,this.environmentInjector),yt({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(c,"",wt.NoDataFromResolver)}}))}),yt(c=>{let u=new ad(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}))}),yg(s=>{let c=l=>{let h=[];if(l.routeConfig?._loadedComponent)l.component=l.routeConfig?._loadedComponent;else if(l.routeConfig?.loadComponent){let p=Qo(l)??this.environmentInjector;h.push(this.configLoader.loadComponent(p,l.routeConfig).then(g=>{l.component=g}))}for(let p of l.children)h.push(...c(p));return h},u=c(s.targetSnapshot.root);return u.length===0?ge(s):Je(Promise.all(u).then(()=>s))}),yg(()=>this.afterPreactivation()),Dn(()=>{let{currentSnapshot:s,targetSnapshot:c}=r,u=this.createViewTransition?.(this.environmentInjector,s.root,c.root);return u?Je(u).pipe(Re(()=>r)):ge(r)}),Re(s=>{let c=$O(n.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return this.currentTransition=r=le(x({},s),{targetRouterState:c}),this.currentNavigation.update(u=>(u.targetRouterState=c,u)),r}),yt(()=>{this.events.next(new Wa)}),GO(this.rootContexts,n.routeReuseStrategy,s=>this.events.next(s),this.inputBindingEnabled),zn(1),gi(qD(o.signal).pipe(Tn(()=>!i&&!r.targetRouterState),yt(()=>{this.cancelNavigationTransition(r,o.signal.reason+"",wt.Aborted)}))),yt({next:s=>{i=!0,this.currentNavigation.update(c=>(c.abort=jk,c)),this.lastSuccessfulNavigation.set(kt(this.currentNavigation)),this.events.next(new tr(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects))),this.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{i=!0}}),gi(this.transitionAbortWithErrorSubject.pipe(yt(s=>{throw s}))),Wf(()=>{o.abort(),i||this.cancelNavigationTransition(r,"",wt.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),Ys(s=>{if(this.destroyed)return r.resolve(!1),Dt;if(i=!0,HD(s))this.events.next(new On(r.id,this.urlSerializer.serialize(r.extractedUrl),s.message,s.cancellationCode)),qO(s)?this.events.next(new Go(s.url,s.navigationBehaviorOptions)):r.resolve(!1);else{let c=new qo(r.id,this.urlSerializer.serialize(r.extractedUrl),s,r.targetSnapshot??void 0);try{let u=Et(this.environmentInjector,()=>this.navigationErrorHandler?.(c));if(u instanceof Wo){let{message:l,cancellationCode:h}=yd(this.urlSerializer,u);this.events.next(new On(r.id,this.urlSerializer.serialize(r.extractedUrl),l,h)),this.events.next(new Go(u.redirectTo,u.navigationBehaviorOptions))}else throw this.events.next(c),s}catch(u){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(u)}}return Dt}))}))}cancelNavigationTransition(n,r,i){let o=new On(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(o),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=kt(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return n.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||t)};static \u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Bk(t){return t!==$a}var ab=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=G({token:t,factory:()=>P(Uk),providedIn:"root"})}return t})(),_d=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},Uk=(()=>{class t extends _d{static \u0275fac=(()=>{let n;return function(i){return(n||(n=Tl(t)))(i||t)}})();static \u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Og=(()=>{class t{urlSerializer=P(Za);options=P(tc,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=P(Bo);urlHandlingStrategy=P(wd);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new _n;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:n,initialUrl:r,targetBrowserUrl:i}){let o=n!==void 0?this.urlHandlingStrategy.merge(n,r):r,s=i??o;return s instanceof _n?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:n,finalUrl:r,initialUrl:i}){r&&n?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=n):this.rawUrlTree=i}routerState=FD(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:n}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n??this.rawUrlTree)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=G({token:t,factory:()=>P(cb),providedIn:"root"})}return t})(),cb=(()=>{class t extends Og{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{n(r.url,r.state,"popstate")})})}handleRouterEvent(n,r){n instanceof qi?this.updateStateMemento():n instanceof nr?this.commitTransition(r):n instanceof Ga?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof Wa?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof On&&n.code!==wt.SupersededByNewNavigation&&n.code!==wt.Redirect?this.restoreHistory(r):n instanceof qo?this.restoreHistory(r,!0):n instanceof tr&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(n)||o){let c=this.browserPageId,u=x(x({},s),this.generateNgRouterState(i,c));this.location.replaceState(n,"",u)}else{let c=x(x({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(n,"",c)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===n.finalUrl&&o===0&&(this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static \u0275fac=(()=>{let n;return function(i){return(n||(n=Tl(t)))(i||t)}})();static \u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function kg(t,e){t.events.pipe(Tn(n=>n instanceof tr||n instanceof On||n instanceof qo||n instanceof nr),Re(n=>n instanceof tr||n instanceof nr?0:(n instanceof On?n.code===wt.Redirect||n.code===wt.SupersededByNewNavigation:!1)?2:1),Tn(n=>n!==2),zn(1)).subscribe(()=>{e()})}var $k={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Hk={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Zt=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=P(Ym);stateManager=P(Og);options=P(tc,{optional:!0})||{};pendingTasks=P(xr);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=P(sb);urlSerializer=P(Za);location=P(Bo);urlHandlingStrategy=P(wd);injector=P(ot);_events=new ut;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=P(ab);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=P(nc,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!P(Ed,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}eventsSubscription=new it;subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=kt(this.navigationTransitions.currentNavigation);if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof On&&r.code!==wt.Redirect&&r.code!==wt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof tr)this.navigated=!0;else if(r instanceof Go){let s=r.navigationBehaviorOptions,c=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=x({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||Bk(i.source)},s);this.scheduleNavigation(c,$a,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}VO(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),$a,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r,i)=>{this.navigateToSyncWithBrowser(n,i,r)})}navigateToSyncWithBrowser(n,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=x({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let c=this.parseUrl(n);this.scheduleNavigation(c,r,s,o).catch(u=>{this.disposed||this.injector.get(Jt)(u)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return kt(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(xg),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:c,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,h=null;switch(c??this.options.defaultQueryParamsHandling){case"merge":h=x(x({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let g=i?i.snapshot:this.routerState.snapshot.root;p=PD(g)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),p=this.currentUrlTree.root}return OD(p,n,h,l??null,this.urlSerializer)}navigateByUrl(n,r={skipLocationChange:!1}){let i=zo(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,$a,null,r)}navigate(n,r={skipLocationChange:!1}){return zk(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.console.warn(To(4018,!1)),this.urlSerializer.parse("/")}}isActive(n,r){let i;if(r===!0?i=x({},$k):r===!1?i=x({},Hk):i=r,zo(n))return hD(this.currentUrlTree,n,i);let o=this.parseUrl(n);return hD(this.currentUrlTree,o,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(n,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let c,u,l;s?(c=s.resolve,u=s.reject,l=s.promise):l=new Promise((p,g)=>{c=p,u=g});let h=this.pendingTasks.add();return kg(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:o,resolve:c,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function zk(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new z(4008,!1)}var Gk=new W("");function Lg(t,...e){return Ci([{provide:nc,multi:!0,useValue:t},[],{provide:kn,useFactory:Wk},{provide:Fl,multi:!0,useFactory:Kk},e.map(n=>n.\u0275providers)])}function Wk(){return P(Zt).routerState.root}function Kk(){let t=P(an);return e=>{let n=t.get(Fo);if(e!==n.components[0])return;let r=t.get(Zt),i=t.get(Qk);t.get(Yk)===1&&r.initialNavigation(),t.get(Jk,null,{optional:!0})?.setUpPreloading(),t.get(Gk,null,{optional:!0})?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var Qk=new W("",{factory:()=>new ut}),Yk=new W("",{factory:()=>1});var Jk=new W("");var ub=()=>{};var hb=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Xk=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=t[n++],s=t[n++],c=t[n++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},fb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let o=t[i],s=i+1<t.length,c=s?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,h=o>>2,p=(o&3)<<4|c>>4,g=(c&15)<<2|l>>6,y=l&63;u||(y=64,s||(g=64)),r.push(n[h],n[p],n[g],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(hb(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Xk(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let o=n[t.charAt(i++)],c=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let p=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||c==null||l==null||p==null)throw new Vg;let g=o<<2|c>>4;if(r.push(g),l!==64){let y=c<<4&240|l>>2;if(r.push(y),p!==64){let S=l<<6&192|p;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},Vg=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},eL=function(t){let e=hb(t);return fb.encodeByteArray(e,!0)},ic=function(t){return eL(t).replace(/\./g,"")},Td=function(t){try{return fb.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function pb(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var tL=()=>pb().__FIREBASE_DEFAULTS__,nL=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},rL=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&Td(t[1]);return e&&JSON.parse(e)},Dd=()=>{try{return ub()||tL()||nL()||rL()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Bg=t=>Dd()?.emulatorHosts?.[t],mb=t=>{let e=Bg(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Ug=()=>Dd()?.config,$g=t=>Dd()?.[`_${t}`];var Cd=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function $r(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function bd(t){return(await fetch(t,{credentials:"include"})).ok}function gb(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=x({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[ic(JSON.stringify(n)),ic(JSON.stringify(s)),""].join(".")}var rc={};function iL(){let t={prod:[],emulator:[]};for(let e of Object.keys(rc))rc[e]?t.emulator.push(e):t.prod.push(e);return t}function oL(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}var lb=!1;function Sd(t,e){if(typeof window>"u"||typeof document>"u"||!$r(window.location.host)||rc[t]===e||rc[t]||lb)return;rc[t]=e;function n(g){return`__firebase__banner__${g}`}let r="__firebase__banner",o=iL().prod.length>0;function s(){let g=document.getElementById(r);g&&g.remove()}function c(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function u(g,y){g.setAttribute("width","24"),g.setAttribute("id",y),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function l(){let g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{lb=!0,s()},g}function h(g,y){g.setAttribute("id",y),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){let g=oL(r),y=n("text"),S=document.getElementById(y)||document.createElement("span"),R=n("learnmore"),A=document.getElementById(R)||document.createElement("a"),L=n("preprendIcon"),Y=document.getElementById(L)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){let ue=g.element;c(ue),h(A,R);let rt=l();u(Y,L),ue.append(Y,S,A,rt),document.body.appendChild(ue)}o?(S.innerText="Preview backend disconnected.",Y.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Y.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,S.innerText="Preview backend running in this workspace."),S.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function et(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function yb(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(et())}function sL(){let t=Dd()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function vb(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function _b(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Eb(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Ib(){let t=et();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function wb(){return!sL()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Hg(){try{return typeof indexedDB=="object"}catch{return!1}}function Cb(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(n){e(n)}})}var aL="FirebaseError",$t=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=aL,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,rr.prototype.create)}},rr=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?cL(o,r):"Error",c=`${this.serviceName}: ${s} (${i}).`;return new $t(i,c,r)}};function cL(t,e){return t.replace(uL,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var uL=/\{\$([^}]+)}/g;function Tb(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ln(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let o=t[i],s=e[i];if(db(o)&&db(s)){if(!Ln(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function db(t){return t!==null&&typeof t=="object"}function oc(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Db(t,e){let n=new jg(t,e);return n.subscribe.bind(n)}var jg=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");lL(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Fg),i.error===void 0&&(i.error=Fg),i.complete===void 0&&(i.complete=Fg);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function lL(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Fg(){}var _J=14400*1e3;function Fe(t){return t&&t._delegate?t._delegate:t}var Xt=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Wi="[DEFAULT]";var zg=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new Cd;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){let n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(hL(e))try{this.getOrInitializeService({instanceIdentifier:Wi})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Wi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Wi){return this.instances.has(e)}getOptions(e=Wi){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[o,s]of this.instancesDeferred.entries()){let c=this.normalizeInstanceIdentifier(o);r===c&&s.resolve(i)}return i}onInit(e,n){let r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);let o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:dL(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Wi){return this.component?this.component.multipleInstances?e:Wi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function dL(t){return t===Wi?void 0:t}function hL(t){return t.instantiationMode==="EAGER"}var Ad=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new zg(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var fL=[],he=(function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t})(he||{}),pL={debug:he.DEBUG,verbose:he.VERBOSE,info:he.INFO,warn:he.WARN,error:he.ERROR,silent:he.SILENT},mL=he.INFO,gL={[he.DEBUG]:"log",[he.VERBOSE]:"log",[he.INFO]:"info",[he.WARN]:"warn",[he.ERROR]:"error"},yL=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=gL[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Hr=class{constructor(e){this.name=e,this._logLevel=mL,this._logHandler=yL,this._userLogHandler=null,fL.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in he))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?pL[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,he.DEBUG,...e),this._logHandler(this,he.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,he.VERBOSE,...e),this._logHandler(this,he.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,he.INFO,...e),this._logHandler(this,he.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,he.WARN,...e),this._logHandler(this,he.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,he.ERROR,...e),this._logHandler(this,he.ERROR,...e)}};var vL=(t,e)=>e.some(n=>t instanceof n),bb,Sb;function _L(){return bb||(bb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function EL(){return Sb||(Sb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var Ab=new WeakMap,Gg=new WeakMap,Rb=new WeakMap,qg=new WeakMap,Kg=new WeakMap;function IL(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(Fn(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&Ab.set(n,t)}).catch(()=>{}),Kg.set(e,t),e}function wL(t){if(Gg.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});Gg.set(t,e)}var Wg={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Gg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Rb.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Fn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Nb(t){Wg=t(Wg)}function CL(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(Rd(this),e,...n);return Rb.set(r,e.sort?e.sort():[e]),Fn(r)}:EL().includes(t)?function(...e){return t.apply(Rd(this),e),Fn(Ab.get(this))}:function(...e){return Fn(t.apply(Rd(this),e))}}function TL(t){return typeof t=="function"?CL(t):(t instanceof IDBTransaction&&wL(t),vL(t,_L())?new Proxy(t,Wg):t)}function Fn(t){if(t instanceof IDBRequest)return IL(t);if(qg.has(t))return qg.get(t);let e=TL(t);return e!==t&&(qg.set(t,e),Kg.set(e,t)),e}var Rd=t=>Kg.get(t);function xb(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(t,e),c=Fn(s);return r&&s.addEventListener("upgradeneeded",u=>{r(Fn(s.result),u.oldVersion,u.newVersion,Fn(s.transaction),u)}),n&&s.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),c}var DL=["get","getKey","getAll","getAllKeys","count"],bL=["put","add","delete","clear"],Qg=new Map;function Mb(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Qg.get(e))return Qg.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=bL.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||DL.includes(n)))return;let o=async function(s,...c){let u=this.transaction(s,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(c.shift())),(await Promise.all([l[n](...c),i&&u.done]))[0]};return Qg.set(e,o),o}Nb(t=>le(x({},t),{get:(e,n,r)=>Mb(e,n)||t.get(e,n,r),has:(e,n)=>!!Mb(e,n)||t.has(e,n)}));var Jg=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(SL(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function SL(t){return t.getComponent()?.type==="VERSION"}var Zg="@firebase/app",Pb="0.14.6";var ir=new Hr("@firebase/app"),AL="@firebase/app-compat",RL="@firebase/analytics-compat",NL="@firebase/analytics",ML="@firebase/app-check-compat",xL="@firebase/app-check",PL="@firebase/auth",OL="@firebase/auth-compat",kL="@firebase/database",LL="@firebase/data-connect",FL="@firebase/database-compat",VL="@firebase/functions",jL="@firebase/functions-compat",BL="@firebase/installations",UL="@firebase/installations-compat",$L="@firebase/messaging",HL="@firebase/messaging-compat",zL="@firebase/performance",qL="@firebase/performance-compat",GL="@firebase/remote-config",WL="@firebase/remote-config-compat",KL="@firebase/storage",QL="@firebase/storage-compat",YL="@firebase/firestore",JL="@firebase/ai",ZL="@firebase/firestore-compat",XL="firebase",eF="12.6.0";var Xg="[DEFAULT]",tF={[Zg]:"fire-core",[AL]:"fire-core-compat",[NL]:"fire-analytics",[RL]:"fire-analytics-compat",[xL]:"fire-app-check",[ML]:"fire-app-check-compat",[PL]:"fire-auth",[OL]:"fire-auth-compat",[kL]:"fire-rtdb",[LL]:"fire-data-connect",[FL]:"fire-rtdb-compat",[VL]:"fire-fn",[jL]:"fire-fn-compat",[BL]:"fire-iid",[UL]:"fire-iid-compat",[$L]:"fire-fcm",[HL]:"fire-fcm-compat",[zL]:"fire-perf",[qL]:"fire-perf-compat",[GL]:"fire-rc",[WL]:"fire-rc-compat",[KL]:"fire-gcs",[QL]:"fire-gcs-compat",[YL]:"fire-fst",[ZL]:"fire-fst-compat",[JL]:"fire-vertex","fire-js":"fire-js",[XL]:"fire-js-all"};var Nd=new Map,nF=new Map,ey=new Map;function Ob(t,e){try{t.container.addComponent(e)}catch(n){ir.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function qr(t){let e=t.name;if(ey.has(e))return ir.debug(`There were multiple attempts to register component ${e}.`),!1;ey.set(e,t);for(let n of Nd.values())Ob(n,t);for(let n of nF.values())Ob(n,t);return!0}function ac(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Rt(t){return t==null?!1:t.settings!==void 0}var rF={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},zr=new rr("app","Firebase",rF);var ty=class{constructor(e,n,r){this._isDeleted=!1,this._options=x({},e),this._config=x({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Xt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw zr.create("app-deleted",{appName:this._name})}};var Gr=eF;function iy(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=x({name:Xg,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw zr.create("bad-app-name",{appName:String(i)});if(n||(n=Ug()),!n)throw zr.create("no-options");let o=Nd.get(i);if(o){if(Ln(n,o.options)&&Ln(r,o.config))return o;throw zr.create("duplicate-app",{appName:i})}let s=new Ad(i);for(let u of ey.values())s.addComponent(u);let c=new ty(n,r,s);return Nd.set(i,c),c}function Md(t=Xg){let e=Nd.get(t);if(!e&&t===Xg&&Ug())return iy();if(!e)throw zr.create("no-app",{appName:t});return e}function En(t,e,n){let r=tF[t]??t;n&&(r+=`-${n}`);let i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){let s=[`Unable to register library "${r}" with version "${e}":`];i&&s.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&s.push("and"),o&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ir.warn(s.join(" "));return}qr(new Xt(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var iF="firebase-heartbeat-database",oF=1,sc="firebase-heartbeat-store",Yg=null;function Vb(){return Yg||(Yg=xb(iF,oF,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(sc)}catch(n){console.warn(n)}}}}).catch(t=>{throw zr.create("idb-open",{originalErrorMessage:t.message})})),Yg}async function sF(t){try{let n=(await Vb()).transaction(sc),r=await n.objectStore(sc).get(jb(t));return await n.done,r}catch(e){if(e instanceof $t)ir.warn(e.message);else{let n=zr.create("idb-get",{originalErrorMessage:e?.message});ir.warn(n.message)}}}async function kb(t,e){try{let r=(await Vb()).transaction(sc,"readwrite");await r.objectStore(sc).put(e,jb(t)),await r.done}catch(n){if(n instanceof $t)ir.warn(n.message);else{let r=zr.create("idb-set",{originalErrorMessage:n?.message});ir.warn(r.message)}}}function jb(t){return`${t.name}!${t.options.appId}`}var aF=1024,cF=30,ny=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new ry(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{let n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Lb();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>cF){let i=lF(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){ir.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=Lb(),{heartbeatsToSend:n,unsentEntries:r}=uF(this._heartbeatsCache.heartbeats),i=ic(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return ir.warn(e),""}}};function Lb(){return new Date().toISOString().substring(0,10)}function uF(t,e=aF){let n=[],r=t.slice();for(let i of t){let o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),Fb(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Fb(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var ry=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Hg()?Cb().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let n=await sF(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){let r=await this.read();return kb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){let r=await this.read();return kb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}};function Fb(t){return ic(JSON.stringify({version:2,heartbeats:t})).length}function lF(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function dF(t){qr(new Xt("platform-logger",e=>new Jg(e),"PRIVATE")),qr(new Xt("heartbeat",e=>new ny(e),"PRIVATE")),En(Zg,Pb,t),En(Zg,Pb,"esm2020"),En("fire-js","")}dF("");function eS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var tS=eS,nS=new rr("auth","Firebase",eS());var Fd=new Hr("@firebase/auth");function hF(t,...e){Fd.logLevel<=he.WARN&&Fd.warn(`Auth (${Gr}): ${t}`,...e)}function Pd(t,...e){Fd.logLevel<=he.ERROR&&Fd.error(`Auth (${Gr}): ${t}`,...e)}function Qr(t,...e){throw Ty(t,...e)}function Ki(t,...e){return Ty(t,...e)}function rS(t,e,n){let r=le(x({},tS()),{[e]:n});return new rr("auth","Firebase",r).create(e,{appName:t.name})}function ar(t){return rS(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ty(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return nS.create(t,...e)}function X(t,e,...n){if(!t)throw Ty(e,...n)}function or(t){let e="INTERNAL ASSERTION FAILED: "+t;throw Pd(e),new Error(e)}function Yr(t,e){t||or(e)}function cy(){return typeof self<"u"&&self.location?.href||""}function fF(){return Bb()==="http:"||Bb()==="https:"}function Bb(){return typeof self<"u"&&self.location?.protocol||null}function pF(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(fF()||_b()||"connection"in navigator)?navigator.onLine:!0}function mF(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var Qi=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,Yr(n>e,"Short delay should be less than long delay!"),this.isMobile=yb()||Eb()}get(){return pF()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Dy(t,e){Yr(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var Vd=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;or("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;or("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;or("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var gF={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var yF=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],vF=new Qi(3e4,6e4);function fc(t,e){return t.tenantId&&!e.tenantId?le(x({},e),{tenantId:t.tenantId}):e}async function Zo(t,e,n,r,i={}){return iS(t,i,async()=>{let o={},s={};r&&(e==="GET"?s=r:o={body:JSON.stringify(r)});let c=oc(x({key:t.config.apiKey},s)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);let l=x({method:e,headers:u},o);return vb()||(l.referrerPolicy="no-referrer"),t.emulatorConfig&&$r(t.emulatorConfig.host)&&(l.credentials="include"),Vd.fetch()(await oS(t,t.config.apiHost,n,c),l)})}async function iS(t,e,n){t._canInitEmulator=!1;let r=x(x({},gF),e);try{let i=new uy(t),o=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();let s=await o.json();if("needConfirmation"in s)throw xd(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let c=o.ok?s.errorMessage:s.error.message,[u,l]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw xd(t,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw xd(t,"email-already-in-use",s);if(u==="USER_DISABLED")throw xd(t,"user-disabled",s);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw rS(t,h,l);Qr(t,h)}}catch(i){if(i instanceof $t)throw i;Qr(t,"network-request-failed",{message:String(i)})}}async function by(t,e,n,r,i={}){let o=await Zo(t,e,n,r,i);return"mfaPendingCredential"in o&&Qr(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function oS(t,e,n,r){let i=`${e}${n}?${r}`,o=t,s=o.config.emulator?Dy(t.config,i):`${t.config.apiScheme}://${i}`;return yF.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s}var uy=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Ki(this.auth,"network-request-failed")),vF.get())})}};function xd(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=Ki(t,e,r);return i.customData._tokenResponse=n,i}async function _F(t,e){return Zo(t,"POST","/v1/accounts:delete",e)}async function jd(t,e){return Zo(t,"POST","/v1/accounts:lookup",e)}function cc(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function sS(t,e=!1){let n=Fe(t),r=await n.getIdToken(e),i=Sy(r);X(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:cc(oy(i.auth_time)),issuedAtTime:cc(oy(i.iat)),expirationTime:cc(oy(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}}function oy(t){return Number(t)*1e3}function Sy(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Pd("JWT malformed, contained fewer than 3 sections"),null;try{let i=Td(n);return i?JSON.parse(i):(Pd("Failed to decode base64 JWT payload"),null)}catch(i){return Pd("Caught error parsing JWT payload as JSON",i?.toString()),null}}function Ub(t){let e=Sy(t);return X(e,"internal-error"),X(typeof e.exp<"u","internal-error"),X(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function lc(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof $t&&EF(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function EF({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var ly=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){let n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;let r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};var dc=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=cc(this.lastLoginAt),this.creationTime=cc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function Bd(t){let e=t.auth,n=await t.getIdToken(),r=await lc(t,jd(e,{idToken:n}));X(r?.users.length,e,"internal-error");let i=r.users[0];t._notifyReloadListener(i);let o=i.providerUserInfo?.length?cS(i.providerUserInfo):[],s=IF(t.providerData,o),c=t.isAnonymous,u=!(t.email&&i.passwordHash)&&!s?.length,l=c?u:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new dc(i.createdAt,i.lastLoginAt),isAnonymous:l};Object.assign(t,h)}async function aS(t){let e=Fe(t);await Bd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function IF(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function cS(t){return t.map(r=>{var i=r,{providerId:e}=i,n=bf(i,["providerId"]);return{providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}async function wF(t,e){let n=await iS(t,{},async()=>{let r=oc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=await oS(t,i,"/v1/token",`key=${o}`),c=await t._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";let u={method:"POST",headers:c,body:r};return t.emulatorConfig&&$r(t.emulatorConfig.host)&&(u.credentials="include"),Vd.fetch()(s,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function CF(t,e){return Zo(t,"POST","/v2/accounts:revokeToken",fc(t,e))}var uc=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){X(e.idToken,"internal-error"),X(typeof e.idToken<"u","internal-error"),X(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Ub(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){X(e.length!==0,"internal-error");let n=Ub(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(X(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){let{accessToken:r,refreshToken:i,expiresIn:o}=await wF(e,n);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new t;return r&&(X(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(X(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(X(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return or("not implemented")}};function Wr(t,e){X(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var Kr=class t{constructor(o){var s=o,{uid:e,auth:n,stsTokenManager:r}=s,i=bf(s,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ly(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new dc(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){let n=await lc(this,this.stsTokenManager.getToken(this.auth,e));return X(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return sS(this,e)}reload(){return aS(this)}_assign(e){this!==e&&(X(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>x({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(le(x({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){X(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Bd(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Rt(this.auth.app))return Promise.reject(ar(this.auth));let e=await this.getIdToken();return await lc(this,_F(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return le(x({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>x({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){let r=n.displayName??void 0,i=n.email??void 0,o=n.phoneNumber??void 0,s=n.photoURL??void 0,c=n.tenantId??void 0,u=n._redirectEventId??void 0,l=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:p,emailVerified:g,isAnonymous:y,providerData:S,stsTokenManager:R}=n;X(p&&R,e,"internal-error");let A=uc.fromJSON(this.name,R);X(typeof p=="string",e,"internal-error"),Wr(r,e.name),Wr(i,e.name),X(typeof g=="boolean",e,"internal-error"),X(typeof y=="boolean",e,"internal-error"),Wr(o,e.name),Wr(s,e.name),Wr(c,e.name),Wr(u,e.name),Wr(l,e.name),Wr(h,e.name);let L=new t({uid:p,auth:e,email:i,emailVerified:g,displayName:r,isAnonymous:y,photoURL:s,phoneNumber:o,tenantId:c,stsTokenManager:A,createdAt:l,lastLoginAt:h});return S&&Array.isArray(S)&&(L.providerData=S.map(Y=>x({},Y))),u&&(L._redirectEventId=u),L}static async _fromIdTokenResponse(e,n,r=!1){let i=new uc;i.updateFromServerResponse(n);let o=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Bd(o),o}static async _fromGetAccountInfoResponse(e,n,r){let i=n.users[0];X(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?cS(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,c=new uc;c.updateFromIdToken(r);let u=new t({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new dc(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(u,l),u}};var $b=new Map;function sr(t){Yr(t instanceof Function,"Expected a class definition");let e=$b.get(t);return e?(Yr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,$b.set(t,e),e)}var TF=(()=>{class t{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(n,r){this.storage[n]=r}async _get(n){let r=this.storage[n];return r===void 0?null:r}async _remove(n){delete this.storage[n]}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),dy=TF;function Od(t,e,n){return`firebase:${t}:${e}:${n}`}var Ud=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=Od(this.userKey,i.apiKey,o),this.fullPersistenceKey=Od("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let n=await jd(this.auth,{idToken:e}).catch(()=>{});return n?Kr._fromGetAccountInfoResponse(this.auth,n,e):null}return Kr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new t(sr(dy),e,r);let i=(await Promise.all(n.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l),o=i[0]||sr(dy),s=Od(r,e.config.apiKey,e.name),c=null;for(let l of n)try{let h=await l._get(s);if(h){let p;if(typeof h=="string"){let g=await jd(e,{idToken:h}).catch(()=>{});if(!g)break;p=await Kr._fromGetAccountInfoResponse(e,g,h)}else p=Kr._fromJSON(e,h);l!==o&&(c=p),o=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new t(o,e,r):(o=u[0],c&&await o._set(s,c.toJSON()),await Promise.all(n.map(async l=>{if(l!==o)try{await l._remove(s)}catch{}})),new t(o,e,r))}};function Hb(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(hS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(uS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(pS(e))return"Blackberry";if(mS(e))return"Webos";if(lS(e))return"Safari";if((e.includes("chrome/")||dS(e))&&!e.includes("edge/"))return"Chrome";if(fS(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function uS(t=et()){return/firefox\//i.test(t)}function lS(t=et()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function dS(t=et()){return/crios\//i.test(t)}function hS(t=et()){return/iemobile/i.test(t)}function fS(t=et()){return/android/i.test(t)}function pS(t=et()){return/blackberry/i.test(t)}function mS(t=et()){return/webos/i.test(t)}function Ay(t=et()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function DF(t=et()){return Ay(t)&&!!window.navigator?.standalone}function bF(){return Ib()&&document.documentMode===10}function gS(t=et()){return Ay(t)||fS(t)||mS(t)||pS(t)||/windows phone/i.test(t)||hS(t)}function yS(t,e=[]){let n;switch(t){case"Browser":n=Hb(et());break;case"Worker":n=`${Hb(et())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Gr}/${r}`}var hy=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=o=>new Promise((s,c)=>{try{let u=e(o);s(u)}catch(u){c(u)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}};async function SF(t,e={}){return Zo(t,"GET","/v2/passwordPolicy",fc(t,e))}var AF=6,fy=class{constructor(e){let n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??AF,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){let n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var py=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new $d(this),this.idTokenSubscription=new $d(this),this.beforeStateQueue=new hy(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=nS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=sr(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Ud.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let n=await jd(this,{idToken:e}),r=await Kr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Rt(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(s=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(s,s))}):this.directlySetCurrentUser(null)}let n=await this.assertedPersistence.getCurrentUser(),r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let o=this.redirectUser?._redirectEventId,s=r?._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===s)&&c?.user&&(r=c.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return X(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Bd(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=mF()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Rt(this.app))return Promise.reject(ar(this));let n=e?Fe(e):null;return n&&X(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&X(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Rt(this.app)?Promise.reject(ar(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Rt(this.app)?Promise.reject(ar(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(sr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=await SF(this),n=new fy(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new rr("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){let n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await CF(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){let r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let n=e&&sr(e)||this._popupRedirectResolver;X(n,this,"argument-error"),this.redirectPersistenceManager=await Ud.create(this,[sr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let o=typeof n=="function"?n:n.next.bind(n),s=!1,c=this._isInitialized?Promise.resolve():this._initializationPromise;if(X(c,this,"internal-error"),c.then(()=>{s||o(this.currentUser)}),typeof n=="function"){let u=e.addObserver(n,r,i);return()=>{s=!0,u()}}else{let u=e.addObserver(n);return()=>{s=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return X(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=yS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){let e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);let n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);let r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(Rt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&hF(`Error while retrieving App Check token: ${e.error}`),e?.token}};function pc(t){return Fe(t)}var $d=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=Db(n=>this.observer=n)}get next(){return X(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Ry={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function RF(t){Ry=t}function NF(t){return Ry.loadJS(t)}function MF(){return Ry.gapiScript}function vS(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function _S(t,e){let n=ac(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),o=n.getOptions();if(Ln(o,e??{}))return i;Qr(i,"already-initialized")}return n.initialize({options:e})}function xF(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(sr);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function ES(t,e,n){let r=pc(t);X(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,o=IS(e),{host:s,port:c}=PF(e),u=c===null?"":`:${c}`,l={url:`${o}//${s}${u}/`},h=Object.freeze({host:s,port:c,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){X(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),X(Ln(l,r.config.emulator)&&Ln(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,$r(s)?(bd(`${o}//${s}${u}`),Sd("Auth",!0)):i||OF()}function IS(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function PF(t){let e=IS(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:zb(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:zb(s)}}}function zb(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function OF(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var Hd=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return or("not implemented")}_getIdTokenResponse(e){return or("not implemented")}_linkToIdToken(e,n){return or("not implemented")}_getReauthenticationResolver(e){return or("not implemented")}};async function sy(t,e){return by(t,"POST","/v1/accounts:signInWithIdp",fc(t,e))}var zd=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var my=class extends zd{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};async function kF(t,e){return by(t,"POST","/v1/accounts:signUp",fc(t,e))}var Jr=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){let o=await Kr._fromIdTokenResponse(e,r,i),s=qb(r);return new t({user:o,providerId:s,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);let i=qb(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})}};function qb(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}async function Ny(t){if(Rt(t.app))return Promise.reject(ar(t));let e=pc(t);if(await e._initializationPromise,e.currentUser?.isAnonymous)return new Jr({user:e.currentUser,providerId:null,operationType:"signIn"});let n=await kF(e,{returnSecureToken:!0}),r=await Jr._fromIdTokenResponse(e,"signIn",n,!0);return await e._updateCurrentUser(r.user),r}var gy=class t extends $t{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function wS(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?gy._fromErrorAndOperation(t,o,e,r):o})}async function LF(t,e,n=!1){let r=await lc(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Jr._forOperation(t,"link",r)}async function FF(t,e,n=!1){let{auth:r}=t;if(Rt(r.app))return Promise.reject(ar(r));let i="reauthenticate";try{let o=await lc(t,wS(r,i,e,t),n);X(o.idToken,r,"internal-error");let s=Sy(o.idToken);X(s,r,"internal-error");let{sub:c}=s;return X(t.uid===c,r,"user-mismatch"),Jr._forOperation(t,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&Qr(r,"user-mismatch"),o}}async function VF(t,e,n=!1){if(Rt(t.app))return Promise.reject(ar(t));let r="signIn",i=await wS(t,r,e),o=await Jr._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(o.user),o}async function jF(t,e){return by(t,"POST","/v1/accounts:signInWithCustomToken",fc(t,e))}async function My(t,e){if(Rt(t.app))return Promise.reject(ar(t));let n=pc(t),r=await jF(n,{token:e,returnSecureToken:!0}),i=await Jr._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}function xy(t,e){return Fe(t).setPersistence(e)}function CS(t,e,n,r){return Fe(t).onIdTokenChanged(e,n,r)}function TS(t,e,n){return Fe(t).beforeAuthStateChanged(e,n)}function Qd(t,e,n,r){return Fe(t).onAuthStateChanged(e,n,r)}function Py(t){return Fe(t).signOut()}var qd="__sak";var Gd=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(qd,"1"),this.storage.removeItem(qd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var BF=1e3,UF=10,$F=(()=>{class t extends Gd{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=gS(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&n(r,o,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((c,u,l)=>{this.notifyListeners(c,l)});return}let i=n.key;r?this.detachListener():this.stopPolling();let o=()=>{let c=this.storage.getItem(i);!r&&this.localCache[i]===c||this.notifyListeners(i,c)},s=this.storage.getItem(i);bF()&&s!==n.newValue&&n.newValue!==n.oldValue?setTimeout(o,UF):o()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},BF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(n,r){await super._set(n,r),this.localCache[n]=JSON.stringify(r)}async _get(n){let r=await super._get(n);return this.localCache[n]=JSON.stringify(r),r}async _remove(n){await super._remove(n),delete this.localCache[n]}}return t.type="LOCAL",t})(),Yd=$F;var HF=(()=>{class t extends Gd{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),Oy=HF;function zF(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}var qF=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(o=>o.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}async handleEvent(n){let r=n,{eventId:i,eventType:o,data:s}=r.data,c=this.handlersMap[o];if(!c?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let u=Array.from(c).map(async h=>h(r.origin,s)),l=await zF(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function DS(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var yy=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((c,u)=>{let l=DS("",20);i.port1.start();let h=setTimeout(()=>{u(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){let g=p;if(g.data.eventId===l)switch(g.data.status){case"ack":clearTimeout(h),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),c(g.data.response);break;default:clearTimeout(h),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}};function Vn(){return window}function GF(t){Vn().location.href=t}function bS(){return typeof Vn().WorkerGlobalScope<"u"&&typeof Vn().importScripts=="function"}async function WF(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function KF(){return navigator?.serviceWorker?.controller||null}function QF(){return bS()?self:null}var SS="firebaseLocalStorageDb",YF=1,Wd="firebaseLocalStorage",AS="fbase_key",Yi=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function Jd(t,e){return t.transaction([Wd],e?"readwrite":"readonly").objectStore(Wd)}function JF(){let t=indexedDB.deleteDatabase(SS);return new Yi(t).toPromise()}function vy(){let t=indexedDB.open(SS,YF);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(Wd,{keyPath:AS})}catch(i){n(i)}}),t.addEventListener("success",async()=>{let r=t.result;r.objectStoreNames.contains(Wd)?e(r):(r.close(),await JF(),e(await vy()))})})}async function Gb(t,e,n){let r=Jd(t,!0).put({[AS]:e,value:n});return new Yi(r).toPromise()}async function ZF(t,e){let n=Jd(t,!1).get(e),r=await new Yi(n).toPromise();return r===void 0?null:r.value}function Wb(t,e){let n=Jd(t,!0).delete(e);return new Yi(n).toPromise()}var XF=800,eV=3,tV=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await vy(),this.db)}async _withRetries(n){let r=0;for(;;)try{let i=await this._openDb();return await n(i)}catch(i){if(r++>eV)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return bS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=qF._getInstance(QF()),this.receiver._subscribe("keyChanged",async(n,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(n,r)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await WF(),!this.activeServiceWorker)return;this.sender=new yy(this.activeServiceWorker);let n=await this.sender._send("ping",{},800);n&&n[0]?.fulfilled&&n[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(n){if(!(!this.sender||!this.activeServiceWorker||KF()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;let n=await vy();return await Gb(n,qd,"1"),await Wb(n,qd),!0}catch{}return!1}async _withPendingWrite(n){this.pendingWrites++;try{await n()}finally{this.pendingWrites--}}async _set(n,r){return this._withPendingWrite(async()=>(await this._withRetries(i=>Gb(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)))}async _get(n){let r=await this._withRetries(i=>ZF(i,n));return this.localCache[n]=r,r}async _remove(n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Wb(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)))}async _poll(){let n=await this._withRetries(o=>{let s=Jd(o,!1).getAll();return new Yi(s).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:o,value:s}of n)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),XF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),RS=tV;var WJ=vS("rcb"),KJ=new Qi(3e4,6e4);function nV(t,e){return e?sr(e):(X(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var hc=class extends Hd{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return sy(e,this._buildIdpRequest())}_linkToIdToken(e,n){return sy(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return sy(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function rV(t){return VF(t.auth,new hc(t),t.bypassAuthState)}function iV(t){let{auth:e,user:n}=t;return X(n,e,"internal-error"),FF(n,new hc(t),t.bypassAuthState)}async function oV(t){let{auth:e,user:n}=t;return X(n,e,"internal-error"),LF(n,new hc(t),t.bypassAuthState)}var _y=class{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){let{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:s,type:c}=e;if(s){this.reject(s);return}let u={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return rV;case"linkViaPopup":case"linkViaRedirect":return oV;case"reauthViaPopup":case"reauthViaRedirect":return iV;default:Qr(this.auth,"internal-error")}}resolve(e){Yr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Yr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var QJ=new Qi(2e3,1e4);var sV="pendingRedirect",kd=new Map,Ey=class extends _y{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=kd.get(this.auth._key());if(!e){try{let r=await aV(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}kd.set(this.auth._key(),e)}return this.bypassAuthState||kd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}};async function aV(t,e){let n=lV(e),r=uV(t);if(!await r._isAvailable())return!1;let i=await r._get(n)==="true";return await r._remove(n),i}function cV(t,e){kd.set(t._key(),e)}function uV(t){return sr(t._redirectPersistence)}function lV(t){return Od(sV,t.config.apiKey,t.name)}async function dV(t,e,n=!1){if(Rt(t.app))return Promise.reject(ar(t));let r=pc(t),i=nV(r,e),s=await new Ey(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,e)),s}var hV=600*1e3,Iy=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!fV(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!NS(e)){let r=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Ki(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=hV&&this.cachedEventUids.clear(),this.cachedEventUids.has(Kb(e))}saveEventToCache(e){this.cachedEventUids.add(Kb(e)),this.lastProcessedEventTime=Date.now()}};function Kb(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function NS({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function fV(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return NS(t);default:return!1}}async function pV(t,e={}){return Zo(t,"GET","/v1/projects",e)}var mV=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,gV=/^https?/;async function yV(t){if(t.config.emulator)return;let{authorizedDomains:e}=await pV(t);for(let n of e)try{if(vV(n))return}catch{}Qr(t,"unauthorized-domain")}function vV(t){let e=cy(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let s=new URL(t);return s.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!gV.test(n))return!1;if(mV.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var _V=new Qi(3e4,6e4);function Qb(){let t=Vn().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function EV(t){return new Promise((e,n)=>{function r(){Qb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Qb(),n(Ki(t,"network-request-failed"))},timeout:_V.get()})}if(Vn().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Vn().gapi?.load)r();else{let i=vS("iframefcb");return Vn()[i]=()=>{gapi.load?r():n(Ki(t,"network-request-failed"))},NF(`${MF()}?onload=${i}`).catch(o=>n(o))}}).catch(e=>{throw Ld=null,e})}var Ld=null;function IV(t){return Ld=Ld||EV(t),Ld}var wV=new Qi(5e3,15e3),CV="__/auth/iframe",TV="emulator/auth/iframe",DV={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},bV=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function SV(t){let e=t.config;X(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?Dy(e,TV):`https://${t.config.authDomain}/${CV}`,r={apiKey:e.apiKey,appName:t.name,v:Gr},i=bV.get(t.config.apiHost);i&&(r.eid=i);let o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${oc(r).slice(1)}`}async function AV(t){let e=await IV(t),n=Vn().gapi;return X(n,t,"internal-error"),e.open({where:document.body,url:SV(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:DV,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});let s=Ki(t,"network-request-failed"),c=Vn().setTimeout(()=>{o(s)},wV.get());function u(){Vn().clearTimeout(c),i(r)}r.ping(u).then(u,()=>{o(s)})}))}var RV={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},NV=500,MV=600,xV="_blank",PV="http://localhost",Kd=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function OV(t,e,n,r=NV,i=MV){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),c="",u=le(x({},RV),{width:r.toString(),height:i.toString(),top:o,left:s}),l=et().toLowerCase();n&&(c=dS(l)?xV:n),uS(l)&&(e=e||PV,u.scrollbars="yes");let h=Object.entries(u).reduce((g,[y,S])=>`${g}${y}=${S},`,"");if(DF(l)&&c!=="_self")return kV(e||"",c),new Kd(null);let p=window.open(e||"",c,h);X(p,t,"popup-blocked");try{p.focus()}catch{}return new Kd(p)}function kV(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var LV="__/auth/handler",FV="emulator/auth/handler",VV=encodeURIComponent("fac");async function Yb(t,e,n,r,i,o){X(t.config.authDomain,t,"auth-domain-config-required"),X(t.config.apiKey,t,"invalid-api-key");let s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Gr,eventId:i};if(e instanceof zd){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",Tb(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(o||{}))s[h]=p}if(e instanceof my){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(s.scopes=h.join(","))}t.tenantId&&(s.tid=t.tenantId);let c=s;for(let h of Object.keys(c))c[h]===void 0&&delete c[h];let u=await t._getAppCheckToken(),l=u?`#${VV}=${encodeURIComponent(u)}`:"";return`${jV(t)}?${oc(c).slice(1)}${l}`}function jV({config:t}){return t.emulator?Dy(t,FV):`https://${t.authDomain}/${LV}`}var ay="webStorageSupport",wy=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Oy,this._completeRedirectFn=dV,this._overrideRedirectResult=cV}async _openPopup(e,n,r,i){Yr(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");let o=await Yb(e,n,r,cy(),i);return OV(e,o,DS())}async _openRedirect(e,n,r,i){await this._originValidation(e);let o=await Yb(e,n,r,cy(),i);return GF(o),new Promise(()=>{})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(Yr(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){let n=await AV(e),r=new Iy(e);return n.register("authEvent",i=>(X(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(ay,{type:ay},i=>{let o=i?.[0]?.[ay];o!==void 0&&n(!!o),Qr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=yV(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return gS()||lS()||Ay()}},MS=wy;var Jb="@firebase/auth",Zb="1.12.0";var Cy=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){X(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function BV(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function UV(t){qr(new Xt("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:c}=r.options;X(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:s,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:yS(t)},l=new py(r,i,o,u);return xF(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),qr(new Xt("auth-internal",e=>{let n=pc(e.getProvider("auth").getImmediate());return(r=>new Cy(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),En(Jb,Zb,BV(t)),En(Jb,Zb,"esm2020")}var $V=300,HV=$g("authIdTokenMaxAge")||$V,Xb=null,zV=t=>async e=>{let n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>HV)return;let i=n?.token;Xb!==i&&(Xb=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function ky(t=Md()){let e=ac(t,"auth");if(e.isInitialized())return e.getImmediate();let n=_S(t,{popupRedirectResolver:MS,persistence:[RS,Yd,Oy]}),r=$g("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=zV(o.toString());TS(n,s,()=>s(n.currentUser)),CS(n,c=>s(c))}}let i=Bg("auth");return i&&ES(n,`http://${i}`),n}function qV(){return document.getElementsByTagName("head")?.[0]??document}RF({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let o=Ki("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",qV().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});UV("Browser");var GV="firebase",WV="12.7.0";En(GV,WV,"app");var xS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},PS={};var cr,Ly;(function(){var t;function e(w,v){function E(){}E.prototype=v.prototype,w.F=v.prototype,w.prototype=new E,w.prototype.constructor=w,w.D=function(C,I,D){for(var _=Array(arguments.length-2),Tt=2;Tt<arguments.length;Tt++)_[Tt-2]=arguments[Tt];return v.prototype[I].apply(C,_)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(w,v,E){E||(E=0);let C=Array(16);if(typeof v=="string")for(var I=0;I<16;++I)C[I]=v.charCodeAt(E++)|v.charCodeAt(E++)<<8|v.charCodeAt(E++)<<16|v.charCodeAt(E++)<<24;else for(I=0;I<16;++I)C[I]=v[E++]|v[E++]<<8|v[E++]<<16|v[E++]<<24;v=w.g[0],E=w.g[1],I=w.g[2];let D=w.g[3],_;_=v+(D^E&(I^D))+C[0]+3614090360&4294967295,v=E+(_<<7&4294967295|_>>>25),_=D+(I^v&(E^I))+C[1]+3905402710&4294967295,D=v+(_<<12&4294967295|_>>>20),_=I+(E^D&(v^E))+C[2]+606105819&4294967295,I=D+(_<<17&4294967295|_>>>15),_=E+(v^I&(D^v))+C[3]+3250441966&4294967295,E=I+(_<<22&4294967295|_>>>10),_=v+(D^E&(I^D))+C[4]+4118548399&4294967295,v=E+(_<<7&4294967295|_>>>25),_=D+(I^v&(E^I))+C[5]+1200080426&4294967295,D=v+(_<<12&4294967295|_>>>20),_=I+(E^D&(v^E))+C[6]+2821735955&4294967295,I=D+(_<<17&4294967295|_>>>15),_=E+(v^I&(D^v))+C[7]+4249261313&4294967295,E=I+(_<<22&4294967295|_>>>10),_=v+(D^E&(I^D))+C[8]+1770035416&4294967295,v=E+(_<<7&4294967295|_>>>25),_=D+(I^v&(E^I))+C[9]+2336552879&4294967295,D=v+(_<<12&4294967295|_>>>20),_=I+(E^D&(v^E))+C[10]+4294925233&4294967295,I=D+(_<<17&4294967295|_>>>15),_=E+(v^I&(D^v))+C[11]+2304563134&4294967295,E=I+(_<<22&4294967295|_>>>10),_=v+(D^E&(I^D))+C[12]+1804603682&4294967295,v=E+(_<<7&4294967295|_>>>25),_=D+(I^v&(E^I))+C[13]+4254626195&4294967295,D=v+(_<<12&4294967295|_>>>20),_=I+(E^D&(v^E))+C[14]+2792965006&4294967295,I=D+(_<<17&4294967295|_>>>15),_=E+(v^I&(D^v))+C[15]+1236535329&4294967295,E=I+(_<<22&4294967295|_>>>10),_=v+(I^D&(E^I))+C[1]+4129170786&4294967295,v=E+(_<<5&4294967295|_>>>27),_=D+(E^I&(v^E))+C[6]+3225465664&4294967295,D=v+(_<<9&4294967295|_>>>23),_=I+(v^E&(D^v))+C[11]+643717713&4294967295,I=D+(_<<14&4294967295|_>>>18),_=E+(D^v&(I^D))+C[0]+3921069994&4294967295,E=I+(_<<20&4294967295|_>>>12),_=v+(I^D&(E^I))+C[5]+3593408605&4294967295,v=E+(_<<5&4294967295|_>>>27),_=D+(E^I&(v^E))+C[10]+38016083&4294967295,D=v+(_<<9&4294967295|_>>>23),_=I+(v^E&(D^v))+C[15]+3634488961&4294967295,I=D+(_<<14&4294967295|_>>>18),_=E+(D^v&(I^D))+C[4]+3889429448&4294967295,E=I+(_<<20&4294967295|_>>>12),_=v+(I^D&(E^I))+C[9]+568446438&4294967295,v=E+(_<<5&4294967295|_>>>27),_=D+(E^I&(v^E))+C[14]+3275163606&4294967295,D=v+(_<<9&4294967295|_>>>23),_=I+(v^E&(D^v))+C[3]+4107603335&4294967295,I=D+(_<<14&4294967295|_>>>18),_=E+(D^v&(I^D))+C[8]+1163531501&4294967295,E=I+(_<<20&4294967295|_>>>12),_=v+(I^D&(E^I))+C[13]+2850285829&4294967295,v=E+(_<<5&4294967295|_>>>27),_=D+(E^I&(v^E))+C[2]+4243563512&4294967295,D=v+(_<<9&4294967295|_>>>23),_=I+(v^E&(D^v))+C[7]+1735328473&4294967295,I=D+(_<<14&4294967295|_>>>18),_=E+(D^v&(I^D))+C[12]+2368359562&4294967295,E=I+(_<<20&4294967295|_>>>12),_=v+(E^I^D)+C[5]+4294588738&4294967295,v=E+(_<<4&4294967295|_>>>28),_=D+(v^E^I)+C[8]+2272392833&4294967295,D=v+(_<<11&4294967295|_>>>21),_=I+(D^v^E)+C[11]+1839030562&4294967295,I=D+(_<<16&4294967295|_>>>16),_=E+(I^D^v)+C[14]+4259657740&4294967295,E=I+(_<<23&4294967295|_>>>9),_=v+(E^I^D)+C[1]+2763975236&4294967295,v=E+(_<<4&4294967295|_>>>28),_=D+(v^E^I)+C[4]+1272893353&4294967295,D=v+(_<<11&4294967295|_>>>21),_=I+(D^v^E)+C[7]+4139469664&4294967295,I=D+(_<<16&4294967295|_>>>16),_=E+(I^D^v)+C[10]+3200236656&4294967295,E=I+(_<<23&4294967295|_>>>9),_=v+(E^I^D)+C[13]+681279174&4294967295,v=E+(_<<4&4294967295|_>>>28),_=D+(v^E^I)+C[0]+3936430074&4294967295,D=v+(_<<11&4294967295|_>>>21),_=I+(D^v^E)+C[3]+3572445317&4294967295,I=D+(_<<16&4294967295|_>>>16),_=E+(I^D^v)+C[6]+76029189&4294967295,E=I+(_<<23&4294967295|_>>>9),_=v+(E^I^D)+C[9]+3654602809&4294967295,v=E+(_<<4&4294967295|_>>>28),_=D+(v^E^I)+C[12]+3873151461&4294967295,D=v+(_<<11&4294967295|_>>>21),_=I+(D^v^E)+C[15]+530742520&4294967295,I=D+(_<<16&4294967295|_>>>16),_=E+(I^D^v)+C[2]+3299628645&4294967295,E=I+(_<<23&4294967295|_>>>9),_=v+(I^(E|~D))+C[0]+4096336452&4294967295,v=E+(_<<6&4294967295|_>>>26),_=D+(E^(v|~I))+C[7]+1126891415&4294967295,D=v+(_<<10&4294967295|_>>>22),_=I+(v^(D|~E))+C[14]+2878612391&4294967295,I=D+(_<<15&4294967295|_>>>17),_=E+(D^(I|~v))+C[5]+4237533241&4294967295,E=I+(_<<21&4294967295|_>>>11),_=v+(I^(E|~D))+C[12]+1700485571&4294967295,v=E+(_<<6&4294967295|_>>>26),_=D+(E^(v|~I))+C[3]+2399980690&4294967295,D=v+(_<<10&4294967295|_>>>22),_=I+(v^(D|~E))+C[10]+4293915773&4294967295,I=D+(_<<15&4294967295|_>>>17),_=E+(D^(I|~v))+C[1]+2240044497&4294967295,E=I+(_<<21&4294967295|_>>>11),_=v+(I^(E|~D))+C[8]+1873313359&4294967295,v=E+(_<<6&4294967295|_>>>26),_=D+(E^(v|~I))+C[15]+4264355552&4294967295,D=v+(_<<10&4294967295|_>>>22),_=I+(v^(D|~E))+C[6]+2734768916&4294967295,I=D+(_<<15&4294967295|_>>>17),_=E+(D^(I|~v))+C[13]+1309151649&4294967295,E=I+(_<<21&4294967295|_>>>11),_=v+(I^(E|~D))+C[4]+4149444226&4294967295,v=E+(_<<6&4294967295|_>>>26),_=D+(E^(v|~I))+C[11]+3174756917&4294967295,D=v+(_<<10&4294967295|_>>>22),_=I+(v^(D|~E))+C[2]+718787259&4294967295,I=D+(_<<15&4294967295|_>>>17),_=E+(D^(I|~v))+C[9]+3951481745&4294967295,w.g[0]=w.g[0]+v&4294967295,w.g[1]=w.g[1]+(I+(_<<21&4294967295|_>>>11))&4294967295,w.g[2]=w.g[2]+I&4294967295,w.g[3]=w.g[3]+D&4294967295}r.prototype.v=function(w,v){v===void 0&&(v=w.length);let E=v-this.blockSize,C=this.C,I=this.h,D=0;for(;D<v;){if(I==0)for(;D<=E;)i(this,w,D),D+=this.blockSize;if(typeof w=="string"){for(;D<v;)if(C[I++]=w.charCodeAt(D++),I==this.blockSize){i(this,C),I=0;break}}else for(;D<v;)if(C[I++]=w[D++],I==this.blockSize){i(this,C),I=0;break}}this.h=I,this.o+=v},r.prototype.A=function(){var w=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);w[0]=128;for(var v=1;v<w.length-8;++v)w[v]=0;v=this.o*8;for(var E=w.length-8;E<w.length;++E)w[E]=v&255,v/=256;for(this.v(w),w=Array(16),v=0,E=0;E<4;++E)for(let C=0;C<32;C+=8)w[v++]=this.g[E]>>>C&255;return w};function o(w,v){var E=c;return Object.prototype.hasOwnProperty.call(E,w)?E[w]:E[w]=v(w)}function s(w,v){this.h=v;let E=[],C=!0;for(let I=w.length-1;I>=0;I--){let D=w[I]|0;C&&D==v||(E[I]=D,C=!1)}this.g=E}var c={};function u(w){return-128<=w&&w<128?o(w,function(v){return new s([v|0],v<0?-1:0)}):new s([w|0],w<0?-1:0)}function l(w){if(isNaN(w)||!isFinite(w))return p;if(w<0)return A(l(-w));let v=[],E=1;for(let C=0;w>=E;C++)v[C]=w/E|0,E*=4294967296;return new s(v,0)}function h(w,v){if(w.length==0)throw Error("number format error: empty string");if(v=v||10,v<2||36<v)throw Error("radix out of range: "+v);if(w.charAt(0)=="-")return A(h(w.substring(1),v));if(w.indexOf("-")>=0)throw Error('number format error: interior "-" character');let E=l(Math.pow(v,8)),C=p;for(let D=0;D<w.length;D+=8){var I=Math.min(8,w.length-D);let _=parseInt(w.substring(D,D+I),v);I<8?(I=l(Math.pow(v,I)),C=C.j(I).add(l(_))):(C=C.j(E),C=C.add(l(_)))}return C}var p=u(0),g=u(1),y=u(16777216);t=s.prototype,t.m=function(){if(R(this))return-A(this).m();let w=0,v=1;for(let E=0;E<this.g.length;E++){let C=this.i(E);w+=(C>=0?C:4294967296+C)*v,v*=4294967296}return w},t.toString=function(w){if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(S(this))return"0";if(R(this))return"-"+A(this).toString(w);let v=l(Math.pow(w,6));var E=this;let C="";for(;;){let I=rt(E,v).g;E=L(E,I.j(v));let D=((E.g.length>0?E.g[0]:E.h)>>>0).toString(w);if(E=I,S(E))return D+C;for(;D.length<6;)D="0"+D;C=D+C}},t.i=function(w){return w<0?0:w<this.g.length?this.g[w]:this.h};function S(w){if(w.h!=0)return!1;for(let v=0;v<w.g.length;v++)if(w.g[v]!=0)return!1;return!0}function R(w){return w.h==-1}t.l=function(w){return w=L(this,w),R(w)?-1:S(w)?0:1};function A(w){let v=w.g.length,E=[];for(let C=0;C<v;C++)E[C]=~w.g[C];return new s(E,~w.h).add(g)}t.abs=function(){return R(this)?A(this):this},t.add=function(w){let v=Math.max(this.g.length,w.g.length),E=[],C=0;for(let I=0;I<=v;I++){let D=C+(this.i(I)&65535)+(w.i(I)&65535),_=(D>>>16)+(this.i(I)>>>16)+(w.i(I)>>>16);C=_>>>16,D&=65535,_&=65535,E[I]=_<<16|D}return new s(E,E[E.length-1]&-2147483648?-1:0)};function L(w,v){return w.add(A(v))}t.j=function(w){if(S(this)||S(w))return p;if(R(this))return R(w)?A(this).j(A(w)):A(A(this).j(w));if(R(w))return A(this.j(A(w)));if(this.l(y)<0&&w.l(y)<0)return l(this.m()*w.m());let v=this.g.length+w.g.length,E=[];for(var C=0;C<2*v;C++)E[C]=0;for(C=0;C<this.g.length;C++)for(let I=0;I<w.g.length;I++){let D=this.i(C)>>>16,_=this.i(C)&65535,Tt=w.i(I)>>>16,yr=w.i(I)&65535;E[2*C+2*I]+=_*yr,Y(E,2*C+2*I),E[2*C+2*I+1]+=D*yr,Y(E,2*C+2*I+1),E[2*C+2*I+1]+=_*Tt,Y(E,2*C+2*I+1),E[2*C+2*I+2]+=D*Tt,Y(E,2*C+2*I+2)}for(w=0;w<v;w++)E[w]=E[2*w+1]<<16|E[2*w];for(w=v;w<2*v;w++)E[w]=0;return new s(E,0)};function Y(w,v){for(;(w[v]&65535)!=w[v];)w[v+1]+=w[v]>>>16,w[v]&=65535,v++}function ue(w,v){this.g=w,this.h=v}function rt(w,v){if(S(v))throw Error("division by zero");if(S(w))return new ue(p,p);if(R(w))return v=rt(A(w),v),new ue(A(v.g),A(v.h));if(R(v))return v=rt(w,A(v)),new ue(A(v.g),v.h);if(w.g.length>30){if(R(w)||R(v))throw Error("slowDivide_ only works with positive integers.");for(var E=g,C=v;C.l(w)<=0;)E=Ct(E),C=Ct(C);var I=Ke(E,1),D=Ke(C,1);for(C=Ke(C,2),E=Ke(E,2);!S(C);){var _=D.add(C);_.l(w)<=0&&(I=I.add(E),D=_),C=Ke(C,1),E=Ke(E,1)}return v=L(w,I.j(v)),new ue(I,v)}for(I=p;w.l(v)>=0;){for(E=Math.max(1,Math.floor(w.m()/v.m())),C=Math.ceil(Math.log(E)/Math.LN2),C=C<=48?1:Math.pow(2,C-48),D=l(E),_=D.j(v);R(_)||_.l(w)>0;)E-=C,D=l(E),_=D.j(v);S(D)&&(D=g),I=I.add(D),w=L(w,_)}return new ue(I,w)}t.B=function(w){return rt(this,w).h},t.and=function(w){let v=Math.max(this.g.length,w.g.length),E=[];for(let C=0;C<v;C++)E[C]=this.i(C)&w.i(C);return new s(E,this.h&w.h)},t.or=function(w){let v=Math.max(this.g.length,w.g.length),E=[];for(let C=0;C<v;C++)E[C]=this.i(C)|w.i(C);return new s(E,this.h|w.h)},t.xor=function(w){let v=Math.max(this.g.length,w.g.length),E=[];for(let C=0;C<v;C++)E[C]=this.i(C)^w.i(C);return new s(E,this.h^w.h)};function Ct(w){let v=w.g.length+1,E=[];for(let C=0;C<v;C++)E[C]=w.i(C)<<1|w.i(C-1)>>>31;return new s(E,w.h)}function Ke(w,v){let E=v>>5;v%=32;let C=w.g.length-E,I=[];for(let D=0;D<C;D++)I[D]=v>0?w.i(D+E)>>>v|w.i(D+E+1)<<32-v:w.i(D+E);return new s(I,w.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Ly=PS.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.B,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,cr=PS.Integer=s}).apply(typeof xS<"u"?xS:typeof self<"u"?self:typeof window<"u"?window:{});var Zd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ur={};var Fy,KV,Xo,Vy,mc,Xd,jy,By,Uy;(function(){var t,e=Object.defineProperty;function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Zd=="object"&&Zd];for(var d=0;d<a.length;++d){var f=a[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function i(a,d){if(d)e:{var f=r;a=a.split(".");for(var m=0;m<a.length-1;m++){var T=a[m];if(!(T in f))break e;f=f[T]}a=a[a.length-1],m=f[a],d=d(m),d!=m&&d!=null&&e(f,a,{configurable:!0,writable:!0,value:d})}}i("Symbol.dispose",function(a){return a||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(a){return a||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(a){return a||function(d){var f=[],m;for(m in d)Object.prototype.hasOwnProperty.call(d,m)&&f.push([m,d[m]]);return f}});var o=o||{},s=this||self;function c(a){var d=typeof a;return d=="object"&&a!=null||d=="function"}function u(a,d,f){return a.call.apply(a.bind,arguments)}function l(a,d,f){return l=u,l.apply(null,arguments)}function h(a,d){var f=Array.prototype.slice.call(arguments,1);return function(){var m=f.slice();return m.push.apply(m,arguments),a.apply(this,m)}}function p(a,d){function f(){}f.prototype=d.prototype,a.Z=d.prototype,a.prototype=new f,a.prototype.constructor=a,a.Ob=function(m,T,b){for(var F=Array(arguments.length-2),ae=2;ae<arguments.length;ae++)F[ae-2]=arguments[ae];return d.prototype[T].apply(m,F)}}var g=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?a=>a&&AsyncContext.Snapshot.wrap(a):a=>a;function y(a){let d=a.length;if(d>0){let f=Array(d);for(let m=0;m<d;m++)f[m]=a[m];return f}return[]}function S(a,d){for(let m=1;m<arguments.length;m++){let T=arguments[m];var f=typeof T;if(f=f!="object"?f:T?Array.isArray(T)?"array":f:"null",f=="array"||f=="object"&&typeof T.length=="number"){f=a.length||0;let b=T.length||0;a.length=f+b;for(let F=0;F<b;F++)a[f+F]=T[F]}else a.push(T)}}class R{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return this.h>0?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function A(a){s.setTimeout(()=>{throw a},0)}function L(){var a=w;let d=null;return a.g&&(d=a.g,a.g=a.g.next,a.g||(a.h=null),d.next=null),d}class Y{constructor(){this.h=this.g=null}add(d,f){let m=ue.get();m.set(d,f),this.h?this.h.next=m:this.g=m,this.h=m}}var ue=new R(()=>new rt,a=>a.reset());class rt{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Ct,Ke=!1,w=new Y,v=()=>{let a=Promise.resolve(void 0);Ct=()=>{a.then(E)}};function E(){for(var a;a=L();){try{a.h.call(a.g)}catch(f){A(f)}var d=ue;d.j(a),d.h<100&&(d.h++,a.next=d.g,d.g=a)}Ke=!1}function C(){this.u=this.u,this.C=this.C}C.prototype.u=!1,C.prototype.dispose=function(){this.u||(this.u=!0,this.N())},C.prototype[Symbol.dispose]=function(){this.dispose()},C.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function I(a,d){this.type=a,this.g=this.target=d,this.defaultPrevented=!1}I.prototype.h=function(){this.defaultPrevented=!0};var D=(function(){if(!s.addEventListener||!Object.defineProperty)return!1;var a=!1,d=Object.defineProperty({},"passive",{get:function(){a=!0}});try{let f=()=>{};s.addEventListener("test",f,d),s.removeEventListener("test",f,d)}catch{}return a})();function _(a){return/^[\s\xa0]*$/.test(a)}function Tt(a,d){I.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a&&this.init(a,d)}p(Tt,I),Tt.prototype.init=function(a,d){let f=this.type=a.type,m=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement,this.g=d,d=a.relatedTarget,d||(f=="mouseover"?d=a.fromElement:f=="mouseout"&&(d=a.toElement)),this.relatedTarget=d,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=a.pointerType,this.state=a.state,this.i=a,a.defaultPrevented&&Tt.Z.h.call(this)},Tt.prototype.h=function(){Tt.Z.h.call(this);let a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var yr="closure_listenable_"+(Math.random()*1e6|0),rR=0;function iR(a,d,f,m,T){this.listener=a,this.proxy=null,this.src=d,this.type=f,this.capture=!!m,this.ha=T,this.key=++rR,this.da=this.fa=!1}function Uc(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function $c(a,d,f){for(let m in a)d.call(f,a[m],m,a)}function oR(a,d){for(let f in a)d.call(void 0,a[f],f,a)}function oE(a){let d={};for(let f in a)d[f]=a[f];return d}let sE="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function aE(a,d){let f,m;for(let T=1;T<arguments.length;T++){m=arguments[T];for(f in m)a[f]=m[f];for(let b=0;b<sE.length;b++)f=sE[b],Object.prototype.hasOwnProperty.call(m,f)&&(a[f]=m[f])}}function Hc(a){this.src=a,this.g={},this.h=0}Hc.prototype.add=function(a,d,f,m,T){let b=a.toString();a=this.g[b],a||(a=this.g[b]=[],this.h++);let F=nf(a,d,m,T);return F>-1?(d=a[F],f||(d.fa=!1)):(d=new iR(d,this.src,b,!!m,T),d.fa=f,a.push(d)),d};function tf(a,d){let f=d.type;if(f in a.g){var m=a.g[f],T=Array.prototype.indexOf.call(m,d,void 0),b;(b=T>=0)&&Array.prototype.splice.call(m,T,1),b&&(Uc(d),a.g[f].length==0&&(delete a.g[f],a.h--))}}function nf(a,d,f,m){for(let T=0;T<a.length;++T){let b=a[T];if(!b.da&&b.listener==d&&b.capture==!!f&&b.ha==m)return T}return-1}var rf="closure_lm_"+(Math.random()*1e6|0),of={};function cE(a,d,f,m,T){if(m&&m.once)return lE(a,d,f,m,T);if(Array.isArray(d)){for(let b=0;b<d.length;b++)cE(a,d[b],f,m,T);return null}return f=uf(f),a&&a[yr]?a.J(d,f,c(m)?!!m.capture:!!m,T):uE(a,d,f,!1,m,T)}function uE(a,d,f,m,T,b){if(!d)throw Error("Invalid event type");let F=c(T)?!!T.capture:!!T,ae=af(a);if(ae||(a[rf]=ae=new Hc(a)),f=ae.add(d,f,m,F,b),f.proxy)return f;if(m=sR(),f.proxy=m,m.src=a,m.listener=f,a.addEventListener)D||(T=F),T===void 0&&(T=!1),a.addEventListener(d.toString(),m,T);else if(a.attachEvent)a.attachEvent(hE(d.toString()),m);else if(a.addListener&&a.removeListener)a.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return f}function sR(){function a(f){return d.call(a.src,a.listener,f)}let d=aR;return a}function lE(a,d,f,m,T){if(Array.isArray(d)){for(let b=0;b<d.length;b++)lE(a,d[b],f,m,T);return null}return f=uf(f),a&&a[yr]?a.K(d,f,c(m)?!!m.capture:!!m,T):uE(a,d,f,!0,m,T)}function dE(a,d,f,m,T){if(Array.isArray(d))for(var b=0;b<d.length;b++)dE(a,d[b],f,m,T);else m=c(m)?!!m.capture:!!m,f=uf(f),a&&a[yr]?(a=a.i,b=String(d).toString(),b in a.g&&(d=a.g[b],f=nf(d,f,m,T),f>-1&&(Uc(d[f]),Array.prototype.splice.call(d,f,1),d.length==0&&(delete a.g[b],a.h--)))):a&&(a=af(a))&&(d=a.g[d.toString()],a=-1,d&&(a=nf(d,f,m,T)),(f=a>-1?d[a]:null)&&sf(f))}function sf(a){if(typeof a!="number"&&a&&!a.da){var d=a.src;if(d&&d[yr])tf(d.i,a);else{var f=a.type,m=a.proxy;d.removeEventListener?d.removeEventListener(f,m,a.capture):d.detachEvent?d.detachEvent(hE(f),m):d.addListener&&d.removeListener&&d.removeListener(m),(f=af(d))?(tf(f,a),f.h==0&&(f.src=null,d[rf]=null)):Uc(a)}}}function hE(a){return a in of?of[a]:of[a]="on"+a}function aR(a,d){if(a.da)a=!0;else{d=new Tt(d,this);let f=a.listener,m=a.ha||a.src;a.fa&&sf(a),a=f.call(m,d)}return a}function af(a){return a=a[rf],a instanceof Hc?a:null}var cf="__closure_events_fn_"+(Math.random()*1e9>>>0);function uf(a){return typeof a=="function"?a:(a[cf]||(a[cf]=function(d){return a.handleEvent(d)}),a[cf])}function at(){C.call(this),this.i=new Hc(this),this.M=this,this.G=null}p(at,C),at.prototype[yr]=!0,at.prototype.removeEventListener=function(a,d,f,m){dE(this,a,d,f,m)};function pt(a,d){var f,m=a.G;if(m)for(f=[];m;m=m.G)f.push(m);if(a=a.M,m=d.type||d,typeof d=="string")d=new I(d,a);else if(d instanceof I)d.target=d.target||a;else{var T=d;d=new I(m,a),aE(d,T)}T=!0;let b,F;if(f)for(F=f.length-1;F>=0;F--)b=d.g=f[F],T=zc(b,m,!0,d)&&T;if(b=d.g=a,T=zc(b,m,!0,d)&&T,T=zc(b,m,!1,d)&&T,f)for(F=0;F<f.length;F++)b=d.g=f[F],T=zc(b,m,!1,d)&&T}at.prototype.N=function(){if(at.Z.N.call(this),this.i){var a=this.i;for(let d in a.g){let f=a.g[d];for(let m=0;m<f.length;m++)Uc(f[m]);delete a.g[d],a.h--}}this.G=null},at.prototype.J=function(a,d,f,m){return this.i.add(String(a),d,!1,f,m)},at.prototype.K=function(a,d,f,m){return this.i.add(String(a),d,!0,f,m)};function zc(a,d,f,m){if(d=a.i.g[String(d)],!d)return!0;d=d.concat();let T=!0;for(let b=0;b<d.length;++b){let F=d[b];if(F&&!F.da&&F.capture==f){let ae=F.listener,$e=F.ha||F.src;F.fa&&tf(a.i,F),T=ae.call($e,m)!==!1&&T}}return T&&!m.defaultPrevented}function cR(a,d){if(typeof a!="function")if(a&&typeof a.handleEvent=="function")a=l(a.handleEvent,a);else throw Error("Invalid listener argument");return Number(d)>2147483647?-1:s.setTimeout(a,d||0)}function fE(a){a.g=cR(()=>{a.g=null,a.i&&(a.i=!1,fE(a))},a.l);let d=a.h;a.h=null,a.m.apply(null,d)}class uR extends C{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:fE(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Rs(a){C.call(this),this.h=a,this.g={}}p(Rs,C);var pE=[];function mE(a){$c(a.g,function(d,f){this.g.hasOwnProperty(f)&&sf(d)},a),a.g={}}Rs.prototype.N=function(){Rs.Z.N.call(this),mE(this)},Rs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var lf=s.JSON.stringify,lR=s.JSON.parse,dR=class{stringify(a){return s.JSON.stringify(a,void 0)}parse(a){return s.JSON.parse(a,void 0)}};function gE(){}function yE(){}var Ns={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function df(){I.call(this,"d")}p(df,I);function hf(){I.call(this,"c")}p(hf,I);var ai={},vE=null;function qc(){return vE=vE||new at}ai.Ia="serverreachability";function _E(a){I.call(this,ai.Ia,a)}p(_E,I);function Ms(a){let d=qc();pt(d,new _E(d))}ai.STAT_EVENT="statevent";function EE(a,d){I.call(this,ai.STAT_EVENT,a),this.stat=d}p(EE,I);function mt(a){let d=qc();pt(d,new EE(d,a))}ai.Ja="timingevent";function IE(a,d){I.call(this,ai.Ja,a),this.size=d}p(IE,I);function xs(a,d){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){a()},d)}function Ps(){this.g=!0}Ps.prototype.ua=function(){this.g=!1};function hR(a,d,f,m,T,b){a.info(function(){if(a.g)if(b){var F="",ae=b.split("&");for(let Se=0;Se<ae.length;Se++){var $e=ae[Se].split("=");if($e.length>1){let Qe=$e[0];$e=$e[1];let Cn=Qe.split("_");F=Cn.length>=2&&Cn[1]=="type"?F+(Qe+"="+$e+"&"):F+(Qe+"=redacted&")}}}else F=null;else F=b;return"XMLHTTP REQ ("+m+") [attempt "+T+"]: "+d+`
`+f+`
`+F})}function fR(a,d,f,m,T,b,F){a.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+T+"]: "+d+`
`+f+`
`+b+" "+F})}function lo(a,d,f,m){a.info(function(){return"XMLHTTP TEXT ("+d+"): "+mR(a,f)+(m?" "+m:"")})}function pR(a,d){a.info(function(){return"TIMEOUT: "+d})}Ps.prototype.info=function(){};function mR(a,d){if(!a.g)return d;if(!d)return null;try{let b=JSON.parse(d);if(b){for(a=0;a<b.length;a++)if(Array.isArray(b[a])){var f=b[a];if(!(f.length<2)){var m=f[1];if(Array.isArray(m)&&!(m.length<1)){var T=m[0];if(T!="noop"&&T!="stop"&&T!="close")for(let F=1;F<m.length;F++)m[F]=""}}}}return lf(b)}catch{return d}}var Gc={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},wE={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},CE;function ff(){}p(ff,gE),ff.prototype.g=function(){return new XMLHttpRequest},CE=new ff;function Os(a){return encodeURIComponent(String(a))}function gR(a){var d=1;a=a.split(":");let f=[];for(;d>0&&a.length;)f.push(a.shift()),d--;return a.length&&f.push(a.join(":")),f}function vr(a,d,f,m){this.j=a,this.i=d,this.l=f,this.S=m||1,this.V=new Rs(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new TE}function TE(){this.i=null,this.g="",this.h=!1}var DE={},pf={};function mf(a,d,f){a.M=1,a.A=Kc(wn(d)),a.u=f,a.R=!0,bE(a,null)}function bE(a,d){a.F=Date.now(),Wc(a),a.B=wn(a.A);var f=a.B,m=a.S;Array.isArray(m)||(m=[String(m)]),jE(f.i,"t",m),a.C=0,f=a.j.L,a.h=new TE,a.g=rI(a.j,f?d:null,!a.u),a.P>0&&(a.O=new uR(l(a.Y,a,a.g),a.P)),d=a.V,f=a.g,m=a.ba;var T="readystatechange";Array.isArray(T)||(T&&(pE[0]=T.toString()),T=pE);for(let b=0;b<T.length;b++){let F=cE(f,T[b],m||d.handleEvent,!1,d.h||d);if(!F)break;d.g[F.key]=F}d=a.J?oE(a.J):{},a.u?(a.v||(a.v="POST"),d["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.B,a.v,a.u,d)):(a.v="GET",a.g.ea(a.B,a.v,null,d)),Ms(),hR(a.i,a.v,a.B,a.l,a.S,a.u)}vr.prototype.ba=function(a){a=a.target;let d=this.O;d&&Ir(a)==3?d.j():this.Y(a)},vr.prototype.Y=function(a){try{if(a==this.g)e:{let ae=Ir(this.g),$e=this.g.ya(),Se=this.g.ca();if(!(ae<3)&&(ae!=3||this.g&&(this.h.h||this.g.la()||GE(this.g)))){this.K||ae!=4||$e==7||($e==8||Se<=0?Ms(3):Ms(2)),gf(this);var d=this.g.ca();this.X=d;var f=yR(this);if(this.o=d==200,fR(this.i,this.v,this.B,this.l,this.S,ae,d),this.o){if(this.U&&!this.L){t:{if(this.g){var m,T=this.g;if((m=T.g?T.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(m)){var b=m;break t}}b=null}if(a=b)lo(this.i,this.l,a,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,yf(this,a);else{this.o=!1,this.m=3,mt(12),ci(this),ks(this);break e}}if(this.R){a=!0;let Qe;for(;!this.K&&this.C<f.length;)if(Qe=vR(this,f),Qe==pf){ae==4&&(this.m=4,mt(14),a=!1),lo(this.i,this.l,null,"[Incomplete Response]");break}else if(Qe==DE){this.m=4,mt(15),lo(this.i,this.l,f,"[Invalid Chunk]"),a=!1;break}else lo(this.i,this.l,Qe,null),yf(this,Qe);if(SE(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ae!=4||f.length!=0||this.h.h||(this.m=1,mt(16),a=!1),this.o=this.o&&a,!a)lo(this.i,this.l,f,"[Invalid Chunked Response]"),ci(this),ks(this);else if(f.length>0&&!this.W){this.W=!0;var F=this.j;F.g==this&&F.aa&&!F.P&&(F.j.info("Great, no buffering proxy detected. Bytes received: "+f.length),Tf(F),F.P=!0,mt(11))}}else lo(this.i,this.l,f,null),yf(this,f);ae==4&&ci(this),this.o&&!this.K&&(ae==4?XE(this.j,this):(this.o=!1,Wc(this)))}else xR(this.g),d==400&&f.indexOf("Unknown SID")>0?(this.m=3,mt(12)):(this.m=0,mt(13)),ci(this),ks(this)}}}catch{}finally{}};function yR(a){if(!SE(a))return a.g.la();let d=GE(a.g);if(d==="")return"";let f="",m=d.length,T=Ir(a.g)==4;if(!a.h.i){if(typeof TextDecoder>"u")return ci(a),ks(a),"";a.h.i=new s.TextDecoder}for(let b=0;b<m;b++)a.h.h=!0,f+=a.h.i.decode(d[b],{stream:!(T&&b==m-1)});return d.length=0,a.h.g+=f,a.C=0,a.h.g}function SE(a){return a.g?a.v=="GET"&&a.M!=2&&a.j.Aa:!1}function vR(a,d){var f=a.C,m=d.indexOf(`
`,f);return m==-1?pf:(f=Number(d.substring(f,m)),isNaN(f)?DE:(m+=1,m+f>d.length?pf:(d=d.slice(m,m+f),a.C=m+f,d)))}vr.prototype.cancel=function(){this.K=!0,ci(this)};function Wc(a){a.T=Date.now()+a.H,AE(a,a.H)}function AE(a,d){if(a.D!=null)throw Error("WatchDog timer not null");a.D=xs(l(a.aa,a),d)}function gf(a){a.D&&(s.clearTimeout(a.D),a.D=null)}vr.prototype.aa=function(){this.D=null;let a=Date.now();a-this.T>=0?(pR(this.i,this.B),this.M!=2&&(Ms(),mt(17)),ci(this),this.m=2,ks(this)):AE(this,this.T-a)};function ks(a){a.j.I==0||a.K||XE(a.j,a)}function ci(a){gf(a);var d=a.O;d&&typeof d.dispose=="function"&&d.dispose(),a.O=null,mE(a.V),a.g&&(d=a.g,a.g=null,d.abort(),d.dispose())}function yf(a,d){try{var f=a.j;if(f.I!=0&&(f.g==a||vf(f.h,a))){if(!a.L&&vf(f.h,a)&&f.I==3){try{var m=f.Ba.g.parse(d)}catch{m=null}if(Array.isArray(m)&&m.length==3){var T=m;if(T[0]==0){e:if(!f.v){if(f.g)if(f.g.F+3e3<a.F)eu(f),Zc(f);else break e;Cf(f),mt(18)}}else f.xa=T[1],0<f.xa-f.K&&T[2]<37500&&f.F&&f.A==0&&!f.C&&(f.C=xs(l(f.Va,f),6e3));ME(f.h)<=1&&f.ta&&(f.ta=void 0)}else li(f,11)}else if((a.L||f.g==a)&&eu(f),!_(d))for(T=f.Ba.g.parse(d),d=0;d<T.length;d++){let Se=T[d],Qe=Se[0];if(!(Qe<=f.K))if(f.K=Qe,Se=Se[1],f.I==2)if(Se[0]=="c"){f.M=Se[1],f.ba=Se[2];let Cn=Se[3];Cn!=null&&(f.ka=Cn,f.j.info("VER="+f.ka));let di=Se[4];di!=null&&(f.za=di,f.j.info("SVER="+f.za));let wr=Se[5];wr!=null&&typeof wr=="number"&&wr>0&&(m=1.5*wr,f.O=m,f.j.info("backChannelRequestTimeoutMs_="+m)),m=f;let Cr=a.g;if(Cr){let nu=Cr.g?Cr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(nu){var b=m.h;b.g||nu.indexOf("spdy")==-1&&nu.indexOf("quic")==-1&&nu.indexOf("h2")==-1||(b.j=b.l,b.g=new Set,b.h&&(_f(b,b.h),b.h=null))}if(m.G){let Df=Cr.g?Cr.g.getResponseHeader("X-HTTP-Session-Id"):null;Df&&(m.wa=Df,Ae(m.J,m.G,Df))}}f.I=3,f.l&&f.l.ra(),f.aa&&(f.T=Date.now()-a.F,f.j.info("Handshake RTT: "+f.T+"ms")),m=f;var F=a;if(m.na=nI(m,m.L?m.ba:null,m.W),F.L){xE(m.h,F);var ae=F,$e=m.O;$e&&(ae.H=$e),ae.D&&(gf(ae),Wc(ae)),m.g=F}else JE(m);f.i.length>0&&Xc(f)}else Se[0]!="stop"&&Se[0]!="close"||li(f,7);else f.I==3&&(Se[0]=="stop"||Se[0]=="close"?Se[0]=="stop"?li(f,7):wf(f):Se[0]!="noop"&&f.l&&f.l.qa(Se),f.A=0)}}Ms(4)}catch{}}var _R=class{constructor(a,d){this.g=a,this.map=d}};function RE(a){this.l=a||10,s.PerformanceNavigationTiming?(a=s.performance.getEntriesByType("navigation"),a=a.length>0&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function NE(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function ME(a){return a.h?1:a.g?a.g.size:0}function vf(a,d){return a.h?a.h==d:a.g?a.g.has(d):!1}function _f(a,d){a.g?a.g.add(d):a.h=d}function xE(a,d){a.h&&a.h==d?a.h=null:a.g&&a.g.has(d)&&a.g.delete(d)}RE.prototype.cancel=function(){if(this.i=PE(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let a of this.g.values())a.cancel();this.g.clear()}};function PE(a){if(a.h!=null)return a.i.concat(a.h.G);if(a.g!=null&&a.g.size!==0){let d=a.i;for(let f of a.g.values())d=d.concat(f.G);return d}return y(a.i)}var OE=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ER(a,d){if(a){a=a.split("&");for(let f=0;f<a.length;f++){let m=a[f].indexOf("="),T,b=null;m>=0?(T=a[f].substring(0,m),b=a[f].substring(m+1)):T=a[f],d(T,b?decodeURIComponent(b.replace(/\+/g," ")):"")}}}function _r(a){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let d;a instanceof _r?(this.l=a.l,Ls(this,a.j),this.o=a.o,this.g=a.g,Fs(this,a.u),this.h=a.h,Ef(this,BE(a.i)),this.m=a.m):a&&(d=String(a).match(OE))?(this.l=!1,Ls(this,d[1]||"",!0),this.o=Vs(d[2]||""),this.g=Vs(d[3]||"",!0),Fs(this,d[4]),this.h=Vs(d[5]||"",!0),Ef(this,d[6]||"",!0),this.m=Vs(d[7]||"")):(this.l=!1,this.i=new Bs(null,this.l))}_r.prototype.toString=function(){let a=[];var d=this.j;d&&a.push(js(d,kE,!0),":");var f=this.g;return(f||d=="file")&&(a.push("//"),(d=this.o)&&a.push(js(d,kE,!0),"@"),a.push(Os(f).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.u,f!=null&&a.push(":",String(f))),(f=this.h)&&(this.g&&f.charAt(0)!="/"&&a.push("/"),a.push(js(f,f.charAt(0)=="/"?CR:wR,!0))),(f=this.i.toString())&&a.push("?",f),(f=this.m)&&a.push("#",js(f,DR)),a.join("")},_r.prototype.resolve=function(a){let d=wn(this),f=!!a.j;f?Ls(d,a.j):f=!!a.o,f?d.o=a.o:f=!!a.g,f?d.g=a.g:f=a.u!=null;var m=a.h;if(f)Fs(d,a.u);else if(f=!!a.h){if(m.charAt(0)!="/")if(this.g&&!this.h)m="/"+m;else{var T=d.h.lastIndexOf("/");T!=-1&&(m=d.h.slice(0,T+1)+m)}if(T=m,T==".."||T==".")m="";else if(T.indexOf("./")!=-1||T.indexOf("/.")!=-1){m=T.lastIndexOf("/",0)==0,T=T.split("/");let b=[];for(let F=0;F<T.length;){let ae=T[F++];ae=="."?m&&F==T.length&&b.push(""):ae==".."?((b.length>1||b.length==1&&b[0]!="")&&b.pop(),m&&F==T.length&&b.push("")):(b.push(ae),m=!0)}m=b.join("/")}else m=T}return f?d.h=m:f=a.i.toString()!=="",f?Ef(d,BE(a.i)):f=!!a.m,f&&(d.m=a.m),d};function wn(a){return new _r(a)}function Ls(a,d,f){a.j=f?Vs(d,!0):d,a.j&&(a.j=a.j.replace(/:$/,""))}function Fs(a,d){if(d){if(d=Number(d),isNaN(d)||d<0)throw Error("Bad port number "+d);a.u=d}else a.u=null}function Ef(a,d,f){d instanceof Bs?(a.i=d,bR(a.i,a.l)):(f||(d=js(d,TR)),a.i=new Bs(d,a.l))}function Ae(a,d,f){a.i.set(d,f)}function Kc(a){return Ae(a,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),a}function Vs(a,d){return a?d?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function js(a,d,f){return typeof a=="string"?(a=encodeURI(a).replace(d,IR),f&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function IR(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var kE=/[#\/\?@]/g,wR=/[#\?:]/g,CR=/[#\?]/g,TR=/[#\?@]/g,DR=/#/g;function Bs(a,d){this.h=this.g=null,this.i=a||null,this.j=!!d}function ui(a){a.g||(a.g=new Map,a.h=0,a.i&&ER(a.i,function(d,f){a.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=Bs.prototype,t.add=function(a,d){ui(this),this.i=null,a=ho(this,a);let f=this.g.get(a);return f||this.g.set(a,f=[]),f.push(d),this.h+=1,this};function LE(a,d){ui(a),d=ho(a,d),a.g.has(d)&&(a.i=null,a.h-=a.g.get(d).length,a.g.delete(d))}function FE(a,d){return ui(a),d=ho(a,d),a.g.has(d)}t.forEach=function(a,d){ui(this),this.g.forEach(function(f,m){f.forEach(function(T){a.call(d,T,m,this)},this)},this)};function VE(a,d){ui(a);let f=[];if(typeof d=="string")FE(a,d)&&(f=f.concat(a.g.get(ho(a,d))));else for(a=Array.from(a.g.values()),d=0;d<a.length;d++)f=f.concat(a[d]);return f}t.set=function(a,d){return ui(this),this.i=null,a=ho(this,a),FE(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[d]),this.h+=1,this},t.get=function(a,d){return a?(a=VE(this,a),a.length>0?String(a[0]):d):d};function jE(a,d,f){LE(a,d),f.length>0&&(a.i=null,a.g.set(ho(a,d),y(f)),a.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let a=[],d=Array.from(this.g.keys());for(let m=0;m<d.length;m++){var f=d[m];let T=Os(f);f=VE(this,f);for(let b=0;b<f.length;b++){let F=T;f[b]!==""&&(F+="="+Os(f[b])),a.push(F)}}return this.i=a.join("&")};function BE(a){let d=new Bs;return d.i=a.i,a.g&&(d.g=new Map(a.g),d.h=a.h),d}function ho(a,d){return d=String(d),a.j&&(d=d.toLowerCase()),d}function bR(a,d){d&&!a.j&&(ui(a),a.i=null,a.g.forEach(function(f,m){let T=m.toLowerCase();m!=T&&(LE(this,m),jE(this,T,f))},a)),a.j=d}function SR(a,d){let f=new Ps;if(s.Image){let m=new Image;m.onload=h(Er,f,"TestLoadImage: loaded",!0,d,m),m.onerror=h(Er,f,"TestLoadImage: error",!1,d,m),m.onabort=h(Er,f,"TestLoadImage: abort",!1,d,m),m.ontimeout=h(Er,f,"TestLoadImage: timeout",!1,d,m),s.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=a}else d(!1)}function AR(a,d){let f=new Ps,m=new AbortController,T=setTimeout(()=>{m.abort(),Er(f,"TestPingServer: timeout",!1,d)},1e4);fetch(a,{signal:m.signal}).then(b=>{clearTimeout(T),b.ok?Er(f,"TestPingServer: ok",!0,d):Er(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(T),Er(f,"TestPingServer: error",!1,d)})}function Er(a,d,f,m,T){try{T&&(T.onload=null,T.onerror=null,T.onabort=null,T.ontimeout=null),m(f)}catch{}}function RR(){this.g=new dR}function Qc(a){this.i=a.Sb||null,this.h=a.ab||!1}p(Qc,gE),Qc.prototype.g=function(){return new Yc(this.i,this.h)};function Yc(a,d){at.call(this),this.H=a,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(Yc,at),t=Yc.prototype,t.open=function(a,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=a,this.D=d,this.readyState=1,$s(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;let d={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};a&&(d.body=a),(this.H||s).fetch(new Request(this.D,d)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Us(this)),this.readyState=0},t.Pa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,$s(this)),this.g&&(this.readyState=3,$s(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof s.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;UE(this)}else a.text().then(this.Oa.bind(this),this.ga.bind(this))};function UE(a){a.j.read().then(a.Ma.bind(a)).catch(a.ga.bind(a))}t.Ma=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var d=a.value?a.value:new Uint8Array(0);(d=this.B.decode(d,{stream:!a.done}))&&(this.response=this.responseText+=d)}a.done?Us(this):$s(this),this.readyState==3&&UE(this)}},t.Oa=function(a){this.g&&(this.response=this.responseText=a,Us(this))},t.Na=function(a){this.g&&(this.response=a,Us(this))},t.ga=function(){this.g&&Us(this)};function Us(a){a.readyState=4,a.l=null,a.j=null,a.B=null,$s(a)}t.setRequestHeader=function(a,d){this.A.append(a,d)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let a=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,a.push(f[0]+": "+f[1]),f=d.next();return a.join(`\r
`)};function $s(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Yc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function $E(a){let d="";return $c(a,function(f,m){d+=m,d+=":",d+=f,d+=`\r
`}),d}function If(a,d,f){e:{for(m in f){var m=!1;break e}m=!0}m||(f=$E(f),typeof a=="string"?f!=null&&Os(f):Ae(a,d,f))}function xe(a){at.call(this),this.headers=new Map,this.L=a||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(xe,at);var NR=/^https?$/i,MR=["POST","PUT"];t=xe.prototype,t.Fa=function(a){this.H=a},t.ea=function(a,d,f,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);d=d?d.toUpperCase():"GET",this.D=a,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():CE.g(),this.g.onreadystatechange=g(l(this.Ca,this));try{this.B=!0,this.g.open(d,String(a),!0),this.B=!1}catch(b){HE(this,b);return}if(a=f||"",f=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var T in m)f.set(T,m[T]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(let b of m.keys())f.set(b,m.get(b));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(f.keys()).find(b=>b.toLowerCase()=="content-type"),T=s.FormData&&a instanceof s.FormData,!(Array.prototype.indexOf.call(MR,d,void 0)>=0)||m||T||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[b,F]of f)this.g.setRequestHeader(b,F);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(a),this.v=!1}catch(b){HE(this,b)}};function HE(a,d){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=d,a.o=5,zE(a),Jc(a)}function zE(a){a.A||(a.A=!0,pt(a,"complete"),pt(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=a||7,pt(this,"complete"),pt(this,"abort"),Jc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Jc(this,!0)),xe.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?qE(this):this.Xa())},t.Xa=function(){qE(this)};function qE(a){if(a.h&&typeof o<"u"){if(a.v&&Ir(a)==4)setTimeout(a.Ca.bind(a),0);else if(pt(a,"readystatechange"),Ir(a)==4){a.h=!1;try{let b=a.ca();e:switch(b){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var m;if(m=b===0){let F=String(a.D).match(OE)[1]||null;!F&&s.self&&s.self.location&&(F=s.self.location.protocol.slice(0,-1)),m=!NR.test(F?F.toLowerCase():"")}f=m}if(f)pt(a,"complete"),pt(a,"success");else{a.o=6;try{var T=Ir(a)>2?a.g.statusText:""}catch{T=""}a.l=T+" ["+a.ca()+"]",zE(a)}}finally{Jc(a)}}}}function Jc(a,d){if(a.g){a.m&&(clearTimeout(a.m),a.m=null);let f=a.g;a.g=null,d||pt(a,"ready");try{f.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Ir(a){return a.g?a.g.readyState:0}t.ca=function(){try{return Ir(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(a){if(this.g){var d=this.g.responseText;return a&&d.indexOf(a)==0&&(d=d.substring(a.length)),lR(d)}};function GE(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.F){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function xR(a){let d={};a=(a.g&&Ir(a)>=2&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<a.length;m++){if(_(a[m]))continue;var f=gR(a[m]);let T=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let b=d[T]||[];d[T]=b,b.push(f)}oR(d,function(m){return m.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Hs(a,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[a]||d}function WE(a){this.za=0,this.i=[],this.j=new Ps,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Hs("failFast",!1,a),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Hs("baseRetryDelayMs",5e3,a),this.Za=Hs("retryDelaySeedMs",1e4,a),this.Ta=Hs("forwardChannelMaxRetries",2,a),this.va=Hs("forwardChannelRequestTimeoutMs",2e4,a),this.ma=a&&a.xmlHttpFactory||void 0,this.Ua=a&&a.Rb||void 0,this.Aa=a&&a.useFetchStreams||!1,this.O=void 0,this.L=a&&a.supportsCrossDomainXhr||!1,this.M="",this.h=new RE(a&&a.concurrentRequestLimit),this.Ba=new RR,this.S=a&&a.fastHandshake||!1,this.R=a&&a.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=a&&a.Pb||!1,a&&a.ua&&this.j.ua(),a&&a.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&a&&a.detectBufferingProxy||!1,this.ia=void 0,a&&a.longPollingTimeout&&a.longPollingTimeout>0&&(this.ia=a.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=WE.prototype,t.ka=8,t.I=1,t.connect=function(a,d,f,m){mt(0),this.W=a,this.H=d||{},f&&m!==void 0&&(this.H.OSID=f,this.H.OAID=m),this.F=this.X,this.J=nI(this,null,this.W),Xc(this)};function wf(a){if(KE(a),a.I==3){var d=a.V++,f=wn(a.J);if(Ae(f,"SID",a.M),Ae(f,"RID",d),Ae(f,"TYPE","terminate"),zs(a,f),d=new vr(a,a.j,d),d.M=2,d.A=Kc(wn(f)),f=!1,s.navigator&&s.navigator.sendBeacon)try{f=s.navigator.sendBeacon(d.A.toString(),"")}catch{}!f&&s.Image&&(new Image().src=d.A,f=!0),f||(d.g=rI(d.j,null),d.g.ea(d.A)),d.F=Date.now(),Wc(d)}tI(a)}function Zc(a){a.g&&(Tf(a),a.g.cancel(),a.g=null)}function KE(a){Zc(a),a.v&&(s.clearTimeout(a.v),a.v=null),eu(a),a.h.cancel(),a.m&&(typeof a.m=="number"&&s.clearTimeout(a.m),a.m=null)}function Xc(a){if(!NE(a.h)&&!a.m){a.m=!0;var d=a.Ea;Ct||v(),Ke||(Ct(),Ke=!0),w.add(d,a),a.D=0}}function PR(a,d){return ME(a.h)>=a.h.j-(a.m?1:0)?!1:a.m?(a.i=d.G.concat(a.i),!0):a.I==1||a.I==2||a.D>=(a.Sa?0:a.Ta)?!1:(a.m=xs(l(a.Ea,a,d),eI(a,a.D)),a.D++,!0)}t.Ea=function(a){if(this.m)if(this.m=null,this.I==1){if(!a){this.V=Math.floor(Math.random()*1e5),a=this.V++;let T=new vr(this,this.j,a),b=this.o;if(this.U&&(b?(b=oE(b),aE(b,this.U)):b=this.U),this.u!==null||this.R||(T.J=b,b=null),this.S)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var m=this.i[f];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(d+=m,d>4096){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=YE(this,T,d),f=wn(this.J),Ae(f,"RID",a),Ae(f,"CVER",22),this.G&&Ae(f,"X-HTTP-Session-Id",this.G),zs(this,f),b&&(this.R?d="headers="+Os($E(b))+"&"+d:this.u&&If(f,this.u,b)),_f(this.h,T),this.Ra&&Ae(f,"TYPE","init"),this.S?(Ae(f,"$req",d),Ae(f,"SID","null"),T.U=!0,mf(T,f,null)):mf(T,f,d),this.I=2}}else this.I==3&&(a?QE(this,a):this.i.length==0||NE(this.h)||QE(this))};function QE(a,d){var f;d?f=d.l:f=a.V++;let m=wn(a.J);Ae(m,"SID",a.M),Ae(m,"RID",f),Ae(m,"AID",a.K),zs(a,m),a.u&&a.o&&If(m,a.u,a.o),f=new vr(a,a.j,f,a.D+1),a.u===null&&(f.J=a.o),d&&(a.i=d.G.concat(a.i)),d=YE(a,f,1e3),f.H=Math.round(a.va*.5)+Math.round(a.va*.5*Math.random()),_f(a.h,f),mf(f,m,d)}function zs(a,d){a.H&&$c(a.H,function(f,m){Ae(d,m,f)}),a.l&&$c({},function(f,m){Ae(d,m,f)})}function YE(a,d,f){f=Math.min(a.i.length,f);let m=a.l?l(a.l.Ka,a.l,a):null;e:{var T=a.i;let ae=-1;for(;;){let $e=["count="+f];ae==-1?f>0?(ae=T[0].g,$e.push("ofs="+ae)):ae=0:$e.push("ofs="+ae);let Se=!0;for(let Qe=0;Qe<f;Qe++){var b=T[Qe].g;let Cn=T[Qe].map;if(b-=ae,b<0)ae=Math.max(0,T[Qe].g-100),Se=!1;else try{b="req"+b+"_"||"";try{var F=Cn instanceof Map?Cn:Object.entries(Cn);for(let[di,wr]of F){let Cr=wr;c(wr)&&(Cr=lf(wr)),$e.push(b+di+"="+encodeURIComponent(Cr))}}catch(di){throw $e.push(b+"type="+encodeURIComponent("_badmap")),di}}catch{m&&m(Cn)}}if(Se){F=$e.join("&");break e}}F=void 0}return a=a.i.splice(0,f),d.G=a,F}function JE(a){if(!a.g&&!a.v){a.Y=1;var d=a.Da;Ct||v(),Ke||(Ct(),Ke=!0),w.add(d,a),a.A=0}}function Cf(a){return a.g||a.v||a.A>=3?!1:(a.Y++,a.v=xs(l(a.Da,a),eI(a,a.A)),a.A++,!0)}t.Da=function(){if(this.v=null,ZE(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var a=4*this.T;this.j.info("BP detection timer enabled: "+a),this.B=xs(l(this.Wa,this),a)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,mt(10),Zc(this),ZE(this))};function Tf(a){a.B!=null&&(s.clearTimeout(a.B),a.B=null)}function ZE(a){a.g=new vr(a,a.j,"rpc",a.Y),a.u===null&&(a.g.J=a.o),a.g.P=0;var d=wn(a.na);Ae(d,"RID","rpc"),Ae(d,"SID",a.M),Ae(d,"AID",a.K),Ae(d,"CI",a.F?"0":"1"),!a.F&&a.ia&&Ae(d,"TO",a.ia),Ae(d,"TYPE","xmlhttp"),zs(a,d),a.u&&a.o&&If(d,a.u,a.o),a.O&&(a.g.H=a.O);var f=a.g;a=a.ba,f.M=1,f.A=Kc(wn(d)),f.u=null,f.R=!0,bE(f,a)}t.Va=function(){this.C!=null&&(this.C=null,Zc(this),Cf(this),mt(19))};function eu(a){a.C!=null&&(s.clearTimeout(a.C),a.C=null)}function XE(a,d){var f=null;if(a.g==d){eu(a),Tf(a),a.g=null;var m=2}else if(vf(a.h,d))f=d.G,xE(a.h,d),m=1;else return;if(a.I!=0){if(d.o)if(m==1){f=d.u?d.u.length:0,d=Date.now()-d.F;var T=a.D;m=qc(),pt(m,new IE(m,f)),Xc(a)}else JE(a);else if(T=d.m,T==3||T==0&&d.X>0||!(m==1&&PR(a,d)||m==2&&Cf(a)))switch(f&&f.length>0&&(d=a.h,d.i=d.i.concat(f)),T){case 1:li(a,5);break;case 4:li(a,10);break;case 3:li(a,6);break;default:li(a,2)}}}function eI(a,d){let f=a.Qa+Math.floor(Math.random()*a.Za);return a.isActive()||(f*=2),f*d}function li(a,d){if(a.j.info("Error code "+d),d==2){var f=l(a.bb,a),m=a.Ua;let T=!m;m=new _r(m||"//www.google.com/images/cleardot.gif"),s.location&&s.location.protocol=="http"||Ls(m,"https"),Kc(m),T?SR(m.toString(),f):AR(m.toString(),f)}else mt(2);a.I=0,a.l&&a.l.pa(d),tI(a),KE(a)}t.bb=function(a){a?(this.j.info("Successfully pinged google.com"),mt(2)):(this.j.info("Failed to ping google.com"),mt(1))};function tI(a){if(a.I=0,a.ja=[],a.l){let d=PE(a.h);(d.length!=0||a.i.length!=0)&&(S(a.ja,d),S(a.ja,a.i),a.h.i.length=0,y(a.i),a.i.length=0),a.l.oa()}}function nI(a,d,f){var m=f instanceof _r?wn(f):new _r(f);if(m.g!="")d&&(m.g=d+"."+m.g),Fs(m,m.u);else{var T=s.location;m=T.protocol,d=d?d+"."+T.hostname:T.hostname,T=+T.port;let b=new _r(null);m&&Ls(b,m),d&&(b.g=d),T&&Fs(b,T),f&&(b.h=f),m=b}return f=a.G,d=a.wa,f&&d&&Ae(m,f,d),Ae(m,"VER",a.ka),zs(a,m),m}function rI(a,d,f){if(d&&!a.L)throw Error("Can't create secondary domain capable XhrIo object.");return d=a.Aa&&!a.ma?new xe(new Qc({ab:f})):new xe(a.ma),d.Fa(a.L),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function iI(){}t=iI.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function tu(){}tu.prototype.g=function(a,d){return new Mt(a,d)};function Mt(a,d){at.call(this),this.g=new WE(d),this.l=a,this.h=d&&d.messageUrlParams||null,a=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(a?a["X-WebChannel-Content-Type"]=d.messageContentType:a={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.sa&&(a?a["X-WebChannel-Client-Profile"]=d.sa:a={"X-WebChannel-Client-Profile":d.sa}),this.g.U=a,(a=d&&d.Qb)&&!_(a)&&(this.g.u=a),this.A=d&&d.supportsCrossDomainXhr||!1,this.v=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!_(d)&&(this.g.G=d,a=this.h,a!==null&&d in a&&(a=this.h,d in a&&delete a[d])),this.j=new fo(this)}p(Mt,at),Mt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Mt.prototype.close=function(){wf(this.g)},Mt.prototype.o=function(a){var d=this.g;if(typeof a=="string"){var f={};f.__data__=a,a=f}else this.v&&(f={},f.__data__=lf(a),a=f);d.i.push(new _R(d.Ya++,a)),d.I==3&&Xc(d)},Mt.prototype.N=function(){this.g.l=null,delete this.j,wf(this.g),delete this.g,Mt.Z.N.call(this)};function oI(a){df.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var d=a.__sm__;if(d){e:{for(let f in d){a=f;break e}a=void 0}(this.i=a)&&(a=this.i,d=d!==null&&a in d?d[a]:void 0),this.data=d}else this.data=a}p(oI,df);function sI(){hf.call(this),this.status=1}p(sI,hf);function fo(a){this.g=a}p(fo,iI),fo.prototype.ra=function(){pt(this.g,"a")},fo.prototype.qa=function(a){pt(this.g,new oI(a))},fo.prototype.pa=function(a){pt(this.g,new sI)},fo.prototype.oa=function(){pt(this.g,"b")},tu.prototype.createWebChannel=tu.prototype.g,Mt.prototype.send=Mt.prototype.o,Mt.prototype.open=Mt.prototype.m,Mt.prototype.close=Mt.prototype.close,Uy=ur.createWebChannelTransport=function(){return new tu},By=ur.getStatEventTarget=function(){return qc()},jy=ur.Event=ai,Xd=ur.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Gc.NO_ERROR=0,Gc.TIMEOUT=8,Gc.HTTP_ERROR=6,mc=ur.ErrorCode=Gc,wE.COMPLETE="complete",Vy=ur.EventType=wE,yE.EventType=Ns,Ns.OPEN="a",Ns.CLOSE="b",Ns.ERROR="c",Ns.MESSAGE="d",at.prototype.listen=at.prototype.J,Xo=ur.WebChannel=yE,KV=ur.FetchXmlHttpFactory=Qc,xe.prototype.listenOnce=xe.prototype.K,xe.prototype.getLastError=xe.prototype.Ha,xe.prototype.getLastErrorCode=xe.prototype.ya,xe.prototype.getStatus=xe.prototype.ca,xe.prototype.getResponseJson=xe.prototype.La,xe.prototype.getResponseText=xe.prototype.la,xe.prototype.send=xe.prototype.ea,xe.prototype.setWithCredentials=xe.prototype.Fa,Fy=ur.XhrIo=xe}).apply(typeof Zd<"u"?Zd:typeof self<"u"?self:typeof window<"u"?window:{});var OS="@firebase/firestore",kS="4.9.3";var tt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};tt.UNAUTHENTICATED=new tt(null),tt.GOOGLE_CREDENTIALS=new tt("google-credentials-uid"),tt.FIRST_PARTY=new tt("first-party-uid"),tt.MOCK_USER=new tt("mock-user");var Cs="12.7.0";var Xi=new Hr("@firebase/firestore");function es(){return Xi.logLevel}function U(t,...e){if(Xi.logLevel<=he.DEBUG){let n=e.map(M_);Xi.debug(`Firestore (${Cs}): ${t}`,...n)}}function hr(t,...e){if(Xi.logLevel<=he.ERROR){let n=e.map(M_);Xi.error(`Firestore (${Cs}): ${t}`,...n)}}function cs(t,...e){if(Xi.logLevel<=he.WARN){let n=e.map(M_);Xi.warn(`Firestore (${Cs}): ${t}`,...n)}}function M_(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function H(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,I0(t,r,n)}function I0(t,e,n){let r=`FIRESTORE (${Cs}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw hr(r),new Error(r)}function ve(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||I0(e,i,r)}function ee(t,e){return t}var N={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},$=class extends $t{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var In=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var sh=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Gy=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(tt.UNAUTHENTICATED))}shutdown(){}},Wy=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},Ky=class{constructor(e){this.t=e,this.currentUser=tt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ve(this.o===void 0,42304);let r=this.i,i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve(),o=new In;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new In,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},c=u=>{U("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?c(u):(U("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new In)}},0),s()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(U("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ve(typeof r.accessToken=="string",31837,{l:r}),new sh(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return ve(e===null||typeof e=="string",2055,{h:e}),new tt(e)}},Qy=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=tt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},Yy=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new Qy(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(tt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},ah=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Jy=class{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Rt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ve(this.o===void 0,3512);let r=o=>{o.error!=null&&U("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,U("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{U("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):U("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new ah(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ve(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new ah(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function QV(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Cc=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=QV(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%62))}return r}};function fe(t,e){return t<e?-1:t>e?1:0}function Zy(t,e){let n=Math.min(t.length,e.length);for(let r=0;r<n;r++){let i=t.charAt(r),o=e.charAt(r);if(i!==o)return $y(i)===$y(o)?fe(i,o):$y(i)?1:-1}return fe(t.length,e.length)}var YV=55296,JV=57343;function $y(t){let e=t.charCodeAt(0);return e>=YV&&e<=JV}function us(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var LS="__name__",ch=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&H(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&H(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let o=t.compareSegments(e.get(i),n.get(i));if(o!==0)return o}return fe(e.length,n.length)}static compareSegments(e,n){let r=t.isNumericId(e),i=t.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?t.extractNumericId(e).compare(t.extractNumericId(n)):Zy(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return cr.fromString(e.substring(4,e.length-2))}},Me=class t extends ch{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new $(N.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},ZV=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Ht=class t extends ch{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return ZV.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===LS}static keyField(){return new t([LS])}static fromServerFormat(e){let n=[],r="",i=0,o=()=>{if(r.length===0)throw new $(N.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},s=!1;for(;i<e.length;){let c=e[i];if(c==="\\"){if(i+1===e.length)throw new $(N.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new $(N.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else c==="`"?(s=!s,i++):c!=="."||s?(r+=c,i++):(o(),i++)}if(o(),s)throw new $(N.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var q=class t{constructor(e){this.path=e}static fromPath(e){return new t(Me.fromString(e))}static fromName(e){return new t(Me.fromString(e).popFirst(5))}static empty(){return new t(Me.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Me.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Me.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Me(e.slice()))}};function XV(t,e,n){if(!n)throw new $(N.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function e2(t,e,n,r){if(e===!0&&r===!0)throw new $(N.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function FS(t){if(!q.isDocumentKey(t))throw new $(N.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function w0(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function x_(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":H(12329,{type:typeof t})}function lr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new $(N.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=x_(t);throw new $(N.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function Be(t,e){let n={typeString:t};return e&&(n.value=e),n}function Fc(t,e){if(!w0(t))throw new $(N.INVALID_ARGUMENT,"JSON must be an object");let n;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}let s=t[r];if(i&&typeof s!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){n=`Expected '${r}' field to equal '${o.value}'`;break}}if(n)throw new $(N.INVALID_ARGUMENT,n);return!0}var VS=-62135596800,jS=1e6,Ue=class t{static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*jS);return new t(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new $(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new $(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<VS)throw new $(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new $(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/jS}_compareTo(e){return this.seconds===e.seconds?fe(this.nanoseconds,e.nanoseconds):fe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:t._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Fc(e,t._jsonSchema))return new t(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-VS;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};Ue._jsonSchemaVersion="firestore/timestamp/1.0",Ue._jsonSchema={type:Be("string",Ue._jsonSchemaVersion),seconds:Be("number"),nanoseconds:Be("number")};var Q=class t{static fromTimestamp(e){return new t(e)}static min(){return new t(new Ue(0,0))}static max(){return new t(new Ue(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Tc=-1,Xy=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};Xy.UNKNOWN_ID=-1;function t2(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Q.fromTimestamp(r===1e9?new Ue(n+1,0):new Ue(n,r));return new eo(i,q.empty(),e)}function n2(t){return new eo(t.readTime,t.key,Tc)}var eo=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(Q.min(),q.empty(),Tc)}static max(){return new t(Q.max(),q.empty(),Tc)}};function r2(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=q.comparator(t.documentKey,e.documentKey),n!==0?n:fe(t.largestBatchId,e.largestBatchId))}var i2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",ev=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};async function Ts(t){if(t.code!==N.FAILED_PRECONDITION||t.message!==i2)throw t;U("LocalStore","Unexpectedly lost primary lease")}var O=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&H(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,o=0,s=!1;e.forEach(c=>{++i,c.next(()=>{++o,s&&o===i&&n()},u=>r(u))}),s=!0,o===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let o=e.length,s=new Array(o),c=0;for(let u=0;u<o;u++){let l=u;n(e[l]).next(h=>{s[l]=h,++c,c===o&&r(s)},h=>i(h))}})}static doWhile(e,n){return new t((r,i)=>{let o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}};function o2(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ds(t){return t.name==="IndexedDbTransactionError"}var P_=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>r.writeSequenceNumber(i))}ae(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.ue&&this.ue(n),n}}t.ce=-1;return t})(),O_=-1;function Vc(t){return t==null}function Dc(t){return t===0&&1/t==-1/0}function s2(t){return typeof t=="number"&&Number.isInteger(t)&&!Dc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var C0="";function a2(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=BS(e)),e=c2(t.get(n),e);return BS(e)}function c2(t,e){let n=e,r=t.length;for(let i=0;i<r;i++){let o=t.charAt(i);switch(o){case"\0":n+="";break;case C0:n+="";break;default:n+=o}}return n}function BS(t){return t+C0+""}var u2="remoteDocuments",T0="owner";var D0="mutationQueues";var b0="mutations";var S0="documentMutations",l2="remoteDocumentsV14";var A0="remoteDocumentGlobal";var R0="targets";var N0="targetDocuments";var M0="targetGlobal",x0="collectionParents";var P0="clientMetadata";var O0="bundles";var k0="namedQueries";var d2="indexConfiguration";var h2="indexState";var f2="indexEntries";var L0="documentOverlays";var p2="globals";var m2=[D0,b0,S0,u2,R0,T0,M0,N0,P0,A0,x0,O0,k0],PX=[...m2,L0],g2=[D0,b0,S0,l2,R0,T0,M0,N0,P0,A0,x0,O0,k0,L0],y2=g2,v2=[...y2,d2,h2,f2];var OX=[...v2,p2];function US(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function si(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function F0(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Oe=class t{constructor(e,n){this.comparator=e,this.root=n||jn.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,jn.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,jn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new is(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new is(this.root,e,this.comparator,!1)}getReverseIterator(){return new is(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new is(this.root,e,this.comparator,!0)}},is=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},jn=class t{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new t(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw H(43730,{key:this.key,value:this.value});if(this.right.isRed())throw H(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw H(27949);return e+(this.isRed()?0:1)}};jn.EMPTY=null,jn.RED=!0,jn.BLACK=!1;jn.EMPTY=new class{constructor(){this.size=0}get key(){throw H(57766)}get value(){throw H(16141)}get color(){throw H(16727)}get left(){throw H(29726)}get right(){throw H(36894)}copy(e,n,r,i,o){return this}insert(e,n,r){return new jn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var nt=class t{constructor(e){this.comparator=e,this.data=new Oe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new uh(this.data.getIterator())}getIteratorFrom(e){return new uh(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},uh=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var nn=class t{constructor(e){this.fields=e,e.sort(Ht.comparator)}static empty(){return new t([])}unionWith(e){let n=new nt(Ht.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return us(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var lh=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var ft=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new lh("Invalid base64 string: "+o):o}})(e);return new t(n)}static fromUint8Array(e){let n=(function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o})(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return fe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};ft.EMPTY_BYTE_STRING=new ft("");var _2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function fr(t){if(ve(!!t,39018),typeof t=="string"){let e=0,n=_2.exec(t);if(ve(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ne(t.seconds),nanos:Ne(t.nanos)}}function Ne(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function pr(t){return typeof t=="string"?ft.fromBase64String(t):ft.fromUint8Array(t)}var V0="server_timestamp",j0="__type__",B0="__previous_value__",U0="__local_write_time__";function k_(t){return(t?.mapValue?.fields||{})[j0]?.stringValue===V0}function Uh(t){let e=t.mapValue.fields[B0];return k_(e)?Uh(e):e}function bc(t){let e=fr(t.mapValue.fields[U0].timestampValue);return new Ue(e.seconds,e.nanos)}var tv=class{constructor(e,n,r,i,o,s,c,u,l,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=l,this.isUsingEmulator=h}},dh="(default)",hh=class t{constructor(e,n){this.projectId=e,this.database=n||dh}static empty(){return new t("","")}get isDefaultDatabase(){return this.database===dh}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var L_="__type__",$0="__max__",eh={mapValue:{fields:{__type__:{stringValue:$0}}}},F_="__vector__",ls="value";function ni(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?k_(t)?4:z0(t)?9007199254740991:H0(t)?10:11:H(28295,{value:t})}function Un(t,e){if(t===e)return!0;let n=ni(t);if(n!==ni(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return bc(t).isEqual(bc(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=fr(i.timestampValue),c=fr(o.timestampValue);return s.seconds===c.seconds&&s.nanos===c.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,o){return pr(i.bytesValue).isEqual(pr(o.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,o){return Ne(i.geoPointValue.latitude)===Ne(o.geoPointValue.latitude)&&Ne(i.geoPointValue.longitude)===Ne(o.geoPointValue.longitude)})(t,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return Ne(i.integerValue)===Ne(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Ne(i.doubleValue),c=Ne(o.doubleValue);return s===c?Dc(s)===Dc(c):isNaN(s)&&isNaN(c)}return!1})(t,e);case 9:return us(t.arrayValue.values||[],e.arrayValue.values||[],Un);case 10:case 11:return(function(i,o){let s=i.mapValue.fields||{},c=o.mapValue.fields||{};if(US(s)!==US(c))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(c[u]===void 0||!Un(s[u],c[u])))return!1;return!0})(t,e);default:return H(52216,{left:t})}}function Sc(t,e){return(t.values||[]).find(n=>Un(n,e))!==void 0}function ds(t,e){if(t===e)return 0;let n=ni(t),r=ni(e);if(n!==r)return fe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return fe(t.booleanValue,e.booleanValue);case 2:return(function(o,s){let c=Ne(o.integerValue||o.doubleValue),u=Ne(s.integerValue||s.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1})(t,e);case 3:return $S(t.timestampValue,e.timestampValue);case 4:return $S(bc(t),bc(e));case 5:return Zy(t.stringValue,e.stringValue);case 6:return(function(o,s){let c=pr(o),u=pr(s);return c.compareTo(u)})(t.bytesValue,e.bytesValue);case 7:return(function(o,s){let c=o.split("/"),u=s.split("/");for(let l=0;l<c.length&&l<u.length;l++){let h=fe(c[l],u[l]);if(h!==0)return h}return fe(c.length,u.length)})(t.referenceValue,e.referenceValue);case 8:return(function(o,s){let c=fe(Ne(o.latitude),Ne(s.latitude));return c!==0?c:fe(Ne(o.longitude),Ne(s.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return HS(t.arrayValue,e.arrayValue);case 10:return(function(o,s){let c=o.fields||{},u=s.fields||{},l=c[ls]?.arrayValue,h=u[ls]?.arrayValue,p=fe(l?.values?.length||0,h?.values?.length||0);return p!==0?p:HS(l,h)})(t.mapValue,e.mapValue);case 11:return(function(o,s){if(o===eh.mapValue&&s===eh.mapValue)return 0;if(o===eh.mapValue)return 1;if(s===eh.mapValue)return-1;let c=o.fields||{},u=Object.keys(c),l=s.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let g=Zy(u[p],h[p]);if(g!==0)return g;let y=ds(c[u[p]],l[h[p]]);if(y!==0)return y}return fe(u.length,h.length)})(t.mapValue,e.mapValue);default:throw H(23264,{he:n})}}function $S(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return fe(t,e);let n=fr(t),r=fr(e),i=fe(n.seconds,r.seconds);return i!==0?i:fe(n.nanos,r.nanos)}function HS(t,e){let n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){let o=ds(n[i],r[i]);if(o)return o}return fe(n.length,r.length)}function hs(t){return nv(t)}function nv(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){let r=fr(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return pr(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return q.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",i=!0;for(let o of n.values||[])i?i=!1:r+=",",r+=nv(o);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){let r=Object.keys(n.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${nv(n.fields[s])}`;return i+"}"})(t.mapValue):H(61005,{value:t})}function rh(t){switch(ni(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=Uh(t);return e?16+rh(e):16;case 5:return 2*t.stringValue.length;case 6:return pr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,o)=>i+rh(o),0)})(t.arrayValue);case 10:case 11:return(function(r){let i=0;return si(r.fields,(o,s)=>{i+=o.length+rh(s)}),i})(t.mapValue);default:throw H(13486,{value:t})}}function rv(t){return!!t&&"integerValue"in t}function V_(t){return!!t&&"arrayValue"in t}function zS(t){return!!t&&"nullValue"in t}function qS(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ih(t){return!!t&&"mapValue"in t}function H0(t){return(t?.mapValue?.fields||{})[L_]?.stringValue===F_}function vc(t){if(t.geoPointValue)return{geoPointValue:x({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:x({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return si(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=vc(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=vc(t.arrayValue.values[n]);return e}return x({},t)}function z0(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===$0}var LX={mapValue:{fields:{[L_]:{stringValue:F_},[ls]:{arrayValue:{}}}}};var Nt=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!ih(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=vc(n)}setAll(e){let n=Ht.emptyPath(),r={},i=[];e.forEach((s,c)=>{if(!n.isImmediateParentOf(c)){let u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=c.popLast()}s?r[c.lastSegment()]=vc(s):i.push(c.lastSegment())});let o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){let n=this.field(e.popLast());ih(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Un(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];ih(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){si(n,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new t(vc(this.value))}};function q0(t){let e=[];return si(t.fields,(n,r)=>{let i=new Ht([n]);if(ih(r)){let o=q0(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new nn(e)}var qt=class t{constructor(e,n,r,i,o,s,c){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=c}static newInvalidDocument(e){return new t(e,0,Q.min(),Q.min(),Q.min(),Nt.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,Q.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,Q.min(),Q.min(),Nt.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,Q.min(),Q.min(),Nt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Q.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Nt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Nt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Q.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var fs=class{constructor(e,n){this.position=e,this.inclusive=n}};function GS(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let o=e[i],s=t.position[i];if(o.field.isKeyField()?r=q.comparator(q.fromName(s.referenceValue),n.key):r=ds(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function WS(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Un(t.position[n],e.position[n]))return!1;return!0}var ps=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function E2(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var fh=class{},We=class t extends fh{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new ov(e,n,r):n==="array-contains"?new cv(e,r):n==="in"?new uv(e,r):n==="not-in"?new lv(e,r):n==="array-contains-any"?new dv(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new sv(e,r):new av(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ds(n,this.value)):n!==null&&ni(this.value)===ni(n)&&this.matchesComparison(ds(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return H(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},$n=class t extends fh{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new t(e,n)}matches(e){return G0(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}};function G0(t){return t.op==="and"}function W0(t){return I2(t)&&G0(t)}function I2(t){for(let e of t.filters)if(e instanceof $n)return!1;return!0}function iv(t){if(t instanceof We)return t.field.canonicalString()+t.op.toString()+hs(t.value);if(W0(t))return t.filters.map(e=>iv(e)).join(",");{let e=t.filters.map(n=>iv(n)).join(",");return`${t.op}(${e})`}}function K0(t,e){return t instanceof We?(function(r,i){return i instanceof We&&r.op===i.op&&r.field.isEqual(i.field)&&Un(r.value,i.value)})(t,e):t instanceof $n?(function(r,i){return i instanceof $n&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,c)=>o&&K0(s,i.filters[c]),!0):!1})(t,e):void H(19439)}function Q0(t){return t instanceof We?(function(n){return`${n.field.canonicalString()} ${n.op} ${hs(n.value)}`})(t):t instanceof $n?(function(n){return n.op.toString()+" {"+n.getFilters().map(Q0).join(" ,")+"}"})(t):"Filter"}var ov=class extends We{constructor(e,n,r){super(e,n,r),this.key=q.fromName(r.referenceValue)}matches(e){let n=q.comparator(e.key,this.key);return this.matchesComparison(n)}},sv=class extends We{constructor(e,n){super(e,"in",n),this.keys=Y0("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},av=class extends We{constructor(e,n){super(e,"not-in",n),this.keys=Y0("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function Y0(t,e){return(e.arrayValue?.values||[]).map(n=>q.fromName(n.referenceValue))}var cv=class extends We{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return V_(n)&&Sc(n.arrayValue,this.value)}},uv=class extends We{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&Sc(this.value.arrayValue,n)}},lv=class extends We{constructor(e,n){super(e,"not-in",n)}matches(e){if(Sc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Sc(this.value.arrayValue,n)}},dv=class extends We{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!V_(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Sc(this.value.arrayValue,r))}};var hv=class{constructor(e,n=null,r=[],i=[],o=null,s=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=c,this.Te=null}};function KS(t,e=null,n=[],r=[],i=null,o=null,s=null){return new hv(t,e,n,r,i,o,s)}function j_(t){let e=ee(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>iv(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>(function(o){return o.field.canonicalString()+o.dir})(r)).join(","),Vc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>hs(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>hs(r)).join(",")),e.Te=n}return e.Te}function B_(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!E2(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!K0(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!WS(t.startAt,e.startAt)&&WS(t.endAt,e.endAt)}function fv(t){return q.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var ms=class{constructor(e,n=null,r=[],i=[],o=null,s="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=c,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}};function w2(t,e,n,r,i,o,s,c){return new ms(t,e,n,r,i,o,s,c)}function $h(t){return new ms(t)}function QS(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function C2(t){return t.collectionGroup!==null}function _c(t){let e=ee(t);if(e.Ie===null){e.Ie=[];let n=new Set;for(let o of e.explicitOrderBy)e.Ie.push(o),n.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let c=new nt(Ht.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(c=c.add(l.field))})}),c})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new ps(o,r))}),n.has(Ht.keyField().canonicalString())||e.Ie.push(new ps(Ht.keyField(),r))}return e.Ie}function Bn(t){let e=ee(t);return e.Ee||(e.Ee=T2(e,_c(t))),e.Ee}function T2(t,e){if(t.limitType==="F")return KS(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new ps(i.field,o)});let n=t.endAt?new fs(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new fs(t.startAt.position,t.startAt.inclusive):null;return KS(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function pv(t,e,n){return new ms(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Hh(t,e){return B_(Bn(t),Bn(e))&&t.limitType===e.limitType}function J0(t){return`${j_(Bn(t))}|lt:${t.limitType}`}function ts(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>Q0(i)).join(", ")}]`),Vc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>hs(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>hs(i)).join(",")),`Target(${r})`})(Bn(t))}; limitType=${t.limitType})`}function zh(t,e){return e.isFoundDocument()&&(function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):q.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(t,e)&&(function(r,i){for(let o of _c(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(t,e)&&(function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0})(t,e)&&(function(r,i){return!(r.startAt&&!(function(s,c,u){let l=GS(s,c,u);return s.inclusive?l<=0:l<0})(r.startAt,_c(r),i)||r.endAt&&!(function(s,c,u){let l=GS(s,c,u);return s.inclusive?l>=0:l>0})(r.endAt,_c(r),i))})(t,e)}function D2(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Z0(t){return(e,n)=>{let r=!1;for(let i of _c(t)){let o=b2(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function b2(t,e,n){let r=t.field.isKeyField()?q.comparator(e.key,n.key):(function(o,s,c){let u=s.data.field(o),l=c.data.field(o);return u!==null&&l!==null?ds(u,l):H(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return H(19790,{direction:t.dir})}}var mr=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){si(this.inner,(n,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return F0(this.inner)}size(){return this.innerSize}};var S2=new Oe(q.comparator);function gr(){return S2}var X0=new Oe(q.comparator);function gc(...t){let e=X0;for(let n of t)e=e.insert(n.key,n);return e}function eA(t){let e=X0;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Ji(){return Ec()}function tA(){return Ec()}function Ec(){return new mr(t=>t.toString(),(t,e)=>t.isEqual(e))}var A2=new Oe(q.comparator),R2=new nt(q.comparator);function pe(...t){let e=R2;for(let n of t)e=e.add(n);return e}var N2=new nt(fe);function M2(){return N2}function U_(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Dc(e)?"-0":e}}function nA(t){return{integerValue:""+t}}function x2(t,e){return s2(e)?nA(e):U_(t,e)}var gs=class{constructor(){this._=void 0}};function P2(t,e,n){return t instanceof to?(function(i,o){let s={fields:{[j0]:{stringValue:V0},[U0]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&k_(o)&&(o=Uh(o)),o&&(s.fields[B0]=o),{mapValue:s}})(n,e):t instanceof no?iA(t,e):t instanceof ro?oA(t,e):(function(i,o){let s=rA(i,o),c=YS(s)+YS(i.Ae);return rv(s)&&rv(i.Ae)?nA(c):U_(i.serializer,c)})(t,e)}function O2(t,e,n){return t instanceof no?iA(t,e):t instanceof ro?oA(t,e):n}function rA(t,e){return t instanceof ys?(function(r){return rv(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}var to=class extends gs{},no=class extends gs{constructor(e){super(),this.elements=e}};function iA(t,e){let n=sA(e);for(let r of t.elements)n.some(i=>Un(i,r))||n.push(r);return{arrayValue:{values:n}}}var ro=class extends gs{constructor(e){super(),this.elements=e}};function oA(t,e){let n=sA(e);for(let r of t.elements)n=n.filter(i=>!Un(i,r));return{arrayValue:{values:n}}}var ys=class extends gs{constructor(e,n){super(),this.serializer=e,this.Ae=n}};function YS(t){return Ne(t.integerValue||t.doubleValue)}function sA(t){return V_(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var mv=class{constructor(e,n){this.field=e,this.transform=n}};function k2(t,e){return t.field.isEqual(e.field)&&(function(r,i){return r instanceof no&&i instanceof no||r instanceof ro&&i instanceof ro?us(r.elements,i.elements,Un):r instanceof ys&&i instanceof ys?Un(r.Ae,i.Ae):r instanceof to&&i instanceof to})(t.transform,e.transform)}var gv=class{constructor(e,n){this.version=e,this.transformResults=n}},tn=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function oh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var vs=class{};function aA(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Ac(t.key,tn.none()):new io(t.key,t.data,tn.none());{let n=t.data,r=Nt.empty(),i=new nt(Ht.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Hn(t.key,r,new nn(i.toArray()),tn.none())}}function L2(t,e,n){t instanceof io?(function(i,o,s){let c=i.value.clone(),u=ZS(i.fieldTransforms,o,s.transformResults);c.setAll(u),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()})(t,e,n):t instanceof Hn?(function(i,o,s){if(!oh(i.precondition,o))return void o.convertToUnknownDocument(s.version);let c=ZS(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(cA(i)),u.setAll(c),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()})(t,e,n):(function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,n)}function Ic(t,e,n,r){return t instanceof io?(function(o,s,c,u){if(!oh(o.precondition,s))return c;let l=o.value.clone(),h=XS(o.fieldTransforms,u,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null})(t,e,n,r):t instanceof Hn?(function(o,s,c,u){if(!oh(o.precondition,s))return c;let l=XS(o.fieldTransforms,u,s),h=s.data;return h.setAll(cA(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))})(t,e,n,r):(function(o,s,c){return oh(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):c})(t,e,n)}function F2(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),o=rA(r.transform,i||null);o!=null&&(n===null&&(n=Nt.empty()),n.set(r.field,o))}return n||null}function JS(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&us(r,i,(o,s)=>k2(o,s))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var io=class extends vs{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Hn=class extends vs{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function cA(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function ZS(t,e,n){let r=new Map;ve(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){let o=t[i],s=o.transform,c=e.data.field(o.field);r.set(o.field,O2(s,c,n[i]))}return r}function XS(t,e,n){let r=new Map;for(let i of t){let o=i.transform,s=n.data.field(i.field);r.set(i.field,P2(o,s,e))}return r}var Ac=class extends vs{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},ph=class extends vs{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var yv=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&L2(o,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ic(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=Ic(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=tA();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,c=this.applyToLocalView(s,o.mutatedFields);c=n.has(i.key)?null:c;let u=aA(s,c);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(Q.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),pe())}isEqual(e){return this.batchId===e.batchId&&us(this.mutations,e.mutations,(n,r)=>JS(n,r))&&us(this.baseMutations,e.baseMutations,(n,r)=>JS(n,r))}},vv=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){ve(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return A2})(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)}};var _v=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Ev=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var Ve,ye;function uA(t){switch(t){case N.OK:return H(64938);case N.CANCELLED:case N.UNKNOWN:case N.DEADLINE_EXCEEDED:case N.RESOURCE_EXHAUSTED:case N.INTERNAL:case N.UNAVAILABLE:case N.UNAUTHENTICATED:return!1;case N.INVALID_ARGUMENT:case N.NOT_FOUND:case N.ALREADY_EXISTS:case N.PERMISSION_DENIED:case N.FAILED_PRECONDITION:case N.ABORTED:case N.OUT_OF_RANGE:case N.UNIMPLEMENTED:case N.DATA_LOSS:return!0;default:return H(15467,{code:t})}}function lA(t){if(t===void 0)return hr("GRPC error has no .code"),N.UNKNOWN;switch(t){case Ve.OK:return N.OK;case Ve.CANCELLED:return N.CANCELLED;case Ve.UNKNOWN:return N.UNKNOWN;case Ve.DEADLINE_EXCEEDED:return N.DEADLINE_EXCEEDED;case Ve.RESOURCE_EXHAUSTED:return N.RESOURCE_EXHAUSTED;case Ve.INTERNAL:return N.INTERNAL;case Ve.UNAVAILABLE:return N.UNAVAILABLE;case Ve.UNAUTHENTICATED:return N.UNAUTHENTICATED;case Ve.INVALID_ARGUMENT:return N.INVALID_ARGUMENT;case Ve.NOT_FOUND:return N.NOT_FOUND;case Ve.ALREADY_EXISTS:return N.ALREADY_EXISTS;case Ve.PERMISSION_DENIED:return N.PERMISSION_DENIED;case Ve.FAILED_PRECONDITION:return N.FAILED_PRECONDITION;case Ve.ABORTED:return N.ABORTED;case Ve.OUT_OF_RANGE:return N.OUT_OF_RANGE;case Ve.UNIMPLEMENTED:return N.UNIMPLEMENTED;case Ve.DATA_LOSS:return N.DATA_LOSS;default:return H(39323,{code:t})}}(ye=Ve||(Ve={}))[ye.OK=0]="OK",ye[ye.CANCELLED=1]="CANCELLED",ye[ye.UNKNOWN=2]="UNKNOWN",ye[ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ye[ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ye[ye.NOT_FOUND=5]="NOT_FOUND",ye[ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",ye[ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",ye[ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",ye[ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ye[ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ye[ye.ABORTED=10]="ABORTED",ye[ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",ye[ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",ye[ye.INTERNAL=13]="INTERNAL",ye[ye.UNAVAILABLE=14]="UNAVAILABLE",ye[ye.DATA_LOSS=15]="DATA_LOSS";var V2=null;function j2(){return new TextEncoder}var B2=new cr([4294967295,4294967295],0);function e0(t){let e=j2().encode(t),n=new Ly;return n.update(e),new Uint8Array(n.digest())}function t0(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new cr([n,r],0),new cr([i,o],0)]}var Iv=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Zi(`Invalid padding: ${n}`);if(r<0)throw new Zi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Zi(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Zi(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=cr.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(cr.fromNumber(r)));return i.compare(B2)===1&&(i=new cr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;let n=e0(e),[r,i]=t0(n);for(let o=0;o<this.hashCount;o++){let s=this.ye(r,i,o);if(!this.we(s))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new t(o,i,n);return r.forEach(c=>s.insert(c)),s}insert(e){if(this.ge===0)return;let n=e0(e),[r,i]=t0(n);for(let o=0;o<this.hashCount;o++){let s=this.ye(r,i,o);this.Se(s)}}Se(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},Zi=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var mh=class t{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,Rc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(Q.min(),i,new Oe(fe),gr(),pe())}},Rc=class t{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,pe(),pe(),pe())}};var os=class{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}},gh=class{constructor(e,n){this.targetId=e,this.Ce=n}},yh=class{constructor(e,n,r=ft.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},vh=class{constructor(){this.ve=0,this.Fe=n0(),this.Me=ft.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=pe(),n=pe(),r=pe();return this.Fe.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:H(38017,{changeType:o})}}),new Rc(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=n0()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ve(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}},wv=class{constructor(e){this.Ge=e,this.ze=new Map,this.je=gr(),this.Je=th(),this.He=th(),this.Ye=new Oe(fe)}Ze(e){for(let n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(let n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{let r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:H(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,i)=>{this.rt(i)&&n(i)})}st(e){let n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){let o=i.target;if(fv(o))if(r===0){let s=new q(o.path);this.et(n,s,qt.newNoDocument(s,Q.min()))}else ve(r===1,20013,{expectedCount:r});else{let s=this._t(n);if(s!==r){let c=this.ut(e),u=c?this.ct(c,e,s):1;if(u!==0){this.it(n);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,l)}V2?.lt((function(h,p,g,y,S){let R={localCacheCount:h,existenceFilterCount:p.count,databaseId:g.database,projectId:g.projectId},A=p.unchangedNames;return A&&(R.bloomFilter={applied:S===0,hashCount:A?.hashCount??0,bitmapLength:A?.bits?.bitmap?.length??0,padding:A?.bits?.padding??0,mightContain:L=>y?.mightContain(L)??!1}),R})(s,e.Ce,this.Ge.ht(),c,u))}}}}ut(e){let n=e.Ce.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n,s,c;try{s=pr(r).toUint8Array()}catch(u){if(u instanceof lh)return cs("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new Iv(s,i,o)}catch(u){return cs(u instanceof Zi?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.ge===0?null:c}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){let r=this.Ge.getRemoteKeysForTarget(n),i=0;return r.forEach(o=>{let s=this.Ge.ht(),c=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(c)||(this.et(n,o,null),i++)}),i}Tt(e){let n=new Map;this.ze.forEach((o,s)=>{let c=this.ot(s);if(c){if(o.current&&fv(c.target)){let u=new q(c.target.path);this.It(u).has(s)||this.Et(s,u)||this.et(s,u,qt.newNoDocument(u,e))}o.Be&&(n.set(s,o.ke()),o.qe())}});let r=pe();this.He.forEach((o,s)=>{let c=!0;s.forEachWhile(u=>{let l=this.ot(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(o))}),this.je.forEach((o,s)=>s.setReadTime(e));let i=new mh(e,n,this.Ye,this.je,r);return this.je=gr(),this.Je=th(),this.He=th(),this.Ye=new Oe(fe),i}Xe(e,n){if(!this.rt(e))return;let r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;let i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){let n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new vh,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new nt(fe),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new nt(fe),this.Je=this.Je.insert(e,n)),n}rt(e){let n=this.ot(e)!==null;return n||U("WatchChangeAggregator","Detected inactive target",e),n}ot(e){let n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new vh),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}};function th(){return new Oe(q.comparator)}function n0(){return new Oe(q.comparator)}var U2={asc:"ASCENDING",desc:"DESCENDING"},$2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},H2={and:"AND",or:"OR"},Cv=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function Tv(t,e){return t.useProto3Json||Vc(e)?e:{value:e}}function _h(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function dA(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function z2(t,e){return _h(t,e.toTimestamp())}function zt(t){return ve(!!t,49232),Q.fromTimestamp((function(n){let r=fr(n);return new Ue(r.seconds,r.nanos)})(t))}function $_(t,e){return Dv(t,e).canonicalString()}function Dv(t,e){let n=(function(i){return new Me(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?n:n.child(e)}function hA(t){let e=Me.fromString(t);return ve(vA(e),10190,{key:e.toString()}),e}function Eh(t,e){return $_(t.databaseId,e.path)}function wc(t,e){let n=hA(e);if(n.get(1)!==t.databaseId.projectId)throw new $(N.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new $(N.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new q(pA(n))}function fA(t,e){return $_(t.databaseId,e)}function q2(t){let e=hA(t);return e.length===4?Me.emptyPath():pA(e)}function bv(t){return new Me(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function pA(t){return ve(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function r0(t,e,n){return{name:Eh(t,e),fields:n.value.mapValue.fields}}function G2(t,e){return"found"in e?(function(r,i){ve(!!i.found,43571),i.found.name,i.found.updateTime;let o=wc(r,i.found.name),s=zt(i.found.updateTime),c=i.found.createTime?zt(i.found.createTime):Q.min(),u=new Nt({mapValue:{fields:i.found.fields}});return qt.newFoundDocument(o,s,c,u)})(t,e):"missing"in e?(function(r,i){ve(!!i.missing,3894),ve(!!i.readTime,22933);let o=wc(r,i.missing),s=zt(i.readTime);return qt.newNoDocument(o,s)})(t,e):H(7234,{result:e})}function W2(t,e){let n;if("targetChange"in e){e.targetChange;let r=(function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:H(39313,{state:l})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(l,h){return l.useProto3Json?(ve(h===void 0||typeof h=="string",58123),ft.fromBase64String(h||"")):(ve(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),ft.fromUint8Array(h||new Uint8Array))})(t,e.targetChange.resumeToken),s=e.targetChange.cause,c=s&&(function(l){let h=l.code===void 0?N.UNKNOWN:lA(l.code);return new $(h,l.message||"")})(s);n=new yh(r,i,o,c||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=wc(t,r.document.name),o=zt(r.document.updateTime),s=r.document.createTime?zt(r.document.createTime):Q.min(),c=new Nt({mapValue:{fields:r.document.fields}}),u=qt.newFoundDocument(i,o,s,c),l=r.targetIds||[],h=r.removedTargetIds||[];n=new os(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=wc(t,r.document),o=r.readTime?zt(r.readTime):Q.min(),s=qt.newNoDocument(i,o),c=r.removedTargetIds||[];n=new os([],c,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=wc(t,r.document),o=r.removedTargetIds||[];n=new os([],o,i,null)}else{if(!("filter"in e))return H(11601,{Rt:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new Ev(i,o),c=r.targetId;n=new gh(c,s)}}return n}function mA(t,e){let n;if(e instanceof io)n={update:r0(t,e.key,e.value)};else if(e instanceof Ac)n={delete:Eh(t,e.key)};else if(e instanceof Hn)n={update:r0(t,e.key,e.data),updateMask:nj(e.fieldMask)};else{if(!(e instanceof ph))return H(16599,{Vt:e.type});n={verify:Eh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>(function(o,s){let c=s.transform;if(c instanceof to)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof no)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof ro)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof ys)return{fieldPath:s.field.canonicalString(),increment:c.Ae};throw H(20930,{transform:s.transform})})(0,r))),e.precondition.isNone||(n.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:z2(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:H(27497)})(t,e.precondition)),n}function K2(t,e){return t&&t.length>0?(ve(e!==void 0,14353),t.map(n=>(function(i,o){let s=i.updateTime?zt(i.updateTime):zt(o);return s.isEqual(Q.min())&&(s=zt(o)),new gv(s,i.transformResults||[])})(n,e))):[]}function Q2(t,e){return{documents:[fA(t,e.path)]}}function Y2(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=fA(t,i);let o=(function(l){if(l.length!==0)return yA($n.create(l,"and"))})(e.filters);o&&(n.structuredQuery.where=o);let s=(function(l){if(l.length!==0)return l.map(h=>(function(g){return{field:ns(g.field),direction:X2(g.dir)}})(h))})(e.orderBy);s&&(n.structuredQuery.orderBy=s);let c=Tv(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=(function(l){return{before:l.inclusive,values:l.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(l){return{before:!l.inclusive,values:l.position}})(e.endAt)),{ft:n,parent:i}}function J2(t){let e=q2(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){ve(r===1,65062);let h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];n.where&&(o=(function(p){let g=gA(p);return g instanceof $n&&W0(g)?g.getFilters():[g]})(n.where));let s=[];n.orderBy&&(s=(function(p){return p.map(g=>(function(S){return new ps(rs(S.field),(function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(S.direction))})(g))})(n.orderBy));let c=null;n.limit&&(c=(function(p){let g;return g=typeof p=="object"?p.value:p,Vc(g)?null:g})(n.limit));let u=null;n.startAt&&(u=(function(p){let g=!!p.before,y=p.values||[];return new fs(y,g)})(n.startAt));let l=null;return n.endAt&&(l=(function(p){let g=!p.before,y=p.values||[];return new fs(y,g)})(n.endAt)),w2(e,i,s,o,c,"F",u,l)}function Z2(t,e){let n=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return H(28987,{purpose:i})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function gA(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=rs(n.unaryFilter.field);return We.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=rs(n.unaryFilter.field);return We.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=rs(n.unaryFilter.field);return We.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=rs(n.unaryFilter.field);return We.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return H(61313);default:return H(60726)}})(t):t.fieldFilter!==void 0?(function(n){return We.create(rs(n.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return H(58110);default:return H(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return $n.create(n.compositeFilter.filters.map(r=>gA(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return H(1026)}})(n.compositeFilter.op))})(t):H(30097,{filter:t})}function X2(t){return U2[t]}function ej(t){return $2[t]}function tj(t){return H2[t]}function ns(t){return{fieldPath:t.canonicalString()}}function rs(t){return Ht.fromServerFormat(t.fieldPath)}function yA(t){return t instanceof We?(function(n){if(n.op==="=="){if(qS(n.value))return{unaryFilter:{field:ns(n.field),op:"IS_NAN"}};if(zS(n.value))return{unaryFilter:{field:ns(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(qS(n.value))return{unaryFilter:{field:ns(n.field),op:"IS_NOT_NAN"}};if(zS(n.value))return{unaryFilter:{field:ns(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ns(n.field),op:ej(n.op),value:n.value}}})(t):t instanceof $n?(function(n){let r=n.getFilters().map(i=>yA(i));return r.length===1?r[0]:{compositeFilter:{op:tj(n.op),filters:r}}})(t):H(54877,{filter:t})}function nj(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function vA(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var Nc=class t{constructor(e,n,r,i,o=Q.min(),s=Q.min(),c=ft.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Sv=class{constructor(e){this.yt=e}};function rj(t){let e=J2({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?pv(e,e.limit,"L"):e}var Ih=class{constructor(){}Dt(e,n){this.Ct(e,n),n.vt()}Ct(e,n){if("nullValue"in e)this.Ft(n,5);else if("booleanValue"in e)this.Ft(n,10),n.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(n,15),n.Mt(Ne(e.integerValue));else if("doubleValue"in e){let r=Ne(e.doubleValue);isNaN(r)?this.Ft(n,13):(this.Ft(n,15),Dc(r)?n.Mt(0):n.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(n,20),typeof r=="string"&&(r=fr(r)),n.xt(`${r.seconds||""}`),n.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,n),this.Nt(n);else if("bytesValue"in e)this.Ft(n,30),n.Bt(pr(e.bytesValue)),this.Nt(n);else if("referenceValue"in e)this.Lt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ft(n,45),n.Mt(r.latitude||0),n.Mt(r.longitude||0)}else"mapValue"in e?z0(e)?this.Ft(n,Number.MAX_SAFE_INTEGER):H0(e)?this.kt(e.mapValue,n):(this.qt(e.mapValue,n),this.Nt(n)):"arrayValue"in e?(this.Qt(e.arrayValue,n),this.Nt(n)):H(19022,{$t:e})}Ot(e,n){this.Ft(n,25),this.Ut(e,n)}Ut(e,n){n.xt(e)}qt(e,n){let r=e.fields||{};this.Ft(n,55);for(let i of Object.keys(r))this.Ot(i,n),this.Ct(r[i],n)}kt(e,n){let r=e.fields||{};this.Ft(n,53);let i=ls,o=r[i].arrayValue?.values?.length||0;this.Ft(n,15),n.Mt(Ne(o)),this.Ot(i,n),this.Ct(r[i],n)}Qt(e,n){let r=e.values||[];this.Ft(n,50);for(let i of r)this.Ct(i,n)}Lt(e,n){this.Ft(n,37),q.fromName(e).path.forEach(r=>{this.Ft(n,60),this.Ut(r,n)})}Ft(e,n){e.Mt(n)}Nt(e){e.Mt(2)}};Ih.Kt=new Ih;var Av=class{constructor(){this.Cn=new Rv}addToCollectionParentIndex(e,n){return this.Cn.add(n),O.resolve()}getCollectionParents(e,n){return O.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return O.resolve()}deleteFieldIndex(e,n){return O.resolve()}deleteAllFieldIndexes(e){return O.resolve()}createTargetIndexes(e,n){return O.resolve()}getDocumentsMatchingTarget(e,n){return O.resolve(null)}getIndexType(e,n){return O.resolve(0)}getFieldIndexes(e,n){return O.resolve([])}getNextCollectionGroupToUpdate(e){return O.resolve(null)}getMinOffset(e,n){return O.resolve(eo.min())}getMinOffsetFromCollectionGroup(e,n){return O.resolve(eo.min())}updateCollectionGroup(e,n,r){return O.resolve()}updateIndexEntries(e,n){return O.resolve()}},Rv=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new nt(Me.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new nt(Me.comparator)).toArray()}};var FX=new Uint8Array(0);var i0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},_A=41943040,en=class t{static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}};en.DEFAULT_COLLECTION_PERCENTILE=10,en.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,en.DEFAULT=new en(_A,en.DEFAULT_COLLECTION_PERCENTILE,en.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),en.DISABLED=new en(-1,0,0);var Mc=class t{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new t(0)}static cr(){return new t(-1)}};var o0="LruGarbageCollector",ij=1048576;function s0([t,e],[n,r]){let i=fe(t,n);return i===0?fe(e,r):i}var Nv=class{constructor(e){this.Ir=e,this.buffer=new nt(s0),this.Er=0}dr(){return++this.Er}Ar(e){let n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{let r=this.buffer.last();s0(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}},Mv=class{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){U(o0,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ds(n)?U(o0,"Ignoring IndexedDB error during garbage collection: ",n):await Ts(n)}await this.Vr(3e5)})}},xv=class{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return O.resolve(P_.ce);let r=new Nv(n);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(U("LruGarbageCollector","Garbage collection skipped; disabled"),O.resolve(i0)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(U("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),i0):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,o,s,c,u,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(U("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,c=Date.now(),this.removeTargets(e,r,n))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),es()<=he.DEBUG&&U("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(c-s)+`ms
	Removed ${o} targets in `+(u-c)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-h}ms`),O.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function oj(t,e){return new xv(t,e)}var Pv=class{constructor(){this.changes=new mr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,qt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?O.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Ov=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var kv=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Ic(r.mutation,i,nn.empty(),Ue.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,pe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=pe()){let i=Ji();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=gc();return o.forEach((c,u)=>{s=s.insert(c,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){let r=Ji();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,pe()))}populateOverlays(e,n,r){let i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,c)=>{n.set(s,c)})})}computeViews(e,n,r,i){let o=gr(),s=Ec(),c=(function(){return Ec()})();return n.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof Hn)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),Ic(h.mutation,l,h.mutation.getFieldMask(),Ue.now())):s.set(l.key,nn.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,h)=>s.set(l,h)),n.forEach((l,h)=>c.set(l,new Ov(h,s.get(l)??null))),c))}recalculateAndSaveOverlays(e,n){let r=Ec(),i=new Oe((s,c)=>s-c),o=pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(let c of s)c.keys().forEach(u=>{let l=n.get(u);if(l===null)return;let h=r.get(u)||nn.empty();h=c.applyToLocalView(l,h),r.set(u,h);let p=(i.get(c.batchId)||pe()).add(u);i=i.insert(c.batchId,p)})}).next(()=>{let s=[],c=i.getReverseIterator();for(;c.hasNext();){let u=c.getNext(),l=u.key,h=u.value,p=tA();h.forEach(g=>{if(!o.has(g)){let y=aA(n.get(g),r.get(g));y!==null&&p.set(g,y),o=o.add(g)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return O.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return(function(s){return q.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):C2(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):O.resolve(Ji()),c=Tc,u=o;return s.next(l=>O.forEach(l,(h,p)=>(c<p.largestBatchId&&(c=p.largestBatchId),o.get(h)?O.resolve():this.remoteDocumentCache.getEntry(e,h).next(g=>{u=u.insert(h,g)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,pe())).next(h=>({batchId:c,changes:eA(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new q(n)).next(r=>{let i=gc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let o=n.collectionGroup,s=gc();return this.indexManager.getCollectionParents(e,o).next(c=>O.forEach(c,u=>{let l=(function(p,g){return new ms(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(n,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,g)=>{s=s.insert(p,g)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((u,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,qt.newInvalidDocument(h)))});let c=gc();return s.forEach((u,l)=>{let h=o.get(u);h!==void 0&&Ic(h.mutation,l,nn.empty(),Ue.now()),zh(n,l)&&(c=c.insert(u,l))}),c})}};var Lv=class{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return O.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(i){return{id:i.id,version:i.version,createTime:zt(i.createTime)}})(n)),O.resolve()}getNamedQuery(e,n){return O.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(i){return{name:i.name,query:rj(i.bundledQuery),readTime:zt(i.readTime)}})(n)),O.resolve()}};var Fv=class{constructor(){this.overlays=new Oe(q.comparator),this.qr=new Map}getOverlay(e,n){return O.resolve(this.overlays.get(n))}getOverlays(e,n){let r=Ji();return O.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.St(e,n,o)}),O.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.qr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.qr.delete(r)),O.resolve()}getOverlaysForCollection(e,n,r){let i=Ji(),o=n.length+1,s=new q(n.child("")),c=this.overlays.getIteratorFrom(s);for(;c.hasNext();){let u=c.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return O.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new Oe((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=Ji(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let c=Ji(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>c.set(l,h)),!(c.size()>=i)););return O.resolve(c)}St(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new _v(n,r));let o=this.qr.get(n);o===void 0&&(o=pe(),this.qr.set(n,o)),this.qr.set(n,o.add(r.key))}};var Vv=class{constructor(){this.sessionToken=ft.EMPTY_BYTE_STRING}getSessionToken(e){return O.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,O.resolve()}};var xc=class{constructor(){this.Qr=new nt(je.$r),this.Ur=new nt(je.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){let r=new je(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new je(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){let n=new q(new Me([])),r=new je(n,e),i=new je(n,e+1),o=[];return this.Ur.forEachInRange([r,i],s=>{this.Gr(s),o.push(s.key)}),o}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){let n=new q(new Me([])),r=new je(n,e),i=new je(n,e+1),o=pe();return this.Ur.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let n=new je(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},je=class{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return q.comparator(e.key,n.key)||fe(e.Yr,n.Yr)}static Kr(e,n){return fe(e.Yr,n.Yr)||q.comparator(e.key,n.key)}};var jv=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new nt(je.$r)}checkEmpty(e){return O.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new yv(o,n,r,i);this.mutationQueue.push(s);for(let c of i)this.Zr=this.Zr.add(new je(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return O.resolve(s)}lookupMutationBatch(e,n){return O.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.ei(r),o=i<0?0:i;return O.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return O.resolve(this.mutationQueue.length===0?O_:this.tr-1)}getAllMutationBatches(e){return O.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new je(n,0),i=new je(n,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([r,i],s=>{let c=this.Xr(s.Yr);o.push(c)}),O.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new nt(fe);return n.forEach(i=>{let o=new je(i,0),s=new je(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,s],c=>{r=r.add(c.Yr)})}),O.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=r;q.isDocumentKey(o)||(o=o.child(""));let s=new je(new q(o),0),c=new nt(fe);return this.Zr.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(c=c.add(u.Yr)),!0)},s),O.resolve(this.ti(c))}ti(e){let n=[];return e.forEach(r=>{let i=this.Xr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){ve(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return O.forEach(n.mutations,i=>{let o=new je(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){let r=new je(n,0),i=this.Zr.firstAfterOrEqual(r);return O.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,O.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){let n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var Bv=class{constructor(e){this.ri=e,this.docs=(function(){return new Oe(q.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return O.resolve(r?r.document.mutableCopy():qt.newInvalidDocument(n))}getEntries(e,n){let r=gr();return n.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():qt.newInvalidDocument(i))}),O.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=gr(),s=n.path,c=new q(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||r2(n2(h),r)<=0||(i.has(h.key)||zh(n,h))&&(o=o.insert(h.key,h.mutableCopy()))}return O.resolve(o)}getAllFromCollectionGroup(e,n,r,i){H(9500)}ii(e,n){return O.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Uv(this)}getSize(e){return O.resolve(this.size)}},Uv=class extends Pv{constructor(e){super(),this.Nr=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),O.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}};var $v=class{constructor(e){this.persistence=e,this.si=new mr(n=>j_(n),B_),this.lastRemoteSnapshotVersion=Q.min(),this.highestTargetId=0,this.oi=0,this._i=new xc,this.targetCount=0,this.ai=Mc.ur()}forEachTarget(e,n){return this.si.forEach((r,i)=>n(i)),O.resolve()}getLastRemoteSnapshotVersion(e){return O.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return O.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),O.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),O.resolve()}Pr(e){this.si.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.ai=new Mc(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,O.resolve()}updateTargetData(e,n){return this.Pr(n),O.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,O.resolve()}removeTargets(e,n,r){let i=0,o=[];return this.si.forEach((s,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.si.delete(s),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),O.waitFor(o).next(()=>i)}getTargetCount(e){return O.resolve(this.targetCount)}getTargetData(e,n){let r=this.si.get(n)||null;return O.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),O.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);let i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),O.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),O.resolve()}getMatchingKeysForTargetId(e,n){let r=this._i.Hr(n);return O.resolve(r)}containsKey(e,n){return O.resolve(this._i.containsKey(n))}};var wh=class{constructor(e,n){this.ui={},this.overlays={},this.ci=new P_(0),this.li=!1,this.li=!0,this.hi=new Vv,this.referenceDelegate=e(this),this.Pi=new $v(this),this.indexManager=new Av,this.remoteDocumentCache=(function(i){return new Bv(i)})(r=>this.referenceDelegate.Ti(r)),this.serializer=new Sv(n),this.Ii=new Lv(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Fv,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new jv(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){U("MemoryPersistence","Starting transaction:",e);let i=new Hv(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ai(e,n){return O.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}},Hv=class extends ev{constructor(e){super(),this.currentSequenceNumber=e}},zv=class t{constructor(e){this.persistence=e,this.Ri=new xc,this.Vi=null}static mi(e){return new t(e)}get fi(){if(this.Vi)return this.Vi;throw H(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),O.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),O.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),O.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(i=>this.fi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.fi.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return O.forEach(this.fi,r=>{let i=q.fromPath(r);return this.gi(e,i).next(o=>{o||n.removeEntry(i,Q.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return O.or([()=>O.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}},Ch=class t{constructor(e,n){this.persistence=e,this.pi=new mr(r=>a2(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=oj(this,n)}static mi(e,n){return new t(e,n)}Ei(){}di(e){return O.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){let n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return O.forEach(this.pi,(r,i)=>this.br(e,r,i).next(o=>o?O.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ii(e,s=>this.br(e,s,n).next(c=>{c||(r++,o.removeEntry(s,Q.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),O.resolve()}removeTarget(e,n){let r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),O.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),O.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),O.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=rh(e.data.value)),n}br(e,n,r){return O.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{let i=this.pi.get(n);return O.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var qv=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=pe(),i=pe();for(let o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new t(e,n.fromCache,r,i)}};var Gv=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Wv=class{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return wb()?8:o2(et())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){let o={result:null};return this.ys(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ws(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new Gv;return this.Ss(e,n,s).next(c=>{if(o.result=c,this.Vs)return this.bs(e,n,s,c.size)})}).next(()=>o.result)}bs(e,n,r,i){return r.documentReadCount<this.fs?(es()<=he.DEBUG&&U("QueryEngine","SDK will not create cache indexes for query:",ts(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),O.resolve()):(es()<=he.DEBUG&&U("QueryEngine","Query:",ts(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(es()<=he.DEBUG&&U("QueryEngine","The SDK decides to create cache indexes for query:",ts(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Bn(n))):O.resolve())}ys(e,n){if(QS(n))return O.resolve(null);let r=Bn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=pv(n,null,"F"),r=Bn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=pe(...o);return this.ps.getDocuments(e,s).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.Ds(n,c);return this.Cs(n,l,s,u.readTime)?this.ys(e,pv(n,null,"F")):this.vs(e,l,n,u)}))})))}ws(e,n,r,i){return QS(n)||i.isEqual(Q.min())?O.resolve(null):this.ps.getDocuments(e,r).next(o=>{let s=this.Ds(n,o);return this.Cs(n,s,r,i)?O.resolve(null):(es()<=he.DEBUG&&U("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ts(n)),this.vs(e,s,n,t2(i,Tc)).next(c=>c))})}Ds(e,n){let r=new nt(Z0(e));return n.forEach((i,o)=>{zh(e,o)&&(r=r.add(o))}),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ss(e,n,r){return es()<=he.DEBUG&&U("QueryEngine","Using full collection scan to execute query:",ts(n)),this.ps.getDocumentsMatchingQuery(e,n,eo.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}};var H_="LocalStore",sj=3e8,Kv=class{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new Oe(fe),this.xs=new mr(o=>j_(o),B_),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new kv(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}};function aj(t,e,n,r){return new Kv(t,e,n,r)}async function EA(t,e){let n=ee(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],c=[],u=pe();for(let l of i){s.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of o){c.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(l=>({Ls:l,removedBatchIds:s,addedBatchIds:c}))})})}function cj(t,e){let n=ee(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(c,u,l,h){let p=l.batch,g=p.keys(),y=O.resolve();return g.forEach(S=>{y=y.next(()=>h.getEntry(u,S)).next(R=>{let A=l.docVersions.get(S);ve(A!==null,48541),R.version.compareTo(A)<0&&(p.applyToRemoteDocument(R,l),R.isValidDocument()&&(R.setReadTime(l.commitVersion),h.addEntry(R)))})}),y.next(()=>c.mutationQueue.removeMutationBatch(u,p))})(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(c){let u=pe();for(let l=0;l<c.mutationResults.length;++l)c.mutationResults[l].transformResults.length>0&&(u=u.add(c.batch.mutations[l].key));return u})(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function IA(t){let e=ee(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function uj(t,e){let n=ee(t),r=e.snapshotVersion,i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;let c=[];e.targetChanges.forEach((h,p)=>{let g=i.get(p);if(!g)return;c.push(n.Pi.removeMatchingKeys(o,h.removedDocuments,p).next(()=>n.Pi.addMatchingKeys(o,h.addedDocuments,p)));let y=g.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(ft.EMPTY_BYTE_STRING,Q.min()).withLastLimboFreeSnapshotVersion(Q.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(p,y),(function(R,A,L){return R.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=sj?!0:L.addedDocuments.size+L.modifiedDocuments.size+L.removedDocuments.size>0})(g,y,h)&&c.push(n.Pi.updateTargetData(o,y))});let u=gr(),l=pe();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(o,h))}),c.push(lj(o,s,e.documentUpdates).next(h=>{u=h.ks,l=h.qs})),!r.isEqual(Q.min())){let h=n.Pi.getLastRemoteSnapshotVersion(o).next(p=>n.Pi.setTargetsMetadata(o,o.currentSequenceNumber,r));c.push(h)}return O.waitFor(c).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(n.Ms=i,o))}function lj(t,e,n){let r=pe(),i=pe();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=gr();return n.forEach((c,u)=>{let l=o.get(c);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(c)),u.isNoDocument()&&u.version.isEqual(Q.min())?(e.removeEntry(c,u.readTime),s=s.insert(c,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(c,u)):U(H_,"Ignoring outdated watch update for ",c,". Current version:",l.version," Watch version:",u.version)}),{ks:s,qs:i}})}function dj(t,e){let n=ee(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=O_),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function hj(t,e){let n=ee(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Pi.getTargetData(r,e).next(o=>o?(i=o,O.resolve(i)):n.Pi.allocateTargetId(r).next(s=>(i=new Nc(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function Qv(t,e,n){let r=ee(t),i=r.Ms.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!Ds(s))throw s;U(H_,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function a0(t,e,n){let r=ee(t),i=Q.min(),o=pe();return r.persistence.runTransaction("Execute query","readwrite",s=>(function(u,l,h){let p=ee(u),g=p.xs.get(h);return g!==void 0?O.resolve(p.Ms.get(g)):p.Pi.getTargetData(l,h)})(r,s,Bn(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(s,c.targetId).next(u=>{o=u})}).next(()=>r.Fs.getDocumentsMatchingQuery(s,e,n?i:Q.min(),n?o:pe())).next(c=>(fj(r,D2(e),c),{documents:c,Qs:o})))}function fj(t,e,n){let r=t.Os.get(e)||Q.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.Os.set(e,r)}var Th=class{constructor(){this.activeTargetIds=M2()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var Yv=class{constructor(){this.Mo=new Th,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Th,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Jv=class{Oo(e){}shutdown(){}};var c0="ConnectivityMonitor",Dh=class{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){U(c0,"Network connectivity changed: AVAILABLE");for(let e of this.qo)e(0)}ko(){U(c0,"Network connectivity changed: UNAVAILABLE");for(let e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var nh=null;function Zv(){return nh===null?nh=(function(){return 268435456+Math.round(2147483648*Math.random())})():nh++,"0x"+nh.toString(16)}var Hy="RestConnection",pj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},Xv=class{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===dh?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,o){let s=Zv(),c=this.zo(e,n.toUriEncodedString());U(Hy,`Sending RPC '${e}' ${s}:`,c,r);let u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,i,o);let{host:l}=new URL(c),h=$r(l);return this.Jo(e,c,u,r,h).then(p=>(U(Hy,`Received RPC '${e}' ${s}: `,p),p),p=>{throw cs(Hy,`RPC '${e}' ${s} failed with error: `,p,"url: ",c,"request:",r),p})}Ho(e,n,r,i,o,s){return this.Go(e,n,r,i,o)}jo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Cs})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}zo(e,n){let r=pj[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}};var e_=class{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}};var ht="WebChannelConnection",t_=class extends Xv{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,o){let s=Zv();return new Promise((c,u)=>{let l=new Fy;l.setWithCredentials(!0),l.listenOnce(Vy.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case mc.NO_ERROR:let p=l.getResponseJson();U(ht,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),c(p);break;case mc.TIMEOUT:U(ht,`RPC '${e}' ${s} timed out`),u(new $(N.DEADLINE_EXCEEDED,"Request time out"));break;case mc.HTTP_ERROR:let g=l.getStatus();if(U(ht,`RPC '${e}' ${s} failed with status:`,g,"response text:",l.getResponseText()),g>0){let y=l.getResponseJson();Array.isArray(y)&&(y=y[0]);let S=y?.error;if(S&&S.status&&S.message){let R=(function(L){let Y=L.toLowerCase().replace(/_/g,"-");return Object.values(N).indexOf(Y)>=0?Y:N.UNKNOWN})(S.status);u(new $(R,S.message))}else u(new $(N.UNKNOWN,"Server responded with status "+l.getStatus()))}else u(new $(N.UNAVAILABLE,"Connection failed."));break;default:H(9055,{l_:e,streamId:s,h_:l.getLastErrorCode(),P_:l.getLastError()})}}finally{U(ht,`RPC '${e}' ${s} completed.`)}});let h=JSON.stringify(i);U(ht,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",h,r,15)})}T_(e,n,r){let i=Zv(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Uy(),c=By(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;let h=o.join("");U(ht,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=s.createWebChannel(h,u);this.I_(p);let g=!1,y=!1,S=new e_({Yo:A=>{y?U(ht,`Not sending because RPC '${e}' stream ${i} is closed:`,A):(g||(U(ht,`Opening RPC '${e}' stream ${i} transport.`),p.open(),g=!0),U(ht,`RPC '${e}' stream ${i} sending:`,A),p.send(A))},Zo:()=>p.close()}),R=(A,L,Y)=>{A.listen(L,ue=>{try{Y(ue)}catch(rt){setTimeout(()=>{throw rt},0)}})};return R(p,Xo.EventType.OPEN,()=>{y||(U(ht,`RPC '${e}' stream ${i} transport opened.`),S.o_())}),R(p,Xo.EventType.CLOSE,()=>{y||(y=!0,U(ht,`RPC '${e}' stream ${i} transport closed`),S.a_(),this.E_(p))}),R(p,Xo.EventType.ERROR,A=>{y||(y=!0,cs(ht,`RPC '${e}' stream ${i} transport errored. Name:`,A.name,"Message:",A.message),S.a_(new $(N.UNAVAILABLE,"The operation could not be completed")))}),R(p,Xo.EventType.MESSAGE,A=>{if(!y){let L=A.data[0];ve(!!L,16349);let Y=L,ue=Y?.error||Y[0]?.error;if(ue){U(ht,`RPC '${e}' stream ${i} received error:`,ue);let rt=ue.status,Ct=(function(v){let E=Ve[v];if(E!==void 0)return lA(E)})(rt),Ke=ue.message;Ct===void 0&&(Ct=N.INTERNAL,Ke="Unknown error status: "+rt+" with message "+ue.message),y=!0,S.a_(new $(Ct,Ke)),p.close()}else U(ht,`RPC '${e}' stream ${i} received:`,L),S.u_(L)}}),R(c,jy.STAT_EVENT,A=>{A.stat===Xd.PROXY?U(ht,`RPC '${e}' stream ${i} detected buffering proxy`):A.stat===Xd.NOPROXY&&U(ht,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{S.__()},0),S}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}};function zy(){return typeof document<"u"?document:null}function qh(t){return new Cv(t,!0)}var Pc=class{constructor(e,n,r=1e3,i=1.5,o=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();let n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&U("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}};var u0="PersistentStream",bh=class{constructor(e,n,r,i,o,s,c,u){this.Mi=e,this.S_=r,this.b_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Pc(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===N.RESOURCE_EXHAUSTED?(hr(n.toString()),hr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===N.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;let e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===n&&this.G_(r,i)},r=>{e(()=>{let i=new $(N.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,n){let r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return U(u0,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(U(u0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},n_=class extends bh{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();let n=W2(this.serializer,e),r=(function(o){if(!("targetChange"in o))return Q.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?Q.min():s.readTime?zt(s.readTime):Q.min()})(e);return this.listener.H_(n,r)}Y_(e){let n={};n.database=bv(this.serializer),n.addTarget=(function(o,s){let c,u=s.target;if(c=fv(u)?{documents:Q2(o,u)}:{query:Y2(o,u).ft},c.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){c.resumeToken=dA(o,s.resumeToken);let l=Tv(o,s.expectedCount);l!==null&&(c.expectedCount=l)}else if(s.snapshotVersion.compareTo(Q.min())>0){c.readTime=_h(o,s.snapshotVersion.toTimestamp());let l=Tv(o,s.expectedCount);l!==null&&(c.expectedCount=l)}return c})(this.serializer,e);let r=Z2(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){let n={};n.database=bv(this.serializer),n.removeTarget=e,this.q_(n)}},r_=class extends bh{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return ve(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ve(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ve(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();let n=K2(e.writeResults,e.commitTime),r=zt(e.commitTime);return this.listener.na(r,n)}ra(){let e={};e.database=bv(this.serializer),this.q_(e)}ea(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>mA(this.serializer,r))};this.q_(n)}};var i_=class{},o_=class extends i_{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new $(N.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Go(e,Dv(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new $(N.UNKNOWN,o.toString())})}Ho(e,n,r,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,c])=>this.connection.Ho(e,Dv(n,r),i,s,c,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new $(N.UNKNOWN,s.toString())})}terminate(){this.ia=!0,this.connection.terminate()}},s_=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(hr(n),this.aa=!1):U("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}};var oo="RemoteStore",a_=class{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo(s=>{r.enqueueAndForget(async()=>{so(this)&&(U(oo,"Restarting streams for network reachability change."),await(async function(u){let l=ee(u);l.Ea.add(4),await jc(l),l.Ra.set("Unknown"),l.Ea.delete(4),await Gh(l)})(this))})}),this.Ra=new s_(r,i)}};async function Gh(t){if(so(t))for(let e of t.da)await e(!0)}async function jc(t){for(let e of t.da)await e(!1)}function wA(t,e){let n=ee(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),W_(n)?G_(n):bs(n).O_()&&q_(n,e))}function z_(t,e){let n=ee(t),r=bs(n);n.Ia.delete(e),r.O_()&&CA(n,e),n.Ia.size===0&&(r.O_()?r.L_():so(n)&&n.Ra.set("Unknown"))}function q_(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Q.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}bs(t).Y_(e)}function CA(t,e){t.Va.Ue(e),bs(t).Z_(e)}function G_(t){t.Va=new wv({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),bs(t).start(),t.Ra.ua()}function W_(t){return so(t)&&!bs(t).x_()&&t.Ia.size>0}function so(t){return ee(t).Ea.size===0}function TA(t){t.Va=void 0}async function mj(t){t.Ra.set("Online")}async function gj(t){t.Ia.forEach((e,n)=>{q_(t,e)})}async function yj(t,e){TA(t),W_(t)?(t.Ra.ha(e),G_(t)):t.Ra.set("Unknown")}async function vj(t,e,n){if(t.Ra.set("Online"),e instanceof yh&&e.state===2&&e.cause)try{await(async function(i,o){let s=o.cause;for(let c of o.targetIds)i.Ia.has(c)&&(await i.remoteSyncer.rejectListen(c,s),i.Ia.delete(c),i.Va.removeTarget(c))})(t,e)}catch(r){U(oo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Sh(t,r)}else if(e instanceof os?t.Va.Ze(e):e instanceof gh?t.Va.st(e):t.Va.tt(e),!n.isEqual(Q.min()))try{let r=await IA(t.localStore);n.compareTo(r)>=0&&await(function(o,s){let c=o.Va.Tt(s);return c.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=o.Ia.get(l);h&&o.Ia.set(l,h.withResumeToken(u.resumeToken,s))}}),c.targetMismatches.forEach((u,l)=>{let h=o.Ia.get(u);if(!h)return;o.Ia.set(u,h.withResumeToken(ft.EMPTY_BYTE_STRING,h.snapshotVersion)),CA(o,u);let p=new Nc(h.target,u,l,h.sequenceNumber);q_(o,p)}),o.remoteSyncer.applyRemoteEvent(c)})(t,n)}catch(r){U(oo,"Failed to raise snapshot:",r),await Sh(t,r)}}async function Sh(t,e,n){if(!Ds(e))throw e;t.Ea.add(1),await jc(t),t.Ra.set("Offline"),n||(n=()=>IA(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{U(oo,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Gh(t)})}function DA(t,e){return e().catch(n=>Sh(t,n,e))}async function Wh(t){let e=ee(t),n=ri(e),r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:O_;for(;_j(e);)try{let i=await dj(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,Ej(e,i)}catch(i){await Sh(e,i)}bA(e)&&SA(e)}function _j(t){return so(t)&&t.Ta.length<10}function Ej(t,e){t.Ta.push(e);let n=ri(t);n.O_()&&n.X_&&n.ea(e.mutations)}function bA(t){return so(t)&&!ri(t).x_()&&t.Ta.length>0}function SA(t){ri(t).start()}async function Ij(t){ri(t).ra()}async function wj(t){let e=ri(t);for(let n of t.Ta)e.ea(n.mutations)}async function Cj(t,e,n){let r=t.Ta.shift(),i=vv.from(r,e,n);await DA(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Wh(t)}async function Tj(t,e){e&&ri(t).X_&&await(async function(r,i){if((function(s){return uA(s)&&s!==N.ABORTED})(i.code)){let o=r.Ta.shift();ri(r).B_(),await DA(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await Wh(r)}})(t,e),bA(t)&&SA(t)}async function l0(t,e){let n=ee(t);n.asyncQueue.verifyOperationInProgress(),U(oo,"RemoteStore received new credentials");let r=so(n);n.Ea.add(3),await jc(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Gh(n)}async function Dj(t,e){let n=ee(t);e?(n.Ea.delete(2),await Gh(n)):e||(n.Ea.add(2),await jc(n),n.Ra.set("Unknown"))}function bs(t){return t.ma||(t.ma=(function(n,r,i){let o=ee(n);return o.sa(),new n_(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(t.datastore,t.asyncQueue,{Xo:mj.bind(null,t),t_:gj.bind(null,t),r_:yj.bind(null,t),H_:vj.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),W_(t)?G_(t):t.Ra.set("Unknown")):(await t.ma.stop(),TA(t))})),t.ma}function ri(t){return t.fa||(t.fa=(function(n,r,i){let o=ee(n);return o.sa(),new r_(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:Ij.bind(null,t),r_:Tj.bind(null,t),ta:wj.bind(null,t),na:Cj.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Wh(t)):(await t.fa.stop(),t.Ta.length>0&&(U(oo,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}var c_=class t{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new In,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){let s=Date.now()+r,c=new t(e,n,s,i,o);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new $(N.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function K_(t,e){if(hr("AsyncQueue",`${e}: ${t}`),Ds(t))return new $(N.UNAVAILABLE,`${e}: ${t}`);throw t}var Ah=class t{static emptySet(e){return new t(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||q.comparator(n.key,r.key):(n,r)=>q.comparator(n.key,r.key),this.keyedMap=gc(),this.sortedSet=new Oe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var Rh=class{constructor(){this.ga=new Oe(q.comparator)}track(e){let n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):H(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){let e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}},_s=class t{constructor(e,n,r,i,o,s,c,u,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,o){let s=[];return n.forEach(c=>{s.push({type:0,doc:c})}),new t(e,n,Ah.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Hh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var u_=class{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}},l_=class{constructor(){this.queries=d0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){let i=ee(n),o=i.queries;i.queries=d0(),o.forEach((s,c)=>{for(let u of c.Sa)u.onError(r)})})(this,new $(N.ABORTED,"Firestore shutting down"))}};function d0(){return new mr(t=>J0(t),Hh)}async function AA(t,e){let n=ee(t),r=3,i=e.query,o=n.queries.get(i);o?!o.ba()&&e.Da()&&(r=2):(o=new u_,r=e.Da()?0:1);try{switch(r){case 0:o.wa=await n.onListen(i,!0);break;case 1:o.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(s){let c=K_(s,`Initialization of query '${ts(e.query)}' failed`);return void e.onError(c)}n.queries.set(i,o),o.Sa.push(e),e.va(n.onlineState),o.wa&&e.Fa(o.wa)&&Q_(n)}async function RA(t,e){let n=ee(t),r=e.query,i=3,o=n.queries.get(r);if(o){let s=o.Sa.indexOf(e);s>=0&&(o.Sa.splice(s,1),o.Sa.length===0?i=e.Da()?0:1:!o.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function bj(t,e){let n=ee(t),r=!1;for(let i of e){let o=i.query,s=n.queries.get(o);if(s){for(let c of s.Sa)c.Fa(i)&&(r=!0);s.wa=i}}r&&Q_(n)}function Sj(t,e,n){let r=ee(t),i=r.queries.get(e);if(i)for(let o of i.Sa)o.onError(n);r.queries.delete(e)}function Q_(t){t.Ca.forEach(e=>{e.next()})}var d_,h0;(h0=d_||(d_={})).Ma="default",h0.Cache="cache";var Nh=class{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new _s(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;let r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;let n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=_s.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==d_.Cache}};var Mh=class{constructor(e){this.key=e}},xh=class{constructor(e){this.key=e}},h_=class{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=pe(),this.mutatedKeys=pe(),this.eu=Z0(e),this.tu=new Ah(this.eu)}get nu(){return this.Ya}ru(e,n){let r=n?n.iu:new Rh,i=n?n.tu:this.tu,o=n?n.mutatedKeys:this.mutatedKeys,s=i,c=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let g=i.get(h),y=zh(this.query,p)?p:null,S=!!g&&this.mutatedKeys.has(g.key),R=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),A=!1;g&&y?g.data.isEqual(y.data)?S!==R&&(r.track({type:3,doc:y}),A=!0):this.su(g,y)||(r.track({type:2,doc:y}),A=!0,(u&&this.eu(y,u)>0||l&&this.eu(y,l)<0)&&(c=!0)):!g&&y?(r.track({type:0,doc:y}),A=!0):g&&!y&&(r.track({type:1,doc:g}),A=!0,(u||l)&&(c=!0)),A&&(y?(s=s.add(y),o=R?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{tu:s,iu:r,Cs:c,mutatedKeys:o}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;let s=e.iu.ya();s.sort((h,p)=>(function(y,S){let R=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return H(20277,{Rt:A})}};return R(y)-R(S)})(h.type,p.type)||this.eu(h.doc,p.doc)),this.ou(r),i=i??!1;let c=n&&!i?this._u():[],u=this.Xa.size===0&&this.current&&!i?1:0,l=u!==this.Za;return this.Za=u,s.length!==0||l?{snapshot:new _s(this.query,e.tu,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Rh,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];let e=this.Xa;this.Xa=pe(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});let n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new xh(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new Mh(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=pe();let n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return _s.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}},Y_="SyncEngine",f_=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},p_=class{constructor(e){this.key=e,this.hu=!1}},m_=class{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new mr(c=>J0(c),Hh),this.Iu=new Map,this.Eu=new Set,this.du=new Oe(q.comparator),this.Au=new Map,this.Ru=new xc,this.Vu={},this.mu=new Map,this.fu=Mc.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}};async function Aj(t,e,n=!0){let r=kA(t),i,o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=await NA(r,e,n,!0),i}async function Rj(t,e){let n=kA(t);await NA(n,e,!0,!1)}async function NA(t,e,n,r){let i=await hj(t.localStore,Bn(e)),o=i.targetId,s=t.sharedClientState.addLocalQueryTarget(o,n),c;return r&&(c=await Nj(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&wA(t.remoteStore,i),c}async function Nj(t,e,n,r,i){t.pu=(p,g,y)=>(async function(R,A,L,Y){let ue=A.view.ru(L);ue.Cs&&(ue=await a0(R.localStore,A.query,!1).then(({documents:w})=>A.view.ru(w,ue)));let rt=Y&&Y.targetChanges.get(A.targetId),Ct=Y&&Y.targetMismatches.get(A.targetId)!=null,Ke=A.view.applyChanges(ue,R.isPrimaryClient,rt,Ct);return p0(R,A.targetId,Ke.au),Ke.snapshot})(t,p,g,y);let o=await a0(t.localStore,e,!0),s=new h_(e,o.Qs),c=s.ru(o.documents),u=Rc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=s.applyChanges(c,t.isPrimaryClient,u);p0(t,n,l.au);let h=new f_(e,n,s);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),l.snapshot}async function Mj(t,e,n){let r=ee(t),i=r.Tu.get(e),o=r.Iu.get(i.targetId);if(o.length>1)return r.Iu.set(i.targetId,o.filter(s=>!Hh(s,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Qv(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&z_(r.remoteStore,i.targetId),g_(r,i.targetId)}).catch(Ts)):(g_(r,i.targetId),await Qv(r.localStore,i.targetId,!0))}async function xj(t,e){let n=ee(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),z_(n.remoteStore,r.targetId))}async function Pj(t,e,n){let r=Bj(t);try{let i=await(function(s,c){let u=ee(s),l=Ue.now(),h=c.reduce((y,S)=>y.add(S.key),pe()),p,g;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let S=gr(),R=pe();return u.Ns.getEntries(y,h).next(A=>{S=A,S.forEach((L,Y)=>{Y.isValidDocument()||(R=R.add(L))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,S)).next(A=>{p=A;let L=[];for(let Y of c){let ue=F2(Y,p.get(Y.key).overlayedDocument);ue!=null&&L.push(new Hn(Y.key,ue,q0(ue.value.mapValue),tn.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,L,c)}).next(A=>{g=A;let L=A.applyToLocalDocumentSet(p,R);return u.documentOverlayCache.saveOverlays(y,A.batchId,L)})}).then(()=>({batchId:g.batchId,changes:eA(p)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(s,c,u){let l=s.Vu[s.currentUser.toKey()];l||(l=new Oe(fe)),l=l.insert(c,u),s.Vu[s.currentUser.toKey()]=l})(r,i.batchId,n),await Bc(r,i.changes),await Wh(r.remoteStore)}catch(i){let o=K_(i,"Failed to persist write");n.reject(o)}}async function MA(t,e){let n=ee(t);try{let r=await uj(n.localStore,e);e.targetChanges.forEach((i,o)=>{let s=n.Au.get(o);s&&(ve(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.hu=!0:i.modifiedDocuments.size>0?ve(s.hu,14607):i.removedDocuments.size>0&&(ve(s.hu,42227),s.hu=!1))}),await Bc(n,r,e)}catch(r){await Ts(r)}}function f0(t,e,n){let r=ee(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.Tu.forEach((o,s)=>{let c=s.view.va(e);c.snapshot&&i.push(c.snapshot)}),(function(s,c){let u=ee(s);u.onlineState=c;let l=!1;u.queries.forEach((h,p)=>{for(let g of p.Sa)g.va(c)&&(l=!0)}),l&&Q_(u)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Oj(t,e,n){let r=ee(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Au.get(e),o=i&&i.key;if(o){let s=new Oe(q.comparator);s=s.insert(o,qt.newNoDocument(o,Q.min()));let c=pe().add(o),u=new mh(Q.min(),new Map,new Oe(fe),s,c);await MA(r,u),r.du=r.du.remove(o),r.Au.delete(e),J_(r)}else await Qv(r.localStore,e,!1).then(()=>g_(r,e,n)).catch(Ts)}async function kj(t,e){let n=ee(t),r=e.batch.batchId;try{let i=await cj(n.localStore,e);PA(n,r,null),xA(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Bc(n,i)}catch(i){await Ts(i)}}async function Lj(t,e,n){let r=ee(t);try{let i=await(function(s,c){let u=ee(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,c).next(p=>(ve(p!==null,37113),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})})(r.localStore,e);PA(r,e,n),xA(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Bc(r,i)}catch(i){await Ts(i)}}function xA(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function PA(t,e,n){let r=ee(t),i=r.Vu[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function g_(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||OA(t,r)})}function OA(t,e){t.Eu.delete(e.path.canonicalString());let n=t.du.get(e);n!==null&&(z_(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),J_(t))}function p0(t,e,n){for(let r of n)r instanceof Mh?(t.Ru.addReference(r.key,e),Fj(t,r)):r instanceof xh?(U(Y_,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||OA(t,r.key)):H(19791,{wu:r})}function Fj(t,e){let n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(U(Y_,"New document in limbo: "+n),t.Eu.add(r),J_(t))}function J_(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){let e=t.Eu.values().next().value;t.Eu.delete(e);let n=new q(Me.fromString(e)),r=t.fu.next();t.Au.set(r,new p_(n)),t.du=t.du.insert(n,r),wA(t.remoteStore,new Nc(Bn($h(n.path)),r,"TargetPurposeLimboResolution",P_.ce))}}async function Bc(t,e,n){let r=ee(t),i=[],o=[],s=[];r.Tu.isEmpty()||(r.Tu.forEach((c,u)=>{s.push(r.pu(u,e,n).then(l=>{if((l||n)&&r.isPrimaryClient){let h=l?!l.fromCache:n?.targetChanges.get(u.targetId)?.current;r.sharedClientState.updateQueryState(u.targetId,h?"current":"not-current")}if(l){i.push(l);let h=qv.As(u.targetId,l);o.push(h)}}))}),await Promise.all(s),r.Pu.H_(i),await(async function(u,l){let h=ee(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>O.forEach(l,g=>O.forEach(g.Es,y=>h.persistence.referenceDelegate.addReference(p,g.targetId,y)).next(()=>O.forEach(g.ds,y=>h.persistence.referenceDelegate.removeReference(p,g.targetId,y)))))}catch(p){if(!Ds(p))throw p;U(H_,"Failed to update sequence numbers: "+p)}for(let p of l){let g=p.targetId;if(!p.fromCache){let y=h.Ms.get(g),S=y.snapshotVersion,R=y.withLastLimboFreeSnapshotVersion(S);h.Ms=h.Ms.insert(g,R)}}})(r.localStore,o))}async function Vj(t,e){let n=ee(t);if(!n.currentUser.isEqual(e)){U(Y_,"User change. New user:",e.toKey());let r=await EA(n.localStore,e);n.currentUser=e,(function(o,s){o.mu.forEach(c=>{c.forEach(u=>{u.reject(new $(N.CANCELLED,s))})}),o.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Bc(n,r.Ls)}}function jj(t,e){let n=ee(t),r=n.Au.get(e);if(r&&r.hu)return pe().add(r.key);{let i=pe(),o=n.Iu.get(e);if(!o)return i;for(let s of o){let c=n.Tu.get(s);i=i.unionWith(c.view.nu)}return i}}function kA(t){let e=ee(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=MA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=jj.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Oj.bind(null,e),e.Pu.H_=bj.bind(null,e.eventManager),e.Pu.yu=Sj.bind(null,e.eventManager),e}function Bj(t){let e=ee(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=kj.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Lj.bind(null,e),e}var LA=(()=>{class t{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(n){this.serializer=qh(n.databaseInfo.databaseId),this.sharedClientState=this.Du(n),this.persistence=this.Cu(n),await this.persistence.start(),this.localStore=this.vu(n),this.gcScheduler=this.Fu(n,this.localStore),this.indexBackfillerScheduler=this.Mu(n,this.localStore)}Fu(n,r){return null}Mu(n,r){return null}vu(n){return aj(this.persistence,new Wv,n.initialUser,this.serializer)}Cu(n){return new wh(zv.mi,this.serializer)}Du(n){return new Yv}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}return t.provider={build:()=>new t},t})(),y_=class extends LA{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){ve(this.persistence.referenceDelegate instanceof Ch,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new Mv(r,e.asyncQueue,n)}Cu(e){let n=this.cacheSizeBytes!==void 0?en.withCacheSize(this.cacheSizeBytes):en.DEFAULT;return new wh(r=>Ch.mi(r,n),this.serializer)}};var Uj=(()=>{class t{async initialize(n,r){this.localStore||(this.localStore=n.localStore,this.sharedClientState=n.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!n.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>f0(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=Vj.bind(null,this.syncEngine),await Dj(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(n){return(function(){return new l_})()}createDatastore(n){let r=qh(n.databaseInfo.databaseId),i=(function(s){return new t_(s)})(n.databaseInfo);return(function(s,c,u,l){return new o_(s,c,u,l)})(n.authCredentials,n.appCheckCredentials,i,r)}createRemoteStore(n){return(function(i,o,s,c,u){return new a_(i,o,s,c,u)})(this.localStore,this.datastore,n.asyncQueue,r=>f0(this.syncEngine,r,0),(function(){return Dh.v()?new Dh:new Jv})())}createSyncEngine(n,r){return(function(o,s,c,u,l,h,p){let g=new m_(o,s,c,u,l,h);return p&&(g.gu=!0),g})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,r)}async terminate(){await(async function(r){let i=ee(r);U(oo,"RemoteStore shutting down."),i.Ea.add(5),await jc(i),i.Aa.shutdown(),i.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}return t.provider={build:()=>new t},t})();var Ph=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):hr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}};var v_=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new $(N.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let n=await(async function(i,o){let s=ee(i),c={documents:o.map(p=>Eh(s.serializer,p))},u=await s.Ho("BatchGetDocuments",s.serializer.databaseId,Me.emptyPath(),c,o.length),l=new Map;u.forEach(p=>{let g=G2(s.serializer,p);l.set(g.key.toString(),g)});let h=[];return o.forEach(p=>{let g=l.get(p.toString());ve(!!g,55234,{key:p}),h.push(g)}),h})(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ac(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{let i=q.fromPath(r);this.mutations.push(new ph(i,this.precondition(i)))}),await(async function(r,i){let o=ee(r),s={writes:i.map(c=>mA(o.serializer,c))};await o.Go("Commit",o.serializer.databaseId,Me.emptyPath(),s)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw H(50498,{Gu:e.constructor.name});n=Q.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new $(N.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){let n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(Q.min())?tn.exists(!1):tn.updateTime(n):tn.none()}preconditionForUpdate(e){let n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(Q.min()))throw new $(N.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return tn.updateTime(n)}return tn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var __=class{constructor(e,n,r,i,o){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=o,this.zu=r.maxAttempts,this.M_=new Pc(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_(async()=>{let e=new v_(this.datastore),n=this.Hu(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.Yu(i)}))}).catch(r=>{this.Yu(r)})})}Hu(e){try{let n=this.updateFunction(e);return!Vc(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ju(),Promise.resolve()))):this.deferred.reject(e)}Zu(e){if(e?.name==="FirebaseError"){let n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!uA(n)}return!1}};var ii="FirestoreClient",E_=class{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=tt.UNAUTHENTICATED,this.clientId=Cc.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async s=>{U(ii,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(U(ii,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new In;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=K_(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}};async function qy(t,e){t.asyncQueue.verifyOperationInProgress(),U(ii,"Initializing OfflineComponentProvider");let n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await EA(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function m0(t,e){t.asyncQueue.verifyOperationInProgress();let n=await $j(t);U(ii,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>l0(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>l0(e.remoteStore,i)),t._onlineComponents=e}async function $j(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){U(ii,"Using user provided OfflineComponentProvider");try{await qy(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!(function(i){return i.name==="FirebaseError"?i.code===N.FAILED_PRECONDITION||i.code===N.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(n))throw n;cs("Error using user provided cache. Falling back to memory cache: "+n),await qy(t,new LA)}}else U(ii,"Using default OfflineComponentProvider"),await qy(t,new y_(void 0));return t._offlineComponents}async function Z_(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(U(ii,"Using user provided OnlineComponentProvider"),await m0(t,t._uninitializedComponentsProvider._online)):(U(ii,"Using default OnlineComponentProvider"),await m0(t,new Uj))),t._onlineComponents}function Hj(t){return Z_(t).then(e=>e.syncEngine)}function zj(t){return Z_(t).then(e=>e.datastore)}async function I_(t){let e=await Z_(t),n=e.eventManager;return n.onListen=Aj.bind(null,e.syncEngine),n.onUnlisten=Mj.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Rj.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=xj.bind(null,e.syncEngine),n}function qj(t,e,n={}){let r=new In;return t.asyncQueue.enqueueAndForget(async()=>(function(o,s,c,u,l){let h=new Ph({next:g=>{h.Nu(),s.enqueueAndForget(()=>RA(o,p));let y=g.docs.has(c);!y&&g.fromCache?l.reject(new $(N.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&g.fromCache&&u&&u.source==="server"?l.reject(new $(N.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(g)},error:g=>l.reject(g)}),p=new Nh($h(c.path),h,{includeMetadataChanges:!0,qa:!0});return AA(o,p)})(await I_(t),t.asyncQueue,e,n,r)),r.promise}function FA(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var g0=new Map;var VA="firestore.googleapis.com",y0=!0,Oh=class{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new $(N.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=VA,this.ssl=y0}else this.host=e.host,this.ssl=e.ssl??y0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=_A;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<ij)throw new $(N.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}e2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=FA(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new $(N.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new $(N.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new $(N.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Oc=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Oh({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new $(N.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new $(N.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Oh(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new Gy;switch(r.type){case"firstParty":return new Yy(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new $(N.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){let r=g0.get(n);r&&(U("ComponentProvider","Removing Datastore"),g0.delete(n),r.terminate())})(this),Promise.resolve()}};function Gj(t,e,n,r={}){t=lr(t,Oc);let i=$r(e),o=t._getSettings(),s=le(x({},o),{emulatorOptions:t._getEmulatorOptions()}),c=`${e}:${n}`;i&&(bd(`https://${c}`),Sd("Firestore",!0)),o.host!==VA&&o.host!==c&&cs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let u=le(x({},o),{host:c,ssl:i,emulatorOptions:r});if(!Ln(u,s)&&(t._setSettings(u),r.mockUserToken)){let l,h;if(typeof r.mockUserToken=="string")l=r.mockUserToken,h=tt.MOCK_USER;else{l=gb(r.mockUserToken,t._app?.options.projectId);let p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new $(N.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new tt(p)}t._authCredentials=new Wy(new sh(l,h))}}var kh=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},st=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new kc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}toJSON(){return{type:t._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Fc(n,t._jsonSchema))return new t(e,r||null,new q(Me.fromString(n.referencePath)))}};st._jsonSchemaVersion="firestore/documentReference/1.0",st._jsonSchema={type:Be("string",st._jsonSchemaVersion),referencePath:Be("string")};var kc=class t extends kh{constructor(e,n,r){super(e,n,$h(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new st(this.firestore,null,new q(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function jA(t,e,...n){if(t=Fe(t),arguments.length===1&&(e=Cc.newId()),XV("doc","path",e),t instanceof Oc){let r=Me.fromString(e,...n);return FS(r),new st(t,null,new q(r))}{if(!(t instanceof st||t instanceof kc))throw new $(N.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Me.fromString(e,...n));return FS(r),new st(t.firestore,t instanceof kc?t.converter:null,new q(r))}}var v0="AsyncQueue",Lh=class{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Pc(this,"async_queue_retry"),this._c=()=>{let r=zy();r&&U(v0,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;let n=zy();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;let n=zy();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});let n=new In;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ds(e))throw e;U(v0,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){let n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,hr("INTERNAL UNHANDLED ERROR: ",_0(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);let i=c_.createAndSchedule(this,e,n,r,o=>this.hc(o));return this.tc.push(i),i}uc(){this.nc&&H(47125,{Pc:_0(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(let n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){let n=this.tc.indexOf(e);this.tc.splice(n,1)}};function _0(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}function E0(t){return(function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1})(t,["next","error","complete"])}var oi=class extends Oc{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Lh,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Lh(e),this._firestoreClient=void 0,await e}}};function BA(t,e){let n=typeof t=="object"?t:Md(),r=typeof t=="string"?t:e||dh,i=ac(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=mb("firestore");o&&Gj(i,...o)}return i}function Kh(t){if(t._terminated)throw new $(N.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Wj(t),t._firestoreClient}function Wj(t){let e=t._freezeSettings(),n=(function(i,o,s,c){return new tv(i,o,s,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,FA(c.experimentalLongPollingOptions),c.useFetchStreams,c.isUsingEmulator)})(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new E_(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(i){let o=i?._online.build();return{_offline:i?._offline.build(o),_online:o}})(t._componentsProvider))}var dr=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(ft.fromBase64String(e))}catch(n){throw new $(N.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(ft.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:t._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Fc(e,t._jsonSchema))return t.fromBase64String(e.bytes)}};dr._jsonSchemaVersion="firestore/bytes/1.0",dr._jsonSchema={type:Be("string",dr._jsonSchemaVersion),bytes:Be("string")};var Es=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new $(N.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ht(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Is=class{constructor(e){this._methodName=e}};var Xr=class t{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new $(N.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new $(N.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return fe(this._lat,e._lat)||fe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:t._jsonSchemaVersion}}static fromJSON(e){if(Fc(e,t._jsonSchema))return new t(e.latitude,e.longitude)}};Xr._jsonSchemaVersion="firestore/geoPoint/1.0",Xr._jsonSchema={type:Be("string",Xr._jsonSchemaVersion),latitude:Be("number"),longitude:Be("number")};var ei=class t{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:t._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Fc(e,t._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new t(e.vectorValues);throw new $(N.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};ei._jsonSchemaVersion="firestore/vectorValue/1.0",ei._jsonSchema={type:Be("string",ei._jsonSchemaVersion),vectorValues:Be("object")};var Kj=/^__.*__$/,w_=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Hn(e,this.data,this.fieldMask,n,this.fieldTransforms):new io(e,this.data,n,this.fieldTransforms)}},Fh=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Hn(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function UA(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw H(40011,{Ac:t})}}var C_=class t{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new t(x(x({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){let n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){let n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return jh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(UA(this.Ac)&&Kj.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}},T_=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||qh(e)}Cc(e,n,r,i=!1){return new C_({Ac:e,methodName:n,Dc:r,path:Ht.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function $A(t){let e=t._freezeSettings(),n=qh(t._databaseId);return new T_(t._databaseId,!!e.ignoreUndefinedProperties,n)}function HA(t,e,n,r,i,o={}){let s=t.Cc(o.merge||o.mergeFields?2:0,e,n,i);X_("Data must be an object, but it was:",s,r);let c=zA(r,s),u,l;if(o.merge)u=new nn(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let g=b_(e,p,n);if(!s.contains(g))throw new $(N.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);GA(h,g)||h.push(g)}u=new nn(h),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new w_(new Nt(c),u,l)}var Vh=class t extends Is{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};var D_=class t extends Is{_toFieldTransform(e){return new mv(e.path,new to)}isEqual(e){return e instanceof t}};function Qj(t,e,n,r){let i=t.Cc(1,e,n);X_("Data must be an object, but it was:",i,r);let o=[],s=Nt.empty();si(r,(u,l)=>{let h=eE(e,u,n);l=Fe(l);let p=i.yc(h);if(l instanceof Vh)o.push(h);else{let g=Qh(l,p);g!=null&&(o.push(h),s.set(h,g))}});let c=new nn(o);return new Fh(s,c,i.fieldTransforms)}function Yj(t,e,n,r,i,o){let s=t.Cc(1,e,n),c=[b_(e,r,n)],u=[i];if(o.length%2!=0)throw new $(N.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<o.length;g+=2)c.push(b_(e,o[g])),u.push(o[g+1]);let l=[],h=Nt.empty();for(let g=c.length-1;g>=0;--g)if(!GA(l,c[g])){let y=c[g],S=u[g];S=Fe(S);let R=s.yc(y);if(S instanceof Vh)l.push(y);else{let A=Qh(S,R);A!=null&&(l.push(y),h.set(y,A))}}let p=new nn(l);return new Fh(h,p,s.fieldTransforms)}function Qh(t,e){if(qA(t=Fe(t)))return X_("Unsupported field value:",e,t),zA(t,e);if(t instanceof Is)return(function(r,i){if(!UA(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){let o=[],s=0;for(let c of r){let u=Qh(c,i.wc(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}})(t,e)}return(function(r,i){if((r=Fe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return x2(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Ue.fromDate(r);return{timestampValue:_h(i.serializer,o)}}if(r instanceof Ue){let o=new Ue(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:_h(i.serializer,o)}}if(r instanceof Xr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof dr)return{bytesValue:dA(i.serializer,r._byteString)};if(r instanceof st){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Sc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:$_(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof ei)return(function(s,c){return{mapValue:{fields:{[L_]:{stringValue:F_},[ls]:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw c.Sc("VectorValues must only contain numeric values.");return U_(c.serializer,l)})}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${x_(r)}`)})(t,e)}function zA(t,e){let n={};return F0(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):si(t,(r,i)=>{let o=Qh(i,e.mc(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function qA(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ue||t instanceof Xr||t instanceof dr||t instanceof st||t instanceof Is||t instanceof ei)}function X_(t,e,n){if(!qA(n)||!w0(n)){let r=x_(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function b_(t,e,n){if((e=Fe(e))instanceof Es)return e._internalPath;if(typeof e=="string")return eE(t,e);throw jh("Field path arguments must be of type string or ",t,!1,void 0,n)}var Jj=new RegExp("[~\\*/\\[\\]]");function eE(t,e,n){if(e.search(Jj)>=0)throw jh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Es(...e.split("."))._internalPath}catch{throw jh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function jh(t,e,n,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new $(N.INVALID_ARGUMENT,c+t+u)}function GA(t,e){return t.some(n=>n.isEqual(e))}var ws=class{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new st(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new S_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(WA("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},S_=class extends ws{data(){return super.data()}};function WA(t,e){return typeof e=="string"?eE(t,e):e instanceof Es?e._internalPath:e._delegate._internalPath}function Zj(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new $(N.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Bh=class{convertValue(e,n="none"){switch(ni(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ne(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(pr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw H(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return si(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){let n=e.fields?.[ls].arrayValue?.values?.map(r=>Ne(r.doubleValue));return new ei(n)}convertGeoPoint(e){return new Xr(Ne(e.latitude),Ne(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=Uh(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(bc(e));default:return null}}convertTimestamp(e){let n=fr(e);return new Ue(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=Me.fromString(e);ve(vA(r),9688,{name:e});let i=new hh(r.get(1),r.get(3)),o=new q(r.popFirst(5));return i.isEqual(n)||hr(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};function KA(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var A_=class extends Bh{constructor(e){super(),this.firestore=e}convertBytes(e){return new dr(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new st(this.firestore,null,n)}};var Zr=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},ti=class t extends ws{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new ss(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(WA("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new $(N.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,n={};return n.type=t._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}};ti._jsonSchemaVersion="firestore/documentSnapshot/1.0",ti._jsonSchema={type:Be("string",ti._jsonSchemaVersion),bundleSource:Be("string","DocumentSnapshot"),bundleName:Be("string"),bundle:Be("string")};var ss=class extends ti{data(e={}){return super.data(e)}},as=class t{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Zr(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new ss(this._firestore,this._userDataWriter,r.key,r,new Zr(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new $(N.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(c=>{let u=new ss(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Zr(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>o||c.type!==3).map(c=>{let u=new ss(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Zr(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return c.type!==0&&(l=s.indexOf(c.doc.key),s=s.delete(c.doc.key)),c.type!==1&&(s=s.add(c.doc),h=s.indexOf(c.doc.key)),{type:Xj(c.type),doc:u,oldIndex:l,newIndex:h}})}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new $(N.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=t._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Cc.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let n=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function Xj(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return H(61501,{type:t})}}function QA(t){t=lr(t,st);let e=lr(t.firestore,oi);return qj(Kh(e),t._key).then(n=>JA(e,t,n))}as._jsonSchemaVersion="firestore/querySnapshot/1.0",as._jsonSchema={type:Be("string",as._jsonSchemaVersion),bundleSource:Be("string","QuerySnapshot"),bundleName:Be("string"),bundle:Be("string")};var Lc=class extends Bh{constructor(e){super(),this.firestore=e}convertBytes(e){return new dr(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new st(this.firestore,null,n)}};function tE(t,e,n){t=lr(t,st);let r=lr(t.firestore,oi),i=KA(t.converter,e,n);return eB(r,[HA($A(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,tn.none())])}function YA(t,...e){t=Fe(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||E0(e[r])||(n=e[r++]);let i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(E0(e[r])){let u=e[r];e[r]=u.next?.bind(u),e[r+1]=u.error?.bind(u),e[r+2]=u.complete?.bind(u)}let o,s,c;if(t instanceof st)s=lr(t.firestore,oi),c=$h(t._key.path),o={next:u=>{e[r]&&e[r](JA(s,t,u))},error:e[r+1],complete:e[r+2]};else{let u=lr(t,kh);s=lr(u.firestore,oi),c=u._query;let l=new Lc(s);o={next:h=>{e[r]&&e[r](new as(s,l,u,h))},error:e[r+1],complete:e[r+2]},Zj(t._query)}return(function(l,h,p,g){let y=new Ph(g),S=new Nh(h,y,p);return l.asyncQueue.enqueueAndForget(async()=>AA(await I_(l),S)),()=>{y.Nu(),l.asyncQueue.enqueueAndForget(async()=>RA(await I_(l),S))}})(Kh(s),c,i,o)}function eB(t,e){return(function(r,i){let o=new In;return r.asyncQueue.enqueueAndForget(async()=>Pj(await Hj(r),i,o)),o.promise})(Kh(t),e)}function JA(t,e,n){let r=n.docs.get(e._key),i=new Lc(t);return new ti(t,i,e._key,r,new Zr(n.hasPendingWrites,n.fromCache),e.converter)}var tB={maxAttempts:5};function yc(t,e){if((t=Fe(t)).firestore!==e)throw new $(N.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var R_=class{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=$A(e)}get(e){let n=yc(e,this._firestore),r=new A_(this._firestore);return this._transaction.lookup([n._key]).then(i=>{if(!i||i.length!==1)return H(24041);let o=i[0];if(o.isFoundDocument())return new ws(this._firestore,r,o.key,o,n.converter);if(o.isNoDocument())return new ws(this._firestore,r,n._key,null,n.converter);throw H(18433,{doc:o})})}set(e,n,r){let i=yc(e,this._firestore),o=KA(i.converter,n,r),s=HA(this._dataReader,"Transaction.set",i._key,o,i.converter!==null,r);return this._transaction.set(i._key,s),this}update(e,n,r,...i){let o=yc(e,this._firestore),s;return s=typeof(n=Fe(n))=="string"||n instanceof Es?Yj(this._dataReader,"Transaction.update",o._key,n,r,i):Qj(this._dataReader,"Transaction.update",o._key,n),this._transaction.update(o._key,s),this}delete(e){let n=yc(e,this._firestore);return this._transaction.delete(n._key),this}};var N_=class extends R_{constructor(e,n){super(e,n),this._firestore=e}get(e){let n=yc(e,this._firestore),r=new Lc(this._firestore);return super.get(e).then(i=>new ti(this._firestore,r,n._key,i._document,new Zr(!1,!1),n.converter))}};function Ss(t,e,n){t=lr(t,oi);let r=x(x({},tB),n);return(function(o){if(o.maxAttempts<1)throw new $(N.INVALID_ARGUMENT,"Max attempts must be at least 1")})(r),(function(o,s,c){let u=new In;return o.asyncQueue.enqueueAndForget(async()=>{let l=await zj(o);new __(o.asyncQueue,l,c,s,u).ju()}),u.promise})(Kh(t),i=>e(new N_(t,i)),r)}function ao(){return new D_("serverTimestamp")}(function(e,n=!0){(function(i){Cs=i})(Gr),qr(new Xt("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),c=new oi(new Ky(r.getProvider("auth-internal")),new Jy(s,r.getProvider("app-check-internal")),(function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new $(N.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new hh(l.options.projectId,h)})(s,i),s);return o=x({useFetchStreams:n},o),c._setSettings(o),c},"PUBLIC").setMultipleInstances(!0)),En(OS,kS,e),En(OS,kS,"esm2020")})();var nB={apiKey:"AIzaSyD1m1RhdiM9NtlEv9-lk-TT9bQhBUvC2d0",authDomain:"clouset-cs2.firebaseapp.com",projectId:"clouset-cs2",storageBucket:"clouset-cs2.firebasestorage.app",messagingSenderId:"129931894882",appId:"1:129931894882:web:a45936fa981264e8ee713b"},ZA=iy(nB),co=ky(ZA),uo=BA(ZA);var rn=class t{user$=new me(e=>{let n=Qd(co,r=>e.next(r),r=>e.error(r));return()=>n()});async ensurePersistence(){await xy(co,Yd)}async getUserOnce(){return await new Promise(e=>{let n=Qd(co,r=>{n(),e(r??null)})})}async isLoggedInOnce(){return!!await this.getUserOnce()}async loginWithCustomToken(e){return await this.ensurePersistence(),(await My(co,e)).user}async logout(){await Py(co)}async loginAnonymous(){return await this.ensurePersistence(),(await Ny(co)).user}static \u0275fac=function(n){return new(n||t)};static \u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"})};function rB(t,e){t&1&&(j(0,"p",5),M(1,"Procesando..."),B())}function iB(t,e){if(t&1&&(j(0,"p",6),M(1),B()),t&2){let n=V();k(),Te(n.error)}}var Yh=class t{auth=P(rn);route=P(kn);router=P(Zt);loading=!1;error="";async ngOnInit(){let e=this.route.snapshot.queryParamMap.get("token"),n=this.route.snapshot.queryParamMap.get("error");if(n&&(this.error=n),e){this.loading=!0;try{await this.auth.loginWithCustomToken(e),await this.router.navigateByUrl("/dashboard")}catch(r){this.error=r?.message??"Error al iniciar sesi\xF3n"}finally{this.loading=!1}}}loginSteam(){let e=`${window.location.origin}/login`,n=`/api/auth/steam/start?redirect=${encodeURIComponent(e)}`;window.location.href=n}async loginAnon(){this.loading=!0,this.error="";try{await this.auth.loginAnonymous(),await this.router.navigateByUrl("/dashboard")}catch(e){this.error=e?.message??"Error en login an\xF3nimo"}finally{this.loading=!1}}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=gn({type:t,selectors:[["ng-component"]],decls:13,vars:2,consts:[[1,"custom-wrapper"],[1,"custom-card"],["src","clouset.png",1,"img-logo"],["role","button",1,"button-27","steam-btn",3,"click"],["src","steam-logo.png","alt","Steam",1,"img-button"],[2,"margin-top","12px"],[2,"color","#b00020","margin-top","12px"]],template:function(n,r){n&1&&(j(0,"div",0)(1,"div",1)(2,"h1"),Ft(3,"img",2),B(),j(4,"button",3),yn("click",function(){return r.loginSteam()}),Ft(5,"img",4),j(6,"span"),M(7,"Login con Steam"),B()(),j(8,"button",3),yn("click",function(){return r.loginAnon()}),j(9,"span"),M(10,"Login con Anon"),B()(),te(11,rB,2,0,"p",5),te(12,iB,2,1,"p",6),B()()),n&2&&(k(11),ne(r.loading?11:-1),k(),ne(r.error?12:-1))},dependencies:[zl],styles:[".steam-btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:12px}.img-button[_ngcontent-%COMP%]{height:100%;max-height:32px;width:auto;display:block}"]})};function nE(t){t||(t=P(fn));let e=new me(n=>{if(t.destroyed){n.next();return}return t.onDestroy(n.next.bind(n))});return n=>n.pipe(gi(e))}var oB=["matches","current"],Jh=["de_inferno","de_mirage","de_nuke","de_overpass","de_ancient","de_vertigo","de_anubis"],sB=["esperando_jugadores","seleccionando_lideres","armando_equipos","seleccionando_mapa","en_curso"];function rE(){return{estado:"esperando_jugadores",map:null,team1:{name:"Team A",players:[]},team2:{name:"Team B",players:[]},queue:[],mapPool:[...Jh],bannedMaps:[],mapTurn:"team1",mapBanCount:0,updatedAt:ao()}}function iE(t){return typeof t=="string"&&sB.includes(t)}function aB(t){let e={};if(iE(t.estado)||(e.estado="esperando_jugadores"),t.map===void 0&&(e.map=null),Array.isArray(t.queue)||(e.queue=[]),Array.isArray(t.mapPool)||(e.mapPool=[...Jh]),Array.isArray(t.bannedMaps)||(e.bannedMaps=[]),!t.team1||typeof t.team1!="object")e.team1={name:"Team A",players:[]};else{let n={};t.team1.name||(n.name="Team A"),Array.isArray(t.team1.players)||(n.players=[]),Object.keys(n).length&&(e.team1=x(x({},t.team1),n))}if(!t.team2||typeof t.team2!="object")e.team2={name:"Team B",players:[]};else{let n={};t.team2.name||(n.name="Team B"),Array.isArray(t.team2.players)||(n.players=[]),Object.keys(n).length&&(e.team2=x(x({},t.team2),n))}return e}var As=class t{matchRef=jA(uo,...oB);_match$=new He(null);match$=this._match$.asObservable();unsub=null;async ensureAndSubscribe(){let e=await QA(this.matchRef);if(!e.exists())await tE(this.matchRef,rE(),{merge:!1});else{let n=e.data(),r=aB(n);Object.keys(r).length>0&&await tE(this.matchRef,r,{merge:!0})}this.unsub||(this.unsub=YA(this.matchRef,n=>{this._match$.next(n.data()??null)},n=>{console.error("Match onSnapshot error:",n),this._match$.next(null)}))}async joinQueue(e){e&&await Ss(uo,async n=>{let r=await n.get(this.matchRef);if(!r.exists()){n.set(this.matchRef,rE(),{merge:!1});return}let i=r.data(),o=iE(i.estado)?i.estado:"esperando_jugadores";if(o!=="esperando_jugadores")throw new Error(`No se puede unirse: estado actual = ${o}`);let s=Array.isArray(i.queue)?[...i.queue]:[];if(s.includes(e))return;if(s.length>=10)throw new Error("La queue ya est\xE1 completa (10 jugadores).");s.push(e);let c={queue:s,updatedAt:ao()};iE(i.estado)||(c.estado="esperando_jugadores"),n.update(this.matchRef,c)})}async leaveQueue(e){e&&await Ss(uo,async n=>{let r=await n.get(this.matchRef);if(!r.exists())return;let i=r.data();if(i.estado!=="esperando_jugadores")return;let s=(Array.isArray(i.queue)?[...i.queue]:[]).filter(c=>c!==e);n.update(this.matchRef,{queue:s,updatedAt:ao()})})}async pickPlayer(e,n){!e||!n||await Ss(uo,async r=>{let i=await r.get(this.matchRef);if(!i.exists())throw new Error("Match no existe.");let o=i.data();if(o.estado!=="armando_equipos")throw new Error(`No se puede pickear: estado = ${o.estado}`);let s=o.team1?.players?[...o.team1.players]:[],c=o.team2?.players?[...o.team2.players]:[],u=s[0]??null,l=c[0]??null;if(!u||!l)throw new Error("No hay l\xEDderes definidos todav\xEDa.");let h=o.turn||"team1";if(h==="team1"){if(e!==u)throw new Error("No sos el l\xEDder de Team A o no es tu turno.")}else if(e!==l)throw new Error("No sos el l\xEDder de Team B o no es tu turno.");let p=Array.isArray(o.unassigned)?[...o.unassigned]:Array.isArray(o.queue)?[...o.queue]:[];if(!p.includes(n))throw new Error("Ese jugador ya no est\xE1 disponible para pick.");if(n===u||n===l)throw new Error("No pod\xE9s pickear a un l\xEDder.");if(s.includes(n)||c.includes(n))throw new Error("Ese jugador ya est\xE1 en un equipo.");if(h==="team1"&&s.length>=5)throw new Error("Team A ya est\xE1 completo.");if(h==="team2"&&c.length>=5)throw new Error("Team B ya est\xE1 completo.");let g=p.filter(Y=>Y!==n),y=s,S=c;h==="team1"?y=[...s,n]:S=[...c,n];let R=h==="team1"?"team2":"team1",A=y.length===5&&S.length===5,L={team1:le(x({},o.team1??{name:"Team A"}),{players:y}),team2:le(x({},o.team2??{name:"Team B"}),{players:S}),unassigned:g,turn:R,updatedAt:ao()};A&&(L.estado="seleccionando_mapa",L.queue=[],L.unassigned=[],L.mapTurn="team1",L.mapBanCount=0,L.bannedMaps=[],L.mapPool=Array.isArray(o.mapPool)?[...o.mapPool]:[...Jh]),r.update(this.matchRef,L)})}async banMap(e,n){if(!e||!n)return;let r=["team1","team1","team2","team2","team1","team2"];await Ss(uo,async i=>{let o=await i.get(this.matchRef);if(!o.exists())throw new Error("Match no existe.");let s=o.data();if(s.estado!=="seleccionando_mapa")throw new Error(`No se puede banear: estado = ${s.estado}`);let c=s.team1?.players??[],u=s.team2?.players??[],l=c[0]??null,h=u[0]??null;if(!l||!h)throw new Error("No hay l\xEDderes definidos.");let p=Array.isArray(s.bannedMaps)?[...s.bannedMaps]:[],g=p.length,y=r[g];if(!y)throw new Error("No hay m\xE1s mapas para banear.");if(y==="team1"&&e!==l)throw new Error("No sos el l\xEDder de Team A o no es tu turno.");if(y==="team2"&&e!==h)throw new Error("No sos el l\xEDder de Team B o no es tu turno.");let S=Array.isArray(s.mapPool)&&s.mapPool.length>0?[...s.mapPool]:[...Jh];if(!S.includes(n))throw new Error("Ese mapa no est\xE1 en el pool.");if(p.includes(n))throw new Error("Ese mapa ya est\xE1 baneado.");let R=[...p,n],A=S.filter(rt=>!R.includes(rt));if(A.length===0)throw new Error("No quedan mapas disponibles.");let L=g+1,Y=r[g+1]??null,ue={bannedMaps:R,mapTurn:Y,mapBanCount:L,mapPool:S,updatedAt:ao()};A.length===1&&(ue.map=A[0]),i.update(this.matchRef,ue)})}async requestFinalizeMatch(e){e&&await Ss(uo,async n=>{let r=await n.get(this.matchRef);if(!r.exists())throw new Error("Match no existe.");let i=r.data();if(i.estado!=="en_curso")throw new Error(`No se puede finalizar: estado = ${i.estado}`);let o=i.team1?.players??[],s=i.team2?.players??[],c=o[0]??null,u=s[0]??null;if(!c||!u)throw new Error("No hay l\xEDderes definidos.");if(e!==c&&e!==u)throw new Error("Solo los l\xEDderes pueden finalizar el match.");let l=Array.isArray(i.finalizeBy)?[...i.finalizeBy]:[];if(l.includes(e))return;if(l.push(e),l.includes(c)&&l.includes(u)){n.set(this.matchRef,rE(),{merge:!1});return}n.update(this.matchRef,{finalizeBy:l,updatedAt:ao()})})}async cancelMatch(){let e=await fetch("/api/match/cancel",{method:"POST"});if(!e.ok){let n=await e.text().catch(()=>"");throw new Error(`No se pudo cancelar el match (${e.status}) ${n}`.trim())}}dispose(){this.unsub&&this.unsub(),this.unsub=null,this._match$.next(null)}static \u0275fac=function(n){return new(n||t)};static \u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"})};function cB(t,e){if(t&1&&(j(0,"span"),M(1,"Mapa: "),j(2,"b"),M(3),B()()),t&2){let n=V();k(3),Te(n.match.map)}}function uB(t,e){if(t&1&&(j(0,"span"),M(1,"Turno: "),j(2,"b"),M(3),B()()),t&2){let n=V();k(3),Te(n.turn==="team1"?(n.match.team1==null?null:n.match.team1.name)??"Team A":(n.match.team2==null?null:n.match.team2.name)??"Team B")}}function lB(t,e){t&1&&(j(0,"div",4),M(1," Est\xE1s fuera. Activ\xE1 "),j(2,"b"),M(3,"Ver match"),B(),M(4," para ver el detalle. "),B())}function dB(t,e){if(t&1&&(Ft(0,"img",14),j(1,"div",13),M(2),B()),t&2){let n=e,r=V().$implicit,i=V(2);Xn("leaderAvatar",i.isLeaderA(r)),Vt("src",n.avatar,Lt),k(2),Te(n.personaName)}}function hB(t,e){if(t&1&&(j(0,"div",13),M(1),B()),t&2){let n=V().$implicit;k(),Te(n)}}function fB(t,e){if(t&1&&(j(0,"div",12),te(1,dB,3,4)(2,hB,2,1,"div",13),B()),t&2){let n,r=e.$implicit,i=V(2);Xn("leader",i.isLeaderA(r)),Or("title",i.titleFor(r)),k(),ne((n=i.profileOf(r))?1:2,n)}}function pB(t,e){t&1&&(j(0,"div",10),M(1,"Vac\xEDo"),B())}function mB(t,e){if(t&1&&(Ft(0,"img",14),j(1,"div",18),M(2),B()),t&2){let n=e;Vt("src",n.avatar,Lt),k(2),Te(n.personaName)}}function gB(t,e){if(t&1&&(j(0,"div",18),M(1),B()),t&2){let n=V().$implicit;k(),Te(n)}}function yB(t,e){if(t&1&&(j(0,"div",17),te(1,mB,3,2)(2,gB,2,1,"div",18),B()),t&2){let n,r=e.$implicit,i=V(3);Or("title",i.titleFor(r)),k(),ne((n=i.profileOf(r))?1:2,n)}}function vB(t,e){t&1&&(j(0,"div",10),M(1,"No hay nadie todav\xEDa"),B())}function _B(t,e){if(t&1&&(j(0,"div",15),M(1,"Jugadores en cola"),B(),j(2,"div",16),Lr(3,yB,3,2,"div",17,kr),te(5,vB,2,0,"div",10),B()),t&2){let n=V(2);k(3),Fr(n.queue),k(2),ne(n.queue.length===0?5:-1)}}function EB(t,e){if(t&1&&(Ft(0,"img",14),j(1,"div",18),M(2),B()),t&2){let n=e;Vt("src",n.avatar,Lt),k(2),Te(n.personaName)}}function IB(t,e){if(t&1&&(j(0,"div",18),M(1),B()),t&2){let n=V().$implicit;k(),Te(n)}}function wB(t,e){if(t&1&&(j(0,"div",17),te(1,EB,3,2)(2,IB,2,1,"div",18),B()),t&2){let n,r=e.$implicit,i=V(3);Or("title",i.titleFor(r)),k(),ne((n=i.profileOf(r))?1:2,n)}}function CB(t,e){if(t&1&&(j(0,"div",15),M(1,"Seleccionando l\xEDderes\u2026"),B(),j(2,"div",10),M(3,"En unos segundos se asignan 2 l\xEDderes y pasan a los equipos."),B(),j(4,"div",16),Lr(5,wB,3,2,"div",17,kr),B()),t&2){let n=V(2);k(5),Fr(n.queue)}}function TB(t,e){t&1&&(j(0,"div",10),M(1,"Es tu turno. Eleg\xED un jugador y apret\xE1 Pickear."),B())}function DB(t,e){t&1&&(j(0,"div",10),M(1,"Solo el l\xEDder del turno puede pickear."),B())}function bB(t,e){if(t&1&&(Ft(0,"img",14),j(1,"div",18),M(2),B()),t&2){let n=e;Vt("src",n.avatar,Lt),k(2),Te(n.personaName)}}function SB(t,e){if(t&1&&(j(0,"div",18),M(1),B()),t&2){let n=V().$implicit;k(),Te(n)}}function AB(t,e){if(t&1){let n=It();j(0,"div",23),yn("click",function(){let i=lt(n).$implicit,o=V(3);return dt(o.onSelect(i))}),te(1,bB,3,2)(2,SB,2,1,"div",18),B()}if(t&2){let n,r=e.$implicit,i=V(3);Xn("selected",i.selectedId===r),Or("title",i.titleFor(r)),k(),ne((n=i.profileOf(r))?1:2,n)}}function RB(t,e){t&1&&(j(0,"div",10),M(1,"No hay disponibles"),B())}function NB(t,e){if(t&1&&(j(0,"div",20),M(1),B()),t&2){let n=V(3);k(),Ge(" ",n.pickErr," ")}}function MB(t,e){if(t&1){let n=It();j(0,"div",15),M(1,"Jugadores disponibles"),B(),te(2,TB,2,0,"div",10)(3,DB,2,0,"div",10),j(4,"div",16),Lr(5,AB,3,4,"div",19,kr),te(7,RB,2,0,"div",10),B(),te(8,NB,2,1,"div",20),j(9,"div",21)(10,"button",22),yn("click",function(){lt(n);let i=V(2);return dt(i.onPick())}),M(11),B()()}if(t&2){let n=V(2);k(2),ne(n.canPick?2:3),k(3),Fr(n.availableIds),k(2),ne(n.availableIds.length===0?7:-1),k(),ne(n.pickErr?8:-1),k(2),Vt("disabled",!n.canPick||!n.selectedId||n.busyPick),k(),Ge(" ",n.busyPick?"Pickeando\u2026":"Pickear"," ")}}function xB(t,e){t&1&&(j(0,"div",10),M(1,"Es tu turno. Eleg\xED un mapa para banear."),B())}function PB(t,e){t&1&&(j(0,"div",10),M(1,"Solo el l\xEDder del turno puede banear."),B())}function OB(t,e){if(t&1){let n=It();j(0,"div",26),Ft(1,"div",27),j(2,"div",28),M(3),B(),j(4,"button",29),yn("click",function(){let i=lt(n).$implicit,o=V(3);return dt(o.onBanMap(i))}),M(5),B()()}if(t&2){let n=e.$implicit,r=V(3);Xn("banned",r.isBanned(n)),k(3),Te(n),k(),Vt("disabled",r.busyBan||!r.canBan||r.isBanned(n)),k(),Ge(" ",r.isBanned(n)?"Baneado":r.busyBan?"Baneando\u2026":"Ban"," ")}}function kB(t,e){if(t&1&&(j(0,"div",20),M(1),B()),t&2){let n=V(3);k(),Ge(" ",n.banErr," ")}}function LB(t,e){if(t&1&&(j(0,"div",15),M(1,"Baneo de mapas"),B(),j(2,"div",10),M(3," Turno: "),j(4,"b"),M(5),B(),M(6," \xB7 Bans: "),j(7,"b"),M(8),B(),M(9," \xB7 Restantes: "),j(10,"b"),M(11),B()(),te(12,xB,2,0,"div",10)(13,PB,2,0,"div",10),j(14,"div",24),Lr(15,OB,6,5,"div",25,kr),B(),te(17,kB,2,1,"div",20)),t&2){let n=V(2);k(5),Te(n.mapTurn==="team1"?(n.match.team1==null?null:n.match.team1.name)??"Team A":(n.match.team2==null?null:n.match.team2.name)??"Team B"),k(3),Te(n.match.mapBanCount??0),k(3),Te(n.mapPool.length-n.bannedMaps.length),k(),ne(n.canBan?12:13),k(3),Fr(n.mapPool),k(2),ne(n.banErr?17:-1)}}function FB(t,e){if(t&1&&(j(0,"a",33),M(1),B()),t&2){let n=V(3);Vt("href",n.isParticipant?n.connection.connectUrl:n.connection.spectateUrl,Lt),k(),Ge(" ",n.isParticipant?"Ingresar al servidor":"Ingresar como espectador"," ")}}function VB(t,e){t&1&&(j(0,"div",10),M(1,"Esperando confirmaci\xF3n del otro l\xEDder\u2026"),B())}function jB(t,e){if(t&1&&(j(0,"div",20),M(1),B()),t&2){let n=V(4);k(),Te(n.finalizeErr)}}function BB(t,e){if(t&1){let n=It();j(0,"div",34),M(1," Para reiniciar el match, ambos l\xEDderes deben confirmar. "),B(),j(2,"button",35),yn("click",function(){lt(n);let i=V(3);return dt(i.onFinalize())}),M(3),B(),te(4,VB,2,0,"div",10),te(5,jB,2,1,"div",20)}if(t&2){let n=V(3);k(2),Vt("disabled",n.busyFinalize||n.hasFinalized),k(),Ge(" ",n.hasFinalized?"Confirmado":n.busyFinalize?"Finalizando\u2026":"Finalizar match"," "),k(),ne(n.hasFinalized?4:-1),k(),ne(n.finalizeErr?5:-1)}}function UB(t,e){if(t&1&&(j(0,"div",20),M(1),B()),t&2){let n=V(4);k(),Te(n.cancelErr)}}function $B(t,e){if(t&1){let n=It();j(0,"button",36),yn("click",function(){lt(n);let i=V(3);return dt(i.onCancel())}),M(1),B(),te(2,UB,2,1,"div",20)}if(t&2){let n=V(3);Vt("disabled",n.busyCancel),k(),Ge(" ",n.busyCancel?"Cancelando\u2026":"Cancelar match"," "),k(),ne(n.cancelErr?2:-1)}}function HB(t,e){if(t&1&&(j(0,"div",15),M(1,"Match en curso"),B(),j(2,"div",30),Ft(3,"div",31),j(4,"div",32),M(5),B(),te(6,FB,2,2,"a",33),B(),te(7,BB,6,4),te(8,$B,3,3)),t&2){let n=V(2);k(5),Te(n.match.map??"Mapa no definido"),k(),ne(n.connection?6:-1),k(),ne(n.canFinalize?7:-1),k(),ne(n.canCancel?8:-1)}}function zB(t,e){if(t&1&&(Ft(0,"img",14),j(1,"div",13),M(2),B()),t&2){let n=e,r=V().$implicit,i=V(2);Xn("leaderAvatar",i.isLeaderB(r)),Vt("src",n.avatar,Lt),k(2),Te(n.personaName)}}function qB(t,e){if(t&1&&(j(0,"div",13),M(1),B()),t&2){let n=V().$implicit;k(),Te(n)}}function GB(t,e){if(t&1&&(j(0,"div",12),te(1,zB,3,4)(2,qB,2,1,"div",13),B()),t&2){let n,r=e.$implicit,i=V(2);Xn("leader",i.isLeaderB(r)),Or("title",i.titleFor(r)),k(),ne((n=i.profileOf(r))?1:2,n)}}function WB(t,e){t&1&&(j(0,"div",10),M(1,"Vac\xEDo"),B())}function KB(t,e){if(t&1&&(j(0,"div",5)(1,"section",6)(2,"div",7),M(3),B(),j(4,"div",8),Lr(5,fB,3,4,"div",9,kr),te(7,pB,2,0,"div",10),B()(),j(8,"section",11),te(9,_B,6,1)(10,CB,7,0)(11,MB,12,5)(12,LB,18,5)(13,HB,9,4),B(),j(14,"section",6)(15,"div",7),M(16),B(),j(17,"div",8),Lr(18,GB,3,4,"div",9,kr),te(20,WB,2,0,"div",10),B()()()),t&2){let n,r=V();k(3),Te((r.match.team1==null?null:r.match.team1.name)??"Team A"),k(2),Fr(r.teamA),k(2),ne(r.teamA.length===0?7:-1),k(2),ne((n=r.match.estado)==="esperando_jugadores"?9:n==="seleccionando_lideres"?10:n==="armando_equipos"?11:n==="seleccionando_mapa"?12:n==="en_curso"?13:-1),k(7),Te((r.match.team2==null?null:r.match.team2.name)??"Team B"),k(2),Fr(r.teamB),k(2),ne(r.teamB.length===0?20:-1)}}var Zh=class t{matchSvc=P(As);mapPool=["de_inferno","de_mirage","de_nuke","de_overpass","de_ancient","de_vertigo","de_anubis"];match;showDetails=!0;profileOf;mySteamId=null;leaderA=null;leaderB=null;connection=null;selectedId=null;busyPick=!1;pickErr="";busyBan=!1;banErr="";busyFinalize=!1;finalizeErr="";busyCancel=!1;cancelErr="";get teamA(){return this.match?.team1?.players??[]}get teamB(){return this.match?.team2?.players??[]}get queue(){return this.match?.queue??[]}get unassigned(){let e=this.match;return Array.isArray(e.unassigned)?e.unassigned:[]}get leaderAId(){return this.leaderA??this.teamA[0]??null}get leaderBId(){return this.leaderB??this.teamB[0]??null}get turn(){return this.match?.turn==="team2"?"team2":"team1"}get mapTurn(){return this.match?.mapTurn==="team2"?"team2":"team1"}get finalizeBy(){return Array.isArray(this.match?.finalizeBy)?this.match.finalizeBy:[]}isLeaderA(e){return!!e&&e===this.leaderAId}isLeaderB(e){return!!e&&e===this.leaderBId}get canPick(){return this.match?.estado!=="armando_equipos"||!this.mySteamId?!1:this.turn==="team1"?this.mySteamId===this.leaderAId:this.mySteamId===this.leaderBId}get canBan(){return this.match?.estado!=="seleccionando_mapa"||this.match?.map||!this.mySteamId?!1:this.mapTurn==="team1"?this.mySteamId===this.leaderAId:this.mySteamId===this.leaderBId}get isParticipant(){return this.mySteamId?this.teamA.includes(this.mySteamId)||this.teamB.includes(this.mySteamId):!1}get canFinalize(){return this.match?.estado!=="en_curso"||!this.mySteamId?!1:this.mySteamId===this.leaderAId||this.mySteamId===this.leaderBId}get canCancel(){return this.match?.estado!=="en_curso"||!this.mySteamId?!1:this.mySteamId===this.leaderAId||this.mySteamId===this.leaderBId}get hasFinalized(){return this.mySteamId?this.finalizeBy.includes(this.mySteamId):!1}get bannedMaps(){return Array.isArray(this.match?.bannedMaps)?this.match.bannedMaps:[]}isBanned(e){return this.bannedMaps.includes(e)}get availableIds(){let e=this.unassigned.length?this.unassigned:this.queue,n=this.leaderAId,r=this.leaderBId;return e.filter(i=>i&&i!==n&&i!==r)}titleFor(e){return this.profileOf?.(e)?.personaName??e}onSelect(e){e&&this.match?.estado==="armando_equipos"&&(this.selectedId=this.selectedId===e?null:e,this.pickErr="")}async onBanMap(e){if(this.canBan&&!(!e||this.isBanned(e)))try{this.busyBan=!0,this.banErr="",await this.matchSvc.banMap(this.mySteamId,e)}catch(n){this.banErr=n?.message??String(n)}finally{this.busyBan=!1}}async onPick(){if(this.canPick&&this.selectedId)try{this.busyPick=!0,this.pickErr="",await this.matchSvc.pickPlayer(this.mySteamId,this.selectedId),this.selectedId=null}catch(e){this.pickErr=e?.message??String(e)}finally{this.busyPick=!1}}async onFinalize(){if(!(!this.canFinalize||this.hasFinalized))try{this.busyFinalize=!0,this.finalizeErr="",await this.matchSvc.requestFinalizeMatch(this.mySteamId)}catch(e){this.finalizeErr=e?.message??String(e)}finally{this.busyFinalize=!1}}async onCancel(){if(this.canCancel)try{this.busyCancel=!0,this.cancelErr="",await this.matchSvc.cancelMatch()}catch(e){this.cancelErr=e?.message??String(e)}finally{this.busyCancel=!1}}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=gn({type:t,selectors:[["app-match-board"]],inputs:{match:"match",showDetails:"showDetails",profileOf:"profileOf",mySteamId:"mySteamId",leaderA:"leaderA",leaderB:"leaderB",connection:"connection"},decls:16,vars:5,consts:[[1,"board"],[1,"board__header"],[1,"state"],[1,"meta"],[1,"board__locked"],[1,"board__grid"],[1,"col"],[1,"col__title"],[1,"stack"],[1,"player",3,"leader"],[1,"hint"],[1,"center"],[1,"player"],[1,"name"],["alt","avatar",1,"avatar",3,"src"],[1,"center__title"],[1,"centerGrid"],[1,"tile"],[1,"name","tiny"],[1,"tile","selectable",3,"selected"],[1,"err"],[2,"margin-top","12px","display","flex","gap","10px"],["type","button",1,"btn","primary",2,"width","100%",3,"click","disabled"],[1,"tile","selectable",3,"click"],[1,"mapList"],[1,"mapRow",3,"banned"],[1,"mapRow"],[1,"mapThumb"],[1,"mapName"],["type","button",1,"btn",3,"click","disabled"],[1,"mapCard"],[1,"mapThumb","big"],[1,"mapName","big"],[1,"btn","primary",3,"href"],[1,"hint",2,"margin-top","12px"],["type","button",1,"btn",2,"margin-top","8px","width","100%",3,"click","disabled"],["type","button",1,"btn","danger",2,"margin-top","8px","width","100%",3,"click","disabled"]],template:function(n,r){n&1&&(j(0,"div",0)(1,"div",1)(2,"div",2)(3,"span"),M(4,"Estado:"),B(),j(5,"b"),M(6),B()(),j(7,"div",3)(8,"span"),M(9,"Queue: "),j(10,"b"),M(11),B()(),te(12,cB,4,1,"span"),te(13,uB,4,1,"span"),B()(),te(14,lB,5,0,"div",4)(15,KB,21,5,"div",5),B()),n&2&&(k(6),Te(r.match.estado),k(5),Ge("",r.queue.length,"/10"),k(),ne(r.match.map?12:-1),k(),ne(r.match.estado==="armando_equipos"?13:-1),k(),ne(r.showDetails?15:14))},styles:[".board[_ngcontent-%COMP%]{border:1px solid #e5e5e5;border-radius:14px;padding:12px}.board__header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:12px;padding-bottom:10px;border-bottom:1px solid #eee;margin-bottom:10px;font-size:13px}.meta[_ngcontent-%COMP%]{display:flex;gap:12px;opacity:.85;flex-wrap:wrap}.board__locked[_ngcontent-%COMP%]{padding:16px;font-size:13px;opacity:.75}.board__grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1.3fr 1fr;gap:12px;align-items:start}.col[_ngcontent-%COMP%], .center[_ngcontent-%COMP%]{border:1px solid #eee;border-radius:12px;padding:10px;min-height:360px}.col__title[_ngcontent-%COMP%], .center__title[_ngcontent-%COMP%]{font-weight:800;font-size:12px;margin-bottom:10px}.stack[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.player[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;border:1px solid #ddd;border-radius:12px;padding:6px 8px}.player.leader[_ngcontent-%COMP%]{border-style:solid;border-width:2px;border-color:#ff8a00}.avatar[_ngcontent-%COMP%]{width:26px;height:26px;border-radius:8px;object-fit:cover;flex:0 0 auto}.avatar.leaderAvatar[_ngcontent-%COMP%]{outline:2px solid #ff8a00;outline-offset:1px}.name[_ngcontent-%COMP%]{font-size:12px;font-weight:600;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.tiny[_ngcontent-%COMP%]{font-size:11px;font-weight:600}.hint[_ngcontent-%COMP%]{font-size:12px;opacity:.7;padding:6px 0}.centerGrid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:8px}.tile[_ngcontent-%COMP%]{border:1px solid #ddd;border-radius:12px;padding:8px;display:flex;gap:8px;align-items:center;min-height:44px}.selectable[_ngcontent-%COMP%]{cursor:pointer}.tile.selected[_ngcontent-%COMP%]{border-width:2px;border-color:#111}.err[_ngcontent-%COMP%]{margin-top:10px;padding:10px;border:1px solid #b00020;border-radius:12px;font-size:12px}.mapList[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.mapRow[_ngcontent-%COMP%]{display:grid;grid-template-columns:44px 1fr 70px;gap:10px;align-items:center;border:1px solid #ddd;border-radius:12px;padding:8px}.mapRow.banned[_ngcontent-%COMP%]{opacity:.55}.mapThumb[_ngcontent-%COMP%]{width:44px;height:28px;border-radius:8px;border:1px dashed #bbb}.mapThumb.big[_ngcontent-%COMP%]{width:100%;height:110px}.mapName[_ngcontent-%COMP%]{font-size:12px;font-weight:700}.mapName.big[_ngcontent-%COMP%]{text-align:center;font-size:14px;margin-top:8px}.mapCard[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;align-items:stretch}.btn[_ngcontent-%COMP%]{padding:8px 10px;border:1px solid #ddd;border-radius:12px;background:transparent;cursor:pointer;font-size:12px}.btn.primary[_ngcontent-%COMP%]{font-weight:800}.btn.danger[_ngcontent-%COMP%]{border-color:#b00020;color:#b00020;font-weight:700}.btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}"]})};function QB(t,e){if(t&1&&(Zn(0,"img",12),Z(1,"div",13)(2,"div",14),M(3),se(),Z(4,"div",15),M(5),se(),Z(6,"a",16),M(7," Ver perfil "),se()()),t&2){let n=e;Vr("src",n.avatar,Lt),k(3),Ge(" ",n.personaName," "),k(2),Te(n.steamId),k(),Vr("href",n.profileUrl,Lt)}}function YB(t,e){t&1&&(Z(0,"div",5),M(1,"Cargando perfil Steam\u2026"),se())}function JB(t,e){t&1&&(Z(0,"div",17),M(1," Estado: "),Z(2,"b"),M(3,"En cola"),se()())}function ZB(t,e){t&1&&(Z(0,"div",17),M(1," Estado: "),Z(2,"b"),M(3,"En match (Team A)"),se()())}function XB(t,e){t&1&&(Z(0,"div",17),M(1," Estado: "),Z(2,"b"),M(3,"En match (Team B)"),se()())}function eU(t,e){t&1&&(Z(0,"div",17),M(1," Estado: "),Z(2,"b"),M(3,"Fuera"),se()())}function tU(t,e){if(t&1&&te(0,JB,4,0,"div",17)(1,ZB,4,0,"div",17)(2,XB,4,0,"div",17)(3,eU,4,0,"div",17),t&2){let n,r=V(),i=V(2);ne((n=i.myStatus(e,r))==="cola"?0:n==="team1"?1:n==="team2"?2:3)}}function nU(t,e){t&1&&(Z(0,"div",5),M(1,"Cargando match\u2026"),se())}function rU(t,e){if(t&1){let n=It();Z(0,"button",8),xn("click",function(){lt(n);let i=V(2),o=V(),s=V(2);return dt(s.leave(i,o))}),M(1," Salir del match "),se()}}function iU(t,e){if(t&1){let n=It();Z(0,"button",8),xn("click",function(){lt(n);let i=V(2),o=V(),s=V(2);return dt(s.join(i,o))}),M(1," Ingresar al match "),se()}}function oU(t,e){if(t&1&&(Z(0,"div",18),M(1),se(),te(2,rU,2,0,"button",19)(3,iU,2,0,"button",19)),t&2){let n=V(),r=V(),i=V(2);k(),Ge(" Esperando jugadores (",n.queue.length,"/10) "),k(),ne(i.myStatus(n,r)==="cola"?2:3)}}function sU(t,e){t&1&&(Z(0,"div",21),M(1," Activ\xE1 \u201CVer match\u201D para ver el detalle del estado. "),se())}function aU(t,e){if(t&1){let n=It();Z(0,"button",8),xn("click",function(){lt(n);let i=V(5);return dt(i.toggleWatch())}),M(1),se(),te(2,sU,2,0,"div",21)}if(t&2){let n=V(5);k(),Ge(" ",n.watchMatch?"Dejar de ver":"Ver match"," "),k(),ne(n.watchMatch?-1:2)}}function cU(t,e){t&1&&(Z(0,"div",20),M(1," Est\xE1s dentro. Vas a ver el estado completo a la derecha. "),se())}function uU(t,e){if(t&1&&(Z(0,"div",18),M(1," Seleccionando l\xEDderes\u2026 "),se(),te(2,aU,3,2)(3,cU,2,0,"div",20)),t&2){let n=V(),r=V(),i=V(2);k(2),ne(i.myStatus(n,r)==="fuera"?2:3)}}function lU(t,e){if(t&1){let n=It();Z(0,"button",8),xn("click",function(){lt(n);let i=V(5);return dt(i.toggleWatch())}),M(1),se()}if(t&2){let n=V(5);k(),Ge(" ",n.watchMatch?"Dejar de ver":"Ver match"," ")}}function dU(t,e){t&1&&(Z(0,"div",20),M(1," Seleccion\xE1 jugadores en el panel de la derecha. "),se())}function hU(t,e){if(t&1&&(Z(0,"div",18),M(1," Armando equipos\u2026 "),se(),te(2,lU,2,1,"button",19)(3,dU,2,0,"div",20)),t&2){let n=V(),r=V(),i=V(2);k(2),ne(i.myStatus(n,r)==="fuera"?2:3)}}function fU(t,e){if(t&1){let n=It();Z(0,"button",8),xn("click",function(){lt(n);let i=V(5);return dt(i.toggleWatch())}),M(1),se()}if(t&2){let n=V(5);k(),Ge(" ",n.watchMatch?"Dejar de ver":"Ver match"," ")}}function pU(t,e){t&1&&(Z(0,"div",20),M(1," Bane\xE1 mapas en el panel de la derecha. "),se())}function mU(t,e){if(t&1&&(Z(0,"div",18),M(1," Baneando mapas\u2026 "),se(),te(2,fU,2,1,"button",19)(3,pU,2,0,"div",20)),t&2){let n=V(),r=V(),i=V(2);k(2),ne(i.myStatus(n,r)==="fuera"?2:3)}}function gU(t,e){if(t&1&&(Z(0,"a",24),M(1," Ingresar como espectador "),se()),t&2){let n=V();Vr("href",n.spectateUrl,Lt)}}function yU(t,e){if(t&1&&(Z(0,"a",24),M(1," Ingresar al servidor "),se()),t&2){let n=V();Vr("href",n.connectUrl,Lt)}}function vU(t,e){if(t&1&&te(0,gU,2,1,"a",24)(1,yU,2,1,"a",24),t&2){let n=V(2),r=V(),i=V(2);ne(i.myStatus(n,r)==="fuera"?0:1)}}function _U(t,e){if(t&1&&(Z(0,"div",23),M(1),se()),t&2){let n=V(5);k(),Ge(" ",n.serverConnectionError," ")}}function EU(t,e){if(t&1&&(Z(0,"div",18),M(1," Match en curso "),se(),Z(2,"div",22),M(3," Mapa: "),Z(4,"b"),M(5),se()(),te(6,vU,2,1),te(7,_U,2,1,"div",23)),t&2){let n,r=V(),i=V(3);k(5),Te(r.map??"\u2014"),k(),ne((n=i.activeServerConnection)?6:-1,n),k(),ne(i.serverConnectionError?7:-1)}}function IU(t,e){if(t&1&&te(0,oU,4,2)(1,uU,4,1)(2,hU,4,1)(3,mU,4,1)(4,EU,8,3),t&2){let n;ne((n=e.estado)==="esperando_jugadores"?0:n==="seleccionando_lideres"?1:n==="armando_equipos"?2:n==="seleccionando_mapa"?3:n==="en_curso"?4:-1)}}function wU(t,e){t&1&&(Z(0,"div",5),M(1,"Cargando match\u2026"),se())}function CU(t,e){if(t&1&&Zn(0,"app-match-board",11),t&2){let n=e,r=V(),i=V(2);Vr("match",n)("showDetails",i.myStatus(n,r)!=="fuera"||i.watchMatch)("profileOf",i.profileOf.bind(i))("leaderA",(n.team1==null||n.team1.players==null?null:n.team1.players[0])??null)("leaderB",(n.team2==null||n.team2.players==null?null:n.team2.players[0])??null)("mySteamId",r)("connection",i.activeServerConnection)}}function TU(t,e){if(t&1){let n=It();Z(0,"div",1)(1,"div",2)(2,"section",3)(3,"div",4),te(4,QB,8,4)(5,YB,2,0,"div",5),se(),Z(6,"div",6),te(7,tU,4,1),Vo(8,"async"),Bi(9,nU,2,0,"div",5),se(),Z(10,"div",7)(11,"button",8),xn("click",function(){lt(n);let i=V(2);return dt(i.logout())}),M(12," Logout "),se()()(),Z(13,"section",3)(14,"h3",9),M(15,"Acciones"),se(),te(16,IU,5,1),Vo(17,"async"),Bi(18,wU,2,0,"div",5),se()(),Z(19,"div",10),te(20,CU,1,7,"app-match-board",11),Vo(21,"async"),se()()}if(t&2){let n,r,i,o,s=V(2);k(4),ne((n=s.profileOf(e))?4:5,n),k(3),ne((r=jo(8,4,s.match$))?7:9,r),k(9),ne((i=jo(17,6,s.match$))?16:18,i),k(4),ne((o=jo(21,8,s.match$))?20:-1,o)}}function DU(t,e){if(t&1){let n=It();Z(0,"button",8),xn("click",function(){lt(n);let i=V(2);return dt(i.logout())}),M(1,"Logoff"),se(),Z(2,"div"),M(3,"No permitido login an\xF3nimo"),se()}}function bU(t,e){if(t&1&&te(0,TU,22,10,"div",1)(1,DU,4,0),t&2){let n,r=V();ne((n=r.steamIdFromUid(e.uid))?0:1,n)}}function SU(t,e){t&1&&(Z(0,"p"),M(1,"Cargando sesi\xF3n\u2026"),se())}var Xh=class t{auth=P(rn);matchSvc=P(As);router=P(Zt);destroyRef=P(fn);watchMatch=!1;serverConnection=null;serverConnectionError="";fallbackServerConnection={host:"45.235.98.222",port:27159,spectatePort:27159,connectUrl:"steam://connect/45.235.98.222:27159",spectateUrl:"steam://connect/45.235.98.222:27159"};steamMe=null;steamErr="";profileCache=new Map;inflight=new Set;match$=this.matchSvc.match$;constructor(){this.matchSvc.ensureAndSubscribe().catch(e=>console.error("ensureAndSubscribe error",e)),this.matchSvc.match$.pipe(nE(this.destroyRef)).subscribe(e=>{if(!e)return;let n=new Set([...e.team1?.players??[],...e.team2?.players??[],...e.queue??[],...e.unassigned??[]]);for(let r of n)this.ensureProfile(r).catch(()=>{})}),this.auth.user$.pipe(nE(this.destroyRef)).subscribe(e=>{let n=this.steamIdFromUid(e?.uid??"");n&&this.ensureProfile(n).then(r=>this.steamMe=r).catch(()=>{})}),this.loadServerConnection().catch(e=>console.error("loadServerConnection error",e))}steamIdFromUid(e){return e?.startsWith("steam:")?e.slice(6):null}profileOf(e){return this.profileCache.get(e)??null}async ensureProfile(e){if(!e)return null;let n=this.profileCache.get(e);if(n)return n;if(this.inflight.has(e))return null;try{this.inflight.add(e);let r=await fetch(`/api/steam/me?steamId=${encodeURIComponent(e)}`);if(!r.ok){let o=await r.text().catch(()=>"");throw new Error(`SteamMe HTTP ${r.status} ${o}`.trim())}let i=await r.json();return this.profileCache.set(e,i),i}finally{this.inflight.delete(e)}}async loadServerConnection(){try{let e=await fetch("/api/server/connection");if(!e.ok){let n=await e.text().catch(()=>"");this.serverConnectionError=`No se pudo obtener el servidor (${e.status}) ${n}`.trim();return}this.serverConnection=await e.json(),this.serverConnectionError=""}catch(e){this.serverConnectionError=e?.message??String(e)}}get activeServerConnection(){return this.serverConnection??this.fallbackServerConnection}myStatus(e,n){return!e||!n?"fuera":(e.team1?.players??[]).includes(n)?"team1":(e.team2?.players??[]).includes(n)?"team2":(e.queue??[]).includes(n)?"cola":"fuera"}async join(e,n){!e||!n||await this.matchSvc.joinQueue(n)}async leave(e,n){!e||!n||await this.matchSvc.leaveQueue(n)}toggleWatch(){this.watchMatch=!this.watchMatch}async logout(){await this.auth.logout(),await this.router.navigateByUrl("/login")}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=gn({type:t,selectors:[["app-dashboard"]],decls:4,vars:3,consts:[[1,"dashboard"],[1,"dashboard-grid"],[1,"dashboard-left"],[1,"custom-card"],[1,"dashboard-profile"],[1,"dashboard-muted"],[1,"dashboard-status"],[1,"dashboard-space-top"],[1,"button-27",3,"click"],[1,"dashboard-actions-title"],[1,"dashboard-match"],[3,"match","showDetails","profileOf","leaderA","leaderB","mySteamId","connection"],["alt","avatar",1,"dashboard-avatar",3,"src"],[1,"dashboard-profile-text"],[1,"dashboard-name"],[1,"dashboard-meta"],["target","_blank","rel","noreferrer",1,"dashboard-link",3,"href"],[1,"dashboard-status-text"],[1,"dashboard-muted","dashboard-space-bottom"],[1,"button-27"],[1,"dashboard-note"],[1,"dashboard-note","dashboard-space-top-sm"],[1,"dashboard-status-text","dashboard-space-bottom"],[1,"dashboard-error"],[1,"dashboard-button","dashboard-link-button",3,"href"]],template:function(n,r){if(n&1&&(Z(0,"div",0),te(1,bU,2,1),Vo(2,"async"),Bi(3,SU,2,0,"p"),se()),n&2){let i;k(),ne((i=jo(2,1,r.auth.user$))?1:3,i)}},dependencies:[Zh,ig],styles:[".dashboard[_ngcontent-%COMP%]{padding:16px;font-family:system-ui}.dashboard-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 2.2fr;gap:16px;align-items:start}.dashboard-left[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.dashboard-match[_ngcontent-%COMP%]{min-width:0}.dashboard-card[_ngcontent-%COMP%]{border:1px solid #e5e5e5;border-radius:12px;padding:12px}.dashboard-profile[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center}.dashboard-avatar[_ngcontent-%COMP%]{width:56px;height:56px;border-radius:12px;object-fit:cover}.dashboard-profile-text[_ngcontent-%COMP%]{min-width:0}.dashboard-name[_ngcontent-%COMP%]{font-weight:800;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.dashboard-meta[_ngcontent-%COMP%]{font-size:12px;opacity:.7}.dashboard-link[_ngcontent-%COMP%]{font-size:12px}.dashboard-status[_ngcontent-%COMP%]{margin-top:12px;border-top:1px solid #eee;padding-top:12px}.dashboard-status-text[_ngcontent-%COMP%]{font-size:13px}.dashboard-button[_ngcontent-%COMP%]{padding:10px 14px;cursor:pointer;width:100%}.dashboard-link-button[_ngcontent-%COMP%]{display:inline-block;text-align:center;text-decoration:none;border:1px solid #ccc;border-radius:6px}.dashboard-actions-title[_ngcontent-%COMP%]{margin:0 0 8px}.dashboard-muted[_ngcontent-%COMP%]{font-size:13px;opacity:.8}.dashboard-note[_ngcontent-%COMP%]{font-size:13px;opacity:.7}.dashboard-error[_ngcontent-%COMP%]{font-size:12px;opacity:.7;margin-top:8px}.dashboard-space-top[_ngcontent-%COMP%]{margin-top:12px}.dashboard-space-top-sm[_ngcontent-%COMP%]{margin-top:10px}.dashboard-space-bottom[_ngcontent-%COMP%]{margin-bottom:10px}"]})};var XA=async()=>{let t=P(rn),e=P(Zt);return await t.isLoggedInOnce()?!0:(e.navigateByUrl("/login"),!1)};var eR=async()=>{let t=P(rn),e=P(Zt);return await t.isLoggedInOnce()?(e.navigateByUrl("/dashboard"),!1):!0};var tR=[{path:"",pathMatch:"full",redirectTo:"dashboard"},{path:"login",component:Yh,canActivate:[eR]},{path:"dashboard",component:Xh,canActivate:[XA]},{path:"**",redirectTo:"dashboard"}];var nR={providers:[Jp(),Lg(tR)]};var ef=class t{auth=P(rn);title=Jn("myapp");async ngOnInit(){await this.auth.ensurePersistence()}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=gn({type:t,selectors:[["app-root"]],decls:1,vars:0,template:function(n,r){n&1&&Zn(0,"router-outlet")},dependencies:[Xa],encapsulation:2})};fg(ef,nR).catch(t=>console.error(t));
