var PR=Object.defineProperty,OR=Object.defineProperties;var kR=Object.getOwnPropertyDescriptors;var eu=Object.getOwnPropertySymbols;var iI=Object.prototype.hasOwnProperty,oI=Object.prototype.propertyIsEnumerable;var rI=(t,e,n)=>e in t?PR(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,P=(t,e)=>{for(var n in e||={})iI.call(e,n)&&rI(t,n,e[n]);if(eu)for(var n of eu(e))oI.call(e,n)&&rI(t,n,e[n]);return t},ae=(t,e)=>OR(t,kR(e));var Cf=(t,e)=>{var n={};for(var r in t)iI.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&eu)for(var r of eu(t))e.indexOf(r)<0&&oI.call(t,r)&&(n[r]=t[r]);return n};var st=null,tu=!1,Sf=1,LR=null,Ut=Symbol("SIGNAL");function K(t){let e=st;return st=t,e}function nu(){return st}var ru={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function iu(t){if(tu)throw new Error("");if(st===null)return;st.consumerOnSignalRead(t);let e=st.producersTail;if(e!==void 0&&e.producer===t)return;let n,r=st.recomputing;if(r&&(n=e!==void 0?e.nextProducer:st.producers,n!==void 0&&n.producer===t)){st.producersTail=n,n.lastReadVersion=t.version;return}let i=t.consumersTail;if(i!==void 0&&i.consumer===st&&(!r||VR(i,st)))return;let o=co(st),s={producer:t,consumer:st,nextProducer:n,prevConsumer:i,lastReadVersion:t.version,nextConsumer:void 0};st.producersTail=s,e!==void 0?e.nextProducer=s:st.producers=s,o&&lI(t,s)}function sI(){Sf++}function aI(t){if(!(co(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===Sf)){if(!t.producerMustRecompute(t)&&!su(t)){bf(t);return}t.producerRecomputeValue(t),bf(t)}}function Af(t){if(t.consumers===void 0)return;let e=tu;tu=!0;try{for(let n=t.consumers;n!==void 0;n=n.nextConsumer){let r=n.consumer;r.dirty||FR(r)}}finally{tu=e}}function Rf(){return st?.consumerAllowSignalWrites!==!1}function FR(t){t.dirty=!0,Af(t),t.consumerMarkedDirty?.(t)}function bf(t){t.dirty=!1,t.lastCleanEpoch=Sf}function ou(t){return t&&cI(t),K(t)}function cI(t){t.producersTail=void 0,t.recomputing=!0}function Nf(t,e){K(e),t&&uI(t)}function uI(t){t.recomputing=!1;let e=t.producersTail,n=e!==void 0?e.nextProducer:t.producers;if(n!==void 0){if(co(t))do n=Mf(n);while(n!==void 0);e!==void 0?e.nextProducer=void 0:t.producers=void 0}}function su(t){for(let e=t.producers;e!==void 0;e=e.nextProducer){let n=e.producer,r=e.lastReadVersion;if(r!==n.version||(aI(n),r!==n.version))return!0}return!1}function $s(t){if(co(t)){let e=t.producers;for(;e!==void 0;)e=Mf(e)}t.producers=void 0,t.producersTail=void 0,t.consumers=void 0,t.consumersTail=void 0}function lI(t,e){let n=t.consumersTail,r=co(t);if(n!==void 0?(e.nextConsumer=n.nextConsumer,n.nextConsumer=e):(e.nextConsumer=void 0,t.consumers=e),e.prevConsumer=n,t.consumersTail=e,!r)for(let i=t.producers;i!==void 0;i=i.nextProducer)lI(i.producer,i)}function Mf(t){let e=t.producer,n=t.nextProducer,r=t.nextConsumer,i=t.prevConsumer;if(t.nextConsumer=void 0,t.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!co(e)){let o=e.producers;for(;o!==void 0;)o=Mf(o)}return n}function co(t){return t.consumerIsAlwaysLive||t.consumers!==void 0}function dI(t){LR?.(t)}function VR(t,e){let n=e.producersTail;if(n!==void 0){let r=e.producers;do{if(r===t)return!0;if(r===n)break;r=r.nextProducer}while(r!==void 0)}return!1}function hI(t,e){return Object.is(t,e)}function jR(){throw new Error}var fI=jR;function pI(t){fI(t)}function xf(t){fI=t}var UR=null;function Pf(t,e){let n=Object.create(au);n.value=t,e!==void 0&&(n.equal=e);let r=()=>mI(n);return r[Ut]=n,dI(n),[r,s=>Hs(n,s),s=>gI(n,s)]}function mI(t){return iu(t),t.value}function Hs(t,e){Rf()||pI(t),t.equal(t.value,e)||(t.value=e,BR(t))}function gI(t,e){Rf()||pI(t),Hs(t,e(t.value))}var au=ae(P({},ru),{equal:hI,value:void 0,kind:"signal"});function BR(t){t.version++,sI(),Af(t),UR?.(t)}function Of(t){let e=K(null);try{return t()}finally{K(e)}}function te(t){return typeof t=="function"}function uo(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var cu=uo(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function zs(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var nt=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(te(r))try{r()}catch(o){e=o instanceof cu?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{yI(o)}catch(s){e=e??[],s instanceof cu?e=[...e,...s.errors]:e.push(s)}}if(e)throw new cu(e)}}add(e){var n;if(e&&e!==this)if(this.closed)yI(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&zs(n,e)}remove(e){let{_finalizers:n}=this;n&&zs(n,e),e instanceof t&&e._removeParent(this)}};nt.EMPTY=(()=>{let t=new nt;return t.closed=!0,t})();var kf=nt.EMPTY;function uu(t){return t instanceof nt||t&&"closed"in t&&te(t.remove)&&te(t.add)&&te(t.unsubscribe)}function yI(t){te(t)?t():t.unsubscribe()}var en={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var lo={setTimeout(t,e,...n){let{delegate:r}=lo;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=lo;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function lu(t){lo.setTimeout(()=>{let{onUnhandledError:e}=en;if(e)e(t);else throw t})}function qs(){}var vI=Lf("C",void 0,void 0);function _I(t){return Lf("E",void 0,t)}function EI(t){return Lf("N",t,void 0)}function Lf(t,e,n){return{kind:t,value:e,error:n}}var ui=null;function ho(t){if(en.useDeprecatedSynchronousErrorHandling){let e=!ui;if(e&&(ui={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=ui;if(ui=null,n)throw r}}else t()}function II(t){en.useDeprecatedSynchronousErrorHandling&&ui&&(ui.errorThrown=!0,ui.error=t)}var li=class extends nt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,uu(e)&&e.add(this)):this.destination=zR}static create(e,n,r){return new fo(e,n,r)}next(e){this.isStopped?Vf(EI(e),this):this._next(e)}error(e){this.isStopped?Vf(_I(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Vf(vI,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},$R=Function.prototype.bind;function Ff(t,e){return $R.call(t,e)}var jf=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){du(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){du(r)}else du(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){du(n)}}},fo=class extends li{constructor(e,n,r){super();let i;if(te(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&en.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Ff(e.next,o),error:e.error&&Ff(e.error,o),complete:e.complete&&Ff(e.complete,o)}):i=e}this.destination=new jf(i)}};function du(t){en.useDeprecatedSynchronousErrorHandling?II(t):lu(t)}function HR(t){throw t}function Vf(t,e){let{onStoppedNotification:n}=en;n&&lo.setTimeout(()=>n(t,e))}var zR={closed:!0,next:qs,error:HR,complete:qs};var po=typeof Symbol=="function"&&Symbol.observable||"@@observable";function tn(t){return t}function Uf(...t){return Bf(t)}function Bf(t){return t.length===0?tn:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var fe=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=GR(n)?n:new fo(n,r,i);return ho(()=>{let{operator:s,source:c}=this;o.add(s?s.call(o,c):c?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=wI(r),new r((i,o)=>{let s=new fo({next:c=>{try{n(c)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[po](){return this}pipe(...n){return Bf(n)(this)}toPromise(n){return n=wI(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function wI(t){var e;return(e=t??en.Promise)!==null&&e!==void 0?e:Promise}function qR(t){return t&&te(t.next)&&te(t.error)&&te(t.complete)}function GR(t){return t&&t instanceof li||qR(t)&&uu(t)}function WR(t){return te(t?.lift)}function we(t){return e=>{if(WR(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function De(t,e,n,r,i){return new $f(t,e,n,r,i)}var $f=class extends li{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(c){try{n(c)}catch(u){e.error(u)}}:super._next,this._error=i?function(c){try{i(c)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};var TI=uo(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var at=(()=>{class t extends fe{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new hu(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new TI}next(n){ho(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){ho(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){ho(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?kf:(this.currentObservers=null,o.push(n),new nt(()=>{this.currentObservers=null,zs(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new fe;return n.source=this,n}}return t.create=(e,n)=>new hu(e,n),t})(),hu=class extends at{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:kf}};var He=class extends at{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var It=new fe(t=>t.complete());function DI(t){return t&&te(t.schedule)}function CI(t){return t[t.length-1]}function bI(t){return te(CI(t))?t.pop():void 0}function Ir(t){return DI(CI(t))?t.pop():void 0}function AI(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function c(h){try{l(r.next(h))}catch(p){s(p)}}function u(h){try{l(r.throw(h))}catch(p){s(p)}}function l(h){h.done?o(h.value):i(h.value).then(c,u)}l((r=r.apply(t,e||[])).next())})}function SI(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function di(t){return this instanceof di?(this.v=t,this):new di(t)}function RI(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(y){return function(S){return Promise.resolve(S).then(y,p)}}function c(y,S){r[y]&&(i[y]=function(R){return new Promise(function(A,L){o.push([y,R,A,L])>1||u(y,R)})},S&&(i[y]=S(i[y])))}function u(y,S){try{l(r[y](S))}catch(R){g(o[0][3],R)}}function l(y){y.value instanceof di?Promise.resolve(y.value.v).then(h,p):g(o[0][2],y)}function h(y){u("next",y)}function p(y){u("throw",y)}function g(y,S){y(S),o.shift(),o.length&&u(o[0][0],o[0][1])}}function NI(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof SI=="function"?SI(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(c,u){s=t[o](s),i(c,u,s.done,s.value)})}}function i(o,s,c,u){Promise.resolve(u).then(function(l){o({value:l,done:c})},s)}}var fu=t=>t&&typeof t.length=="number"&&typeof t!="function";function pu(t){return te(t?.then)}function mu(t){return te(t[po])}function gu(t){return Symbol.asyncIterator&&te(t?.[Symbol.asyncIterator])}function yu(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function KR(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var vu=KR();function _u(t){return te(t?.[vu])}function Eu(t){return RI(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield di(n.read());if(i)return yield di(void 0);yield yield di(r)}}finally{n.releaseLock()}})}function Iu(t){return te(t?.getReader)}function Qe(t){if(t instanceof fe)return t;if(t!=null){if(mu(t))return QR(t);if(fu(t))return YR(t);if(pu(t))return JR(t);if(gu(t))return MI(t);if(_u(t))return ZR(t);if(Iu(t))return XR(t)}throw yu(t)}function QR(t){return new fe(e=>{let n=t[po]();if(te(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function YR(t){return new fe(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function JR(t){return new fe(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,lu)})}function ZR(t){return new fe(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function MI(t){return new fe(e=>{eN(t,e).catch(n=>e.error(n))})}function XR(t){return MI(Eu(t))}function eN(t,e){var n,r,i,o;return AI(this,void 0,void 0,function*(){try{for(n=NI(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function wt(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function wu(t,e=0){return we((n,r)=>{n.subscribe(De(r,i=>wt(r,t,()=>r.next(i),e),()=>wt(r,t,()=>r.complete(),e),i=>wt(r,t,()=>r.error(i),e)))})}function Tu(t,e=0){return we((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function xI(t,e){return Qe(t).pipe(Tu(e),wu(e))}function PI(t,e){return Qe(t).pipe(Tu(e),wu(e))}function OI(t,e){return new fe(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function kI(t,e){return new fe(n=>{let r;return wt(n,e,()=>{r=t[vu](),wt(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>te(r?.return)&&r.return()})}function Du(t,e){if(!t)throw new Error("Iterable cannot be null");return new fe(n=>{wt(n,e,()=>{let r=t[Symbol.asyncIterator]();wt(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function LI(t,e){return Du(Eu(t),e)}function FI(t,e){if(t!=null){if(mu(t))return xI(t,e);if(fu(t))return OI(t,e);if(pu(t))return PI(t,e);if(gu(t))return Du(t,e);if(_u(t))return kI(t,e);if(Iu(t))return LI(t,e)}throw yu(t)}function Ye(t,e){return e?FI(t,e):Qe(t)}function pe(...t){let e=Ir(t);return Ye(t,e)}function Hf(t,e){let n=te(t)?t:()=>t,r=i=>i.error(n());return new fe(e?i=>e.schedule(r,0,i):r)}function Cu(t){return!!t&&(t instanceof fe||te(t.lift)&&te(t.subscribe))}var hi=uo(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function Re(t,e){return we((n,r)=>{let i=0;n.subscribe(De(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:tN}=Array;function nN(t,e){return tN(e)?t(...e):t(e)}function VI(t){return Re(e=>nN(t,e))}var{isArray:rN}=Array,{getPrototypeOf:iN,prototype:oN,keys:sN}=Object;function jI(t){if(t.length===1){let e=t[0];if(rN(e))return{args:e,keys:null};if(aN(e)){let n=sN(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function aN(t){return t&&typeof t=="object"&&iN(t)===oN}function UI(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function zf(...t){let e=Ir(t),n=bI(t),{args:r,keys:i}=jI(t);if(r.length===0)return Ye([],e);let o=new fe(cN(r,e,i?s=>UI(i,s):tn));return n?o.pipe(VI(n)):o}function cN(t,e,n=tn){return r=>{BI(e,()=>{let{length:i}=t,o=new Array(i),s=i,c=i;for(let u=0;u<i;u++)BI(e,()=>{let l=Ye(t[u],e),h=!1;l.subscribe(De(r,p=>{o[u]=p,h||(h=!0,c--),c||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function BI(t,e,n){t?wt(n,t,e):e()}function $I(t,e,n,r,i,o,s,c){let u=[],l=0,h=0,p=!1,g=()=>{p&&!u.length&&!l&&e.complete()},y=R=>l<r?S(R):u.push(R),S=R=>{o&&e.next(R),l++;let A=!1;Qe(n(R,h++)).subscribe(De(e,L=>{i?.(L),o?y(L):e.next(L)},()=>{A=!0},void 0,()=>{if(A)try{for(l--;u.length&&l<r;){let L=u.shift();s?wt(e,s,()=>S(L)):S(L)}g()}catch(L){e.error(L)}}))};return t.subscribe(De(e,y,()=>{p=!0,g()})),()=>{c?.()}}function ft(t,e,n=1/0){return te(e)?ft((r,i)=>Re((o,s)=>e(r,o,i,s))(Qe(t(r,i))),n):(typeof e=="number"&&(n=e),we((r,i)=>$I(r,i,t,n)))}function HI(t=1/0){return ft(tn,t)}function zI(){return HI(1)}function mo(...t){return zI()(Ye(t,Ir(t)))}function Gs(t){return new fe(e=>{Qe(t()).subscribe(e)})}function In(t,e){return we((n,r)=>{let i=0;n.subscribe(De(r,o=>t.call(e,o,i++)&&r.next(o)))})}function Ws(t){return we((e,n)=>{let r=null,i=!1,o;r=e.subscribe(De(n,void 0,void 0,s=>{o=Qe(t(s,Ws(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function bu(t,e){return te(e)?ft(t,e,1):ft(t,1)}function qf(t){return we((e,n)=>{let r=!1;e.subscribe(De(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function Bn(t){return t<=0?()=>It:we((e,n)=>{let r=0;e.subscribe(De(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function qI(t=uN){return we((e,n)=>{let r=!1;e.subscribe(De(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function uN(){return new hi}function Gf(t){return we((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function $n(t,e){let n=arguments.length>=2;return r=>r.pipe(t?In((i,o)=>t(i,o,r)):tn,Bn(1),n?qf(e):qI(()=>new hi))}function Su(t){return t<=0?()=>It:we((e,n)=>{let r=[];e.subscribe(De(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function Wf(...t){let e=Ir(t);return we((n,r)=>{(e?mo(t,n,e):mo(t,n)).subscribe(r)})}function wn(t,e){return we((n,r)=>{let i=null,o=0,s=!1,c=()=>s&&!i&&r.complete();n.subscribe(De(r,u=>{i?.unsubscribe();let l=0,h=o++;Qe(t(u,h)).subscribe(i=De(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,c()}))},()=>{s=!0,c()}))})}function fi(t){return we((e,n)=>{Qe(t).subscribe(De(n,()=>n.complete(),qs)),!n.closed&&e.subscribe(n)})}function pt(t,e,n){let r=te(t)||e||n?{next:t,error:e,complete:n}:t;return r?we((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let c=!0;i.subscribe(De(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;c=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;c=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;c&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):tn}var Kf;function Au(){return Kf}function Tn(t){let e=Kf;return Kf=t,e}var GI=Symbol("NotFound");function go(t){return t===GI||t?.name==="\u0275NotFound"}var Ou="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",z=class extends Error{code;constructor(e,n){super(_o(e,n)),this.code=e}};function fN(t){return`NG0${Math.abs(t)}`}function _o(t,e){return`${fN(t)}${e?": "+e:""}`}function Te(t){for(let e in t)if(t[e]===Te)return e;throw Error("")}function zn(t){if(typeof t=="string")return t;if(Array.isArray(t))return`[${t.map(zn).join(", ")}]`;if(t==null)return""+t;let e=t.overriddenName||t.name;if(e)return`${e}`;let n=t.toString();if(n==null)return""+n;let r=n.indexOf(`
`);return r>=0?n.slice(0,r):n}function up(t,e){return t?e?`${t} ${e}`:t:e||""}var pN=Te({__forward_ref__:Te});function ku(t){return t.__forward_ref__=ku,t.toString=function(){return zn(this())},t}function Tt(t){return lp(t)?t():t}function lp(t){return typeof t=="function"&&t.hasOwnProperty(pN)&&t.__forward_ref__===ku}function G(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Eo(t){return{providers:t.providers||[],imports:t.imports||[]}}function Xs(t){return mN(t,Lu)}function dp(t){return Xs(t)!==null}function mN(t,e){return t.hasOwnProperty(e)&&t[e]||null}function gN(t){let e=t?.[Lu]??null;return e||null}function Yf(t){return t&&t.hasOwnProperty(Nu)?t[Nu]:null}var Lu=Te({\u0275prov:Te}),Nu=Te({\u0275inj:Te}),W=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,n){this._desc=e,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=G({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function hp(t){return t&&!!t.\u0275providers}var fp=Te({\u0275cmp:Te}),pp=Te({\u0275dir:Te}),mp=Te({\u0275pipe:Te}),gp=Te({\u0275mod:Te}),Qs=Te({\u0275fac:Te}),yi=Te({__NG_ELEMENT_ID__:Te}),WI=Te({__NG_ENV_ID__:Te});function yp(t){return Fu(t,"@NgModule"),t[gp]||null}function Dr(t){return Fu(t,"@Component"),t[fp]||null}function vp(t){return Fu(t,"@Directive"),t[pp]||null}function JI(t){return Fu(t,"@Pipe"),t[mp]||null}function Fu(t,e){if(t==null)throw new z(-919,!1)}function ea(t){return typeof t=="string"?t:t==null?"":String(t)}function ZI(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():ea(t)}var XI=Te({ngErrorCode:Te}),yN=Te({ngErrorMessage:Te}),vN=Te({ngTokenPath:Te});function _p(t,e){return ew("",-200,e)}function Vu(t,e){throw new z(-201,!1)}function ew(t,e,n){let r=new z(e,t);return r[XI]=e,r[yN]=t,n&&(r[vN]=n),r}function _N(t){return t[XI]}var Jf;function tw(){return Jf}function mt(t){let e=Jf;return Jf=t,e}function Ep(t,e,n){let r=Xs(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&8)return null;if(e!==void 0)return e;Vu(t,"")}var EN={},pi=EN,IN="__NG_DI_FLAG__",Zf=class{injector;constructor(e){this.injector=e}retrieve(e,n){let r=mi(n)||0;try{return this.injector.get(e,r&8?null:pi,r)}catch(i){if(go(i))return i;throw i}}};function wN(t,e=0){let n=Au();if(n===void 0)throw new z(-203,!1);if(n===null)return Ep(t,void 0,e);{let r=TN(e),i=n.retrieve(t,r);if(go(i)){if(r.optional)return null;throw i}return i}}function oe(t,e=0){return(tw()||wN)(Tt(t),e)}function M(t,e){return oe(t,mi(e))}function mi(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function TN(t){return{optional:!!(t&8),host:!!(t&1),self:!!(t&2),skipSelf:!!(t&4)}}function Xf(t){let e=[];for(let n=0;n<t.length;n++){let r=Tt(t[n]);if(Array.isArray(r)){if(r.length===0)throw new z(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let c=r[s],u=DN(c);typeof u=="number"?u===-1?i=c.token:o|=u:i=c}e.push(oe(i,o))}else e.push(oe(r))}return e}function DN(t){return t[IN]}function wr(t,e){let n=t.hasOwnProperty(Qs);return n?t[Qs]:null}function ju(t,e){t.forEach(n=>Array.isArray(n)?ju(n,e):e(n))}function Ip(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function ta(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function nw(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let o=i-2;t[i]=t[o],i--}t[e]=n,t[e+1]=r}}function rw(t,e,n){let r=Io(t,e);return r>=0?t[r|1]=n:(r=~r,nw(t,r,e,n)),r}function Uu(t,e){let n=Io(t,e);if(n>=0)return t[n|1]}function Io(t,e){return CN(t,e,1)}function CN(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}var vi={},Bt=[],_i=new W(""),wp=new W("",-1),Tp=new W(""),Ys=class{get(e,n=pi){if(n===pi){let i=ew("",-201);throw i.name="\u0275NotFound",i}return n}};function Ei(t){return{\u0275providers:t}}function iw(t){return Ei([{provide:_i,multi:!0,useValue:t}])}function ow(...t){return{\u0275providers:Dp(!0,t),\u0275fromNgModule:!0}}function Dp(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return ju(e,s=>{let c=s;Mu(c,o,[],r)&&(i||=[],i.push(c))}),i!==void 0&&sw(i,o),n}function sw(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];Cp(i,o=>{e(o,r)})}}function Mu(t,e,n,r){if(t=Tt(t),!t)return!1;let i=null,o=Yf(t),s=!o&&Dr(t);if(!o&&!s){let u=t.ngModule;if(o=Yf(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=t}let c=r.has(i);if(s){if(c)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)Mu(l,e,n,r)}}else if(o){if(o.imports!=null&&!c){r.add(i);let l;try{ju(o.imports,h=>{Mu(h,e,n,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&sw(l,e)}if(!c){let l=wr(i)||(()=>new i);e({provide:i,useFactory:l,deps:Bt},i),e({provide:Tp,useValue:i,multi:!0},i),e({provide:_i,useValue:()=>oe(i),multi:!0},i)}let u=o.providers;if(u!=null&&!c){let l=t;Cp(u,h=>{e(h,l)})}}else return!1;return i!==t&&t.providers!==void 0}function Cp(t,e){for(let n of t)hp(n)&&(n=n.\u0275providers),Array.isArray(n)?Cp(n,e):e(n)}var bN=Te({provide:String,useValue:Te});function aw(t){return t!==null&&typeof t=="object"&&bN in t}function SN(t){return!!(t&&t.useExisting)}function AN(t){return!!(t&&t.useFactory)}function xu(t){return typeof t=="function"}var na=new W(""),Ru={},KI={},Qf;function ra(){return Qf===void 0&&(Qf=new Ys),Qf}var rt=class{},gi=class extends rt{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,tp(e,s=>this.processProvider(s)),this.records.set(wp,yo(void 0,this)),i.has("environment")&&this.records.set(rt,yo(void 0,this));let o=this.records.get(na);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Tp,Bt,{self:!0}))}retrieve(e,n){let r=mi(n)||0;try{return this.get(e,pi,r)}catch(i){if(go(i))return i;throw i}}destroy(){Ks(this),this._destroyed=!0;let e=K(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),K(e)}}onDestroy(e){return Ks(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Ks(this);let n=Tn(this),r=mt(void 0),i;try{return e()}finally{Tn(n),mt(r)}}get(e,n=pi,r){if(Ks(this),e.hasOwnProperty(WI))return e[WI](this);let i=mi(r),o,s=Tn(this),c=mt(void 0);try{if(!(i&4)){let l=this.records.get(e);if(l===void 0){let h=PN(e)&&Xs(e);h&&this.injectableDefInScope(h)?l=yo(ep(e),Ru):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l,i)}let u=i&2?ra():this.parent;return n=i&8&&n===pi?null:n,u.get(e,n)}catch(u){let l=_N(u);throw l===-200||l===-201?new z(l,null):u}finally{mt(c),Tn(s)}}resolveInjectorInitializers(){let e=K(null),n=Tn(this),r=mt(void 0),i;try{let o=this.get(_i,Bt,{self:!0});for(let s of o)s()}finally{Tn(n),mt(r),K(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(zn(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=Tt(e);let n=xu(e)?e:Tt(e&&e.provide),r=NN(e);if(!xu(e)&&e.multi===!0){let i=this.records.get(n);i||(i=yo(void 0,Ru,!0),i.factory=()=>Xf(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n,r){let i=K(null);try{if(n.value===KI)throw _p(zn(e));return n.value===Ru&&(n.value=KI,n.value=n.factory(void 0,r)),typeof n.value=="object"&&n.value&&xN(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{K(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=Tt(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function ep(t){let e=Xs(t),n=e!==null?e.factory:wr(t);if(n!==null)return n;if(t instanceof W)throw new z(204,!1);if(t instanceof Function)return RN(t);throw new z(204,!1)}function RN(t){if(t.length>0)throw new z(204,!1);let n=gN(t);return n!==null?()=>n.factory(t):()=>new t}function NN(t){if(aw(t))return yo(void 0,t.useValue);{let e=cw(t);return yo(e,Ru)}}function cw(t,e,n){let r;if(xu(t)){let i=Tt(t);return wr(i)||ep(i)}else if(aw(t))r=()=>Tt(t.useValue);else if(AN(t))r=()=>t.useFactory(...Xf(t.deps||[]));else if(SN(t))r=(i,o)=>oe(Tt(t.useExisting),o!==void 0&&o&8?8:void 0);else{let i=Tt(t&&(t.useClass||t.provide));if(MN(t))r=()=>new i(...Xf(t.deps));else return wr(i)||ep(i)}return r}function Ks(t){if(t.destroyed)throw new z(205,!1)}function yo(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function MN(t){return!!t.deps}function xN(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function PN(t){return typeof t=="function"||typeof t=="object"&&t.ngMetadataName==="InjectionToken"}function tp(t,e){for(let n of t)Array.isArray(n)?tp(n,e):n&&hp(n)?tp(n.\u0275providers,e):e(n)}function yt(t,e){let n;t instanceof gi?(Ks(t),n=t):n=new Zf(t);let r,i=Tn(n),o=mt(void 0);try{return e()}finally{Tn(i),mt(o)}}function uw(){return tw()!==void 0||Au()!=null}var rn=0,Y=1,ne=2,Je=3,$t=4,Ht=5,wo=6,To=7,ke=8,Gn=9,Dn=10,Pe=11,Do=12,bp=13,Ii=14,At=15,wi=16,Ti=17,Di=18,ia=19,Sp=20,Hn=21,Bu=22,oa=23,Rt=24,$u=25,Ci=26,ze=27,lw=1,Ap=6,Cr=7,sa=8,aa=9,Le=10;function Wn(t){return Array.isArray(t)&&typeof t[lw]=="object"}function on(t){return Array.isArray(t)&&t[lw]===!0}function Rp(t){return(t.flags&4)!==0}function br(t){return t.componentOffset>-1}function Hu(t){return(t.flags&1)===1}function bi(t){return!!t.template}function Co(t){return(t[ne]&512)!==0}function Si(t){return(t[ne]&256)===256}var dw="svg",hw="math";function zt(t){for(;Array.isArray(t);)t=t[rn];return t}function Np(t,e){return zt(e[t])}function sn(t,e){return zt(e[t.index])}function ca(t,e){return t.data[e]}function fw(t,e){return t[e]}function Mp(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}function an(t,e){let n=e[t];return Wn(n)?n:n[rn]}function zu(t){return(t[ne]&128)===128}function pw(t){return on(t[Je])}function Cn(t,e){return e==null?null:t[e]}function xp(t){t[Ti]=0}function Pp(t){t[ne]&1024||(t[ne]|=1024,zu(t)&&la(t))}function mw(t,e){for(;t>0;)e=e[Ii],t--;return e}function ua(t){return!!(t[ne]&9216||t[Rt]?.dirty)}function qu(t){t[Dn].changeDetectionScheduler?.notify(8),t[ne]&64&&(t[ne]|=1024),ua(t)&&la(t)}function la(t){t[Dn].changeDetectionScheduler?.notify(0);let e=Tr(t);for(;e!==null&&!(e[ne]&8192||(e[ne]|=8192,!zu(e)));)e=Tr(e)}function Op(t,e){if(Si(t))throw new z(911,!1);t[Hn]===null&&(t[Hn]=[]),t[Hn].push(e)}function gw(t,e){if(t[Hn]===null)return;let n=t[Hn].indexOf(e);n!==-1&&t[Hn].splice(n,1)}function Tr(t){let e=t[Je];return on(e)?e[Je]:e}function yw(t){return t[To]??=[]}function vw(t){return t.cleanup??=[]}var ce={lFrame:xw(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var np=!1;function _w(){return ce.lFrame.elementDepthCount}function Ew(){ce.lFrame.elementDepthCount++}function kp(){ce.lFrame.elementDepthCount--}function Iw(){return ce.bindingsEnabled}function ww(){return ce.skipHydrationRootTNode!==null}function Lp(t){return ce.skipHydrationRootTNode===t}function Fp(){ce.skipHydrationRootTNode=null}function _e(){return ce.lFrame.lView}function Dt(){return ce.lFrame.tView}function qt(t){return ce.lFrame.contextLView=t,t[ke]}function Gt(t){return ce.lFrame.contextLView=null,t}function cn(){let t=Vp();for(;t!==null&&t.type===64;)t=t.parent;return t}function Vp(){return ce.lFrame.currentTNode}function Tw(){let t=ce.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function bo(t,e){let n=ce.lFrame;n.currentTNode=t,n.isParent=e}function jp(){return ce.lFrame.isParent}function Dw(){ce.lFrame.isParent=!1}function Up(){return np}function Bp(t){let e=np;return np=t,e}function $p(){let t=ce.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function Cw(t){return ce.lFrame.bindingIndex=t}function Ai(){return ce.lFrame.bindingIndex++}function bw(t){let e=ce.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function Sw(){return ce.lFrame.inI18n}function Aw(t,e){let n=ce.lFrame;n.bindingIndex=n.bindingRootIndex=t,Gu(e)}function Rw(){return ce.lFrame.currentDirectiveIndex}function Gu(t){ce.lFrame.currentDirectiveIndex=t}function Nw(t){let e=ce.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function Hp(t){ce.lFrame.currentQueryIndex=t}function ON(t){let e=t[Y];return e.type===2?e.declTNode:e.type===1?t[Ht]:null}function zp(t,e,n){if(n&4){let i=e,o=t;for(;i=i.parent,i===null&&!(n&1);)if(i=ON(o),i===null||(o=o[Ii],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=ce.lFrame=Mw();return r.currentTNode=e,r.lView=t,!0}function Wu(t){let e=Mw(),n=t[Y];ce.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function Mw(){let t=ce.lFrame,e=t===null?null:t.child;return e===null?xw(t):e}function xw(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function Pw(){let t=ce.lFrame;return ce.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var qp=Pw;function Ku(){let t=Pw();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Ow(t){return(ce.lFrame.contextLView=mw(t,ce.lFrame.contextLView))[ke]}function Sr(){return ce.lFrame.selectedIndex}function Ar(t){ce.lFrame.selectedIndex=t}function Qu(){let t=ce.lFrame;return ca(t.tView,t.selectedIndex)}function kw(){return ce.lFrame.currentNamespace}var Lw=!0;function Yu(){return Lw}function Ju(t){Lw=t}function rp(t,e=null,n=null,r){let i=Gp(t,e,n,r);return i.resolveInjectorInitializers(),i}function Gp(t,e=null,n=null,r,i=new Set){let o=[n||Bt,ow(t)];return r=r||(typeof t=="object"?void 0:zn(t)),new gi(o,e||ra(),r||null,i)}var nn=class t{static THROW_IF_NOT_FOUND=pi;static NULL=new Ys;static create(e,n){if(Array.isArray(e))return rp({name:""},n,e,"");{let r=e.name??"";return rp({name:r},e.parent,e.providers,r)}}static \u0275prov=G({token:t,providedIn:"any",factory:()=>oe(wp)});static __NG_ELEMENT_ID__=-1},qe=new W(""),un=(()=>{class t{static __NG_ELEMENT_ID__=kN;static __NG_ENV_ID__=n=>n}return t})(),ip=class extends un{_lView;constructor(e){super(),this._lView=e}get destroyed(){return Si(this._lView)}onDestroy(e){let n=this._lView;return Op(n,e),()=>gw(n,e)}};function kN(){return new ip(_e())}var Fw=!1,Rr=(()=>{class t{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new He(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new fe(n=>{n.next(!1),n.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=G({token:t,providedIn:"root",factory:()=>new t})}return t})(),op=class extends at{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,uw()&&(this.destroyRef=M(un,{optional:!0})??void 0,this.pendingTasks=M(Rr,{optional:!0})??void 0)}emit(e){let n=K(null);try{super.next(e)}finally{K(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let c=super.subscribe({next:i,error:o,complete:s});return e instanceof nt&&e.add(c),c}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(n)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},gt=op;function Pu(...t){}function Wp(t){let e,n;function r(){t=Pu;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function Kp(t){return queueMicrotask(()=>t()),()=>{t=Pu}}var Qp="isAngularZone",Js=Qp+"_ID",LN=0,St=class t{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new gt(!1);onMicrotaskEmpty=new gt(!1);onStable=new gt(!1);onError=new gt(!1);constructor(e){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=Fw}=e;if(typeof Zone>"u")throw new z(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,jN(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Qp)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new z(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new z(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,FN,Pu,Pu);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},FN={};function Yp(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function VN(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){Wp(()=>{t.callbackScheduled=!1,sp(t),t.isCheckStableRunning=!0,Yp(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),sp(t)}function jN(t){let e=()=>{VN(t)},n=LN++;t._inner=t._inner.fork({name:"angular",properties:{[Qp]:!0,[Js]:n,[Js+n]:!0},onInvokeTask:(r,i,o,s,c,u)=>{if(UN(u))return r.invokeTask(o,s,c,u);try{return QI(t),r.invokeTask(o,s,c,u)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),YI(t)}},onInvoke:(r,i,o,s,c,u,l)=>{try{return QI(t),r.invoke(o,s,c,u,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!BN(u)&&e(),YI(t)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,sp(t),Yp(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function sp(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function QI(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function YI(t){t._nesting--,Yp(t)}var Zs=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new gt;onMicrotaskEmpty=new gt;onStable=new gt;onError=new gt;run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function UN(t){return Vw(t,"__ignore_ng_zone__")}function BN(t){return Vw(t,"__scheduler_tick__")}function Vw(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var qn=class{_console=console;handleError(e){this._console.error("ERROR",e)}},Wt=new W("",{factory:()=>{let t=M(St),e=M(rt),n;return r=>{t.runOutsideAngular(()=>{e.destroyed&&!n?setTimeout(()=>{throw r}):(n??=e.get(qn),n.handleError(r))})}}}),jw={provide:_i,useValue:()=>{let t=M(qn,{optional:!0})},multi:!0},$N=new W("",{factory:()=>{let t=M(qe).defaultView;if(!t)return;let e=M(Wt),n=o=>{e(o.reason),o.preventDefault()},r=o=>{o.error?e(o.error):e(new Error(o.message,{cause:o})),o.preventDefault()},i=()=>{t.addEventListener("unhandledrejection",n),t.addEventListener("error",r)};typeof Zone<"u"?Zone.root.run(i):i(),M(un).onDestroy(()=>{t.removeEventListener("error",r),t.removeEventListener("unhandledrejection",n)})}});function Jp(){return Ei([iw(()=>void M($N))])}function Kn(t,e){let[n,r,i]=Pf(t,e?.equal),o=n,s=o[Ut];return o.set=r,o.update=i,o.asReadonly=Uw.bind(o),o}function Uw(){let t=this[Ut];if(t.readonlyFn===void 0){let e=()=>this();e[Ut]=t,t.readonlyFn=e}return t.readonlyFn}var vo=class{},da=new W("",{factory:()=>!0});var Zp=new W("");var Xp=(()=>{class t{static \u0275prov=G({token:t,providedIn:"root",factory:()=>new ap})}return t})(),ap=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let n=e.zone,r=this.queues.get(n);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let n=e.zone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[n,r]of this.queues)n===null?e||=this.flushQueue(r):e||=n.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let n=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,n=!0,r.run());return n}},cp=class{[Ut];constructor(e){this[Ut]=e}destroy(){this[Ut].destroy()}};function Nt(t){return Of(t)}function Ea(t){return{toString:t}.toString()}function JN(t){return typeof t=="function"}function mT(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}var rl=class{previousValue;currentValue;firstChange;constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}},_l=(()=>{let t=()=>gT;return t.ngInherit=!0,t})();function gT(t){return t.type.prototype.ngOnChanges&&(t.setInput=XN),ZN}function ZN(){let t=vT(this),e=t?.current;if(e){let n=t.previous;if(n===vi)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function XN(t,e,n,r,i){let o=this.declaredInputs[r],s=vT(t)||eM(t,{previous:vi,current:null}),c=s.current||(s.current={}),u=s.previous,l=u[o];c[o]=new rl(l&&l.currentValue,n,u===vi),mT(t,e,i,n)}var yT="__ngSimpleChanges__";function vT(t){return t[yT]||null}function eM(t,e){return t[yT]=e}var Bw=[];var Ce=function(t,e=null,n){for(let r=0;r<Bw.length;r++){let i=Bw[r];i(t,e,n)}},Ee=(function(t){return t[t.TemplateCreateStart=0]="TemplateCreateStart",t[t.TemplateCreateEnd=1]="TemplateCreateEnd",t[t.TemplateUpdateStart=2]="TemplateUpdateStart",t[t.TemplateUpdateEnd=3]="TemplateUpdateEnd",t[t.LifecycleHookStart=4]="LifecycleHookStart",t[t.LifecycleHookEnd=5]="LifecycleHookEnd",t[t.OutputStart=6]="OutputStart",t[t.OutputEnd=7]="OutputEnd",t[t.BootstrapApplicationStart=8]="BootstrapApplicationStart",t[t.BootstrapApplicationEnd=9]="BootstrapApplicationEnd",t[t.BootstrapComponentStart=10]="BootstrapComponentStart",t[t.BootstrapComponentEnd=11]="BootstrapComponentEnd",t[t.ChangeDetectionStart=12]="ChangeDetectionStart",t[t.ChangeDetectionEnd=13]="ChangeDetectionEnd",t[t.ChangeDetectionSyncStart=14]="ChangeDetectionSyncStart",t[t.ChangeDetectionSyncEnd=15]="ChangeDetectionSyncEnd",t[t.AfterRenderHooksStart=16]="AfterRenderHooksStart",t[t.AfterRenderHooksEnd=17]="AfterRenderHooksEnd",t[t.ComponentStart=18]="ComponentStart",t[t.ComponentEnd=19]="ComponentEnd",t[t.DeferBlockStateStart=20]="DeferBlockStateStart",t[t.DeferBlockStateEnd=21]="DeferBlockStateEnd",t[t.DynamicComponentStart=22]="DynamicComponentStart",t[t.DynamicComponentEnd=23]="DynamicComponentEnd",t[t.HostBindingsUpdateStart=24]="HostBindingsUpdateStart",t[t.HostBindingsUpdateEnd=25]="HostBindingsUpdateEnd",t})(Ee||{});function tM(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=gT(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function nM(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:c,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(t.contentHooks??=[]).push(-n,s),c&&((t.contentHooks??=[]).push(n,c),(t.contentCheckHooks??=[]).push(n,c)),u&&(t.viewHooks??=[]).push(-n,u),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),h!=null&&(t.destroyHooks??=[]).push(n,h)}}function Xu(t,e,n){_T(t,e,3,n)}function el(t,e,n,r){(t[ne]&3)===n&&_T(t,e,n,r)}function em(t,e){let n=t[ne];(n&3)===e&&(n&=16383,n+=1,t[ne]=n)}function _T(t,e,n,r){let i=r!==void 0?t[Ti]&65535:0,o=r??-1,s=e.length-1,c=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(c=e[u],r!=null&&c>=r)break}else e[u]<0&&(t[Ti]+=65536),(c<o||o==-1)&&(rM(t,n,e,u),t[Ti]=(t[Ti]&4294901760)+u+2),u++}function $w(t,e){Ce(Ee.LifecycleHookStart,t,e);let n=K(null);try{e.call(t)}finally{K(n),Ce(Ee.LifecycleHookEnd,t,e)}}function rM(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],c=t[s];i?t[ne]>>14<t[Ti]>>16&&(t[ne]&3)===e&&(t[ne]+=16384,$w(c,o)):$w(c,o)}var Ao=-1,pa=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,n,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=n,this.injectImpl=r}};function iM(t){return(t.flags&8)!==0}function oM(t){return(t.flags&16)!==0}function sM(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],c=n[r++];t.setAttribute(e,s,c,o)}else{let o=i,s=n[++r];cM(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function aM(t){return t===3||t===4||t===6}function cM(t){return t.charCodeAt(0)===64}function El(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?Hw(t,n,i,null,e[++r]):Hw(t,n,i,null,null))}}return t}function Hw(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let c=t[o++];if(typeof c=="number"){if(c===e){s=-1;break}else if(c>e){s=o-1;break}}}for(;o<t.length;){let c=t[o];if(typeof c=="number")break;if(c===n){i!==null&&(t[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),i!==null&&t.splice(o++,0,i)}function ET(t){return t!==Ao}function il(t){return t&32767}function uM(t){return t>>16}function ol(t,e){let n=uM(t),r=e;for(;n>0;)r=r[Ii],n--;return r}var am=!0;function sl(t){let e=am;return am=t,e}var lM=256,IT=lM-1,wT=5,dM=0,bn={};function hM(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(yi)&&(r=n[yi]),r==null&&(r=n[yi]=dM++);let i=r&IT,o=1<<i;e.data[t+(i>>wT)]|=o}function TT(t,e){let n=DT(t,e);if(n!==-1)return n;let r=e[Y];r.firstCreatePass&&(t.injectorIndex=e.length,tm(r.data,t),tm(e,null),tm(r.blueprint,null));let i=Sm(t,e),o=t.injectorIndex;if(ET(i)){let s=il(i),c=ol(i,e),u=c[Y].data;for(let l=0;l<8;l++)e[o+l]=c[s+l]|u[s+l]}return e[o+8]=i,o}function tm(t,e){t.push(0,0,0,0,0,0,0,0,e)}function DT(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function Sm(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=RT(i),r===null)return Ao;if(n++,i=i[Ii],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Ao}function fM(t,e,n){hM(t,e,n)}function CT(t,e,n){if(n&8||t!==void 0)return t;Vu(e,"NodeInjector")}function bT(t,e,n,r){if(n&8&&r===void 0&&(r=null),(n&3)===0){let i=t[Gn],o=mt(void 0);try{return i?i.get(e,r,n&8):Ep(e,r,n&8)}finally{mt(o)}}return CT(r,e,n)}function ST(t,e,n,r=0,i){if(t!==null){if(e[ne]&2048&&!(r&2)){let s=vM(t,e,n,r,bn);if(s!==bn)return s}let o=AT(t,e,n,r,bn);if(o!==bn)return o}return bT(e,n,r,i)}function AT(t,e,n,r,i){let o=gM(n);if(typeof o=="function"){if(!zp(e,t,r))return r&1?CT(i,n,r):bT(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&8))Vu(n);else return s}finally{qp()}}else if(typeof o=="number"){let s=null,c=DT(t,e),u=Ao,l=r&1?e[At][Ht]:null;for((c===-1||r&4)&&(u=c===-1?Sm(t,e):e[c+8],u===Ao||!qw(r,!1)?c=-1:(s=e[Y],c=il(u),e=ol(u,e)));c!==-1;){let h=e[Y];if(zw(o,c,h.data)){let p=pM(c,e,n,s,r,l);if(p!==bn)return p}u=e[c+8],u!==Ao&&qw(r,e[Y].data[c+8]===l)&&zw(o,c,e)?(s=h,c=il(u),e=ol(u,e)):c=-1}}return i}function pM(t,e,n,r,i,o){let s=e[Y],c=s.data[t+8],u=r==null?br(c)&&am:r!=s&&(c.type&3)!==0,l=i&1&&o===c,h=mM(c,s,n,u,l);return h!==null?cm(e,s,h,c,i):bn}function mM(t,e,n,r,i){let o=t.providerIndexes,s=e.data,c=o&1048575,u=t.directiveStart,l=t.directiveEnd,h=o>>20,p=r?c:c+h,g=i?c+h:l;for(let y=p;y<g;y++){let S=s[y];if(y<u&&n===S||y>=u&&S.type===n)return y}if(i){let y=s[u];if(y&&bi(y)&&y.type===n)return u}return null}function cm(t,e,n,r,i){let o=t[n],s=e.data;if(o instanceof pa){let c=o;if(c.resolving){let y=ZI(s[n]);throw _p(y)}let u=sl(c.canSeeViewProviders);c.resolving=!0;let l=s[n].type||s[n],h,p=c.injectImpl?mt(c.injectImpl):null,g=zp(t,r,0);try{o=t[n]=c.factory(void 0,i,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&tM(n,s[n],e)}finally{p!==null&&mt(p),sl(u),c.resolving=!1,qp()}}return o}function gM(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(yi)?t[yi]:void 0;return typeof e=="number"?e>=0?e&IT:yM:e}function zw(t,e,n){let r=1<<t;return!!(n[e+(t>>wT)]&r)}function qw(t,e){return!(t&2)&&!(t&1&&e)}var Ri=class{_tNode;_lView;constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return ST(this._tNode,this._lView,e,mi(r),n)}};function yM(){return new Ri(cn(),_e())}function Il(t){return Ea(()=>{let e=t.prototype.constructor,n=e[Qs]||um(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[Qs]||um(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function um(t){return lp(t)?()=>{let e=um(Tt(t));return e&&e()}:wr(t)}function vM(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[ne]&2048&&!Co(s);){let c=AT(o,s,n,r|2,bn);if(c!==bn)return c;let u=o.parent;if(!u){let l=s[Sp];if(l){let h=l.get(n,bn,r);if(h!==bn)return h}u=RT(s),s=s[Ii]}o=u}return i}function RT(t){let e=t[Y],n=e.type;return n===2?e.declTNode:n===1?t[Ht]:null}function _M(){return Am(cn(),_e())}function Am(t,e){return new Rm(sn(t,e))}var Rm=(()=>{class t{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=_M}return t})();function NT(t){return(t.flags&128)===128}var Nm=(function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t})(Nm||{}),MT=new Map,EM=0;function IM(){return EM++}function wM(t){MT.set(t[ia],t)}function lm(t){MT.delete(t[ia])}var Gw="__ngContext__";function Ro(t,e){Wn(e)?(t[Gw]=e[ia],wM(e)):t[Gw]=e}function xT(t){return OT(t[Do])}function PT(t){return OT(t[$t])}function OT(t){for(;t!==null&&!on(t);)t=t[$t];return t}var TM;function Mm(t){TM=t}var wl=new W("",{factory:()=>DM}),DM="ng";var Tl=new W(""),Ia=new W("",{providedIn:"platform",factory:()=>"unknown"});var Dl=new W("",{factory:()=>M(qe).body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var kT="r";var LT="di";var FT=!1,VT=new W("",{factory:()=>FT});var CM=(t,e,n,r)=>{};function bM(t,e,n,r){CM(t,e,n,r)}function xm(t){return(t.flags&32)===32}var SM=()=>null;function jT(t,e,n=!1){return SM(t,e,n)}function UT(t,e){let n=t.contentQueries;if(n!==null){let r=K(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let c=t.data[s];Hp(o),c.contentQueries(2,e[s],s)}}}finally{K(r)}}}function dm(t,e,n){Hp(0);let r=K(null);try{e(t,n)}finally{K(r)}}function BT(t,e,n){if(Rp(e)){let r=K(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let c=t.data[s];if(c.contentQueries){let u=n[s];c.contentQueries(1,u,s)}}}finally{K(r)}}}var dn=(function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t[t.ExperimentalIsolatedShadowDom=4]="ExperimentalIsolatedShadowDom",t})(dn||{});var al=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Ou})`}};function Pm(t){return t instanceof al?t.changingThisBreaksApplicationSecurity:t}function $T(t,e){let n=HT(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${Ou})`)}return n===e}function HT(t){return t instanceof al&&t.getTypeName()||null}var AM=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function zT(t){return t=String(t),t.match(AM)?t:"unsafe:"+t}function RM(t,e){return t.createText(e)}function NM(t,e,n){t.setValue(e,n)}function qT(t,e,n){return t.createElement(e,n)}function cl(t,e,n,r,i){t.insertBefore(e,n,r,i)}function GT(t,e,n){t.appendChild(e,n)}function Ww(t,e,n,r,i){r!==null?cl(t,e,n,r,i):GT(t,e,n)}function WT(t,e,n,r){t.removeChild(null,e,n,r)}function MM(t,e,n){t.setAttribute(e,"style",n)}function xM(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function KT(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&sM(t,e,r),i!==null&&xM(t,e,i),o!==null&&MM(t,e,o)}var Om=(function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t})(Om||{});function An(t){let e=PM();return e?e.sanitize(Om.URL,t)||"":$T(t,"URL")?Pm(t):zT(ea(t))}function PM(){let t=_e();return t&&t[Dn].sanitizer}function QT(t){return t instanceof Function?t():t}function OM(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}var YT="ng-template";function kM(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&OM(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(km(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function km(t){return t.type===4&&t.value!==YT}function LM(t,e,n){let r=t.type===4&&!n?YT:t.value;return e===r}function FM(t,e,n){let r=4,i=t.attrs,o=i!==null?UM(i):0,s=!1;for(let c=0;c<e.length;c++){let u=e[c];if(typeof u=="number"){if(!s&&!ln(r)&&!ln(u))return!1;if(s&&ln(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!LM(t,u,n)||u===""&&e.length===1){if(ln(r))return!1;s=!0}}else if(r&8){if(i===null||!kM(t,i,u,n)){if(ln(r))return!1;s=!0}}else{let l=e[++c],h=VM(u,i,km(t),n);if(h===-1){if(ln(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(ln(r))return!1;s=!0}}}}return ln(r)||s}function ln(t){return(t&1)===0}function VM(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let c=e[++i];for(;typeof c=="string";)c=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return BM(e,t)}function jM(t,e,n=!1){for(let r=0;r<e.length;r++)if(FM(t,e[r],n))return!0;return!1}function UM(t){for(let e=0;e<t.length;e++){let n=t[e];if(aM(n))return e}return t.length}function BM(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function Kw(t,e){return t?":not("+e.trim()+")":e}function $M(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let c=t[++n];i+="["+s+(c.length>0?'="'+c+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!ln(s)&&(e+=Kw(o,i),i=""),r=s,o=o||!ln(r);n++}return i!==""&&(e+=Kw(o,i)),e}function HM(t){return t.map($M).join(",")}function zM(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!ln(i))break;i=o}r++}return n.length&&e.push(1,...n),e}var hn={};function Lm(t,e,n,r,i,o,s,c,u,l,h){let p=ze+r,g=p+i,y=qM(p,g),S=typeof l=="function"?l():l;return y[Y]={type:t,blueprint:y,template:n,queries:null,viewQuery:c,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:S,incompleteFirstPass:!1,ssrId:h}}function qM(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:hn);return n}function GM(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=Lm(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function Fm(t,e,n,r,i,o,s,c,u,l,h){let p=e.blueprint.slice();return p[rn]=i,p[ne]=r|4|128|8|64|1024,(l!==null||t&&t[ne]&2048)&&(p[ne]|=2048),xp(p),p[Je]=p[Ii]=t,p[ke]=n,p[Dn]=s||t&&t[Dn],p[Pe]=c||t&&t[Pe],p[Gn]=u||t&&t[Gn]||null,p[Ht]=o,p[ia]=IM(),p[wo]=h,p[Sp]=l,p[At]=e.type==2?t[At]:p,p}function WM(t,e,n){let r=sn(e,t),i=GM(n),o=t[Dn].rendererFactory,s=Vm(t,Fm(t,i,null,JT(n),r,e,null,o.createRenderer(r,n),null,null,null));return t[e.index]=s}function JT(t){let e=16;return t.signals?e=4096:t.onPush&&(e=64),e}function ZT(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function Vm(t,e){return t[Do]?t[bp][$t]=e:t[Do]=e,t[bp]=e,e}function F(t=1){XT(Dt(),_e(),Sr()+t,!1)}function XT(t,e,n,r){if(!r)if((e[ne]&3)===3){let o=t.preOrderCheckHooks;o!==null&&Xu(e,o,n)}else{let o=t.preOrderHooks;o!==null&&el(e,o,0,n)}Ar(n)}var Cl=(function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t})(Cl||{});function hm(t,e,n,r){let i=K(null);try{let[o,s,c]=t.inputs[n],u=null;(s&Cl.SignalBased)!==0&&(u=e[o][Ut]),u!==null&&u.transformFn!==void 0?r=u.transformFn(r):c!==null&&(r=c.call(e,r)),t.setInput!==null?t.setInput(e,u,r,n,o):mT(e,u,o,r)}finally{K(i)}}var Sn=(function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t})(Sn||{}),KM;function jm(t,e){return KM(t,e)}var Ni=new Set,Um=(function(t){return t[t.CHANGE_DETECTION=0]="CHANGE_DETECTION",t[t.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",t})(Um||{}),wa=new W(""),Qw=new Set;function ki(t){Qw.has(t)||(Qw.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var eD=(()=>{class t{impl=null;execute(){this.impl?.execute()}static \u0275prov=G({token:t,providedIn:"root",factory:()=>new t})}return t})();var tD=new W("",{factory:()=>({queue:new Set,isScheduled:!1,scheduler:null,injector:M(rt)})});function nD(t,e,n){let r=t.get(tD);if(Array.isArray(e))for(let i of e)r.queue.add(i),n?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),n?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(t)}function QM(t,e){let n=t.get(tD);if(e.detachedLeaveAnimationFns){for(let r of e.detachedLeaveAnimationFns)n.queue.delete(r);e.detachedLeaveAnimationFns=void 0}}function YM(t,e){for(let[n,r]of e)nD(t,r.animateFns)}function Yw(t,e,n,r){let i=t?.[Ci]?.enter;e!==null&&i&&i.has(n.index)&&YM(r,i)}function So(t,e,n,r,i,o,s,c){if(i!=null){let u,l=!1;on(i)?u=i:Wn(i)&&(l=!0,i=i[rn]);let h=zt(i);t===0&&r!==null?(Yw(c,r,o,n),s==null?GT(e,r,h):cl(e,r,h,s||null,!0)):t===1&&r!==null?(Yw(c,r,o,n),cl(e,r,h,s||null,!0)):t===2?Jw(c,o,n,p=>{WT(e,h,l,p)}):t===3&&Jw(c,o,n,()=>{e.destroyNode(h)}),u!=null&&ux(e,t,n,u,o,r,s)}}function JM(t,e){rD(t,e),e[rn]=null,e[Ht]=null}function ZM(t,e,n,r,i,o){r[rn]=i,r[Ht]=e,Sl(t,r,n,1,i,o)}function rD(t,e){e[Dn].changeDetectionScheduler?.notify(9),Sl(t,e,e[Pe],2,null,null)}function XM(t){let e=t[Do];if(!e)return nm(t[Y],t);for(;e;){let n=null;if(Wn(e))n=e[Do];else{let r=e[Le];r&&(n=r)}if(!n){for(;e&&!e[$t]&&e!==t;)Wn(e)&&nm(e[Y],e),e=e[Je];e===null&&(e=t),Wn(e)&&nm(e[Y],e),n=e&&e[$t]}e=n}}function Bm(t,e){let n=t[aa],r=n.indexOf(e);n.splice(r,1)}function bl(t,e){if(Si(e))return;let n=e[Pe];n.destroyNode&&Sl(t,e,n,3,null,null),XM(e)}function nm(t,e){if(Si(e))return;let n=K(null);try{e[ne]&=-129,e[ne]|=256,e[Rt]&&$s(e[Rt]),nx(t,e),tx(t,e),e[Y].type===1&&e[Pe].destroy();let r=e[wi];if(r!==null&&on(e[Je])){r!==e[Je]&&Bm(r,e);let i=e[Di];i!==null&&i.detachView(t)}lm(e)}finally{K(n)}}function Jw(t,e,n,r){let i=t?.[Ci];if(i==null||i.leave==null||!i.leave.has(e.index))return r(!1);t&&Ni.add(t),nD(n,()=>{if(i.leave&&i.leave.has(e.index)){let s=i.leave.get(e.index),c=[];if(s){for(let u=0;u<s.animateFns.length;u++){let l=s.animateFns[u],{promise:h}=l();c.push(h)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(c),ex(t,r)}else t&&Ni.delete(t),r(!1)},i)}function ex(t,e){let n=t[Ci]?.running;if(n){n.then(()=>{t[Ci].running=void 0,Ni.delete(t),e(!0)});return}e(!1)}function tx(t,e){let n=t.cleanup,r=e[To];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let c=n[s+3];c>=0?r[c]():r[-c].unsubscribe(),s+=2}else{let c=r[n[s+1]];n[s].call(c)}r!==null&&(e[To]=null);let i=e[Hn];if(i!==null){e[Hn]=null;for(let s=0;s<i.length;s++){let c=i[s];c()}}let o=e[oa];if(o!==null){e[oa]=null;for(let s of o)s.destroy()}}function nx(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof pa)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let c=i[o[s]],u=o[s+1];Ce(Ee.LifecycleHookStart,c,u);try{u.call(c)}finally{Ce(Ee.LifecycleHookEnd,c,u)}}else{Ce(Ee.LifecycleHookStart,i,o);try{o.call(i)}finally{Ce(Ee.LifecycleHookEnd,i,o)}}}}}function rx(t,e,n){return ix(t,e.parent,n)}function ix(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[rn];if(br(r)){let{encapsulation:i}=t.data[r.directiveStart+r.componentOffset];if(i===dn.None||i===dn.Emulated)return null}return sn(r,n)}function ox(t,e,n){return ax(t,e,n)}function sx(t,e,n){return t.type&40?sn(t,n):null}var ax=sx,Zw;function $m(t,e,n,r){let i=rx(t,r,e),o=e[Pe],s=r.parent||e[Ht],c=ox(s,r,e);if(i!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)Ww(o,i,n[u],c,!1);else Ww(o,i,n,c,!1);Zw!==void 0&&Zw(o,r,e,n,i)}function ha(t,e){if(e!==null){let n=e.type;if(n&3)return sn(e,t);if(n&4)return fm(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return ha(t,r);{let i=t[e.index];return on(i)?fm(-1,i):zt(i)}}else{if(n&128)return ha(t,e.next);if(n&32)return jm(e,t)()||zt(t[e.index]);{let r=iD(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Tr(t[At]);return ha(i,r)}else return ha(t,e.next)}}}return null}function iD(t,e){if(e!==null){let r=t[At][Ht],i=e.projection;return r.projection[i]}return null}function fm(t,e){let n=Le+t+1;if(n<e.length){let r=e[n],i=r[Y].firstChild;if(i!==null)return ha(r,i)}return e[Cr]}function Hm(t,e,n,r,i,o,s){for(;n!=null;){let c=r[Gn];if(n.type===128){n=n.next;continue}let u=r[n.index],l=n.type;if(s&&e===0&&(u&&Ro(zt(u),r),n.flags|=2),!xm(n))if(l&8)Hm(t,e,n.child,r,i,o,!1),So(e,t,c,i,u,n,o,r);else if(l&32){let h=jm(n,r),p;for(;p=h();)So(e,t,c,i,p,n,o,r);So(e,t,c,i,u,n,o,r)}else l&16?cx(t,e,r,n,i,o):So(e,t,c,i,u,n,o,r);n=s?n.projectionNext:n.next}}function Sl(t,e,n,r,i,o){Hm(n,r,t.firstChild,e,i,o,!1)}function cx(t,e,n,r,i,o){let s=n[At],u=s[Ht].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];So(e,t,n[Gn],i,h,r,o,n)}else{let l=u,h=s[Je];NT(r)&&(l.flags|=128),Hm(t,e,l,h,i,o,!0)}}function ux(t,e,n,r,i,o,s){let c=r[Cr],u=zt(r);c!==u&&So(e,t,n,o,c,i,s);for(let l=Le;l<r.length;l++){let h=r[l];Sl(h[Y],h,t,e,o,c)}}function lx(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:Sn.DashCase;i==null?t.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Sn.Important),t.setStyle(n,r,i,o))}}function oD(t,e,n,r,i){let o=Sr(),s=r&2;try{Ar(-1),s&&e.length>ze&&XT(t,e,ze,!1);let c=s?Ee.TemplateUpdateStart:Ee.TemplateCreateStart;Ce(c,i,n),n(r,i)}finally{Ar(o);let c=s?Ee.TemplateUpdateEnd:Ee.TemplateCreateEnd;Ce(c,i,n)}}function sD(t,e,n){yx(t,e,n),(n.flags&64)===64&&vx(t,e,n)}function zm(t,e,n=sn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],c=s===-1?n(e,t):t[s];t[i++]=c}}}function dx(t,e,n,r){let o=r.get(VT,FT)||n===dn.ShadowDom||n===dn.ExperimentalIsolatedShadowDom,s=t.selectRootElement(e,o);return hx(s),s}function hx(t){fx(t)}var fx=()=>null;function px(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function mx(t,e,n,r,i,o){let s=e[Y];if(qm(t,s,e,n,r)){br(t)&&gx(e,t.index);return}t.type&3&&(n=px(n)),aD(t,e,n,r,i,o)}function aD(t,e,n,r,i,o){if(t.type&3){let s=sn(t,e);r=o!=null?o(r,t.value||"",n):r,i.setProperty(s,n,r)}else t.type&12}function gx(t,e){let n=an(e,t);n[ne]&16||(n[ne]|=64)}function yx(t,e,n){let r=n.directiveStart,i=n.directiveEnd;br(n)&&WM(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||TT(n,e);let o=n.initialInputs;for(let s=r;s<i;s++){let c=t.data[s],u=cm(e,t,s,n);if(Ro(u,e),o!==null&&Tx(e,s-r,u,c,n,o),bi(c)){let l=an(n.index,e);l[ke]=cm(e,t,s,n)}}}function vx(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=Rw();try{Ar(o);for(let c=r;c<i;c++){let u=t.data[c],l=e[c];Gu(c),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&_x(u,l)}}finally{Ar(-1),Gu(s)}}function _x(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function Ex(t,e){let n=t.directiveRegistry,r=null;if(n)for(let i=0;i<n.length;i++){let o=n[i];jM(e,o.selectors,!1)&&(r??=[],bi(o)?r.unshift(o):r.push(o))}return r}function Ix(t,e,n,r,i,o){let s=sn(t,e);wx(e[Pe],s,o,t.value,n,r,i)}function wx(t,e,n,r,i,o,s){if(o==null)t.removeAttribute(e,i,n);else{let c=s==null?ea(o):s(o,r||"",i);t.setAttribute(e,i,c,n)}}function Tx(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let c=0;c<s.length;c+=2){let u=s[c],l=s[c+1];hm(r,n,u,l)}}function cD(t,e,n,r,i){let o=ze+n,s=e[Y],c=i(s,e,t,r,n);e[o]=c,bo(t,!0);let u=t.type===2;return u?(KT(e[Pe],c,t),(_w()===0||Hu(t))&&Ro(c,e),Ew()):Ro(c,e),Yu()&&(!u||!xm(t))&&$m(s,e,c,t),t}function uD(t){let e=t;return jp()?Dw():(e=e.parent,bo(e,!1)),e}function Dx(t,e){let n=t[Gn];if(!n)return;let r;try{r=n.get(Wt,null)}catch{r=null}r?.(e)}function qm(t,e,n,r,i){let o=t.inputs?.[r],s=t.hostDirectiveInputs?.[r],c=!1;if(s)for(let u=0;u<s.length;u+=2){let l=s[u],h=s[u+1],p=e.data[l];hm(p,n[l],h,i),c=!0}if(o)for(let u of o){let l=n[u],h=e.data[u];hm(h,l,r,i),c=!0}return c}function Cx(t,e){let n=an(e,t),r=n[Y];bx(r,n);let i=n[rn];i!==null&&n[wo]===null&&(n[wo]=jT(i,n[Gn])),Ce(Ee.ComponentStart);try{Gm(r,n,n[ke])}finally{Ce(Ee.ComponentEnd,n[ke])}}function bx(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function Gm(t,e,n){Wu(e);try{let r=t.viewQuery;r!==null&&dm(1,r,n);let i=t.template;i!==null&&oD(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Di]?.finishViewCreation(t),t.staticContentQueries&&UT(t,e),t.staticViewQueries&&dm(2,t.viewQuery,n);let o=t.components;o!==null&&Sx(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[ne]&=-5,Ku()}}function Sx(t,e){for(let n=0;n<e.length;n++)Cx(t,e[n])}function Wm(t,e,n,r){let i=K(null);try{let o=e.tView,c=t[ne]&4096?4096:16,u=Fm(t,o,n,c,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];u[wi]=l;let h=t[Di];return h!==null&&(u[Di]=h.createEmbeddedView(o)),Gm(o,u,n),u}finally{K(i)}}function ma(t,e){return!e||e.firstChild===null||NT(t)}function ga(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let o=e[n.index];o!==null&&r.push(zt(o)),on(o)&&lD(o,r);let s=n.type;if(s&8)ga(t,e,n.child,r);else if(s&32){let c=jm(n,e),u;for(;u=c();)r.push(u)}else if(s&16){let c=iD(e,n);if(Array.isArray(c))r.push(...c);else{let u=Tr(e[At]);ga(u[Y],u,c,r,!0)}}n=i?n.projectionNext:n.next}return r}function lD(t,e){for(let n=Le;n<t.length;n++){let r=t[n],i=r[Y].firstChild;i!==null&&ga(r[Y],r,i,e)}t[Cr]!==t[rn]&&e.push(t[Cr])}function dD(t){if(t[$u]!==null){for(let e of t[$u])e.impl.addSequence(e);t[$u].length=0}}var hD=[];function Ax(t){return t[Rt]??Rx(t)}function Rx(t){let e=hD.pop()??Object.create(Mx);return e.lView=t,e}function Nx(t){t.lView[Rt]!==t&&(t.lView=null,hD.push(t))}var Mx=ae(P({},ru),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{la(t.lView)},consumerOnSignalRead(){this.lView[Rt]=this}});function xx(t){let e=t[Rt]??Object.create(Px);return e.lView=t,e}var Px=ae(P({},ru),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{let e=Tr(t.lView);for(;e&&!fD(e[Y]);)e=Tr(e);e&&Pp(e)},consumerOnSignalRead(){this.lView[Rt]=this}});function fD(t){return t.type!==2}function pD(t){if(t[oa]===null)return;let e=!0;for(;e;){let n=!1;for(let r of t[oa])r.dirty&&(n=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=n&&!!(t[ne]&8192)}}var Ox=100;function mD(t,e=0){let r=t[Dn].rendererFactory,i=!1;i||r.begin?.();try{kx(t,e)}finally{i||r.end?.()}}function kx(t,e){let n=Up();try{Bp(!0),pm(t,e);let r=0;for(;ua(t);){if(r===Ox)throw new z(103,!1);r++,pm(t,1)}}finally{Bp(n)}}function Lx(t,e,n,r){if(Si(e))return;let i=e[ne],o=!1,s=!1;Wu(e);let c=!0,u=null,l=null;o||(fD(t)?(l=Ax(e),u=ou(l)):nu()===null?(c=!1,l=xx(e),u=ou(l)):e[Rt]&&($s(e[Rt]),e[Rt]=null));try{xp(e),Cw(t.bindingStartIndex),n!==null&&oD(t,e,n,2,r);let h=(i&3)===3;if(!o)if(h){let y=t.preOrderCheckHooks;y!==null&&Xu(e,y,null)}else{let y=t.preOrderHooks;y!==null&&el(e,y,0,null),em(e,0)}if(s||Fx(e),pD(e),gD(e,0),t.contentQueries!==null&&UT(t,e),!o)if(h){let y=t.contentCheckHooks;y!==null&&Xu(e,y)}else{let y=t.contentHooks;y!==null&&el(e,y,1),em(e,1)}jx(t,e);let p=t.components;p!==null&&vD(e,p,0);let g=t.viewQuery;if(g!==null&&dm(2,g,r),!o)if(h){let y=t.viewCheckHooks;y!==null&&Xu(e,y)}else{let y=t.viewHooks;y!==null&&el(e,y,2),em(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Bu]){for(let y of e[Bu])y();e[Bu]=null}o||(dD(e),e[ne]&=-73)}catch(h){throw o||la(e),h}finally{l!==null&&(Nf(l,u),c&&Nx(l)),Ku()}}function gD(t,e){for(let n=xT(t);n!==null;n=PT(n))for(let r=Le;r<n.length;r++){let i=n[r];yD(i,e)}}function Fx(t){for(let e=xT(t);e!==null;e=PT(e)){if(!(e[ne]&2))continue;let n=e[aa];for(let r=0;r<n.length;r++){let i=n[r];Pp(i)}}}function Vx(t,e,n){Ce(Ee.ComponentStart);let r=an(e,t);try{yD(r,n)}finally{Ce(Ee.ComponentEnd,r[ke])}}function yD(t,e){zu(t)&&pm(t,e)}function pm(t,e){let r=t[Y],i=t[ne],o=t[Rt],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&su(o)),s||=!1,o&&(o.dirty=!1),t[ne]&=-9217,s)Lx(r,t,r.template,t[ke]);else if(i&8192){let c=K(null);try{pD(t),gD(t,1);let u=r.components;u!==null&&vD(t,u,1),dD(t)}finally{K(c)}}}function vD(t,e,n){for(let r=0;r<e.length;r++)Vx(t,e[r],n)}function jx(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Ar(~i);else{let o=i,s=n[++r],c=n[++r];Aw(s,o);let u=e[o];Ce(Ee.HostBindingsUpdateStart,u);try{c(2,u)}finally{Ce(Ee.HostBindingsUpdateEnd,u)}}}}finally{Ar(-1)}}function Km(t,e){let n=Up()?64:1088;for(t[Dn].changeDetectionScheduler?.notify(e);t;){t[ne]|=n;let r=Tr(t);if(Co(t)&&!r)return t;t=r}return null}function _D(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function ED(t,e){let n=Le+e;if(n<t.length)return t[n]}function Al(t,e,n,r=!0){let i=e[Y];if(Ux(i,e,t,n),r){let s=fm(n,t),c=e[Pe],u=c.parentNode(t[Cr]);u!==null&&ZM(i,t[Ht],c,e,u,s)}let o=e[wo];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function ID(t,e){let n=ya(t,e);return n!==void 0&&bl(n[Y],n),n}function ya(t,e){if(t.length<=Le)return;let n=Le+e,r=t[n];if(r){let i=r[wi];i!==null&&i!==t&&Bm(i,r),e>0&&(t[n-1][$t]=r[$t]);let o=ta(t,Le+e);JM(r[Y],r);let s=o[Di];s!==null&&s.detachView(o[Y]),r[Je]=null,r[$t]=null,r[ne]&=-129}return r}function Ux(t,e,n,r){let i=Le+r,o=n.length;r>0&&(n[i-1][$t]=e),r<o-Le?(e[$t]=n[i],Ip(n,Le+r,e)):(n.push(e),e[$t]=null),e[Je]=n;let s=e[wi];s!==null&&n!==s&&wD(s,e);let c=e[Di];c!==null&&c.insertView(t),qu(e),e[ne]|=128}function wD(t,e){let n=t[aa],r=e[Je];if(Wn(r))t[ne]|=2;else{let i=r[Je][At];e[At]!==i&&(t[ne]|=2)}n===null?t[aa]=[e]:n.push(e)}var Mi=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,n=e[Y];return ga(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n}get context(){return this._lView[ke]}set context(e){this._lView[ke]=e}get destroyed(){return Si(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Je];if(on(e)){let n=e[sa],r=n?n.indexOf(this):-1;r>-1&&(ya(e,r),ta(n,r))}this._attachedToViewContainer=!1}bl(this._lView[Y],this._lView)}onDestroy(e){Op(this._lView,e)}markForCheck(){Km(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ne]&=-129}reattach(){qu(this._lView),this._lView[ne]|=128}detectChanges(){this._lView[ne]|=1024,mD(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new z(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Co(this._lView),n=this._lView[wi];n!==null&&!e&&Bm(n,this._lView),rD(this._lView[Y],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new z(902,!1);this._appRef=e;let n=Co(this._lView),r=this._lView[wi];r!==null&&!n&&wD(r,this._lView),qu(this._lView)}};function Rl(t,e,n,r,i){let o=t.data[e];if(o===null)o=Bx(t,e,n,r,i),Sw()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=Tw();o.injectorIndex=s===null?-1:s.injectorIndex}return bo(o,!0),o}function Bx(t,e,n,r,i){let o=Vp(),s=jp(),c=s?o:o&&o.parent,u=t.data[e]=Hx(t,c,n,e,r,i);return $x(t,u,o,s),u}function $x(t,e,n,r){t.firstChild===null&&(t.firstChild=e),n!==null&&(r?n.child==null&&e.parent!==null&&(n.child=e):n.next===null&&(n.next=e,e.prev=n))}function Hx(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,c=0;return ww()&&(c|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,fieldIndex:-1,customControlIndex:-1,propertyBindings:null,flags:c,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function zx(t){let e=t[Ap]??[],r=t[Je][Pe],i=[];for(let o of e)o.data[LT]!==void 0?i.push(o):qx(o,r);t[Ap]=i}function qx(t,e){let n=0,r=t.firstChild;if(r){let i=t.data[kT];for(;n<i;){let o=r.nextSibling;WT(e,r,!1),r=o,n++}}}var Gx=()=>null,Wx=()=>null;function mm(t,e){return Gx(t,e)}function TD(t,e,n){return Wx(t,e,n)}var DD=class{},Nl=class{},gm=class{resolveComponentFactory(e){throw new z(917,!1)}},Ta=class{static NULL=new gm},xi=class{};var CD=(()=>{class t{static \u0275prov=G({token:t,providedIn:"root",factory:()=>null})}return t})();var tl={},ym=class{injector;parentInjector;constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){let i=this.injector.get(e,tl,r);return i!==tl||n===tl?i:this.parentInjector.get(e,n,r)}};function ul(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let c=e[s];if(typeof c=="number")o=c;else if(o==1)i=up(i,c);else if(o==2){let u=c,l=e[++s];r=up(r,u+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function Da(t,e=0){let n=_e();if(n===null)return oe(t,e);let r=cn();return ST(r,n,Tt(t),e)}function Kx(t,e,n,r,i){let o=r===null?null:{"":-1},s=i(t,n);if(s!==null){let c=s,u=null,l=null;for(let h of s)if(h.resolveHostDirectives!==null){[c,u,l]=h.resolveHostDirectives(s);break}Jx(t,e,n,c,o,u,l)}o!==null&&r!==null&&Qx(n,r,o)}function Qx(t,e,n){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new z(-301,!1);r.push(e[i],o)}}function Yx(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function Jx(t,e,n,r,i,o,s){let c=r.length,u=null;for(let g=0;g<c;g++){let y=r[g];u===null&&bi(y)&&(u=y,Yx(t,n,g)),fM(TT(n,e),t,y.type)}rP(n,t.data.length,c),u?.viewProvidersResolver&&u.viewProvidersResolver(u);for(let g=0;g<c;g++){let y=r[g];y.providersResolver&&y.providersResolver(y)}let l=!1,h=!1,p=ZT(t,e,c,null);c>0&&(n.directiveToIndex=new Map);for(let g=0;g<c;g++){let y=r[g];if(n.mergedAttrs=El(n.mergedAttrs,y.hostAttrs),Xx(t,n,e,p,y),nP(p,y,i),s!==null&&s.has(y)){let[R,A]=s.get(y);n.directiveToIndex.set(y.type,[p,R+n.directiveStart,A+n.directiveStart])}else(o===null||!o.has(y))&&n.directiveToIndex.set(y.type,p);y.contentQueries!==null&&(n.flags|=4),(y.hostBindings!==null||y.hostAttrs!==null||y.hostVars!==0)&&(n.flags|=64);let S=y.type.prototype;!l&&(S.ngOnChanges||S.ngOnInit||S.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),l=!0),!h&&(S.ngOnChanges||S.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),h=!0),p++}Zx(t,n,o)}function Zx(t,e,n){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=t.data[r];if(n===null||!n.has(i))Xw(0,e,i,r),Xw(1,e,i,r),tT(e,r,!1);else{let o=n.get(i);eT(0,e,o,r),eT(1,e,o,r),tT(e,r,!0)}}}function Xw(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;t===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),bD(e,o)}}function eT(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],c;t===0?c=e.hostDirectiveInputs??={}:c=e.hostDirectiveOutputs??={},c[s]??=[],c[s].push(r,o),bD(e,s)}}function bD(t,e){e==="class"?t.flags|=8:e==="style"&&(t.flags|=16)}function tT(t,e,n){let{attrs:r,inputs:i,hostDirectiveInputs:o}=t;if(r===null||!n&&i===null||n&&o===null||km(t)){t.initialInputs??=[],t.initialInputs.push(null);return}let s=null,c=0;for(;c<r.length;){let u=r[c];if(u===0){c+=4;continue}else if(u===5){c+=2;continue}else if(typeof u=="number")break;if(!n&&i.hasOwnProperty(u)){let l=i[u];for(let h of l)if(h===e){s??=[],s.push(u,r[c+1]);break}}else if(n&&o.hasOwnProperty(u)){let l=o[u];for(let h=0;h<l.length;h+=2)if(l[h]===e){s??=[],s.push(l[h+1],r[c+1]);break}}c+=2}t.initialInputs??=[],t.initialInputs.push(s)}function Xx(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=wr(i.type,!0)),s=new pa(o,bi(i),Da,null);t.blueprint[r]=s,n[r]=s,eP(t,e,r,ZT(t,n,i.hostVars,hn),i)}function eP(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let c=~e.index;tP(s)!=c&&s.push(c),s.push(n,r,o)}}function tP(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function nP(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;bi(e)&&(n[""]=t)}}function rP(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function SD(t,e,n,r,i,o,s,c){let u=e[Y],l=u.consts,h=Cn(l,s),p=Rl(u,t,n,r,h);return o&&Kx(u,e,p,Cn(l,c),i),p.mergedAttrs=El(p.mergedAttrs,p.attrs),p.attrs!==null&&ul(p,p.attrs,!1),p.mergedAttrs!==null&&ul(p,p.mergedAttrs,!0),u.queries!==null&&u.queries.elementStart(u,p),p}function AD(t,e){nM(t,e),Rp(e)&&t.queries.elementEnd(e)}function iP(t,e,n,r,i,o){let s=e.consts,c=Cn(s,i),u=Rl(e,t,n,r,c);if(u.mergedAttrs=El(u.mergedAttrs,u.attrs),o!=null){let l=Cn(s,o);u.localNames=[];for(let h=0;h<l.length;h+=2)u.localNames.push(l[h],-1)}return u.attrs!==null&&ul(u,u.attrs,!1),u.mergedAttrs!==null&&ul(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function RD(t,e,n){return t[e]=n}function oP(t,e){return t[e]}function Nr(t,e,n){if(n===hn)return!1;let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function nl(t,e,n){return function r(i){let o=br(t)?an(t.index,e):e;Km(o,5);let s=e[ke],c=nT(e,s,n,i),u=r.__ngNextListenerFn__;for(;u;)c=nT(e,s,u,i)&&c,u=u.__ngNextListenerFn__;return c}}function nT(t,e,n,r){let i=K(null);try{return Ce(Ee.OutputStart,e,n),n(r)!==!1}catch(o){return Dx(t,o),!1}finally{Ce(Ee.OutputEnd,e,n),K(i)}}function ND(t,e,n,r,i,o,s,c){let u=Hu(t),l=!1,h=null;if(!r&&u&&(h=aP(e,n,o,t.index)),h!==null){let p=h.__ngLastListenerFn__||h;p.__ngNextListenerFn__=s,h.__ngLastListenerFn__=s,l=!0}else{let p=sn(t,n),g=r?r(p):p;bM(n,g,o,c);let y=i.listen(g,o,c);if(!sP(o)){let S=r?R=>r(zt(R[t.index])):t.index;MD(S,e,n,o,c,y,!1)}}return l}function sP(t){return t.startsWith("animation")||t.startsWith("transition")}function aP(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let c=e[To],u=i[o+2];return c&&c.length>u?c[u]:null}typeof s=="string"&&(o+=2)}return null}function MD(t,e,n,r,i,o,s){let c=e.firstCreatePass?vw(e):null,u=yw(n),l=u.length;u.push(i,o),c&&c.push(r,t,l,(l+1)*(s?-1:1))}function rT(t,e,n,r,i,o){let s=e[n],c=e[Y],l=c.data[n].outputs[r],p=s[l].subscribe(o);MD(t.index,c,e,i,o,p,!0)}var vm=Symbol("BINDING");var ll=class extends Ta{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=Dr(e);return new No(n,this.ngModule)}};function cP(t){return Object.keys(t).map(e=>{let[n,r,i]=t[e],o={propName:n,templateName:e,isSignal:(r&Cl.SignalBased)!==0};return i&&(o.transform=i),o})}function uP(t){return Object.keys(t).map(e=>({propName:t[e],templateName:e}))}function lP(t,e,n){let r=e instanceof rt?e:e?.injector;return r&&t.getStandaloneInjector!==null&&(r=t.getStandaloneInjector(r)||r),r?new ym(n,r):n}function dP(t){let e=t.get(xi,null);if(e===null)throw new z(407,!1);let n=t.get(CD,null),r=t.get(vo,null);return{rendererFactory:e,sanitizer:n,changeDetectionScheduler:r,ngReflect:!1}}function hP(t,e){let n=xD(t);return qT(e,n,n==="svg"?dw:n==="math"?hw:null)}function xD(t){return(t.selectors[0][0]||"div").toLowerCase()}var No=class extends Nl{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=cP(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=uP(this.componentDef.outputs),this.cachedOutputs}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=HM(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!n}create(e,n,r,i,o,s){Ce(Ee.DynamicComponentStart);let c=K(null);try{let u=this.componentDef,l=fP(r,u,s,o),h=lP(u,i||this.ngModule,e),p=dP(h),g=p.rendererFactory.createRenderer(null,u),y=r?dx(g,r,u.encapsulation,h):hP(u,g),S=s?.some(iT)||o?.some(L=>typeof L!="function"&&L.bindings.some(iT)),R=Fm(null,l,null,512|JT(u),null,null,p,g,h,null,jT(y,h,!0));R[ze]=y,Wu(R);let A=null;try{let L=SD(ze,R,2,"#host",()=>l.directiveRegistry,!0,0);KT(g,y,L),Ro(y,R),sD(l,R,L),BT(l,L,R),AD(l,L),n!==void 0&&mP(L,this.ngContentSelectors,n),A=an(L.index,R),R[ke]=A[ke],Gm(l,R,null)}catch(L){throw A!==null&&lm(A),lm(R),L}finally{Ce(Ee.DynamicComponentEnd),Ku()}return new dl(this.componentType,R,!!S)}finally{K(c)}}};function fP(t,e,n,r){let i=t?["ng-version","21.0.6"]:zM(e.selectors[0]),o=null,s=null,c=0;if(n)for(let h of n)c+=h[vm].requiredVars,h.create&&(h.targetIdx=0,(o??=[]).push(h)),h.update&&(h.targetIdx=0,(s??=[]).push(h));if(r)for(let h=0;h<r.length;h++){let p=r[h];if(typeof p!="function")for(let g of p.bindings){c+=g[vm].requiredVars;let y=h+1;g.create&&(g.targetIdx=y,(o??=[]).push(g)),g.update&&(g.targetIdx=y,(s??=[]).push(g))}}let u=[e];if(r)for(let h of r){let p=typeof h=="function"?h:h.type,g=vp(p);u.push(g)}return Lm(0,null,pP(o,s),1,c,u,null,null,null,[i],null)}function pP(t,e){return!t&&!e?null:n=>{if(n&1&&t)for(let r of t)r.create();if(n&2&&e)for(let r of e)r.update()}}function iT(t){let e=t[vm].kind;return e==="input"||e==="twoWay"}var dl=class extends DD{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,n,r){super(),this._rootLView=n,this._hasInputBindings=r,this._tNode=ca(n[Y],ze),this.location=Am(this._tNode,n),this.instance=an(this._tNode.index,n)[ke],this.hostView=this.changeDetectorRef=new Mi(n,void 0),this.componentType=e}setInput(e,n){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let i=this._rootLView,o=qm(r,i[Y],i,e,n);this.previousInputValues.set(e,n);let s=an(r.index,i);Km(s,1)}get injector(){return new Ri(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function mP(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null&&o.length?Array.from(o):null)}}var Ca=(()=>{class t{static __NG_ELEMENT_ID__=gP}return t})();function gP(){let t=cn();return vP(t,_e())}var yP=Ca,PD=class extends yP{_lContainer;_hostTNode;_hostLView;constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Am(this._hostTNode,this._hostLView)}get injector(){return new Ri(this._hostTNode,this._hostLView)}get parentInjector(){let e=Sm(this._hostTNode,this._hostLView);if(ET(e)){let n=ol(e,this._hostLView),r=il(e),i=n[Y].data[r+8];return new Ri(i,n)}else return new Ri(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=oT(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-Le}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=mm(this._lContainer,e.ssrId),c=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(c,i,ma(this._hostTNode,s)),c}createComponent(e,n,r,i,o,s,c){let u=e&&!JN(e),l;if(u)l=n;else{let A=n||{};l=A.index,r=A.injector,i=A.projectableNodes,o=A.environmentInjector||A.ngModuleRef,s=A.directives,c=A.bindings}let h=u?e:new No(Dr(e)),p=r||this.parentInjector;if(!o&&h.ngModule==null){let L=(u?p:this.parentInjector).get(rt,null);L&&(o=L)}let g=Dr(h.componentType??{}),y=mm(this._lContainer,g?.id??null),S=y?.firstChild??null,R=h.create(p,i,S,o,s,c);return this.insertImpl(R.hostView,l,ma(this._hostTNode,y)),R}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(pw(i)){let c=this.indexOf(e);if(c!==-1)this.detach(c);else{let u=i[Je],l=new PD(u,u[Ht],u[Je]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return Al(s,i,o,r),e.attachToViewContainerRef(),Ip(rm(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=oT(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=ya(this._lContainer,n);r&&(ta(rm(this._lContainer),n),bl(r[Y],r))}detach(e){let n=this._adjustIndex(e,-1),r=ya(this._lContainer,n);return r&&ta(rm(this._lContainer),n)!=null?new Mi(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function oT(t){return t[sa]}function rm(t){return t[sa]||(t[sa]=[])}function vP(t,e){let n,r=e[t.index];return on(r)?n=r:(n=_D(r,e,null,t),e[t.index]=n,Vm(e,n)),EP(n,e,t,r),new PD(n,t,e)}function _P(t,e){let n=t[Pe],r=n.createComment(""),i=sn(e,t),o=n.parentNode(i);return cl(n,o,r,n.nextSibling(i),!1),r}var EP=TP,IP=()=>!1;function wP(t,e,n){return IP(t,e,n)}function TP(t,e,n,r){if(t[Cr])return;let i;n.type&8?i=zt(r):i=_P(e,n),t[Cr]=i}var Pi=class{},Ml=class{};var hl=class extends Pi{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new ll(this);constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n;let o=yp(e);this._bootstrapComponents=QT(o.bootstrap),this._r3Injector=Gp(e,n,[{provide:Pi,useValue:this},{provide:Ta,useValue:this.componentFactoryResolver},...r],zn(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},fl=class extends Ml{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new hl(this.moduleType,e,[])}};var va=class extends Pi{injector;componentFactoryResolver=new ll(this);instance=null;constructor(e){super();let n=new gi([...e.providers,{provide:Pi,useValue:this},{provide:Ta,useValue:this.componentFactoryResolver}],e.parent||ra(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function ba(t,e,n=null){return new va({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var DP=(()=>{class t{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=Dp(!1,n.type),i=r.length>0?ba([r],this._injector,""):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=G({token:t,providedIn:"environment",factory:()=>new t(oe(rt))})}return t})();function fn(t){return Ea(()=>{let e=OD(t),n=ae(P({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Nm.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(DP).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||dn.Emulated,styles:t.styles||Bt,_:null,schemas:t.schemas||null,tView:null,id:""});e.standalone&&ki("NgStandalone"),kD(n);let r=t.dependencies;return n.directiveDefs=sT(r,CP),n.pipeDefs=sT(r,JI),n.id=AP(n),n})}function CP(t){return Dr(t)||vp(t)}function Sa(t){return Ea(()=>({type:t.type,bootstrap:t.bootstrap||Bt,declarations:t.declarations||Bt,imports:t.imports||Bt,exports:t.exports||Bt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function bP(t,e){if(t==null)return vi;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,c,u;Array.isArray(i)?(c=i[0],o=i[1],s=i[2]??o,u=i[3]||null):(o=i,s=i,c=Cl.None,u=null),n[o]=[r,c,u],e[o]=s}return n}function SP(t){if(t==null)return vi;let e={};for(let n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function xl(t){return Ea(()=>{let e=OD(t);return kD(e),e})}function Qm(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone??!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function OD(t){let e={};return{type:t.type,providersResolver:null,viewProvidersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputConfig:t.inputs||vi,exportAs:t.exportAs||null,standalone:t.standalone??!0,signals:t.signals===!0,selectors:t.selectors||Bt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:bP(t.inputs,e),outputs:SP(t.outputs),debugInfo:null}}function kD(t){t.features?.forEach(e=>e(t))}function sT(t,e){return t?()=>{let n=typeof t=="function"?t():t,r=[];for(let i of n){let o=e(i);o!==null&&r.push(o)}return r}:null}function AP(t){let e=0,n=typeof t.consts=="function"?"":t.consts,r=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,n,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function RP(t,e,n,r,i,o,s,c){if(n.firstCreatePass){t.mergedAttrs=El(t.mergedAttrs,t.attrs);let h=t.tView=Lm(2,t,i,o,s,n.directiveRegistry,n.pipeRegistry,null,n.schemas,n.consts,null);n.queries!==null&&(n.queries.template(n,t),h.queries=n.queries.embeddedTView(t))}c&&(t.flags|=c),bo(t,!1);let u=NP(n,e,t,r);Yu()&&$m(n,e,u,t),Ro(u,e);let l=_D(u,e,u,t);e[r+ze]=l,Vm(e,l),wP(l,t,e)}function pl(t,e,n,r,i,o,s,c,u,l,h){let p=n+ze,g;if(e.firstCreatePass){if(g=Rl(e,p,4,s||null,c||null),l!=null){let y=Cn(e.consts,l);g.localNames=[];for(let S=0;S<y.length;S+=2)g.localNames.push(y[S],-1)}}else g=e.data[p];return RP(g,t,e,n,r,i,o,u),l!=null&&zm(t,g,h),g}var NP=MP;function MP(t,e,n,r){return Ju(!0),e[Pe].createComment("")}var Ym=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();var Jm=new W("");function Li(t){return!!t&&typeof t.then=="function"}function Pl(t){return!!t&&typeof t.subscribe=="function"}var LD=new W("");var Zm=(()=>{class t{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=M(LD,{optional:!0})??[];injector=M(nn);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let o=yt(this.injector,i);if(Li(o))n.push(o);else if(Pl(o)){let s=new Promise((c,u)=>{o.subscribe({complete:c,error:u})});n.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||t)};static \u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Ol=new W("");function FD(){xf(()=>{let t="";throw new z(600,t)})}function VD(t){return t.isBoundToModule}var xP=10;var xo=(()=>{class t{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=M(Wt);afterRenderManager=M(eD);zonelessEnabled=M(da);rootEffectScheduler=M(Xp);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new at;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=M(Rr);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(Re(n=>!n))}constructor(){M(wa,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=M(rt);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){return this.bootstrapImpl(n,r)}bootstrapImpl(n,r,i=nn.NULL){return this._injector.get(St).run(()=>{Ce(Ee.BootstrapComponentStart);let s=n instanceof Nl;if(!this._injector.get(Zm).done){let S="";throw new z(405,S)}let u;s?u=n:u=this._injector.get(Ta).resolveComponentFactory(n),this.componentTypes.push(u.componentType);let l=VD(u)?void 0:this._injector.get(Pi),h=r||u.selector,p=u.create(i,[],h,l),g=p.location.nativeElement,y=p.injector.get(Jm,null);return y?.registerApplication(g),p.onDestroy(()=>{this.detachView(p.hostView),fa(this.components,p),y?.unregisterApplication(g)}),this._loadComponent(p),Ce(Ee.BootstrapComponentEnd,p),p})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Ce(Ee.ChangeDetectionStart),this.tracingSnapshot!==null?this.tracingSnapshot.run(Um.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw Ce(Ee.ChangeDetectionEnd),new z(101,!1);let n=K(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,K(n),this.afterTick.next(),Ce(Ee.ChangeDetectionEnd)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(xi,null,{optional:!0}));let n=0;for(;this.dirtyFlags!==0&&n++<xP;){Ce(Ee.ChangeDetectionSyncStart);try{this.synchronizeOnce()}finally{Ce(Ee.ChangeDetectionSyncEnd)}}}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let n=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!ua(i))continue;let o=r&&!this.zonelessEnabled?0:1;mD(i,o),n=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}n||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>ua(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;fa(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(n),this._injector.get(Ol,[]).forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>fa(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new z(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||t)};static \u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function fa(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function Mr(t,e,n,r){let i=_e(),o=Ai();if(Nr(i,o,e)){let s=Dt(),c=Qu();Ix(c,i,t,e,n,r)}return Mr}var c6=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";var _m=class{destroy(e){}updateValue(e,n){}swap(e,n){let r=Math.min(e,n),i=Math.max(e,n),o=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(e,n){this.attach(n,this.detach(e))}};function im(t,e,n,r,i){return t===n&&Object.is(e,r)?1:Object.is(i(t,e),i(n,r))?-1:0}function PP(t,e,n,r){let i,o,s=0,c=t.length-1,u=void 0;if(Array.isArray(e)){K(r);let l=e.length-1;for(K(null);s<=c&&s<=l;){let h=t.at(s),p=e[s],g=im(s,h,s,p,n);if(g!==0){g<0&&t.updateValue(s,p),s++;continue}let y=t.at(c),S=e[l],R=im(c,y,l,S,n);if(R!==0){R<0&&t.updateValue(c,S),c--,l--;continue}let A=n(s,h),L=n(c,y),X=n(s,p);if(Object.is(X,L)){let le=n(l,S);Object.is(le,A)?(t.swap(s,c),t.updateValue(c,S),l--,c--):t.move(c,s),t.updateValue(s,p),s++;continue}if(i??=new ml,o??=cT(t,s,c,n),Em(t,i,s,X))t.updateValue(s,p),s++,c++;else if(o.has(X))i.set(A,t.detach(s)),c--;else{let le=t.create(s,e[s]);t.attach(s,le),s++,c++}}for(;s<=l;)aT(t,i,n,s,e[s]),s++}else if(e!=null){K(r);let l=e[Symbol.iterator]();K(null);let h=l.next();for(;!h.done&&s<=c;){let p=t.at(s),g=h.value,y=im(s,p,s,g,n);if(y!==0)y<0&&t.updateValue(s,g),s++,h=l.next();else{i??=new ml,o??=cT(t,s,c,n);let S=n(s,g);if(Em(t,i,s,S))t.updateValue(s,g),s++,c++,h=l.next();else if(!o.has(S))t.attach(s,t.create(s,g)),s++,c++,h=l.next();else{let R=n(s,p);i.set(R,t.detach(s)),c--}}}for(;!h.done;)aT(t,i,n,t.length,h.value),h=l.next()}for(;s<=c;)t.destroy(t.detach(c--));i?.forEach(l=>{t.destroy(l)})}function Em(t,e,n,r){return e!==void 0&&e.has(r)?(t.attach(n,e.get(r)),e.delete(r),!0):!1}function aT(t,e,n,r,i){if(Em(t,e,r,n(r,i)))t.updateValue(r,i);else{let o=t.create(r,i);t.attach(r,o)}}function cT(t,e,n,r){let i=new Set;for(let o=e;o<=n;o++)i.add(r(o,t.at(o)));return i}var ml=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let n=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(e,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,n){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,n)}else this.kvMap.set(e,n)}forEach(e){for(let[n,r]of this.kvMap)if(e(r,n),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,n)}}};function me(t,e,n,r,i,o,s,c){ki("NgControlFlow");let u=_e(),l=Dt(),h=Cn(l.consts,o);return pl(u,l,t,e,n,r,i,h,256,s,c),Fi}function Fi(t,e,n,r,i,o,s,c){ki("NgControlFlow");let u=_e(),l=Dt(),h=Cn(l.consts,o);return pl(u,l,t,e,n,r,i,h,512,s,c),Fi}function ge(t,e){ki("NgControlFlow");let n=_e(),r=Ai(),i=n[r]!==hn?n[r]:-1,o=i!==-1?gl(n,ze+i):void 0,s=0;if(Nr(n,r,t)){let c=K(null);try{if(o!==void 0&&ID(o,s),t!==-1){let u=ze+t,l=gl(n,u),h=Dm(n[Y],u),p=TD(l,h,n),g=Wm(n,h,e,{dehydratedView:p});Al(l,g,s,ma(h,p))}}finally{K(c)}}else if(o!==void 0){let c=ED(o,s);c!==void 0&&(c[ke]=e)}}var Im=class{lContainer;$implicit;$index;constructor(e,n,r){this.lContainer=e,this.$implicit=n,this.$index=r}get $count(){return this.lContainer.length-Le}};function xr(t,e){return e}var wm=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,n,r){this.hasEmptyBlock=e,this.trackByFn=n,this.liveCollection=r}};function Pr(t,e,n,r,i,o,s,c,u,l,h,p,g){ki("NgControlFlow");let y=_e(),S=Dt(),R=u!==void 0,A=_e(),L=c?s.bind(A[At][ke]):s,X=new wm(R,L);A[ze+t]=X,pl(y,S,t+1,e,n,r,i,Cn(S.consts,o),256),R&&pl(y,S,t+2,u,l,h,p,Cn(S.consts,g),512)}var Tm=class extends _m{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,n,r){super(),this.lContainer=e,this.hostLView=n,this.templateTNode=r}get length(){return this.lContainer.length-Le}at(e){return this.getLView(e)[ke].$implicit}attach(e,n){let r=n[wo];this.needsIndexUpdate||=e!==this.length,Al(this.lContainer,n,e,ma(this.templateTNode,r)),OP(this.lContainer,e)}detach(e){return this.needsIndexUpdate||=e!==this.length-1,kP(this.lContainer,e),LP(this.lContainer,e)}create(e,n){let r=mm(this.lContainer,this.templateTNode.tView.ssrId);return Wm(this.hostLView,this.templateTNode,new Im(this.lContainer,n,e),{dehydratedView:r})}destroy(e){bl(e[Y],e)}updateValue(e,n){this.getLView(e)[ke].$implicit=n}reset(){this.needsIndexUpdate=!1}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[ke].$index=e}getLView(e){return FP(this.lContainer,e)}};function Or(t){let e=K(null),n=Sr();try{let r=_e(),i=r[Y],o=r[n],s=n+1,c=gl(r,s);if(o.liveCollection===void 0){let l=Dm(i,s);o.liveCollection=new Tm(c,r,l)}else o.liveCollection.reset();let u=o.liveCollection;if(PP(u,t,o.trackByFn,e),u.updateIndexes(),o.hasEmptyBlock){let l=Ai(),h=u.length===0;if(Nr(r,l,h)){let p=n+2,g=gl(r,p);if(h){let y=Dm(i,p),S=TD(g,y,r),R=Wm(r,y,void 0,{dehydratedView:S});Al(g,R,0,ma(y,S))}else i.firstUpdatePass&&zx(g),ID(g,0)}}}finally{K(e)}}function gl(t,e){return t[e]}function OP(t,e){if(t.length<=Le)return;let n=Le+e,r=t[n],i=r?r[Ci]:void 0;if(r&&i&&i.detachedLeaveAnimationFns&&i.detachedLeaveAnimationFns.length>0){let o=r[Gn];QM(o,i),Ni.delete(r),i.detachedLeaveAnimationFns=void 0}}function kP(t,e){if(t.length<=Le)return;let n=Le+e,r=t[n],i=r?r[Ci]:void 0;i&&i.leave&&i.leave.size>0&&(i.detachedLeaveAnimationFns=[])}function LP(t,e){return ya(t,e)}function FP(t,e){return ED(t,e)}function Dm(t,e){return ca(t,e)}function Po(t,e,n){let r=_e(),i=Ai();if(Nr(r,i,e)){let o=Dt(),s=Qu();mx(s,r,t,e,r[Pe],n)}return Po}function uT(t,e,n,r,i){qm(e,t,n,i?"class":"style",r)}function re(t,e,n,r){let i=_e(),o=i[Y],s=t+ze,c=o.firstCreatePass?SD(s,i,2,e,Ex,Iw(),n,r):o.data[s];if(cD(c,i,t,e,jD),Hu(c)){let u=i[Y];sD(u,i,c),BT(u,c,i)}return r!=null&&zm(i,c),re}function se(){let t=Dt(),e=cn(),n=uD(e);return t.firstCreatePass&&AD(t,n),Lp(n)&&Fp(),kp(),n.classesWithoutHost!=null&&iM(n)&&uT(t,n,_e(),n.classesWithoutHost,!0),n.stylesWithoutHost!=null&&oM(n)&&uT(t,n,_e(),n.stylesWithoutHost,!1),se}function Qn(t,e,n,r){return re(t,e,n,r),se(),Qn}function U(t,e,n,r){let i=_e(),o=i[Y],s=t+ze,c=o.firstCreatePass?iP(s,o,2,e,n,r):o.data[s];return cD(c,i,t,e,jD),r!=null&&zm(i,c),U}function B(){let t=cn(),e=uD(t);return Lp(e)&&Fp(),kp(),B}function Rn(t,e,n,r){return U(t,e,n,r),B(),Rn}var jD=(t,e,n,r,i)=>(Ju(!0),qT(e[Pe],r,kw()));function pn(){return _e()}function Yn(t,e,n){let r=_e(),i=Ai();if(Nr(r,i,e)){let o=Dt(),s=Qu();aD(s,r,t,e,r[Pe],n)}return Yn}var Aa="en-US";var VP=Aa;function UD(t){typeof t=="string"&&(VP=t.toLowerCase().replace(/_/g,"-"))}function Jn(t,e,n){let r=_e(),i=Dt(),o=cn();return jP(i,r,r[Pe],o,t,e,n),Jn}function Vi(t,e,n){let r=_e(),i=Dt(),o=cn();return(o.type&3||n)&&ND(o,i,r,n,r[Pe],t,e,nl(o,r,e)),Vi}function jP(t,e,n,r,i,o,s){let c=!0,u=null;if((r.type&3||s)&&(u??=nl(r,e,o),ND(r,t,e,s,n,i,o,u)&&(c=!1)),c){let l=r.outputs?.[i],h=r.hostDirectiveOutputs?.[i];if(h&&h.length)for(let p=0;p<h.length;p+=2){let g=h[p],y=h[p+1];u??=nl(r,e,o),rT(r,e,g,y,i,u)}if(l&&l.length)for(let p of l)u??=nl(r,e,o),rT(r,e,p,i,i,u)}}function $(t=1){return Ow(t)}function Zu(t,e){return t<<17|e<<2}function Oi(t){return t>>17&32767}function UP(t){return(t&2)==2}function BP(t,e){return t&131071|e<<17}function Cm(t){return t|2}function Mo(t){return(t&131068)>>2}function om(t,e){return t&-131069|e<<2}function $P(t){return(t&1)===1}function bm(t){return t|1}function HP(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,c=Oi(s),u=Mo(s);t[r]=n;let l=!1,h;if(Array.isArray(n)){let p=n;h=p[1],(h===null||Io(p,h)>0)&&(l=!0)}else h=n;if(i)if(u!==0){let g=Oi(t[c+1]);t[r+1]=Zu(g,c),g!==0&&(t[g+1]=om(t[g+1],r)),t[c+1]=BP(t[c+1],r)}else t[r+1]=Zu(c,0),c!==0&&(t[c+1]=om(t[c+1],r)),c=r;else t[r+1]=Zu(u,0),c===0?c=r:t[u+1]=om(t[u+1],r),u=r;l&&(t[r+1]=Cm(t[r+1])),lT(t,h,r,!0),lT(t,h,r,!1),zP(e,h,t,r,o),s=Zu(c,u),o?e.classBindings=s:e.styleBindings=s}function zP(t,e,n,r,i){let o=i?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&Io(o,e)>=0&&(n[r+1]=bm(n[r+1]))}function lT(t,e,n,r){let i=t[n+1],o=e===null,s=r?Oi(i):Mo(i),c=!1;for(;s!==0&&(c===!1||o);){let u=t[s],l=t[s+1];qP(u,e)&&(c=!0,t[s+1]=r?bm(l):Cm(l)),s=r?Oi(l):Mo(l)}c&&(t[n+1]=r?Cm(i):bm(i))}function qP(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?Io(t,e)>=0:!1}function kr(t,e){return GP(t,e,null,!0),kr}function GP(t,e,n,r){let i=_e(),o=Dt(),s=bw(2);if(o.firstUpdatePass&&KP(o,t,s,r),e!==hn&&Nr(i,s,e)){let c=o.data[Sr()];XP(o,c,i,i[Pe],t,i[s+1]=e1(e,n),r,s)}}function WP(t,e){return e>=t.expandoStartIndex}function KP(t,e,n,r){let i=t.data;if(i[n+1]===null){let o=i[Sr()],s=WP(t,n);t1(o,r)&&e===null&&!s&&(e=!1),e=QP(i,o,e,r),HP(i,o,e,n,s,r)}}function QP(t,e,n,r){let i=Nw(t),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=sm(null,t,e,n,r),n=_a(n,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==i)if(n=sm(i,t,e,n,r),o===null){let u=YP(t,e,r);u!==void 0&&Array.isArray(u)&&(u=sm(null,t,e,u[1],r),u=_a(u,e.attrs,r),JP(t,e,r,u))}else o=ZP(t,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),n}function YP(t,e,n){let r=n?e.classBindings:e.styleBindings;if(Mo(r)!==0)return t[Oi(r)]}function JP(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[Oi(i)]=r}function ZP(t,e,n){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=t[o].hostAttrs;r=_a(r,s,n)}return _a(r,e.attrs,n)}function sm(t,e,n,r,i){let o=null,s=n.directiveEnd,c=n.directiveStylingLast;for(c===-1?c=n.directiveStart:c++;c<s&&(o=e[c],r=_a(r,o.hostAttrs,i),o!==t);)c++;return t!==null&&(n.directiveStylingLast=c),r}function _a(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),rw(t,s,n?!0:e[++o]))}return t===void 0?null:t}function XP(t,e,n,r,i,o,s,c){if(!(e.type&3))return;let u=t.data,l=u[c+1],h=$P(l)?dT(u,e,n,i,Mo(l),s):void 0;if(!yl(h)){yl(o)||UP(l)&&(o=dT(u,null,n,i,c,s));let p=Np(Sr(),n);lx(r,s,p,i,o)}}function dT(t,e,n,r,i,o){let s=e===null,c;for(;i>0;){let u=t[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,g=n[i+1];g===hn&&(g=p?Bt:void 0);let y=p?Uu(g,r):h===r?g:void 0;if(l&&!yl(y)&&(y=Uu(u,r)),yl(y)&&(c=y,s))return c;let S=t[i+1];i=s?Oi(S):Mo(S)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(c=Uu(u,r))}return c}function yl(t){return t!==void 0}function e1(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=zn(Pm(t)))),t}function t1(t,e){return(t.flags&(e?8:16))!==0}function O(t,e=""){let n=_e(),r=Dt(),i=t+ze,o=r.firstCreatePass?Rl(r,i,1,e,null):r.data[i],s=n1(r,n,o,e,t);n[i]=s,Yu()&&$m(r,n,s,o),bo(o,!1)}var n1=(t,e,n,r,i)=>(Ju(!0),RM(e[Pe],r));function r1(t,e,n,r=""){return Nr(t,Ai(),n)?e+ea(n)+r:hn}function Ae(t){return Mt("",t),Ae}function Mt(t,e,n){let r=_e(),i=r1(r,t,e,n);return i!==hn&&i1(r,Sr(),i),Mt}function i1(t,e,n){let r=Np(e,t);NM(t[Pe],r,n)}function Xm(t,e,n){let r=$p()+t,i=_e();return i[r]===hn?RD(i,r,n?e.call(n):e()):oP(i,r)}function o1(t,e){let n=t[e];return n===hn?void 0:n}function s1(t,e,n,r,i,o){let s=e+n;return Nr(t,s,i)?RD(t,s+1,o?r.call(o,i):r(i)):o1(t,s+1)}function Oo(t,e){let n=Dt(),r,i=t+ze;n.firstCreatePass?(r=a1(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let o=r.factory||(r.factory=wr(r.type,!0)),s,c=mt(Da);try{let u=sl(!1),l=o();return sl(u),Mp(n,_e(),i,l),l}finally{mt(c)}}function a1(t,e){if(e)for(let n=e.length-1;n>=0;n--){let r=e[n];if(t===r.name)return r}}function ko(t,e,n){let r=t+ze,i=_e(),o=fw(i,r);return c1(i,r)?s1(i,$p(),e,o.transform,n,o):o.transform(n)}function c1(t,e){return t[Y].data[e].pure}var vl=class{ngModuleFactory;componentFactories;constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},eg=(()=>{class t{compileModuleSync(n){return new fl(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=yp(n),o=QT(i.declarations).reduce((s,c)=>{let u=Dr(c);return u&&s.push(new No(u)),s},[]);return new vl(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(r){return new(r||t)};static \u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var BD=(()=>{class t{applicationErrorHandler=M(Wt);appRef=M(xo);taskService=M(Rr);ngZone=M(St);zonelessEnabled=M(da);tracing=M(wa,{optional:!0});zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new nt;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Js):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(M(Zp,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()}))}notify(n){if(!this.zonelessEnabled&&n===5)return;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2;break}case 12:{this.appRef.dirtyFlags|=16;break}case 13:{this.appRef.dirtyFlags|=2;break}case 11:break;case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?Kp:Wp;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Js+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(n),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,Kp(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||t)};static \u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function $D(){return[{provide:vo,useExisting:BD},{provide:St,useClass:Zs},{provide:da,useValue:!0}]}function u1(){return typeof $localize<"u"&&$localize.locale||Aa}var kl=new W("",{factory:()=>M(kl,{optional:!0,skipSelf:!0})||u1()});var zD=Symbol("InputSignalNode#UNSET"),A1=ae(P({},au),{transformFn:void 0,applyValueToInputSignal(t,e){Hs(t,e)}});function qD(t,e){let n=Object.create(A1);n.value=t,n.transformFn=e?.transform;function r(){if(iu(n),n.value===zD){let i=null;throw new z(-950,i)}return n.value}return r[Ut]=n,r}function HD(t,e){return qD(t,e)}function R1(t){return qD(zD,t)}var GD=(HD.required=R1,HD);var tg=new W(""),N1=new W("");function Ra(t){return!t.moduleRef}function M1(t){let e=Ra(t)?t.r3Injector:t.moduleRef.injector,n=e.get(St);return n.run(()=>{Ra(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(Wt),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:r})}),Ra(t)){let o=()=>e.destroy(),s=t.platformInjector.get(tg);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>t.moduleRef.destroy(),s=t.platformInjector.get(tg);s.add(o),t.moduleRef.onDestroy(()=>{fa(t.allPlatformModules,t.moduleRef),i.unsubscribe(),s.delete(o)})}return P1(r,n,()=>{let o=e.get(Rr),s=o.add(),c=e.get(Zm);return c.runInitializers(),c.donePromise.then(()=>{let u=e.get(kl,Aa);if(UD(u||Aa),!e.get(N1,!0))return Ra(t)?e.get(xo):(t.allPlatformModules.push(t.moduleRef),t.moduleRef);if(Ra(t)){let h=e.get(xo);return t.rootComponent!==void 0&&h.bootstrap(t.rootComponent),h}else return x1?.(t.moduleRef,t.allPlatformModules),t.moduleRef}).finally(()=>void o.remove(s))})})}var x1;function P1(t,e,n){try{let r=n();return Li(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t(r)),r}}var Ll=null;function O1(t=[],e){return nn.create({name:e,providers:[{provide:na,useValue:"platform"},{provide:tg,useValue:new Set([()=>Ll=null])},...t]})}function k1(t=[]){if(Ll)return Ll;let e=O1(t);return Ll=e,FD(),L1(e),e}function L1(t){let e=t.get(Tl,null);yt(t,()=>{e?.forEach(n=>n())})}var Vl=(()=>{class t{static __NG_ELEMENT_ID__=F1}return t})();function F1(t){return V1(cn(),_e(),(t&16)===16)}function V1(t,e,n){if(br(t)&&!n){let r=an(t.index,e);return new Mi(r,r)}else if(t.type&175){let r=e[At];return new Mi(r,e)}return null}function WD(t){let{rootComponent:e,appProviders:n,platformProviders:r,platformRef:i}=t;Ce(Ee.BootstrapApplicationStart);try{let o=i?.injector??k1(r),s=[$D(),jw,...n||[]],c=new va({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return M1({r3Injector:c.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{Ce(Ee.BootstrapApplicationEnd)}}var KD=null;function Zn(){return KD}function ng(t){KD??=t}var Na=class{},jl=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=G({token:t,factory:()=>M(QD),providedIn:"platform"})}return t})();var QD=(()=>{class t extends jl{_location;_history;_doc=M(qe);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Zn().getBaseHref(this._doc)}onPopState(n){let r=Zn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=Zn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||t)};static \u0275prov=G({token:t,factory:()=>new t,providedIn:"platform"})}return t})();function ZD(t,e){return t?e?t.endsWith("/")?e.startsWith("/")?t+e.slice(1):t+e:e.startsWith("/")?t+e:`${t}/${e}`:t:e}function YD(t){let e=t.search(/#|\?|$/);return t[e-1]==="/"?t.slice(0,e-1)+t.slice(e):t}function Lr(t){return t&&t[0]!=="?"?`?${t}`:t}var Ul=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=G({token:t,factory:()=>M(U1),providedIn:"root"})}return t})(),j1=new W(""),U1=(()=>{class t extends Ul{_platformLocation;_baseHref;_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??M(qe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return ZD(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+Lr(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+Lr(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+Lr(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||t)(oe(jl),oe(j1,8))};static \u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Lo=(()=>{class t{_subject=new at;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(n){this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=H1(YD(JD(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+Lr(r))}normalize(n){return t.stripTrailingSlash($1(this._basePath,JD(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Lr(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Lr(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=Lr;static joinWithSlash=ZD;static stripTrailingSlash=YD;static \u0275fac=function(r){return new(r||t)(oe(Ul))};static \u0275prov=G({token:t,factory:()=>B1(),providedIn:"root"})}return t})();function B1(){return new Lo(oe(Ul))}function $1(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function JD(t){return t.replace(/\/index.html$/,"")}function H1(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function z1(t,e){return new z(2100,!1)}var rg=class{createSubscription(e,n,r){return Nt(()=>e.subscribe({next:n,error:r}))}dispose(e){Nt(()=>e.unsubscribe())}},ig=class{createSubscription(e,n,r){return e.then(i=>n?.(i),i=>r?.(i)),{unsubscribe:()=>{n=null,r=null}}}dispose(e){e.unsubscribe()}},q1=new ig,G1=new rg,og=(()=>{class t{_ref;_latestValue=null;markForCheckOnValueUpdate=!0;_subscription=null;_obj=null;_strategy=null;applicationErrorHandler=M(Wt);constructor(n){this._ref=n}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(n){if(!this._obj){if(n)try{this.markForCheckOnValueUpdate=!1,this._subscribe(n)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return n!==this._obj?(this._dispose(),this.transform(n)):this._latestValue}_subscribe(n){this._obj=n,this._strategy=this._selectStrategy(n),this._subscription=this._strategy.createSubscription(n,r=>this._updateLatestValue(n,r),r=>this.applicationErrorHandler(r))}_selectStrategy(n){if(Li(n))return q1;if(Pl(n))return G1;throw z1(t,n)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(n,r){n===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static \u0275fac=function(r){return new(r||t)(Da(Vl,16))};static \u0275pipe=Qm({name:"async",type:t,pure:!1})}return t})();var Bl=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=Sa({type:t});static \u0275inj=Eo({})}return t})();function sg(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Ma=class{};var XD="browser";var xa=class{_doc;constructor(e){this._doc=e}manager},$l=(()=>{class t extends xa{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i,o){return n.addEventListener(r,i,o),()=>this.removeEventListener(n,r,i,o)}removeEventListener(n,r,i,o){return n.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||t)(oe(qe))};static \u0275prov=G({token:t,factory:t.\u0275fac})}return t})(),ql=new W(""),lg=(()=>{class t{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,r){this._zone=r,n.forEach(s=>{s.manager=this});let i=n.filter(s=>!(s instanceof $l));this._plugins=i.slice().reverse();let o=n.find(s=>s instanceof $l);o&&this._plugins.push(o)}addEventListener(n,r,i,o){return this._findPluginFor(r).addEventListener(n,r,i,o)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new z(5101,!1);return this._eventNameToPlugin.set(n,r),r}static \u0275fac=function(r){return new(r||t)(oe(ql),oe(St))};static \u0275prov=G({token:t,factory:t.\u0275fac})}return t})(),ag="ng-app-id";function eC(t){for(let e of t)e.remove()}function tC(t,e){let n=e.createElement("style");return n.textContent=t,n}function K1(t,e,n,r){let i=t.head?.querySelectorAll(`style[${ag}="${e}"],link[${ag}="${e}"]`);if(i)for(let o of i)o.removeAttribute(ag),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&n.set(o.textContent,{usage:0,elements:[o]})}function ug(t,e){let n=e.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",t),n}var dg=(()=>{class t{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,K1(n,r,this.inline,this.external),this.hosts.add(n.head)}addStyles(n,r){for(let i of n)this.addUsage(i,this.inline,tC);r?.forEach(i=>this.addUsage(i,this.external,ug))}removeStyles(n,r){for(let i of n)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(n,r,i){let o=r.get(n);o?o.usage++:r.set(n,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(n,this.doc)))})}removeUsage(n,r){let i=r.get(n);i&&(i.usage--,i.usage<=0&&(eC(i.elements),r.delete(n)))}ngOnDestroy(){for(let[,{elements:n}]of[...this.inline,...this.external])eC(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(n,tC(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(n,ug(r,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,r){return this.nonce&&r.setAttribute("nonce",this.nonce),n.appendChild(r)}static \u0275fac=function(r){return new(r||t)(oe(qe),oe(wl),oe(Dl,8),oe(Ia))};static \u0275prov=G({token:t,factory:t.\u0275fac})}return t})(),cg={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},hg=/%COMP%/g;var rC="%COMP%",Q1=`_nghost-${rC}`,Y1=`_ngcontent-${rC}`,J1=!0,Z1=new W("",{factory:()=>J1});function X1(t){return Y1.replace(hg,t)}function eO(t){return Q1.replace(hg,t)}function iC(t,e){return e.map(n=>n.replace(hg,t))}var fg=(()=>{class t{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;constructor(n,r,i,o,s,c,u=null,l=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.ngZone=c,this.nonce=u,this.tracingService=l,this.defaultRenderer=new Pa(n,s,c,this.tracingService)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(n,r);return i instanceof zl?i.applyToHost(n):i instanceof Oa&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,c=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.tracingService;switch(r.encapsulation){case dn.Emulated:o=new zl(u,l,r,this.appId,h,s,c,p);break;case dn.ShadowDom:return new Hl(u,n,r,s,c,this.nonce,p,l);case dn.ExperimentalIsolatedShadowDom:return new Hl(u,n,r,s,c,this.nonce,p);default:o=new Oa(u,l,r,h,s,c,p);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(n){this.rendererByCompId.delete(n)}static \u0275fac=function(r){return new(r||t)(oe(lg),oe(dg),oe(wl),oe(Z1),oe(qe),oe(St),oe(Dl),oe(wa,8))};static \u0275prov=G({token:t,factory:t.\u0275fac})}return t})(),Pa=class{eventManager;doc;ngZone;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.tracingService=i}destroy(){}destroyNode=null;createElement(e,n){return n?this.doc.createElementNS(cg[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(nC(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(nC(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new z(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=cg[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=cg[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Sn.DashCase|Sn.Important)?e.style.setProperty(n,r,i&Sn.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Sn.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r,i){if(typeof e=="string"&&(e=Zn().getGlobalEventTarget(this.doc,e),!e))throw new z(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,n,o)),this.eventManager.addEventListener(e,n,o,i)}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;e(n)===!1&&n.preventDefault()}}};function nC(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var Hl=class extends Pa{hostEl;sharedStylesHost;shadowRoot;constructor(e,n,r,i,o,s,c,u){super(e,i,o,c),this.hostEl=n,this.sharedStylesHost=u,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost&&this.sharedStylesHost.addHost(this.shadowRoot);let l=r.styles;l=iC(r.id,l);for(let p of l){let g=document.createElement("style");s&&g.setAttribute("nonce",s),g.textContent=p,this.shadowRoot.appendChild(g)}let h=r.getExternalStyles?.();if(h)for(let p of h){let g=ug(p,i);s&&g.setAttribute("nonce",s),this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost&&this.sharedStylesHost.removeHost(this.shadowRoot)}},Oa=class extends Pa{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,n,r,i,o,s,c,u){super(e,o,s,c),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i;let l=r.styles;this.styles=u?iC(u,l):l,this.styleUrls=r.getExternalStyles?.(u)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&Ni.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},zl=class extends Oa{contentAttr;hostAttr;constructor(e,n,r,i,o,s,c,u){let l=i+"-"+r.id;super(e,n,r,o,s,c,u,l),this.contentAttr=X1(l),this.hostAttr=eO(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}};var Gl=class t extends Na{supportsDOMEvents=!0;static makeCurrent(){ng(new t)}onAndCancel(e,n,r,i){return e.addEventListener(n,r,i),()=>{e.removeEventListener(n,r,i)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=tO();return n==null?null:nO(n)}resetBaseElement(){ka=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return sg(document.cookie,e)}},ka=null;function tO(){return ka=ka||document.head.querySelector("base"),ka?ka.getAttribute("href"):null}function nO(t){return new URL(t,document.baseURI).pathname}var rO=(()=>{class t{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||t)};static \u0275prov=G({token:t,factory:t.\u0275fac})}return t})(),oC=["alt","control","meta","shift"],iO={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},oO={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},sC=(()=>{class t extends xa{constructor(n){super(n)}supports(n){return t.parseEventName(n)!=null}addEventListener(n,r,i,o){let s=t.parseEventName(r),c=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Zn().onAndCancel(n,s.domEventName,c,o))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=t._normalizeKey(r.pop()),s="",c=r.indexOf("code");if(c>-1&&(r.splice(c,1),s="code."),oC.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(n,r){let i=iO[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),oC.forEach(s=>{if(s!==i){let c=oO[s];c(n)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{t.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return n==="esc"?"escape":n}static \u0275fac=function(r){return new(r||t)(oe(qe))};static \u0275prov=G({token:t,factory:t.\u0275fac})}return t})();function pg(t,e,n){let r=P({rootComponent:t,platformRef:n?.platformRef},sO(e));return WD(r)}function sO(t){return{appProviders:[...dO,...t?.providers??[]],platformProviders:lO}}function aO(){Gl.makeCurrent()}function cO(){return new qn}function uO(){return Mm(document),document}var lO=[{provide:Ia,useValue:XD},{provide:Tl,useValue:aO,multi:!0},{provide:qe,useFactory:uO}];var dO=[{provide:na,useValue:"root"},{provide:qn,useFactory:cO},{provide:ql,useClass:$l,multi:!0},{provide:ql,useClass:sC,multi:!0},fg,dg,lg,{provide:xi,useExisting:fg},{provide:Ma,useClass:rO},[]];var aC=(()=>{class t{_doc;constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static \u0275fac=function(r){return new(r||t)(oe(qe))};static \u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var ee="primary",Ka=Symbol("RouteTitle"),_g=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function $i(t){return new _g(t)}function gC(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],c=t[o];if(s[0]===":")i[s.substring(1)]=c;else if(s!==c.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function Zl(t){return new Promise((e,n)=>{t.pipe($n()).subscribe({next:r=>e(r),error:r=>n(r)})})}function fO(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Nn(t[n],e[n]))return!1;return!0}function Nn(t,e){let n=t?Eg(t):void 0,r=e?Eg(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!yC(t[i],e[i]))return!1;return!0}function Eg(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function yC(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function vC(t){return t.length>0?t[t.length-1]:null}function zi(t){return Cu(t)?t:Li(t)?Ye(Promise.resolve(t)):pe(t)}function _C(t){return Cu(t)?Zl(t):Promise.resolve(t)}var pO={exact:IC,subset:wC},EC={exact:mO,subset:gO,ignored:()=>!0};function cC(t,e,n){return pO[n.paths](t.root,e.root,n.matrixParams)&&EC[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function mO(t,e){return Nn(t,e)}function IC(t,e,n){if(!Ui(t.segments,e.segments)||!Ql(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!IC(t.children[r],e.children[r],n))return!1;return!0}function gO(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>yC(t[n],e[n]))}function wC(t,e,n){return TC(t,e,e.segments,n)}function TC(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!Ui(i,n)||e.hasChildren()||!Ql(i,n,r))}else if(t.segments.length===n.length){if(!Ui(t.segments,n)||!Ql(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!wC(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!Ui(t.segments,i)||!Ql(t.segments,i,r)||!t.children[ee]?!1:TC(t.children[ee],e,o,r)}}function Ql(t,e,n){return e.every((r,i)=>EC[n](t[i].parameters,r.parameters))}var gn=class{root;queryParams;fragment;_queryParamMap;constructor(e=new Ie([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=$i(this.queryParams),this._queryParamMap}toString(){return _O.serialize(this)}},Ie=class{segments;children;parent=null;constructor(e,n){this.segments=e,this.children=n,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Yl(this)}},Fr=class{path;parameters;_parameterMap;constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=$i(this.parameters),this._parameterMap}toString(){return CC(this)}};function yO(t,e){return Ui(t,e)&&t.every((n,r)=>Nn(n.parameters,e[r].parameters))}function Ui(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function vO(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===ee&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==ee&&(n=n.concat(e(i,r)))}),n}var Qa=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=G({token:t,factory:()=>new Vr,providedIn:"root"})}return t})(),Vr=class{parse(e){let n=new wg(e);return new gn(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${La(e.root,!0)}`,r=wO(e.queryParams),i=typeof e.fragment=="string"?`#${EO(e.fragment)}`:"";return`${n}${r}${i}`}},_O=new Vr;function Yl(t){return t.segments.map(e=>CC(e)).join("/")}function La(t,e){if(!t.hasChildren())return Yl(t);if(e){let n=t.children[ee]?La(t.children[ee],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==ee&&r.push(`${i}:${La(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=vO(t,(r,i)=>i===ee?[La(t.children[ee],!1)]:[`${i}:${La(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[ee]!=null?`${Yl(t)}/${n[0]}`:`${Yl(t)}/(${n.join("//")})`}}function DC(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Wl(t){return DC(t).replace(/%3B/gi,";")}function EO(t){return encodeURI(t)}function Ig(t){return DC(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Jl(t){return decodeURIComponent(t)}function uC(t){return Jl(t.replace(/\+/g,"%20"))}function CC(t){return`${Ig(t.path)}${IO(t.parameters)}`}function IO(t){return Object.entries(t).map(([e,n])=>`;${Ig(e)}=${Ig(n)}`).join("")}function wO(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${Wl(n)}=${Wl(i)}`).join("&"):`${Wl(n)}=${Wl(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var TO=/^[^\/()?;#]+/;function mg(t){let e=t.match(TO);return e?e[0]:""}var DO=/^[^\/()?;=#]+/;function CO(t){let e=t.match(DO);return e?e[0]:""}var bO=/^[^=?&#]+/;function SO(t){let e=t.match(bO);return e?e[0]:""}var AO=/^[^&#]+/;function RO(t){let e=t.match(AO);return e?e[0]:""}var wg=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ie([],{}):new Ie([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[ee]=new Ie(e,n)),r}parseSegment(){let e=mg(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new z(4009,!1);return this.capture(e),new Fr(Jl(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=CO(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=mg(this.remaining);i&&(r=i,this.capture(r))}e[Jl(n)]=Jl(r)}parseQueryParam(e){let n=SO(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=RO(this.remaining);s&&(r=s,this.capture(r))}let i=uC(n),o=uC(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=mg(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new z(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=ee);let s=this.parseChildren();n[o??ee]=Object.keys(s).length===1&&s[ee]?s[ee]:new Ie([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new z(4011,!1)}};function bC(t){return t.segments.length>0?new Ie([],{[ee]:t}):t}function SC(t){let e={};for(let[r,i]of Object.entries(t.children)){let o=SC(i);if(r===ee&&o.segments.length===0&&o.hasChildren())for(let[s,c]of Object.entries(o.children))e[s]=c;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new Ie(t.segments,e);return NO(n)}function NO(t){if(t.numberOfChildren===1&&t.children[ee]){let e=t.children[ee];return new Ie(t.segments.concat(e.segments),e.children)}return t}function Uo(t){return t instanceof gn}function AC(t,e,n=null,r=null,i=new Vr){let o=RC(t);return NC(o,e,n,r,i)}function RC(t){let e;function n(o){let s={};for(let u of o.children){let l=n(u);s[u.outlet]=l}let c=new Ie(o.url,s);return o===t&&(e=c),c}let r=n(t.root),i=bC(r);return e??i}function NC(t,e,n,r,i){let o=t;for(;o.parent;)o=o.parent;if(e.length===0)return gg(o,o,o,n,r,i);let s=MO(e);if(s.toRoot())return gg(o,o,new Ie([],{}),n,r,i);let c=xO(s,o,t),u=c.processChildren?Va(c.segmentGroup,c.index,s.commands):xC(c.segmentGroup,c.index,s.commands);return gg(o,c.segmentGroup,u,n,r,i)}function Xl(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Ba(t){return typeof t=="object"&&t!=null&&t.outlets}function lC(t,e,n){t||="\u0275";let r=new gn;return r.queryParams={[t]:e},n.parse(n.serialize(r)).queryParams[t]}function gg(t,e,n,r,i,o){let s={};for(let[l,h]of Object.entries(r??{}))s[l]=Array.isArray(h)?h.map(p=>lC(l,p,o)):lC(l,h,o);let c;t===e?c=n:c=MC(t,e,n);let u=bC(SC(c));return new gn(u,s,i)}function MC(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=MC(o,e,n)}),new Ie(t.segments,r)}var ed=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Xl(r[0]))throw new z(4003,!1);let i=r.find(Ba);if(i&&i!==vC(r))throw new z(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function MO(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new ed(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let c={};return Object.entries(o.outlets).forEach(([u,l])=>{c[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:c}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((c,u)=>{u==0&&c==="."||(u==0&&c===""?n=!0:c===".."?e++:c!=""&&i.push(c))}),i):[...i,o]},[]);return new ed(n,e,r)}var Vo=class{segmentGroup;processChildren;index;constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function xO(t,e,n){if(t.isAbsolute)return new Vo(e,!0,0);if(!n)return new Vo(e,!1,NaN);if(n.parent===null)return new Vo(n,!0,0);let r=Xl(t.commands[0])?0:1,i=n.segments.length-1+r;return PO(n,i,t.numberOfDoubleDots)}function PO(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new z(4005,!1);i=r.segments.length}return new Vo(r,!1,i-o)}function OO(t){return Ba(t[0])?t[0].outlets:{[ee]:t}}function xC(t,e,n){if(t??=new Ie([],{}),t.segments.length===0&&t.hasChildren())return Va(t,e,n);let r=kO(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new Ie(t.segments.slice(0,r.pathIndex),{});return o.children[ee]=new Ie(t.segments.slice(r.pathIndex),t.children),Va(o,0,i)}else return r.match&&i.length===0?new Ie(t.segments,{}):r.match&&!t.hasChildren()?Tg(t,e,n):r.match?Va(t,0,i):Tg(t,e,n)}function Va(t,e,n){if(n.length===0)return new Ie(t.segments,{});{let r=OO(n),i={};if(Object.keys(r).some(o=>o!==ee)&&t.children[ee]&&t.numberOfChildren===1&&t.children[ee].segments.length===0){let o=Va(t.children[ee],e,n);return new Ie(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=xC(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Ie(t.segments,i)}}function kO(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let s=t.segments[i],c=n[r];if(Ba(c))break;let u=`${c}`,l=r<n.length-1?n[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!hC(u,l,s))return o;r+=2}else{if(!hC(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Tg(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if(Ba(o)){let u=LO(o.outlets);return new Ie(r,u)}if(i===0&&Xl(n[0])){let u=t.segments[e];r.push(new Fr(u.path,dC(n[0]))),i++;continue}let s=Ba(o)?o.outlets[ee]:`${o}`,c=i<n.length-1?n[i+1]:null;s&&c&&Xl(c)?(r.push(new Fr(s,dC(c))),i+=2):(r.push(new Fr(s,{})),i++)}return new Ie(r,{})}function LO(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=Tg(new Ie([],{}),0,r))}),e}function dC(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function hC(t,e,n){return t==n.path&&Nn(e,n.parameters)}var ja="imperative",Ze=(function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t})(Ze||{}),Ot=class{id;url;constructor(e,n){this.id=e,this.url=n}},Hi=class extends Ot{type=Ze.NavigationStart;navigationTrigger;restoredState;constructor(e,n,r="imperative",i=null){super(e,n),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Xn=class extends Ot{urlAfterRedirects;type=Ze.NavigationEnd;constructor(e,n,r){super(e,n),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},vt=(function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t[t.Aborted=4]="Aborted",t})(vt||{}),$a=(function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t})($a||{}),Mn=class extends Ot{reason;code;type=Ze.NavigationCancel;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},er=class extends Ot{reason;code;type=Ze.NavigationSkipped;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}},Bo=class extends Ot{error;target;type=Ze.NavigationError;constructor(e,n,r,i){super(e,n),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Ha=class extends Ot{urlAfterRedirects;state;type=Ze.RoutesRecognized;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},td=class extends Ot{urlAfterRedirects;state;type=Ze.GuardsCheckStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},nd=class extends Ot{urlAfterRedirects;state;shouldActivate;type=Ze.GuardsCheckEnd;constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},rd=class extends Ot{urlAfterRedirects;state;type=Ze.ResolveStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},id=class extends Ot{urlAfterRedirects;state;type=Ze.ResolveEnd;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},od=class{route;type=Ze.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},sd=class{route;type=Ze.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},ad=class{snapshot;type=Ze.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},cd=class{snapshot;type=Ze.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ud=class{snapshot;type=Ze.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ld=class{snapshot;type=Ze.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var za=class{},$o=class{url;navigationBehaviorOptions;constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function FO(t){return!(t instanceof za)&&!(t instanceof $o)}function VO(t,e){return t.providers&&!t._injector&&(t._injector=ba(t.providers,e,`Route: ${t.path}`)),t._injector??e}function mn(t){return t.outlet||ee}function jO(t,e){let n=t.filter(r=>mn(r)===e);return n.push(...t.filter(r=>mn(r)!==e)),n}function qo(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var dd=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return qo(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Go(this.rootInjector)}},Go=(()=>{class t{rootInjector;contexts=new Map;constructor(n){this.rootInjector=n}onChildOutletCreated(n,r){let i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new dd(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static \u0275fac=function(r){return new(r||t)(oe(rt))};static \u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),hd=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=Dg(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=Dg(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=Cg(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Cg(e,this._root).map(n=>n.value)}};function Dg(t,e){if(t===e.value)return e;for(let n of e.children){let r=Dg(t,n);if(r)return r}return null}function Cg(t,e){if(t===e.value)return[e];for(let n of e.children){let r=Cg(t,n);if(r.length)return r.unshift(e),r}return[]}var Pt=class{value;children;constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Fo(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var qa=class extends hd{snapshot;constructor(e,n){super(e),this.snapshot=n,Mg(this,e)}toString(){return this.snapshot.toString()}};function PC(t){let e=UO(t),n=new He([new Fr("",{})]),r=new He({}),i=new He({}),o=new He({}),s=new He(""),c=new xn(n,r,o,s,i,ee,t,e.root);return c.snapshot=e.root,new qa(new Pt(c,[]),e)}function UO(t){let e={},n={},r={},o=new Bi([],e,r,"",n,ee,t,null,{});return new Ga("",new Pt(o,[]))}var xn=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,n,r,i,o,s,c,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=c,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(Re(l=>l[Ka]))??pe(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Re(e=>$i(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Re(e=>$i(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function fd(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:P(P({},e.params),t.params),data:P(P({},e.data),t.data),resolve:P(P(P(P({},t.data),e.data),i?.data),t._resolvedData)}:r={params:P({},t.params),data:P({},t.data),resolve:P(P({},t.data),t._resolvedData??{})},i&&kC(i)&&(r.resolve[Ka]=i.title),r}var Bi=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Ka]}constructor(e,n,r,i,o,s,c,u,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=c,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=$i(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=$i(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},Ga=class extends hd{url;constructor(e,n){super(n),this.url=e,Mg(this,n)}toString(){return OC(this._root)}};function Mg(t,e){e.value._routerState=t,e.children.forEach(n=>Mg(t,n))}function OC(t){let e=t.children.length>0?` { ${t.children.map(OC).join(", ")} } `:"";return`${t.value}${e}`}function yg(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Nn(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Nn(e.params,n.params)||t.paramsSubject.next(n.params),fO(e.url,n.url)||t.urlSubject.next(n.url),Nn(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function bg(t,e){let n=Nn(t.params,e.params)&&yO(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||bg(t.parent,e.parent))}function kC(t){return typeof t.title=="string"||t.title===null}var LC=new W(""),Ya=(()=>{class t{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=ee;activateEvents=new gt;deactivateEvents=new gt;attachEvents=new gt;detachEvents=new gt;routerOutletData=GD();parentContexts=M(Go);location=M(Ca);changeDetector=M(Vl);inputBinder=M(yd,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new z(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new z(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new z(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new z(4013,!1);this._activatedRoute=n;let i=this.location,s=n.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,u=new Sg(n,c,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||t)};static \u0275dir=xl({type:t,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[_l]})}return t})(),Sg=class{route;childContexts;parent;outletData;constructor(e,n,r,i){this.route=e,this.childContexts=n,this.parent=r,this.outletData=i}get(e,n){return e===xn?this.route:e===Go?this.childContexts:e===LC?this.outletData:this.parent.get(e,n)}},yd=new W("");var xg=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275cmp=fn({type:t,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&Qn(0,"router-outlet")},dependencies:[Ya],encapsulation:2})}return t})();function Pg(t){let e=t.children&&t.children.map(Pg),n=e?ae(P({},t),{children:e}):P({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==ee&&(n.component=xg),n}function BO(t,e,n){let r=Wa(t,e._root,n?n._root:void 0);return new qa(r,e)}function Wa(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=$O(t,e,n);return new Pt(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(c=>Wa(t,c)),s}}let r=HO(e.value),i=e.children.map(o=>Wa(t,o));return new Pt(r,i)}}function $O(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return Wa(t,r,i);return Wa(t,r)})}function HO(t){return new xn(new He(t.url),new He(t.params),new He(t.queryParams),new He(t.fragment),new He(t.data),t.outlet,t.component,t)}var Ho=class{redirectTo;navigationBehaviorOptions;constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},FC="ngNavigationCancelingError";function pd(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=Uo(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=VC(!1,vt.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function VC(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[FC]=!0,n.cancellationCode=e,n}function zO(t){return jC(t)&&Uo(t.url)}function jC(t){return!!t&&t[FC]}var qO=(t,e,n,r)=>Re(i=>(new Ag(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),Ag=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),yg(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=Fo(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Fo(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),c=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:c})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Fo(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=Fo(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new ld(o.value.snapshot))}),e.children.length&&this.forwardEvent(new cd(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(yg(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let c=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(c.contexts),s.attachRef=c.componentRef,s.route=c.route.value,s.outlet&&s.outlet.attach(c.componentRef,c.route.value),yg(c.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},md=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},jo=class{component;route;constructor(e,n){this.component=e,this.route=n}};function GO(t,e,n){let r=t._root,i=e?e._root:null;return Fa(r,i,n,[r.value])}function WO(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function Wo(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!dp(t)?t:e.get(t):r}function Fa(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Fo(e);return t.children.forEach(s=>{KO(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,c])=>Ua(c,n.getContext(s),i)),i}function KO(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,c=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=QO(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new md(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Fa(t,e,c?c.children:null,r,i):Fa(t,e,n,r,i),u&&c&&c.outlet&&c.outlet.isActivated&&i.canDeactivateChecks.push(new jo(c.outlet.component,s))}else s&&Ua(e,c,i),i.canActivateChecks.push(new md(r)),o.component?Fa(t,null,c?c.children:null,r,i):Fa(t,null,n,r,i);return i}function QO(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!Ui(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Ui(t.url,e.url)||!Nn(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!bg(t,e)||!Nn(t.queryParams,e.queryParams);case"paramsChange":default:return!bg(t,e)}}function Ua(t,e,n){let r=Fo(t),i=t.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Ua(s,e.children.getContext(o),n):Ua(s,null,n):Ua(s,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new jo(e.outlet.component,i)):n.canDeactivateChecks.push(new jo(null,i)):n.canDeactivateChecks.push(new jo(null,i))}function Ja(t){return typeof t=="function"}function YO(t){return typeof t=="boolean"}function JO(t){return t&&Ja(t.canLoad)}function ZO(t){return t&&Ja(t.canActivate)}function XO(t){return t&&Ja(t.canActivateChild)}function ek(t){return t&&Ja(t.canDeactivate)}function tk(t){return t&&Ja(t.canMatch)}function UC(t){return t instanceof hi||t?.name==="EmptyError"}var Kl=Symbol("INITIAL_VALUE");function zo(){return wn(t=>zf(t.map(e=>e.pipe(Bn(1),Wf(Kl)))).pipe(Re(e=>{for(let n of e)if(n!==!0){if(n===Kl)return Kl;if(n===!1||nk(n))return n}return!0}),In(e=>e!==Kl),Bn(1)))}function nk(t){return Uo(t)||t instanceof Ho}function BC(t){return t.aborted?pe(void 0).pipe(Bn(1)):new fe(e=>{let n=()=>{e.next(),e.complete()};return t.addEventListener("abort",n),()=>t.removeEventListener("abort",n)})}function $C(t){return fi(BC(t))}function rk(t,e){return ft(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?pe(ae(P({},n),{guardsResult:!0})):ik(s,r,i,t).pipe(ft(c=>c&&YO(c)?ok(r,o,t,e):pe(c)),Re(c=>ae(P({},n),{guardsResult:c})))})}function ik(t,e,n,r){return Ye(t).pipe(ft(i=>lk(i.component,i.route,n,e,r)),$n(i=>i!==!0,!0))}function ok(t,e,n,r){return Ye(e).pipe(bu(i=>mo(ak(i.route.parent,r),sk(i.route,r),uk(t,i.path,n),ck(t,i.route,n))),$n(i=>i!==!0,!0))}function sk(t,e){return t!==null&&e&&e(new ud(t)),pe(!0)}function ak(t,e){return t!==null&&e&&e(new ad(t)),pe(!0)}function ck(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return pe(!0);let i=r.map(o=>Gs(()=>{let s=qo(e)??n,c=Wo(o,s),u=ZO(c)?c.canActivate(e,t):yt(s,()=>c(e,t));return zi(u).pipe($n())}));return pe(i).pipe(zo())}function uk(t,e,n){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>WO(s)).filter(s=>s!==null).map(s=>Gs(()=>{let c=s.guards.map(u=>{let l=qo(s.node)??n,h=Wo(u,l),p=XO(h)?h.canActivateChild(r,t):yt(l,()=>h(r,t));return zi(p).pipe($n())});return pe(c).pipe(zo())}));return pe(o).pipe(zo())}function lk(t,e,n,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return pe(!0);let s=o.map(c=>{let u=qo(e)??i,l=Wo(c,u),h=ek(l)?l.canDeactivate(t,e,n,r):yt(u,()=>l(t,e,n,r));return zi(h).pipe($n())});return pe(s).pipe(zo())}function dk(t,e,n,r,i){let o=e.canLoad;if(o===void 0||o.length===0)return pe(!0);let s=o.map(c=>{let u=Wo(c,t),l=JO(u)?u.canLoad(e,n):yt(t,()=>u(e,n)),h=zi(l);return i?h.pipe($C(i)):h});return pe(s).pipe(zo(),HC(r))}function HC(t){return Uf(pt(e=>{if(typeof e!="boolean")throw pd(t,e)}),Re(e=>e===!0))}function hk(t,e,n,r,i){let o=e.canMatch;if(!o||o.length===0)return pe(!0);let s=o.map(c=>{let u=Wo(c,t),l=tk(u)?u.canMatch(e,n):yt(t,()=>u(e,n)),h=zi(l);return i?h.pipe($C(i)):h});return pe(s).pipe(zo(),HC(r))}var ji=class zC extends Error{segmentGroup;constructor(e){super(),this.segmentGroup=e||null,Object.setPrototypeOf(this,zC.prototype)}},Rg=class qC extends Error{urlTree;constructor(e){super(),this.urlTree=e,Object.setPrototypeOf(this,qC.prototype)}};function fk(t){throw new z(4e3,!1)}function pk(t){throw VC(!1,vt.GuardRejected)}var mk=class{urlSerializer;urlTree;constructor(e,n){this.urlSerializer=e,this.urlTree=n}async lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return r;if(i.numberOfChildren>1||!i.children[ee])throw fk(`${e.redirectTo}`);i=i.children[ee]}}async applyRedirectCommands(e,n,r,i,o){let s=await gk(n,i,o);if(s instanceof gn)throw new Rg(s);let c=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if(s[0]==="/")throw new Rg(c);return c}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new gn(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let c=o.substring(1);r[i]=n[c]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),s={};return Object.entries(n.children).forEach(([c,u])=>{s[c]=this.createSegmentGroup(e,u,r,i)}),new Ie(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new z(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}};function gk(t,e,n){if(typeof t=="string")return Promise.resolve(t);let r=t,{queryParams:i,fragment:o,routeConfig:s,url:c,outlet:u,params:l,data:h,title:p}=e;return Zl(zi(yt(n,()=>r({params:l,data:h,queryParams:i,fragment:o,routeConfig:s,url:c,outlet:u,title:p}))))}var Ng={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function yk(t,e,n,r,i,o){let s=GC(t,e,n);return s.matched?(r=VO(e,r),hk(r,e,n,i,o).pipe(Re(c=>c===!0?s:P({},Ng)))):pe(s)}function GC(t,e,n){if(e.path==="**")return vk(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?P({},Ng):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||gC)(n,t,e);if(!i)return P({},Ng);let o={};Object.entries(i.posParams??{}).forEach(([c,u])=>{o[c]=u.path});let s=i.consumed.length>0?P(P({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function vk(t){return{matched:!0,parameters:t.length>0?vC(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function fC(t,e,n,r){return n.length>0&&Ik(t,n,r)?{segmentGroup:new Ie(e,Ek(r,new Ie(n,t.children))),slicedSegments:[]}:n.length===0&&wk(t,n,r)?{segmentGroup:new Ie(t.segments,_k(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new Ie(t.segments,t.children),slicedSegments:n}}function _k(t,e,n,r){let i={};for(let o of n)if(vd(t,e,o)&&!r[mn(o)]){let s=new Ie([],{});i[mn(o)]=s}return P(P({},r),i)}function Ek(t,e){let n={};n[ee]=e;for(let r of t)if(r.path===""&&mn(r)!==ee){let i=new Ie([],{});n[mn(r)]=i}return n}function Ik(t,e,n){return n.some(r=>vd(t,e,r)&&mn(r)!==ee)}function wk(t,e,n){return n.some(r=>vd(t,e,r))}function vd(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function Tk(t,e,n){return e.length===0&&!t.children[n]}var Dk=class{};async function Ck(t,e,n,r,i,o,s="emptyOnly",c){return new Sk(t,e,n,r,i,s,o,c).recognize()}var bk=31,Sk=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;abortSignal;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,n,r,i,o,s,c,u){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=c,this.abortSignal=u,this.applyRedirects=new mk(this.urlSerializer,this.urlTree)}noMatchError(e){return new z(4002,`'${e.segmentGroup}'`)}async recognize(){let e=fC(this.urlTree.root,[],[],this.config).segmentGroup,{children:n,rootSnapshot:r}=await this.match(e),i=new Pt(r,n),o=new Ga("",i),s=AC(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}async match(e){let n=new Bi([],Object.freeze({}),Object.freeze(P({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),ee,this.rootComponentType,null,{});try{return{children:await this.processSegmentGroup(this.injector,this.config,e,ee,n),rootSnapshot:n}}catch(r){if(r instanceof Rg)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof ji?this.noMatchError(r):r}}async processSegmentGroup(e,n,r,i,o){if(r.segments.length===0&&r.hasChildren())return this.processChildren(e,n,r,o);let s=await this.processSegment(e,n,r,r.segments,i,!0,o);return s instanceof Pt?[s]:[]}async processChildren(e,n,r,i){let o=[];for(let u of Object.keys(r.children))u==="primary"?o.unshift(u):o.push(u);let s=[];for(let u of o){let l=r.children[u],h=jO(n,u),p=await this.processSegmentGroup(e,h,l,u,i);s.push(...p)}let c=WC(s);return Ak(c),c}async processSegment(e,n,r,i,o,s,c){for(let u of n)try{return await this.processSegmentAgainstRoute(u._injector??e,n,u,r,i,o,s,c)}catch(l){if(l instanceof ji||UC(l))continue;throw l}if(Tk(r,i,o))return new Dk;throw new ji(r)}async processSegmentAgainstRoute(e,n,r,i,o,s,c,u){if(mn(r)!==s&&(s===ee||!vd(i,o,r)))throw new ji(i);if(r.redirectTo===void 0)return this.matchSegmentAgainstRoute(e,i,r,o,s,u);if(this.allowRedirects&&c)return this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s,u);throw new ji(i)}async expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s,c){let{matched:u,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:g}=GC(n,i,o);if(!u)throw new ji(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>bk&&(this.allowRedirects=!1));let y=new Bi(o,l,Object.freeze(P({},this.urlTree.queryParams)),this.urlTree.fragment,pC(i),mn(i),i.component??i._loadedComponent??null,i,mC(i)),S=fd(y,c,this.paramsInheritanceStrategy);if(y.params=Object.freeze(S.params),y.data=Object.freeze(S.data),this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let R=await this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,y,e),A=await this.applyRedirects.lineralizeSegments(i,R);return this.processSegment(e,r,n,A.concat(g),s,!1,c)}async matchSegmentAgainstRoute(e,n,r,i,o,s){if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let c=await Zl(yk(n,r,i,e,this.urlSerializer,this.abortSignal));if(r.path==="**"&&(n.children={}),!c?.matched)throw new ji(n);e=r._injector??e;let{routes:u}=await this.getChildConfig(e,r,i),l=r._loadedInjector??e,{parameters:h,consumedSegments:p,remainingSegments:g}=c,y=new Bi(p,h,Object.freeze(P({},this.urlTree.queryParams)),this.urlTree.fragment,pC(r),mn(r),r.component??r._loadedComponent??null,r,mC(r)),S=fd(y,s,this.paramsInheritanceStrategy);y.params=Object.freeze(S.params),y.data=Object.freeze(S.data);let{segmentGroup:R,slicedSegments:A}=fC(n,p,g,u);if(A.length===0&&R.hasChildren()){let le=await this.processChildren(l,u,R,y);return new Pt(y,le)}if(u.length===0&&A.length===0)return new Pt(y,[]);let L=mn(r)===o,X=await this.processSegment(l,u,R,A,L?ee:o,!0,y);return new Pt(y,X instanceof Pt?[X]:[])}async getChildConfig(e,n,r){if(n.children)return{routes:n.children,injector:e};if(n.loadChildren){if(n._loadedRoutes!==void 0)return{routes:n._loadedRoutes,injector:n._loadedInjector};if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);if(await Zl(dk(e,n,r,this.urlSerializer,this.abortSignal))){let o=await this.configLoader.loadChildren(e,n);return n._loadedRoutes=o.routes,n._loadedInjector=o.injector,o}throw pk(n)}return{routes:[],injector:e}}};function Ak(t){t.sort((e,n)=>e.value.outlet===ee?-1:n.value.outlet===ee?1:e.value.outlet.localeCompare(n.value.outlet))}function Rk(t){let e=t.value.routeConfig;return e&&e.path===""}function WC(t){let e=[],n=new Set;for(let r of t){if(!Rk(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=WC(r.children);e.push(new Pt(r.value,i))}return e.filter(r=>!n.has(r))}function pC(t){return t.data||{}}function mC(t){return t.resolve||{}}var Nk=new W("",{factory:()=>Ck});function Mk(t,e,n,r,i,o,s){let c=t.get(Nk);return ft(u=>pe(u).pipe(wn(l=>c(t,e,n,r,l.extractedUrl,i,o,s)),Re(({state:l,tree:h})=>ae(P({},u),{targetSnapshot:l,urlAfterRedirects:h}))))}function xk(t,e){return ft(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return pe(n);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of KC(u))s.add(l);let c=0;return Ye(s).pipe(bu(u=>o.has(u)?Pk(u,r,t,e):(u.data=fd(u,u.parent,t).resolve,pe(void 0))),pt(()=>c++),Su(1),ft(u=>c===s.size?pe(n):It))})}function KC(t){let e=t.children.map(n=>KC(n)).flat();return[t,...e]}function Pk(t,e,n,r){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!kC(i)&&(o[Ka]=i.title),Gs(()=>(t.data=fd(t,t.parent,n).resolve,Ok(o,t,e,r).pipe(Re(s=>(t._resolvedData=s,t.data=P(P({},t.data),s),null)))))}function Ok(t,e,n,r){let i=Eg(t);if(i.length===0)return pe({});let o={};return Ye(i).pipe(ft(s=>kk(t[s],e,n,r).pipe($n(),pt(c=>{if(c instanceof Ho)throw pd(new Vr,c);o[s]=c}))),Su(1),Re(()=>o),Ws(s=>UC(s)?It:Hf(s)))}function kk(t,e,n,r){let i=qo(e)??r,o=Wo(t,i),s=o.resolve?o.resolve(e,n):yt(i,()=>o(e,n));return zi(s)}function vg(t){return wn(e=>{let n=t(e);return n?Ye(n).pipe(Re(()=>e)):pe(e)})}var Og=(()=>{class t{buildTitle(n){let r,i=n.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===ee);return r}getResolvedTitleForRoute(n){return n.data[Ka]}static \u0275fac=function(r){return new(r||t)};static \u0275prov=G({token:t,factory:()=>M(QC),providedIn:"root"})}return t})(),QC=(()=>{class t extends Og{title;constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||t)(oe(aC))};static \u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Za=new W("",{factory:()=>({})}),Xa=new W(""),YC=(()=>{class t{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=M(eg);async loadComponent(n,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return Promise.resolve(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=(async()=>{try{let o=await _C(yt(n,()=>r.loadComponent())),s=await XC(ZC(o));return this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s,s}finally{this.componentLoaders.delete(r)}})();return this.componentLoaders.set(r,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Promise.resolve({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let i=(async()=>{try{let o=await JC(r,this.compiler,n,this.onLoadEndListener);return r._loadedRoutes=o.routes,r._loadedInjector=o.injector,o}finally{this.childrenLoaders.delete(r)}})();return this.childrenLoaders.set(r,i),i}static \u0275fac=function(r){return new(r||t)};static \u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();async function JC(t,e,n,r){let i=await _C(yt(n,()=>t.loadChildren())),o=await XC(ZC(i)),s;o instanceof Ml||Array.isArray(o)?s=o:s=await e.compileModuleAsync(o),r&&r(t);let c,u,l=!1;return Array.isArray(s)?(u=s,l=!0):(c=s.create(n).injector,u=c.get(Xa,[],{optional:!0,self:!0}).flat()),{routes:u.map(Pg),injector:c}}function Lk(t){return t&&typeof t=="object"&&"default"in t}function ZC(t){return Lk(t)?t.default:t}async function XC(t){return t}var _d=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=G({token:t,factory:()=>M(Fk),providedIn:"root"})}return t})(),Fk=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static \u0275fac=function(r){return new(r||t)};static \u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),eb=new W("");var Vk=()=>{},tb=new W(""),nb=(()=>{class t{currentNavigation=Kn(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=Kn(null);events=new at;transitionAbortWithErrorSubject=new at;configLoader=M(YC);environmentInjector=M(rt);destroyRef=M(un);urlSerializer=M(Qa);rootContexts=M(Go);location=M(Lo);inputBindingEnabled=M(yd,{optional:!0})!==null;titleStrategy=M(Og);options=M(Za,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=M(_d);createViewTransition=M(eb,{optional:!0});navigationErrorHandler=M(tb,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>pe(void 0);rootComponentType=null;destroyed=!1;constructor(){let n=i=>this.events.next(new od(i)),r=i=>this.events.next(new sd(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;Nt(()=>{this.transitions?.next(ae(P({},n),{extractedUrl:this.urlHandlingStrategy.extract(n.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r}))})}setupNavigations(n){return this.transitions=new He(null),this.transitions.pipe(In(r=>r!==null),wn(r=>{let i=!1,o=new AbortController;return pe(r).pipe(wn(s=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",vt.SupersededByNewNavigation),It;this.currentTransition=r;let c=this.lastSuccessfulNavigation();this.currentNavigation.set({id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,targetBrowserUrl:typeof s.extras.browserUrl=="string"?this.urlSerializer.parse(s.extras.browserUrl):s.extras.browserUrl,trigger:s.source,extras:s.extras,previousNavigation:c?ae(P({},c),{previousNavigation:null}):null,abort:()=>o.abort()});let u=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),l=s.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!u&&l!=="reload")return this.events.next(new er(s.id,this.urlSerializer.serialize(s.rawUrl),"",$a.IgnoredSameUrlNavigation)),s.resolve(!1),It;if(this.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return pe(s).pipe(wn(h=>(this.events.next(new Hi(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),h.id!==this.navigationId?It:Promise.resolve(h))),Mk(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy,o.signal),pt(h=>{r.targetSnapshot=h.targetSnapshot,r.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation.update(g=>(g.finalUrl=h.urlAfterRedirects,g));let p=new Ha(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(p)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(s.currentRawUrl)){let{id:h,extractedUrl:p,source:g,restoredState:y,extras:S}=s,R=new Hi(h,this.urlSerializer.serialize(p),g,y);this.events.next(R);let A=PC(this.rootComponentType).snapshot;return this.currentTransition=r=ae(P({},s),{targetSnapshot:A,urlAfterRedirects:p,extras:ae(P({},S),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(L=>(L.finalUrl=p,L)),pe(r)}else return this.events.next(new er(s.id,this.urlSerializer.serialize(s.extractedUrl),"",$a.IgnoredByUrlHandlingStrategy)),s.resolve(!1),It}),pt(s=>{let c=new td(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(c)}),Re(s=>(this.currentTransition=r=ae(P({},s),{guards:GO(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),r)),rk(this.environmentInjector,s=>this.events.next(s)),pt(s=>{if(r.guardsResult=s.guardsResult,s.guardsResult&&typeof s.guardsResult!="boolean")throw pd(this.urlSerializer,s.guardsResult);let c=new nd(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(c)}),In(s=>s.guardsResult?!0:(this.cancelNavigationTransition(s,"",vt.GuardRejected),!1)),vg(s=>{if(s.guards.canActivateChecks.length!==0)return pe(s).pipe(pt(c=>{let u=new rd(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}),wn(c=>{let u=!1;return pe(c).pipe(xk(this.paramsInheritanceStrategy,this.environmentInjector),pt({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(c,"",vt.NoDataFromResolver)}}))}),pt(c=>{let u=new id(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}))}),vg(s=>{let c=l=>{let h=[];if(l.routeConfig?._loadedComponent)l.component=l.routeConfig?._loadedComponent;else if(l.routeConfig?.loadComponent){let p=qo(l)??this.environmentInjector;h.push(this.configLoader.loadComponent(p,l.routeConfig).then(g=>{l.component=g}))}for(let p of l.children)h.push(...c(p));return h},u=c(s.targetSnapshot.root);return u.length===0?pe(s):Ye(Promise.all(u).then(()=>s))}),vg(()=>this.afterPreactivation()),wn(()=>{let{currentSnapshot:s,targetSnapshot:c}=r,u=this.createViewTransition?.(this.environmentInjector,s.root,c.root);return u?Ye(u).pipe(Re(()=>r)):pe(r)}),Re(s=>{let c=BO(n.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return this.currentTransition=r=ae(P({},s),{targetRouterState:c}),this.currentNavigation.update(u=>(u.targetRouterState=c,u)),r}),pt(()=>{this.events.next(new za)}),qO(this.rootContexts,n.routeReuseStrategy,s=>this.events.next(s),this.inputBindingEnabled),Bn(1),fi(BC(o.signal).pipe(In(()=>!i&&!r.targetRouterState),pt(()=>{this.cancelNavigationTransition(r,o.signal.reason+"",vt.Aborted)}))),pt({next:s=>{i=!0,this.currentNavigation.update(c=>(c.abort=Vk,c)),this.lastSuccessfulNavigation.set(Nt(this.currentNavigation)),this.events.next(new Xn(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects))),this.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{i=!0}}),fi(this.transitionAbortWithErrorSubject.pipe(pt(s=>{throw s}))),Gf(()=>{o.abort(),i||this.cancelNavigationTransition(r,"",vt.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),Ws(s=>{if(this.destroyed)return r.resolve(!1),It;if(i=!0,jC(s))this.events.next(new Mn(r.id,this.urlSerializer.serialize(r.extractedUrl),s.message,s.cancellationCode)),zO(s)?this.events.next(new $o(s.url,s.navigationBehaviorOptions)):r.resolve(!1);else{let c=new Bo(r.id,this.urlSerializer.serialize(r.extractedUrl),s,r.targetSnapshot??void 0);try{let u=yt(this.environmentInjector,()=>this.navigationErrorHandler?.(c));if(u instanceof Ho){let{message:l,cancellationCode:h}=pd(this.urlSerializer,u);this.events.next(new Mn(r.id,this.urlSerializer.serialize(r.extractedUrl),l,h)),this.events.next(new $o(u.redirectTo,u.navigationBehaviorOptions))}else throw this.events.next(c),s}catch(u){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(u)}}return It}))}))}cancelNavigationTransition(n,r,i){let o=new Mn(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(o),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=Nt(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return n.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||t)};static \u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function jk(t){return t!==ja}var rb=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=G({token:t,factory:()=>M(Uk),providedIn:"root"})}return t})(),gd=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},Uk=(()=>{class t extends gd{static \u0275fac=(()=>{let n;return function(i){return(n||(n=Il(t)))(i||t)}})();static \u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),kg=(()=>{class t{urlSerializer=M(Qa);options=M(Za,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=M(Lo);urlHandlingStrategy=M(_d);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new gn;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:n,initialUrl:r,targetBrowserUrl:i}){let o=n!==void 0?this.urlHandlingStrategy.merge(n,r):r,s=i??o;return s instanceof gn?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:n,finalUrl:r,initialUrl:i}){r&&n?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=n):this.rawUrlTree=i}routerState=PC(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:n}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n??this.rawUrlTree)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=G({token:t,factory:()=>M(ib),providedIn:"root"})}return t})(),ib=(()=>{class t extends kg{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{n(r.url,r.state,"popstate")})})}handleRouterEvent(n,r){n instanceof Hi?this.updateStateMemento():n instanceof er?this.commitTransition(r):n instanceof Ha?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof za?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof Mn&&n.code!==vt.SupersededByNewNavigation&&n.code!==vt.Redirect?this.restoreHistory(r):n instanceof Bo?this.restoreHistory(r,!0):n instanceof Xn&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(n)||o){let c=this.browserPageId,u=P(P({},s),this.generateNgRouterState(i,c));this.location.replaceState(n,"",u)}else{let c=P(P({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(n,"",c)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===n.finalUrl&&o===0&&(this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static \u0275fac=(()=>{let n;return function(i){return(n||(n=Il(t)))(i||t)}})();static \u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Lg(t,e){t.events.pipe(In(n=>n instanceof Xn||n instanceof Mn||n instanceof Bo||n instanceof er),Re(n=>n instanceof Xn||n instanceof er?0:(n instanceof Mn?n.code===vt.Redirect||n.code===vt.SupersededByNewNavigation:!1)?2:1),In(n=>n!==2),Bn(1)).subscribe(()=>{e()})}var Bk={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},$k={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Kt=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=M(Ym);stateManager=M(kg);options=M(Za,{optional:!0})||{};pendingTasks=M(Rr);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=M(nb);urlSerializer=M(Qa);location=M(Lo);urlHandlingStrategy=M(_d);injector=M(rt);_events=new at;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=M(rb);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=M(Xa,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!M(yd,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}eventsSubscription=new nt;subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=Nt(this.navigationTransitions.currentNavigation);if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Mn&&r.code!==vt.Redirect&&r.code!==vt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Xn)this.navigated=!0;else if(r instanceof $o){let s=r.navigationBehaviorOptions,c=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=P({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||jk(i.source)},s);this.scheduleNavigation(c,ja,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}FO(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),ja,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r,i)=>{this.navigateToSyncWithBrowser(n,i,r)})}navigateToSyncWithBrowser(n,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=P({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let c=this.parseUrl(n);this.scheduleNavigation(c,r,s,o).catch(u=>{this.disposed||this.injector.get(Wt)(u)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return Nt(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(Pg),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:c,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,h=null;switch(c??this.options.defaultQueryParamsHandling){case"merge":h=P(P({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let g=i?i.snapshot:this.routerState.snapshot.root;p=RC(g)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),p=this.currentUrlTree.root}return NC(p,n,h,l??null,this.urlSerializer)}navigateByUrl(n,r={skipLocationChange:!1}){let i=Uo(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,ja,null,r)}navigate(n,r={skipLocationChange:!1}){return Hk(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.console.warn(_o(4018,!1)),this.urlSerializer.parse("/")}}isActive(n,r){let i;if(r===!0?i=P({},Bk):r===!1?i=P({},$k):i=r,Uo(n))return cC(this.currentUrlTree,n,i);let o=this.parseUrl(n);return cC(this.currentUrlTree,o,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(n,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let c,u,l;s?(c=s.resolve,u=s.reject,l=s.promise):l=new Promise((p,g)=>{c=p,u=g});let h=this.pendingTasks.add();return Lg(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:o,resolve:c,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Hk(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new z(4008,!1)}var qk=new W("");function Fg(t,...e){return Ei([{provide:Xa,multi:!0,useValue:t},[],{provide:xn,useFactory:Gk},{provide:Ol,multi:!0,useFactory:Wk},e.map(n=>n.\u0275providers)])}function Gk(){return M(Kt).routerState.root}function Wk(){let t=M(nn);return e=>{let n=t.get(xo);if(e!==n.components[0])return;let r=t.get(Kt),i=t.get(Kk);t.get(Qk)===1&&r.initialNavigation(),t.get(Yk,null,{optional:!0})?.setUpPreloading(),t.get(qk,null,{optional:!0})?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var Kk=new W("",{factory:()=>new at}),Qk=new W("",{factory:()=>1});var Yk=new W("");var ob=()=>{};var cb=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Zk=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=t[n++],s=t[n++],c=t[n++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},ub={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let o=t[i],s=i+1<t.length,c=s?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,h=o>>2,p=(o&3)<<4|c>>4,g=(c&15)<<2|l>>6,y=l&63;u||(y=64,s||(g=64)),r.push(n[h],n[p],n[g],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(cb(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Zk(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let o=n[t.charAt(i++)],c=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let p=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||c==null||l==null||p==null)throw new jg;let g=o<<2|c>>4;if(r.push(g),l!==64){let y=c<<4&240|l>>2;if(r.push(y),p!==64){let S=l<<6&192|p;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},jg=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},Xk=function(t){let e=cb(t);return ub.encodeByteArray(e,!0)},tc=function(t){return Xk(t).replace(/\./g,"")},Id=function(t){try{return ub.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function lb(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var eL=()=>lb().__FIREBASE_DEFAULTS__,tL=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},nL=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&Id(t[1]);return e&&JSON.parse(e)},wd=()=>{try{return ob()||eL()||tL()||nL()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Bg=t=>wd()?.emulatorHosts?.[t],db=t=>{let e=Bg(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},$g=()=>wd()?.config,Hg=t=>wd()?.[`_${t}`];var Ed=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function jr(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Td(t){return(await fetch(t,{credentials:"include"})).ok}function hb(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=P({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[tc(JSON.stringify(n)),tc(JSON.stringify(s)),""].join(".")}var ec={};function rL(){let t={prod:[],emulator:[]};for(let e of Object.keys(ec))ec[e]?t.emulator.push(e):t.prod.push(e);return t}function iL(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}var sb=!1;function Dd(t,e){if(typeof window>"u"||typeof document>"u"||!jr(window.location.host)||ec[t]===e||ec[t]||sb)return;ec[t]=e;function n(g){return`__firebase__banner__${g}`}let r="__firebase__banner",o=rL().prod.length>0;function s(){let g=document.getElementById(r);g&&g.remove()}function c(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function u(g,y){g.setAttribute("width","24"),g.setAttribute("id",y),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function l(){let g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{sb=!0,s()},g}function h(g,y){g.setAttribute("id",y),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){let g=iL(r),y=n("text"),S=document.getElementById(y)||document.createElement("span"),R=n("learnmore"),A=document.getElementById(R)||document.createElement("a"),L=n("preprendIcon"),X=document.getElementById(L)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){let le=g.element;c(le),h(A,R);let lt=l();u(X,L),le.append(X,S,A,lt),document.body.appendChild(le)}o?(S.innerText="Preview backend disconnected.",X.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(X.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,S.innerText="Preview backend running in this workspace."),S.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function Xe(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function fb(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Xe())}function oL(){let t=wd()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function pb(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function mb(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function gb(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function yb(){let t=Xe();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function vb(){return!oL()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function zg(){try{return typeof indexedDB=="object"}catch{return!1}}function _b(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(n){e(n)}})}var sL="FirebaseError",kt=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=sL,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,tr.prototype.create)}},tr=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?aL(o,r):"Error",c=`${this.serviceName}: ${s} (${i}).`;return new kt(i,c,r)}};function aL(t,e){return t.replace(cL,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var cL=/\{\$([^}]+)}/g;function Eb(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Pn(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let o=t[i],s=e[i];if(ab(o)&&ab(s)){if(!Pn(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function ab(t){return t!==null&&typeof t=="object"}function nc(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ib(t,e){let n=new Ug(t,e);return n.subscribe.bind(n)}var Ug=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");uL(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Vg),i.error===void 0&&(i.error=Vg),i.complete===void 0&&(i.complete=Vg);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function uL(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Vg(){}var iJ=14400*1e3;function Fe(t){return t&&t._delegate?t._delegate:t}var Qt=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var qi="[DEFAULT]";var qg=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new Ed;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){let n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(dL(e))try{this.getOrInitializeService({instanceIdentifier:qi})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=qi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=qi){return this.instances.has(e)}getOptions(e=qi){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[o,s]of this.instancesDeferred.entries()){let c=this.normalizeInstanceIdentifier(o);r===c&&s.resolve(i)}return i}onInit(e,n){let r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);let o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:lL(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=qi){return this.component?this.component.multipleInstances?e:qi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function lL(t){return t===qi?void 0:t}function dL(t){return t.instantiationMode==="EAGER"}var Cd=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new qg(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var hL=[],ue=(function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t})(ue||{}),fL={debug:ue.DEBUG,verbose:ue.VERBOSE,info:ue.INFO,warn:ue.WARN,error:ue.ERROR,silent:ue.SILENT},pL=ue.INFO,mL={[ue.DEBUG]:"log",[ue.VERBOSE]:"log",[ue.INFO]:"info",[ue.WARN]:"warn",[ue.ERROR]:"error"},gL=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=mL[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Ur=class{constructor(e){this.name=e,this._logLevel=pL,this._logHandler=gL,this._userLogHandler=null,hL.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?fL[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ue.DEBUG,...e),this._logHandler(this,ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ue.VERBOSE,...e),this._logHandler(this,ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ue.INFO,...e),this._logHandler(this,ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ue.WARN,...e),this._logHandler(this,ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ue.ERROR,...e),this._logHandler(this,ue.ERROR,...e)}};var yL=(t,e)=>e.some(n=>t instanceof n),wb,Tb;function vL(){return wb||(wb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function _L(){return Tb||(Tb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var Db=new WeakMap,Wg=new WeakMap,Cb=new WeakMap,Gg=new WeakMap,Qg=new WeakMap;function EL(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(On(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&Db.set(n,t)}).catch(()=>{}),Qg.set(e,t),e}function IL(t){if(Wg.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});Wg.set(t,e)}var Kg={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Wg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Cb.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return On(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function bb(t){Kg=t(Kg)}function wL(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(bd(this),e,...n);return Cb.set(r,e.sort?e.sort():[e]),On(r)}:_L().includes(t)?function(...e){return t.apply(bd(this),e),On(Db.get(this))}:function(...e){return On(t.apply(bd(this),e))}}function TL(t){return typeof t=="function"?wL(t):(t instanceof IDBTransaction&&IL(t),yL(t,vL())?new Proxy(t,Kg):t)}function On(t){if(t instanceof IDBRequest)return EL(t);if(Gg.has(t))return Gg.get(t);let e=TL(t);return e!==t&&(Gg.set(t,e),Qg.set(e,t)),e}var bd=t=>Qg.get(t);function Ab(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(t,e),c=On(s);return r&&s.addEventListener("upgradeneeded",u=>{r(On(s.result),u.oldVersion,u.newVersion,On(s.transaction),u)}),n&&s.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),c}var DL=["get","getKey","getAll","getAllKeys","count"],CL=["put","add","delete","clear"],Yg=new Map;function Sb(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Yg.get(e))return Yg.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=CL.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||DL.includes(n)))return;let o=async function(s,...c){let u=this.transaction(s,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(c.shift())),(await Promise.all([l[n](...c),i&&u.done]))[0]};return Yg.set(e,o),o}bb(t=>ae(P({},t),{get:(e,n,r)=>Sb(e,n)||t.get(e,n,r),has:(e,n)=>!!Sb(e,n)||t.has(e,n)}));var Zg=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(bL(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function bL(t){return t.getComponent()?.type==="VERSION"}var Xg="@firebase/app",Rb="0.14.6";var nr=new Ur("@firebase/app"),SL="@firebase/app-compat",AL="@firebase/analytics-compat",RL="@firebase/analytics",NL="@firebase/app-check-compat",ML="@firebase/app-check",xL="@firebase/auth",PL="@firebase/auth-compat",OL="@firebase/database",kL="@firebase/data-connect",LL="@firebase/database-compat",FL="@firebase/functions",VL="@firebase/functions-compat",jL="@firebase/installations",UL="@firebase/installations-compat",BL="@firebase/messaging",$L="@firebase/messaging-compat",HL="@firebase/performance",zL="@firebase/performance-compat",qL="@firebase/remote-config",GL="@firebase/remote-config-compat",WL="@firebase/storage",KL="@firebase/storage-compat",QL="@firebase/firestore",YL="@firebase/ai",JL="@firebase/firestore-compat",ZL="firebase",XL="12.6.0";var ey="[DEFAULT]",eF={[Xg]:"fire-core",[SL]:"fire-core-compat",[RL]:"fire-analytics",[AL]:"fire-analytics-compat",[ML]:"fire-app-check",[NL]:"fire-app-check-compat",[xL]:"fire-auth",[PL]:"fire-auth-compat",[OL]:"fire-rtdb",[kL]:"fire-data-connect",[LL]:"fire-rtdb-compat",[FL]:"fire-fn",[VL]:"fire-fn-compat",[jL]:"fire-iid",[UL]:"fire-iid-compat",[BL]:"fire-fcm",[$L]:"fire-fcm-compat",[HL]:"fire-perf",[zL]:"fire-perf-compat",[qL]:"fire-rc",[GL]:"fire-rc-compat",[WL]:"fire-gcs",[KL]:"fire-gcs-compat",[QL]:"fire-fst",[JL]:"fire-fst-compat",[YL]:"fire-vertex","fire-js":"fire-js",[ZL]:"fire-js-all"};var Sd=new Map,tF=new Map,ty=new Map;function Nb(t,e){try{t.container.addComponent(e)}catch(n){nr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function $r(t){let e=t.name;if(ty.has(e))return nr.debug(`There were multiple attempts to register component ${e}.`),!1;ty.set(e,t);for(let n of Sd.values())Nb(n,t);for(let n of tF.values())Nb(n,t);return!0}function ic(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Lt(t){return t==null?!1:t.settings!==void 0}var nF={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Br=new tr("app","Firebase",nF);var ny=class{constructor(e,n,r){this._isDeleted=!1,this._options=P({},e),this._config=P({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Qt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Br.create("app-deleted",{appName:this._name})}};var Hr=XL;function oy(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=P({name:ey,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw Br.create("bad-app-name",{appName:String(i)});if(n||(n=$g()),!n)throw Br.create("no-options");let o=Sd.get(i);if(o){if(Pn(n,o.options)&&Pn(r,o.config))return o;throw Br.create("duplicate-app",{appName:i})}let s=new Cd(i);for(let u of ty.values())s.addComponent(u);let c=new ny(n,r,s);return Sd.set(i,c),c}function Ad(t=ey){let e=Sd.get(t);if(!e&&t===ey&&$g())return oy();if(!e)throw Br.create("no-app",{appName:t});return e}function yn(t,e,n){let r=eF[t]??t;n&&(r+=`-${n}`);let i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){let s=[`Unable to register library "${r}" with version "${e}":`];i&&s.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&s.push("and"),o&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),nr.warn(s.join(" "));return}$r(new Qt(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var rF="firebase-heartbeat-database",iF=1,rc="firebase-heartbeat-store",Jg=null;function Ob(){return Jg||(Jg=Ab(rF,iF,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(rc)}catch(n){console.warn(n)}}}}).catch(t=>{throw Br.create("idb-open",{originalErrorMessage:t.message})})),Jg}async function oF(t){try{let n=(await Ob()).transaction(rc),r=await n.objectStore(rc).get(kb(t));return await n.done,r}catch(e){if(e instanceof kt)nr.warn(e.message);else{let n=Br.create("idb-get",{originalErrorMessage:e?.message});nr.warn(n.message)}}}async function Mb(t,e){try{let r=(await Ob()).transaction(rc,"readwrite");await r.objectStore(rc).put(e,kb(t)),await r.done}catch(n){if(n instanceof kt)nr.warn(n.message);else{let r=Br.create("idb-set",{originalErrorMessage:n?.message});nr.warn(r.message)}}}function kb(t){return`${t.name}!${t.options.appId}`}var sF=1024,aF=30,ry=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new iy(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{let n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=xb();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>aF){let i=uF(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){nr.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=xb(),{heartbeatsToSend:n,unsentEntries:r}=cF(this._heartbeatsCache.heartbeats),i=tc(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return nr.warn(e),""}}};function xb(){return new Date().toISOString().substring(0,10)}function cF(t,e=sF){let n=[],r=t.slice();for(let i of t){let o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),Pb(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Pb(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var iy=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return zg()?_b().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let n=await oF(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){let r=await this.read();return Mb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){let r=await this.read();return Mb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}};function Pb(t){return tc(JSON.stringify({version:2,heartbeats:t})).length}function uF(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function lF(t){$r(new Qt("platform-logger",e=>new Zg(e),"PRIVATE")),$r(new Qt("heartbeat",e=>new ry(e),"PRIVATE")),yn(Xg,Rb,t),yn(Xg,Rb,"esm2020"),yn("fire-js","")}lF("");function Yb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var Jb=Yb,Zb=new tr("auth","Firebase",Yb());var Od=new Ur("@firebase/auth");function dF(t,...e){Od.logLevel<=ue.WARN&&Od.warn(`Auth (${Hr}): ${t}`,...e)}function Nd(t,...e){Od.logLevel<=ue.ERROR&&Od.error(`Auth (${Hr}): ${t}`,...e)}function Wr(t,...e){throw Cy(t,...e)}function Gi(t,...e){return Cy(t,...e)}function Xb(t,e,n){let r=ae(P({},Jb()),{[e]:n});return new tr("auth","Firebase",r).create(e,{appName:t.name})}function Gr(t){return Xb(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Cy(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Zb.create(t,...e)}function J(t,e,...n){if(!t)throw Cy(e,...n)}function rr(t){let e="INTERNAL ASSERTION FAILED: "+t;throw Nd(e),new Error(e)}function Kr(t,e){t||rr(e)}function uy(){return typeof self<"u"&&self.location?.href||""}function hF(){return Lb()==="http:"||Lb()==="https:"}function Lb(){return typeof self<"u"&&self.location?.protocol||null}function fF(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(hF()||mb()||"connection"in navigator)?navigator.onLine:!0}function pF(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var Wi=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,Kr(n>e,"Short delay should be less than long delay!"),this.isMobile=fb()||gb()}get(){return fF()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function by(t,e){Kr(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var kd=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;rr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;rr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;rr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var mF={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var gF=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],yF=new Wi(3e4,6e4);function Gd(t,e){return t.tenantId&&!e.tenantId?ae(P({},e),{tenantId:t.tenantId}):e}async function Qo(t,e,n,r,i={}){return eS(t,i,async()=>{let o={},s={};r&&(e==="GET"?s=r:o={body:JSON.stringify(r)});let c=nc(P({key:t.config.apiKey},s)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);let l=P({method:e,headers:u},o);return pb()||(l.referrerPolicy="no-referrer"),t.emulatorConfig&&jr(t.emulatorConfig.host)&&(l.credentials="include"),kd.fetch()(await nS(t,t.config.apiHost,n,c),l)})}async function eS(t,e,n){t._canInitEmulator=!1;let r=P(P({},mF),e);try{let i=new ly(t),o=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();let s=await o.json();if("needConfirmation"in s)throw Rd(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let c=o.ok?s.errorMessage:s.error.message,[u,l]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Rd(t,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw Rd(t,"email-already-in-use",s);if(u==="USER_DISABLED")throw Rd(t,"user-disabled",s);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw Xb(t,h,l);Wr(t,h)}}catch(i){if(i instanceof kt)throw i;Wr(t,"network-request-failed",{message:String(i)})}}async function tS(t,e,n,r,i={}){let o=await Qo(t,e,n,r,i);return"mfaPendingCredential"in o&&Wr(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function nS(t,e,n,r){let i=`${e}${n}?${r}`,o=t,s=o.config.emulator?by(t.config,i):`${t.config.apiScheme}://${i}`;return gF.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s}var ly=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Gi(this.auth,"network-request-failed")),yF.get())})}};function Rd(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=Gi(t,e,r);return i.customData._tokenResponse=n,i}async function vF(t,e){return Qo(t,"POST","/v1/accounts:delete",e)}async function Ld(t,e){return Qo(t,"POST","/v1/accounts:lookup",e)}function oc(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function rS(t,e=!1){let n=Fe(t),r=await n.getIdToken(e),i=Sy(r);J(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:oc(sy(i.auth_time)),issuedAtTime:oc(sy(i.iat)),expirationTime:oc(sy(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}}function sy(t){return Number(t)*1e3}function Sy(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Nd("JWT malformed, contained fewer than 3 sections"),null;try{let i=Id(n);return i?JSON.parse(i):(Nd("Failed to decode base64 JWT payload"),null)}catch(i){return Nd("Caught error parsing JWT payload as JSON",i?.toString()),null}}function Fb(t){let e=Sy(t);return J(e,"internal-error"),J(typeof e.exp<"u","internal-error"),J(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function ac(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof kt&&_F(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function _F({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var dy=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){let n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;let r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};var cc=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=oc(this.lastLoginAt),this.creationTime=oc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function Fd(t){let e=t.auth,n=await t.getIdToken(),r=await ac(t,Ld(e,{idToken:n}));J(r?.users.length,e,"internal-error");let i=r.users[0];t._notifyReloadListener(i);let o=i.providerUserInfo?.length?oS(i.providerUserInfo):[],s=EF(t.providerData,o),c=t.isAnonymous,u=!(t.email&&i.passwordHash)&&!s?.length,l=c?u:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new cc(i.createdAt,i.lastLoginAt),isAnonymous:l};Object.assign(t,h)}async function iS(t){let e=Fe(t);await Fd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function EF(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function oS(t){return t.map(r=>{var i=r,{providerId:e}=i,n=Cf(i,["providerId"]);return{providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}async function IF(t,e){let n=await eS(t,{},async()=>{let r=nc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=await nS(t,i,"/v1/token",`key=${o}`),c=await t._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";let u={method:"POST",headers:c,body:r};return t.emulatorConfig&&jr(t.emulatorConfig.host)&&(u.credentials="include"),kd.fetch()(s,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function wF(t,e){return Qo(t,"POST","/v2/accounts:revokeToken",Gd(t,e))}var sc=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){J(e.idToken,"internal-error"),J(typeof e.idToken<"u","internal-error"),J(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Fb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){J(e.length!==0,"internal-error");let n=Fb(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(J(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){let{accessToken:r,refreshToken:i,expiresIn:o}=await IF(e,n);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new t;return r&&(J(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(J(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(J(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return rr("not implemented")}};function zr(t,e){J(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var qr=class t{constructor(o){var s=o,{uid:e,auth:n,stsTokenManager:r}=s,i=Cf(s,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new dy(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new cc(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){let n=await ac(this,this.stsTokenManager.getToken(this.auth,e));return J(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return rS(this,e)}reload(){return iS(this)}_assign(e){this!==e&&(J(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>P({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(ae(P({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){J(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Fd(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Lt(this.auth.app))return Promise.reject(Gr(this.auth));let e=await this.getIdToken();return await ac(this,vF(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return ae(P({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>P({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){let r=n.displayName??void 0,i=n.email??void 0,o=n.phoneNumber??void 0,s=n.photoURL??void 0,c=n.tenantId??void 0,u=n._redirectEventId??void 0,l=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:p,emailVerified:g,isAnonymous:y,providerData:S,stsTokenManager:R}=n;J(p&&R,e,"internal-error");let A=sc.fromJSON(this.name,R);J(typeof p=="string",e,"internal-error"),zr(r,e.name),zr(i,e.name),J(typeof g=="boolean",e,"internal-error"),J(typeof y=="boolean",e,"internal-error"),zr(o,e.name),zr(s,e.name),zr(c,e.name),zr(u,e.name),zr(l,e.name),zr(h,e.name);let L=new t({uid:p,auth:e,email:i,emailVerified:g,displayName:r,isAnonymous:y,photoURL:s,phoneNumber:o,tenantId:c,stsTokenManager:A,createdAt:l,lastLoginAt:h});return S&&Array.isArray(S)&&(L.providerData=S.map(X=>P({},X))),u&&(L._redirectEventId=u),L}static async _fromIdTokenResponse(e,n,r=!1){let i=new sc;i.updateFromServerResponse(n);let o=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Fd(o),o}static async _fromGetAccountInfoResponse(e,n,r){let i=n.users[0];J(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?oS(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,c=new sc;c.updateFromIdToken(r);let u=new t({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new cc(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(u,l),u}};var Vb=new Map;function ir(t){Kr(t instanceof Function,"Expected a class definition");let e=Vb.get(t);return e?(Kr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Vb.set(t,e),e)}var TF=(()=>{class t{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(n,r){this.storage[n]=r}async _get(n){let r=this.storage[n];return r===void 0?null:r}async _remove(n){delete this.storage[n]}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),hy=TF;function Md(t,e,n){return`firebase:${t}:${e}:${n}`}var Vd=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=Md(this.userKey,i.apiKey,o),this.fullPersistenceKey=Md("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let n=await Ld(this.auth,{idToken:e}).catch(()=>{});return n?qr._fromGetAccountInfoResponse(this.auth,n,e):null}return qr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new t(ir(hy),e,r);let i=(await Promise.all(n.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l),o=i[0]||ir(hy),s=Md(r,e.config.apiKey,e.name),c=null;for(let l of n)try{let h=await l._get(s);if(h){let p;if(typeof h=="string"){let g=await Ld(e,{idToken:h}).catch(()=>{});if(!g)break;p=await qr._fromGetAccountInfoResponse(e,g,h)}else p=qr._fromJSON(e,h);l!==o&&(c=p),o=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new t(o,e,r):(o=u[0],c&&await o._set(s,c.toJSON()),await Promise.all(n.map(async l=>{if(l!==o)try{await l._remove(s)}catch{}})),new t(o,e,r))}};function jb(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(uS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(sS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(dS(e))return"Blackberry";if(hS(e))return"Webos";if(aS(e))return"Safari";if((e.includes("chrome/")||cS(e))&&!e.includes("edge/"))return"Chrome";if(lS(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function sS(t=Xe()){return/firefox\//i.test(t)}function aS(t=Xe()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function cS(t=Xe()){return/crios\//i.test(t)}function uS(t=Xe()){return/iemobile/i.test(t)}function lS(t=Xe()){return/android/i.test(t)}function dS(t=Xe()){return/blackberry/i.test(t)}function hS(t=Xe()){return/webos/i.test(t)}function Ay(t=Xe()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function DF(t=Xe()){return Ay(t)&&!!window.navigator?.standalone}function CF(){return yb()&&document.documentMode===10}function fS(t=Xe()){return Ay(t)||lS(t)||hS(t)||dS(t)||/windows phone/i.test(t)||uS(t)}function pS(t,e=[]){let n;switch(t){case"Browser":n=jb(Xe());break;case"Worker":n=`${jb(Xe())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Hr}/${r}`}var fy=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=o=>new Promise((s,c)=>{try{let u=e(o);s(u)}catch(u){c(u)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}};async function bF(t,e={}){return Qo(t,"GET","/v2/passwordPolicy",Gd(t,e))}var SF=6,py=class{constructor(e){let n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??SF,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){let n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var my=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new jd(this),this.idTokenSubscription=new jd(this),this.beforeStateQueue=new fy(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Zb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ir(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Vd.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let n=await Ld(this,{idToken:e}),r=await qr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Lt(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(s=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(s,s))}):this.directlySetCurrentUser(null)}let n=await this.assertedPersistence.getCurrentUser(),r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let o=this.redirectUser?._redirectEventId,s=r?._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===s)&&c?.user&&(r=c.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return J(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Fd(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=pF()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Lt(this.app))return Promise.reject(Gr(this));let n=e?Fe(e):null;return n&&J(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&J(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Lt(this.app)?Promise.reject(Gr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Lt(this.app)?Promise.reject(Gr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ir(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=await bF(this),n=new py(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new tr("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){let n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await wF(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){let r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let n=e&&ir(e)||this._popupRedirectResolver;J(n,this,"argument-error"),this.redirectPersistenceManager=await Vd.create(this,[ir(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let o=typeof n=="function"?n:n.next.bind(n),s=!1,c=this._isInitialized?Promise.resolve():this._initializationPromise;if(J(c,this,"internal-error"),c.then(()=>{s||o(this.currentUser)}),typeof n=="function"){let u=e.addObserver(n,r,i);return()=>{s=!0,u()}}else{let u=e.addObserver(n);return()=>{s=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return J(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=pS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){let e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);let n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);let r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(Lt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&dF(`Error while retrieving App Check token: ${e.error}`),e?.token}};function Wd(t){return Fe(t)}var jd=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=Ib(n=>this.observer=n)}get next(){return J(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Ry={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function AF(t){Ry=t}function RF(t){return Ry.loadJS(t)}function NF(){return Ry.gapiScript}function mS(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function gS(t,e){let n=ic(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),o=n.getOptions();if(Pn(o,e??{}))return i;Wr(i,"already-initialized")}return n.initialize({options:e})}function MF(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(ir);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function yS(t,e,n){let r=Wd(t);J(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,o=vS(e),{host:s,port:c}=xF(e),u=c===null?"":`:${c}`,l={url:`${o}//${s}${u}/`},h=Object.freeze({host:s,port:c,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){J(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),J(Pn(l,r.config.emulator)&&Pn(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,jr(s)?(Td(`${o}//${s}${u}`),Dd("Auth",!0)):i||PF()}function vS(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function xF(t){let e=vS(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:Ub(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:Ub(s)}}}function Ub(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function PF(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var Ud=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return rr("not implemented")}_getIdTokenResponse(e){return rr("not implemented")}_linkToIdToken(e,n){return rr("not implemented")}_getReauthenticationResolver(e){return rr("not implemented")}};async function ay(t,e){return tS(t,"POST","/v1/accounts:signInWithIdp",Gd(t,e))}var Bd=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var gy=class extends Bd{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var Ko=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){let o=await qr._fromIdTokenResponse(e,r,i),s=Bb(r);return new t({user:o,providerId:s,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);let i=Bb(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})}};function Bb(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var yy=class t extends kt{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function _S(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?yy._fromErrorAndOperation(t,o,e,r):o})}async function OF(t,e,n=!1){let r=await ac(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ko._forOperation(t,"link",r)}async function kF(t,e,n=!1){let{auth:r}=t;if(Lt(r.app))return Promise.reject(Gr(r));let i="reauthenticate";try{let o=await ac(t,_S(r,i,e,t),n);J(o.idToken,r,"internal-error");let s=Sy(o.idToken);J(s,r,"internal-error");let{sub:c}=s;return J(t.uid===c,r,"user-mismatch"),Ko._forOperation(t,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&Wr(r,"user-mismatch"),o}}async function LF(t,e,n=!1){if(Lt(t.app))return Promise.reject(Gr(t));let r="signIn",i=await _S(t,r,e),o=await Ko._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(o.user),o}async function FF(t,e){return tS(t,"POST","/v1/accounts:signInWithCustomToken",Gd(t,e))}async function Ny(t,e){if(Lt(t.app))return Promise.reject(Gr(t));let n=Wd(t),r=await FF(n,{token:e,returnSecureToken:!0}),i=await Ko._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}function My(t,e){return Fe(t).setPersistence(e)}function ES(t,e,n,r){return Fe(t).onIdTokenChanged(e,n,r)}function IS(t,e,n){return Fe(t).beforeAuthStateChanged(e,n)}function Kd(t,e,n,r){return Fe(t).onAuthStateChanged(e,n,r)}function xy(t){return Fe(t).signOut()}var $d="__sak";var Hd=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem($d,"1"),this.storage.removeItem($d),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var VF=1e3,jF=10,UF=(()=>{class t extends Hd{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=fS(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&n(r,o,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((c,u,l)=>{this.notifyListeners(c,l)});return}let i=n.key;r?this.detachListener():this.stopPolling();let o=()=>{let c=this.storage.getItem(i);!r&&this.localCache[i]===c||this.notifyListeners(i,c)},s=this.storage.getItem(i);CF()&&s!==n.newValue&&n.newValue!==n.oldValue?setTimeout(o,jF):o()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},VF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(n,r){await super._set(n,r),this.localCache[n]=JSON.stringify(r)}async _get(n){let r=await super._get(n);return this.localCache[n]=JSON.stringify(r),r}async _remove(n){await super._remove(n),delete this.localCache[n]}}return t.type="LOCAL",t})(),Qd=UF;var BF=(()=>{class t extends Hd{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),Py=BF;function $F(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}var HF=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(o=>o.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}async handleEvent(n){let r=n,{eventId:i,eventType:o,data:s}=r.data,c=this.handlersMap[o];if(!c?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let u=Array.from(c).map(async h=>h(r.origin,s)),l=await $F(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function wS(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var vy=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((c,u)=>{let l=wS("",20);i.port1.start();let h=setTimeout(()=>{u(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){let g=p;if(g.data.eventId===l)switch(g.data.status){case"ack":clearTimeout(h),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),c(g.data.response);break;default:clearTimeout(h),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}};function kn(){return window}function zF(t){kn().location.href=t}function TS(){return typeof kn().WorkerGlobalScope<"u"&&typeof kn().importScripts=="function"}async function qF(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function GF(){return navigator?.serviceWorker?.controller||null}function WF(){return TS()?self:null}var DS="firebaseLocalStorageDb",KF=1,zd="firebaseLocalStorage",CS="fbase_key",Ki=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function Yd(t,e){return t.transaction([zd],e?"readwrite":"readonly").objectStore(zd)}function QF(){let t=indexedDB.deleteDatabase(DS);return new Ki(t).toPromise()}function _y(){let t=indexedDB.open(DS,KF);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(zd,{keyPath:CS})}catch(i){n(i)}}),t.addEventListener("success",async()=>{let r=t.result;r.objectStoreNames.contains(zd)?e(r):(r.close(),await QF(),e(await _y()))})})}async function $b(t,e,n){let r=Yd(t,!0).put({[CS]:e,value:n});return new Ki(r).toPromise()}async function YF(t,e){let n=Yd(t,!1).get(e),r=await new Ki(n).toPromise();return r===void 0?null:r.value}function Hb(t,e){let n=Yd(t,!0).delete(e);return new Ki(n).toPromise()}var JF=800,ZF=3,XF=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await _y(),this.db)}async _withRetries(n){let r=0;for(;;)try{let i=await this._openDb();return await n(i)}catch(i){if(r++>ZF)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return TS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=HF._getInstance(WF()),this.receiver._subscribe("keyChanged",async(n,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(n,r)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await qF(),!this.activeServiceWorker)return;this.sender=new vy(this.activeServiceWorker);let n=await this.sender._send("ping",{},800);n&&n[0]?.fulfilled&&n[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(n){if(!(!this.sender||!this.activeServiceWorker||GF()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;let n=await _y();return await $b(n,$d,"1"),await Hb(n,$d),!0}catch{}return!1}async _withPendingWrite(n){this.pendingWrites++;try{await n()}finally{this.pendingWrites--}}async _set(n,r){return this._withPendingWrite(async()=>(await this._withRetries(i=>$b(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)))}async _get(n){let r=await this._withRetries(i=>YF(i,n));return this.localCache[n]=r,r}async _remove(n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Hb(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)))}async _poll(){let n=await this._withRetries(o=>{let s=Yd(o,!1).getAll();return new Ki(s).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:o,value:s}of n)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),JF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),bS=XF;var xJ=mS("rcb"),PJ=new Wi(3e4,6e4);function eV(t,e){return e?ir(e):(J(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var uc=class extends Ud{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ay(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ay(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ay(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function tV(t){return LF(t.auth,new uc(t),t.bypassAuthState)}function nV(t){let{auth:e,user:n}=t;return J(n,e,"internal-error"),kF(n,new uc(t),t.bypassAuthState)}async function rV(t){let{auth:e,user:n}=t;return J(n,e,"internal-error"),OF(n,new uc(t),t.bypassAuthState)}var Ey=class{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){let{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:s,type:c}=e;if(s){this.reject(s);return}let u={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return tV;case"linkViaPopup":case"linkViaRedirect":return rV;case"reauthViaPopup":case"reauthViaRedirect":return nV;default:Wr(this.auth,"internal-error")}}resolve(e){Kr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Kr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var OJ=new Wi(2e3,1e4);var iV="pendingRedirect",xd=new Map,Iy=class extends Ey{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=xd.get(this.auth._key());if(!e){try{let r=await oV(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}xd.set(this.auth._key(),e)}return this.bypassAuthState||xd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}};async function oV(t,e){let n=cV(e),r=aV(t);if(!await r._isAvailable())return!1;let i=await r._get(n)==="true";return await r._remove(n),i}function sV(t,e){xd.set(t._key(),e)}function aV(t){return ir(t._redirectPersistence)}function cV(t){return Md(iV,t.config.apiKey,t.name)}async function uV(t,e,n=!1){if(Lt(t.app))return Promise.reject(Gr(t));let r=Wd(t),i=eV(r,e),s=await new Iy(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,e)),s}var lV=600*1e3,wy=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!dV(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!SS(e)){let r=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Gi(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=lV&&this.cachedEventUids.clear(),this.cachedEventUids.has(zb(e))}saveEventToCache(e){this.cachedEventUids.add(zb(e)),this.lastProcessedEventTime=Date.now()}};function zb(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function SS({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function dV(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return SS(t);default:return!1}}async function hV(t,e={}){return Qo(t,"GET","/v1/projects",e)}var fV=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,pV=/^https?/;async function mV(t){if(t.config.emulator)return;let{authorizedDomains:e}=await hV(t);for(let n of e)try{if(gV(n))return}catch{}Wr(t,"unauthorized-domain")}function gV(t){let e=uy(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let s=new URL(t);return s.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!pV.test(n))return!1;if(fV.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var yV=new Wi(3e4,6e4);function qb(){let t=kn().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function vV(t){return new Promise((e,n)=>{function r(){qb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{qb(),n(Gi(t,"network-request-failed"))},timeout:yV.get()})}if(kn().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(kn().gapi?.load)r();else{let i=mS("iframefcb");return kn()[i]=()=>{gapi.load?r():n(Gi(t,"network-request-failed"))},RF(`${NF()}?onload=${i}`).catch(o=>n(o))}}).catch(e=>{throw Pd=null,e})}var Pd=null;function _V(t){return Pd=Pd||vV(t),Pd}var EV=new Wi(5e3,15e3),IV="__/auth/iframe",wV="emulator/auth/iframe",TV={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},DV=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function CV(t){let e=t.config;J(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?by(e,wV):`https://${t.config.authDomain}/${IV}`,r={apiKey:e.apiKey,appName:t.name,v:Hr},i=DV.get(t.config.apiHost);i&&(r.eid=i);let o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${nc(r).slice(1)}`}async function bV(t){let e=await _V(t),n=kn().gapi;return J(n,t,"internal-error"),e.open({where:document.body,url:CV(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:TV,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});let s=Gi(t,"network-request-failed"),c=kn().setTimeout(()=>{o(s)},EV.get());function u(){kn().clearTimeout(c),i(r)}r.ping(u).then(u,()=>{o(s)})}))}var SV={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},AV=500,RV=600,NV="_blank",MV="http://localhost",qd=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function xV(t,e,n,r=AV,i=RV){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),c="",u=ae(P({},SV),{width:r.toString(),height:i.toString(),top:o,left:s}),l=Xe().toLowerCase();n&&(c=cS(l)?NV:n),sS(l)&&(e=e||MV,u.scrollbars="yes");let h=Object.entries(u).reduce((g,[y,S])=>`${g}${y}=${S},`,"");if(DF(l)&&c!=="_self")return PV(e||"",c),new qd(null);let p=window.open(e||"",c,h);J(p,t,"popup-blocked");try{p.focus()}catch{}return new qd(p)}function PV(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var OV="__/auth/handler",kV="emulator/auth/handler",LV=encodeURIComponent("fac");async function Gb(t,e,n,r,i,o){J(t.config.authDomain,t,"auth-domain-config-required"),J(t.config.apiKey,t,"invalid-api-key");let s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Hr,eventId:i};if(e instanceof Bd){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",Eb(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(o||{}))s[h]=p}if(e instanceof gy){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(s.scopes=h.join(","))}t.tenantId&&(s.tid=t.tenantId);let c=s;for(let h of Object.keys(c))c[h]===void 0&&delete c[h];let u=await t._getAppCheckToken(),l=u?`#${LV}=${encodeURIComponent(u)}`:"";return`${FV(t)}?${nc(c).slice(1)}${l}`}function FV({config:t}){return t.emulator?by(t,kV):`https://${t.authDomain}/${OV}`}var cy="webStorageSupport",Ty=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Py,this._completeRedirectFn=uV,this._overrideRedirectResult=sV}async _openPopup(e,n,r,i){Kr(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");let o=await Gb(e,n,r,uy(),i);return xV(e,o,wS())}async _openRedirect(e,n,r,i){await this._originValidation(e);let o=await Gb(e,n,r,uy(),i);return zF(o),new Promise(()=>{})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(Kr(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){let n=await bV(e),r=new wy(e);return n.register("authEvent",i=>(J(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(cy,{type:cy},i=>{let o=i?.[0]?.[cy];o!==void 0&&n(!!o),Wr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=mV(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return fS()||aS()||Ay()}},AS=Ty;var Wb="@firebase/auth",Kb="1.12.0";var Dy=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){J(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function VV(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function jV(t){$r(new Qt("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:c}=r.options;J(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:s,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:pS(t)},l=new my(r,i,o,u);return MF(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),$r(new Qt("auth-internal",e=>{let n=Wd(e.getProvider("auth").getImmediate());return(r=>new Dy(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),yn(Wb,Kb,VV(t)),yn(Wb,Kb,"esm2020")}var UV=300,BV=Hg("authIdTokenMaxAge")||UV,Qb=null,$V=t=>async e=>{let n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>BV)return;let i=n?.token;Qb!==i&&(Qb=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Oy(t=Ad()){let e=ic(t,"auth");if(e.isInitialized())return e.getImmediate();let n=gS(t,{popupRedirectResolver:AS,persistence:[bS,Qd,Py]}),r=Hg("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=$V(o.toString());IS(n,s,()=>s(n.currentUser)),ES(n,c=>s(c))}}let i=Bg("auth");return i&&yS(n,`http://${i}`),n}function HV(){return document.getElementsByTagName("head")?.[0]??document}AF({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let o=Gi("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",HV().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});jV("Browser");var zV="firebase",qV="12.7.0";yn(zV,qV,"app");var RS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},NS={};var or,ky;(function(){var t;function e(w,v){function E(){}E.prototype=v.prototype,w.F=v.prototype,w.prototype=new E,w.prototype.constructor=w,w.D=function(T,I,C){for(var _=Array(arguments.length-2),Et=2;Et<arguments.length;Et++)_[Et-2]=arguments[Et];return v.prototype[I].apply(T,_)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(w,v,E){E||(E=0);let T=Array(16);if(typeof v=="string")for(var I=0;I<16;++I)T[I]=v.charCodeAt(E++)|v.charCodeAt(E++)<<8|v.charCodeAt(E++)<<16|v.charCodeAt(E++)<<24;else for(I=0;I<16;++I)T[I]=v[E++]|v[E++]<<8|v[E++]<<16|v[E++]<<24;v=w.g[0],E=w.g[1],I=w.g[2];let C=w.g[3],_;_=v+(C^E&(I^C))+T[0]+3614090360&4294967295,v=E+(_<<7&4294967295|_>>>25),_=C+(I^v&(E^I))+T[1]+3905402710&4294967295,C=v+(_<<12&4294967295|_>>>20),_=I+(E^C&(v^E))+T[2]+606105819&4294967295,I=C+(_<<17&4294967295|_>>>15),_=E+(v^I&(C^v))+T[3]+3250441966&4294967295,E=I+(_<<22&4294967295|_>>>10),_=v+(C^E&(I^C))+T[4]+4118548399&4294967295,v=E+(_<<7&4294967295|_>>>25),_=C+(I^v&(E^I))+T[5]+1200080426&4294967295,C=v+(_<<12&4294967295|_>>>20),_=I+(E^C&(v^E))+T[6]+2821735955&4294967295,I=C+(_<<17&4294967295|_>>>15),_=E+(v^I&(C^v))+T[7]+4249261313&4294967295,E=I+(_<<22&4294967295|_>>>10),_=v+(C^E&(I^C))+T[8]+1770035416&4294967295,v=E+(_<<7&4294967295|_>>>25),_=C+(I^v&(E^I))+T[9]+2336552879&4294967295,C=v+(_<<12&4294967295|_>>>20),_=I+(E^C&(v^E))+T[10]+4294925233&4294967295,I=C+(_<<17&4294967295|_>>>15),_=E+(v^I&(C^v))+T[11]+2304563134&4294967295,E=I+(_<<22&4294967295|_>>>10),_=v+(C^E&(I^C))+T[12]+1804603682&4294967295,v=E+(_<<7&4294967295|_>>>25),_=C+(I^v&(E^I))+T[13]+4254626195&4294967295,C=v+(_<<12&4294967295|_>>>20),_=I+(E^C&(v^E))+T[14]+2792965006&4294967295,I=C+(_<<17&4294967295|_>>>15),_=E+(v^I&(C^v))+T[15]+1236535329&4294967295,E=I+(_<<22&4294967295|_>>>10),_=v+(I^C&(E^I))+T[1]+4129170786&4294967295,v=E+(_<<5&4294967295|_>>>27),_=C+(E^I&(v^E))+T[6]+3225465664&4294967295,C=v+(_<<9&4294967295|_>>>23),_=I+(v^E&(C^v))+T[11]+643717713&4294967295,I=C+(_<<14&4294967295|_>>>18),_=E+(C^v&(I^C))+T[0]+3921069994&4294967295,E=I+(_<<20&4294967295|_>>>12),_=v+(I^C&(E^I))+T[5]+3593408605&4294967295,v=E+(_<<5&4294967295|_>>>27),_=C+(E^I&(v^E))+T[10]+38016083&4294967295,C=v+(_<<9&4294967295|_>>>23),_=I+(v^E&(C^v))+T[15]+3634488961&4294967295,I=C+(_<<14&4294967295|_>>>18),_=E+(C^v&(I^C))+T[4]+3889429448&4294967295,E=I+(_<<20&4294967295|_>>>12),_=v+(I^C&(E^I))+T[9]+568446438&4294967295,v=E+(_<<5&4294967295|_>>>27),_=C+(E^I&(v^E))+T[14]+3275163606&4294967295,C=v+(_<<9&4294967295|_>>>23),_=I+(v^E&(C^v))+T[3]+4107603335&4294967295,I=C+(_<<14&4294967295|_>>>18),_=E+(C^v&(I^C))+T[8]+1163531501&4294967295,E=I+(_<<20&4294967295|_>>>12),_=v+(I^C&(E^I))+T[13]+2850285829&4294967295,v=E+(_<<5&4294967295|_>>>27),_=C+(E^I&(v^E))+T[2]+4243563512&4294967295,C=v+(_<<9&4294967295|_>>>23),_=I+(v^E&(C^v))+T[7]+1735328473&4294967295,I=C+(_<<14&4294967295|_>>>18),_=E+(C^v&(I^C))+T[12]+2368359562&4294967295,E=I+(_<<20&4294967295|_>>>12),_=v+(E^I^C)+T[5]+4294588738&4294967295,v=E+(_<<4&4294967295|_>>>28),_=C+(v^E^I)+T[8]+2272392833&4294967295,C=v+(_<<11&4294967295|_>>>21),_=I+(C^v^E)+T[11]+1839030562&4294967295,I=C+(_<<16&4294967295|_>>>16),_=E+(I^C^v)+T[14]+4259657740&4294967295,E=I+(_<<23&4294967295|_>>>9),_=v+(E^I^C)+T[1]+2763975236&4294967295,v=E+(_<<4&4294967295|_>>>28),_=C+(v^E^I)+T[4]+1272893353&4294967295,C=v+(_<<11&4294967295|_>>>21),_=I+(C^v^E)+T[7]+4139469664&4294967295,I=C+(_<<16&4294967295|_>>>16),_=E+(I^C^v)+T[10]+3200236656&4294967295,E=I+(_<<23&4294967295|_>>>9),_=v+(E^I^C)+T[13]+681279174&4294967295,v=E+(_<<4&4294967295|_>>>28),_=C+(v^E^I)+T[0]+3936430074&4294967295,C=v+(_<<11&4294967295|_>>>21),_=I+(C^v^E)+T[3]+3572445317&4294967295,I=C+(_<<16&4294967295|_>>>16),_=E+(I^C^v)+T[6]+76029189&4294967295,E=I+(_<<23&4294967295|_>>>9),_=v+(E^I^C)+T[9]+3654602809&4294967295,v=E+(_<<4&4294967295|_>>>28),_=C+(v^E^I)+T[12]+3873151461&4294967295,C=v+(_<<11&4294967295|_>>>21),_=I+(C^v^E)+T[15]+530742520&4294967295,I=C+(_<<16&4294967295|_>>>16),_=E+(I^C^v)+T[2]+3299628645&4294967295,E=I+(_<<23&4294967295|_>>>9),_=v+(I^(E|~C))+T[0]+4096336452&4294967295,v=E+(_<<6&4294967295|_>>>26),_=C+(E^(v|~I))+T[7]+1126891415&4294967295,C=v+(_<<10&4294967295|_>>>22),_=I+(v^(C|~E))+T[14]+2878612391&4294967295,I=C+(_<<15&4294967295|_>>>17),_=E+(C^(I|~v))+T[5]+4237533241&4294967295,E=I+(_<<21&4294967295|_>>>11),_=v+(I^(E|~C))+T[12]+1700485571&4294967295,v=E+(_<<6&4294967295|_>>>26),_=C+(E^(v|~I))+T[3]+2399980690&4294967295,C=v+(_<<10&4294967295|_>>>22),_=I+(v^(C|~E))+T[10]+4293915773&4294967295,I=C+(_<<15&4294967295|_>>>17),_=E+(C^(I|~v))+T[1]+2240044497&4294967295,E=I+(_<<21&4294967295|_>>>11),_=v+(I^(E|~C))+T[8]+1873313359&4294967295,v=E+(_<<6&4294967295|_>>>26),_=C+(E^(v|~I))+T[15]+4264355552&4294967295,C=v+(_<<10&4294967295|_>>>22),_=I+(v^(C|~E))+T[6]+2734768916&4294967295,I=C+(_<<15&4294967295|_>>>17),_=E+(C^(I|~v))+T[13]+1309151649&4294967295,E=I+(_<<21&4294967295|_>>>11),_=v+(I^(E|~C))+T[4]+4149444226&4294967295,v=E+(_<<6&4294967295|_>>>26),_=C+(E^(v|~I))+T[11]+3174756917&4294967295,C=v+(_<<10&4294967295|_>>>22),_=I+(v^(C|~E))+T[2]+718787259&4294967295,I=C+(_<<15&4294967295|_>>>17),_=E+(C^(I|~v))+T[9]+3951481745&4294967295,w.g[0]=w.g[0]+v&4294967295,w.g[1]=w.g[1]+(I+(_<<21&4294967295|_>>>11))&4294967295,w.g[2]=w.g[2]+I&4294967295,w.g[3]=w.g[3]+C&4294967295}r.prototype.v=function(w,v){v===void 0&&(v=w.length);let E=v-this.blockSize,T=this.C,I=this.h,C=0;for(;C<v;){if(I==0)for(;C<=E;)i(this,w,C),C+=this.blockSize;if(typeof w=="string"){for(;C<v;)if(T[I++]=w.charCodeAt(C++),I==this.blockSize){i(this,T),I=0;break}}else for(;C<v;)if(T[I++]=w[C++],I==this.blockSize){i(this,T),I=0;break}}this.h=I,this.o+=v},r.prototype.A=function(){var w=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);w[0]=128;for(var v=1;v<w.length-8;++v)w[v]=0;v=this.o*8;for(var E=w.length-8;E<w.length;++E)w[E]=v&255,v/=256;for(this.v(w),w=Array(16),v=0,E=0;E<4;++E)for(let T=0;T<32;T+=8)w[v++]=this.g[E]>>>T&255;return w};function o(w,v){var E=c;return Object.prototype.hasOwnProperty.call(E,w)?E[w]:E[w]=v(w)}function s(w,v){this.h=v;let E=[],T=!0;for(let I=w.length-1;I>=0;I--){let C=w[I]|0;T&&C==v||(E[I]=C,T=!1)}this.g=E}var c={};function u(w){return-128<=w&&w<128?o(w,function(v){return new s([v|0],v<0?-1:0)}):new s([w|0],w<0?-1:0)}function l(w){if(isNaN(w)||!isFinite(w))return p;if(w<0)return A(l(-w));let v=[],E=1;for(let T=0;w>=E;T++)v[T]=w/E|0,E*=4294967296;return new s(v,0)}function h(w,v){if(w.length==0)throw Error("number format error: empty string");if(v=v||10,v<2||36<v)throw Error("radix out of range: "+v);if(w.charAt(0)=="-")return A(h(w.substring(1),v));if(w.indexOf("-")>=0)throw Error('number format error: interior "-" character');let E=l(Math.pow(v,8)),T=p;for(let C=0;C<w.length;C+=8){var I=Math.min(8,w.length-C);let _=parseInt(w.substring(C,C+I),v);I<8?(I=l(Math.pow(v,I)),T=T.j(I).add(l(_))):(T=T.j(E),T=T.add(l(_)))}return T}var p=u(0),g=u(1),y=u(16777216);t=s.prototype,t.m=function(){if(R(this))return-A(this).m();let w=0,v=1;for(let E=0;E<this.g.length;E++){let T=this.i(E);w+=(T>=0?T:4294967296+T)*v,v*=4294967296}return w},t.toString=function(w){if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(S(this))return"0";if(R(this))return"-"+A(this).toString(w);let v=l(Math.pow(w,6));var E=this;let T="";for(;;){let I=lt(E,v).g;E=L(E,I.j(v));let C=((E.g.length>0?E.g[0]:E.h)>>>0).toString(w);if(E=I,S(E))return C+T;for(;C.length<6;)C="0"+C;T=C+T}},t.i=function(w){return w<0?0:w<this.g.length?this.g[w]:this.h};function S(w){if(w.h!=0)return!1;for(let v=0;v<w.g.length;v++)if(w.g[v]!=0)return!1;return!0}function R(w){return w.h==-1}t.l=function(w){return w=L(this,w),R(w)?-1:S(w)?0:1};function A(w){let v=w.g.length,E=[];for(let T=0;T<v;T++)E[T]=~w.g[T];return new s(E,~w.h).add(g)}t.abs=function(){return R(this)?A(this):this},t.add=function(w){let v=Math.max(this.g.length,w.g.length),E=[],T=0;for(let I=0;I<=v;I++){let C=T+(this.i(I)&65535)+(w.i(I)&65535),_=(C>>>16)+(this.i(I)>>>16)+(w.i(I)>>>16);T=_>>>16,C&=65535,_&=65535,E[I]=_<<16|C}return new s(E,E[E.length-1]&-2147483648?-1:0)};function L(w,v){return w.add(A(v))}t.j=function(w){if(S(this)||S(w))return p;if(R(this))return R(w)?A(this).j(A(w)):A(A(this).j(w));if(R(w))return A(this.j(A(w)));if(this.l(y)<0&&w.l(y)<0)return l(this.m()*w.m());let v=this.g.length+w.g.length,E=[];for(var T=0;T<2*v;T++)E[T]=0;for(T=0;T<this.g.length;T++)for(let I=0;I<w.g.length;I++){let C=this.i(T)>>>16,_=this.i(T)&65535,Et=w.i(I)>>>16,pr=w.i(I)&65535;E[2*T+2*I]+=_*pr,X(E,2*T+2*I),E[2*T+2*I+1]+=C*pr,X(E,2*T+2*I+1),E[2*T+2*I+1]+=_*Et,X(E,2*T+2*I+1),E[2*T+2*I+2]+=C*Et,X(E,2*T+2*I+2)}for(w=0;w<v;w++)E[w]=E[2*w+1]<<16|E[2*w];for(w=v;w<2*v;w++)E[w]=0;return new s(E,0)};function X(w,v){for(;(w[v]&65535)!=w[v];)w[v+1]+=w[v]>>>16,w[v]&=65535,v++}function le(w,v){this.g=w,this.h=v}function lt(w,v){if(S(v))throw Error("division by zero");if(S(w))return new le(p,p);if(R(w))return v=lt(A(w),v),new le(A(v.g),A(v.h));if(R(v))return v=lt(w,A(v)),new le(A(v.g),v.h);if(w.g.length>30){if(R(w)||R(v))throw Error("slowDivide_ only works with positive integers.");for(var E=g,T=v;T.l(w)<=0;)E=_t(E),T=_t(T);var I=We(E,1),C=We(T,1);for(T=We(T,2),E=We(E,2);!S(T);){var _=C.add(T);_.l(w)<=0&&(I=I.add(E),C=_),T=We(T,1),E=We(E,1)}return v=L(w,I.j(v)),new le(I,v)}for(I=p;w.l(v)>=0;){for(E=Math.max(1,Math.floor(w.m()/v.m())),T=Math.ceil(Math.log(E)/Math.LN2),T=T<=48?1:Math.pow(2,T-48),C=l(E),_=C.j(v);R(_)||_.l(w)>0;)E-=T,C=l(E),_=C.j(v);S(C)&&(C=g),I=I.add(C),w=L(w,_)}return new le(I,w)}t.B=function(w){return lt(this,w).h},t.and=function(w){let v=Math.max(this.g.length,w.g.length),E=[];for(let T=0;T<v;T++)E[T]=this.i(T)&w.i(T);return new s(E,this.h&w.h)},t.or=function(w){let v=Math.max(this.g.length,w.g.length),E=[];for(let T=0;T<v;T++)E[T]=this.i(T)|w.i(T);return new s(E,this.h|w.h)},t.xor=function(w){let v=Math.max(this.g.length,w.g.length),E=[];for(let T=0;T<v;T++)E[T]=this.i(T)^w.i(T);return new s(E,this.h^w.h)};function _t(w){let v=w.g.length+1,E=[];for(let T=0;T<v;T++)E[T]=w.i(T)<<1|w.i(T-1)>>>31;return new s(E,w.h)}function We(w,v){let E=v>>5;v%=32;let T=w.g.length-E,I=[];for(let C=0;C<T;C++)I[C]=v>0?w.i(C+E)>>>v|w.i(C+E+1)<<32-v:w.i(C+E);return new s(I,w.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,ky=NS.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.B,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,or=NS.Integer=s}).apply(typeof RS<"u"?RS:typeof self<"u"?self:typeof window<"u"?window:{});var Jd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},sr={};var Ly,GV,Yo,Fy,lc,Zd,Vy,jy,Uy;(function(){var t,e=Object.defineProperty;function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Jd=="object"&&Jd];for(var d=0;d<a.length;++d){var f=a[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function i(a,d){if(d)e:{var f=r;a=a.split(".");for(var m=0;m<a.length-1;m++){var D=a[m];if(!(D in f))break e;f=f[D]}a=a[a.length-1],m=f[a],d=d(m),d!=m&&d!=null&&e(f,a,{configurable:!0,writable:!0,value:d})}}i("Symbol.dispose",function(a){return a||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(a){return a||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(a){return a||function(d){var f=[],m;for(m in d)Object.prototype.hasOwnProperty.call(d,m)&&f.push([m,d[m]]);return f}});var o=o||{},s=this||self;function c(a){var d=typeof a;return d=="object"&&a!=null||d=="function"}function u(a,d,f){return a.call.apply(a.bind,arguments)}function l(a,d,f){return l=u,l.apply(null,arguments)}function h(a,d){var f=Array.prototype.slice.call(arguments,1);return function(){var m=f.slice();return m.push.apply(m,arguments),a.apply(this,m)}}function p(a,d){function f(){}f.prototype=d.prototype,a.Z=d.prototype,a.prototype=new f,a.prototype.constructor=a,a.Ob=function(m,D,b){for(var k=Array(arguments.length-2),ie=2;ie<arguments.length;ie++)k[ie-2]=arguments[ie];return d.prototype[D].apply(m,k)}}var g=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?a=>a&&AsyncContext.Snapshot.wrap(a):a=>a;function y(a){let d=a.length;if(d>0){let f=Array(d);for(let m=0;m<d;m++)f[m]=a[m];return f}return[]}function S(a,d){for(let m=1;m<arguments.length;m++){let D=arguments[m];var f=typeof D;if(f=f!="object"?f:D?Array.isArray(D)?"array":f:"null",f=="array"||f=="object"&&typeof D.length=="number"){f=a.length||0;let b=D.length||0;a.length=f+b;for(let k=0;k<b;k++)a[f+k]=D[k]}else a.push(D)}}class R{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return this.h>0?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function A(a){s.setTimeout(()=>{throw a},0)}function L(){var a=w;let d=null;return a.g&&(d=a.g,a.g=a.g.next,a.g||(a.h=null),d.next=null),d}class X{constructor(){this.h=this.g=null}add(d,f){let m=le.get();m.set(d,f),this.h?this.h.next=m:this.g=m,this.h=m}}var le=new R(()=>new lt,a=>a.reset());class lt{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let _t,We=!1,w=new X,v=()=>{let a=Promise.resolve(void 0);_t=()=>{a.then(E)}};function E(){for(var a;a=L();){try{a.h.call(a.g)}catch(f){A(f)}var d=le;d.j(a),d.h<100&&(d.h++,a.next=d.g,d.g=a)}We=!1}function T(){this.u=this.u,this.C=this.C}T.prototype.u=!1,T.prototype.dispose=function(){this.u||(this.u=!0,this.N())},T.prototype[Symbol.dispose]=function(){this.dispose()},T.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function I(a,d){this.type=a,this.g=this.target=d,this.defaultPrevented=!1}I.prototype.h=function(){this.defaultPrevented=!0};var C=(function(){if(!s.addEventListener||!Object.defineProperty)return!1;var a=!1,d=Object.defineProperty({},"passive",{get:function(){a=!0}});try{let f=()=>{};s.addEventListener("test",f,d),s.removeEventListener("test",f,d)}catch{}return a})();function _(a){return/^[\s\xa0]*$/.test(a)}function Et(a,d){I.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a&&this.init(a,d)}p(Et,I),Et.prototype.init=function(a,d){let f=this.type=a.type,m=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement,this.g=d,d=a.relatedTarget,d||(f=="mouseover"?d=a.fromElement:f=="mouseout"&&(d=a.toElement)),this.relatedTarget=d,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=a.pointerType,this.state=a.state,this.i=a,a.defaultPrevented&&Et.Z.h.call(this)},Et.prototype.h=function(){Et.Z.h.call(this);let a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var pr="closure_listenable_"+(Math.random()*1e6|0),nR=0;function rR(a,d,f,m,D){this.listener=a,this.proxy=null,this.src=d,this.type=f,this.capture=!!m,this.ha=D,this.key=++nR,this.da=this.fa=!1}function Vc(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function jc(a,d,f){for(let m in a)d.call(f,a[m],m,a)}function iR(a,d){for(let f in a)d.call(void 0,a[f],f,a)}function tE(a){let d={};for(let f in a)d[f]=a[f];return d}let nE="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function rE(a,d){let f,m;for(let D=1;D<arguments.length;D++){m=arguments[D];for(f in m)a[f]=m[f];for(let b=0;b<nE.length;b++)f=nE[b],Object.prototype.hasOwnProperty.call(m,f)&&(a[f]=m[f])}}function Uc(a){this.src=a,this.g={},this.h=0}Uc.prototype.add=function(a,d,f,m,D){let b=a.toString();a=this.g[b],a||(a=this.g[b]=[],this.h++);let k=tf(a,d,m,D);return k>-1?(d=a[k],f||(d.fa=!1)):(d=new rR(d,this.src,b,!!m,D),d.fa=f,a.push(d)),d};function ef(a,d){let f=d.type;if(f in a.g){var m=a.g[f],D=Array.prototype.indexOf.call(m,d,void 0),b;(b=D>=0)&&Array.prototype.splice.call(m,D,1),b&&(Vc(d),a.g[f].length==0&&(delete a.g[f],a.h--))}}function tf(a,d,f,m){for(let D=0;D<a.length;++D){let b=a[D];if(!b.da&&b.listener==d&&b.capture==!!f&&b.ha==m)return D}return-1}var nf="closure_lm_"+(Math.random()*1e6|0),rf={};function iE(a,d,f,m,D){if(m&&m.once)return sE(a,d,f,m,D);if(Array.isArray(d)){for(let b=0;b<d.length;b++)iE(a,d[b],f,m,D);return null}return f=cf(f),a&&a[pr]?a.J(d,f,c(m)?!!m.capture:!!m,D):oE(a,d,f,!1,m,D)}function oE(a,d,f,m,D,b){if(!d)throw Error("Invalid event type");let k=c(D)?!!D.capture:!!D,ie=sf(a);if(ie||(a[nf]=ie=new Uc(a)),f=ie.add(d,f,m,k,b),f.proxy)return f;if(m=oR(),f.proxy=m,m.src=a,m.listener=f,a.addEventListener)C||(D=k),D===void 0&&(D=!1),a.addEventListener(d.toString(),m,D);else if(a.attachEvent)a.attachEvent(cE(d.toString()),m);else if(a.addListener&&a.removeListener)a.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return f}function oR(){function a(f){return d.call(a.src,a.listener,f)}let d=sR;return a}function sE(a,d,f,m,D){if(Array.isArray(d)){for(let b=0;b<d.length;b++)sE(a,d[b],f,m,D);return null}return f=cf(f),a&&a[pr]?a.K(d,f,c(m)?!!m.capture:!!m,D):oE(a,d,f,!0,m,D)}function aE(a,d,f,m,D){if(Array.isArray(d))for(var b=0;b<d.length;b++)aE(a,d[b],f,m,D);else m=c(m)?!!m.capture:!!m,f=cf(f),a&&a[pr]?(a=a.i,b=String(d).toString(),b in a.g&&(d=a.g[b],f=tf(d,f,m,D),f>-1&&(Vc(d[f]),Array.prototype.splice.call(d,f,1),d.length==0&&(delete a.g[b],a.h--)))):a&&(a=sf(a))&&(d=a.g[d.toString()],a=-1,d&&(a=tf(d,f,m,D)),(f=a>-1?d[a]:null)&&of(f))}function of(a){if(typeof a!="number"&&a&&!a.da){var d=a.src;if(d&&d[pr])ef(d.i,a);else{var f=a.type,m=a.proxy;d.removeEventListener?d.removeEventListener(f,m,a.capture):d.detachEvent?d.detachEvent(cE(f),m):d.addListener&&d.removeListener&&d.removeListener(m),(f=sf(d))?(ef(f,a),f.h==0&&(f.src=null,d[nf]=null)):Vc(a)}}}function cE(a){return a in rf?rf[a]:rf[a]="on"+a}function sR(a,d){if(a.da)a=!0;else{d=new Et(d,this);let f=a.listener,m=a.ha||a.src;a.fa&&of(a),a=f.call(m,d)}return a}function sf(a){return a=a[nf],a instanceof Uc?a:null}var af="__closure_events_fn_"+(Math.random()*1e9>>>0);function cf(a){return typeof a=="function"?a:(a[af]||(a[af]=function(d){return a.handleEvent(d)}),a[af])}function ot(){T.call(this),this.i=new Uc(this),this.M=this,this.G=null}p(ot,T),ot.prototype[pr]=!0,ot.prototype.removeEventListener=function(a,d,f,m){aE(this,a,d,f,m)};function dt(a,d){var f,m=a.G;if(m)for(f=[];m;m=m.G)f.push(m);if(a=a.M,m=d.type||d,typeof d=="string")d=new I(d,a);else if(d instanceof I)d.target=d.target||a;else{var D=d;d=new I(m,a),rE(d,D)}D=!0;let b,k;if(f)for(k=f.length-1;k>=0;k--)b=d.g=f[k],D=Bc(b,m,!0,d)&&D;if(b=d.g=a,D=Bc(b,m,!0,d)&&D,D=Bc(b,m,!1,d)&&D,f)for(k=0;k<f.length;k++)b=d.g=f[k],D=Bc(b,m,!1,d)&&D}ot.prototype.N=function(){if(ot.Z.N.call(this),this.i){var a=this.i;for(let d in a.g){let f=a.g[d];for(let m=0;m<f.length;m++)Vc(f[m]);delete a.g[d],a.h--}}this.G=null},ot.prototype.J=function(a,d,f,m){return this.i.add(String(a),d,!1,f,m)},ot.prototype.K=function(a,d,f,m){return this.i.add(String(a),d,!0,f,m)};function Bc(a,d,f,m){if(d=a.i.g[String(d)],!d)return!0;d=d.concat();let D=!0;for(let b=0;b<d.length;++b){let k=d[b];if(k&&!k.da&&k.capture==f){let ie=k.listener,$e=k.ha||k.src;k.fa&&ef(a.i,k),D=ie.call($e,m)!==!1&&D}}return D&&!m.defaultPrevented}function aR(a,d){if(typeof a!="function")if(a&&typeof a.handleEvent=="function")a=l(a.handleEvent,a);else throw Error("Invalid listener argument");return Number(d)>2147483647?-1:s.setTimeout(a,d||0)}function uE(a){a.g=aR(()=>{a.g=null,a.i&&(a.i=!1,uE(a))},a.l);let d=a.h;a.h=null,a.m.apply(null,d)}class cR extends T{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:uE(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function bs(a){T.call(this),this.h=a,this.g={}}p(bs,T);var lE=[];function dE(a){jc(a.g,function(d,f){this.g.hasOwnProperty(f)&&of(d)},a),a.g={}}bs.prototype.N=function(){bs.Z.N.call(this),dE(this)},bs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var uf=s.JSON.stringify,uR=s.JSON.parse,lR=class{stringify(a){return s.JSON.stringify(a,void 0)}parse(a){return s.JSON.parse(a,void 0)}};function hE(){}function fE(){}var Ss={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function lf(){I.call(this,"d")}p(lf,I);function df(){I.call(this,"c")}p(df,I);var ii={},pE=null;function $c(){return pE=pE||new ot}ii.Ia="serverreachability";function mE(a){I.call(this,ii.Ia,a)}p(mE,I);function As(a){let d=$c();dt(d,new mE(d))}ii.STAT_EVENT="statevent";function gE(a,d){I.call(this,ii.STAT_EVENT,a),this.stat=d}p(gE,I);function ht(a){let d=$c();dt(d,new gE(d,a))}ii.Ja="timingevent";function yE(a,d){I.call(this,ii.Ja,a),this.size=d}p(yE,I);function Rs(a,d){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){a()},d)}function Ns(){this.g=!0}Ns.prototype.ua=function(){this.g=!1};function dR(a,d,f,m,D,b){a.info(function(){if(a.g)if(b){var k="",ie=b.split("&");for(let be=0;be<ie.length;be++){var $e=ie[be].split("=");if($e.length>1){let Ke=$e[0];$e=$e[1];let En=Ke.split("_");k=En.length>=2&&En[1]=="type"?k+(Ke+"="+$e+"&"):k+(Ke+"=redacted&")}}}else k=null;else k=b;return"XMLHTTP REQ ("+m+") [attempt "+D+"]: "+d+`
`+f+`
`+k})}function hR(a,d,f,m,D,b,k){a.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+D+"]: "+d+`
`+f+`
`+b+" "+k})}function oo(a,d,f,m){a.info(function(){return"XMLHTTP TEXT ("+d+"): "+pR(a,f)+(m?" "+m:"")})}function fR(a,d){a.info(function(){return"TIMEOUT: "+d})}Ns.prototype.info=function(){};function pR(a,d){if(!a.g)return d;if(!d)return null;try{let b=JSON.parse(d);if(b){for(a=0;a<b.length;a++)if(Array.isArray(b[a])){var f=b[a];if(!(f.length<2)){var m=f[1];if(Array.isArray(m)&&!(m.length<1)){var D=m[0];if(D!="noop"&&D!="stop"&&D!="close")for(let k=1;k<m.length;k++)m[k]=""}}}}return uf(b)}catch{return d}}var Hc={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},vE={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},_E;function hf(){}p(hf,hE),hf.prototype.g=function(){return new XMLHttpRequest},_E=new hf;function Ms(a){return encodeURIComponent(String(a))}function mR(a){var d=1;a=a.split(":");let f=[];for(;d>0&&a.length;)f.push(a.shift()),d--;return a.length&&f.push(a.join(":")),f}function mr(a,d,f,m){this.j=a,this.i=d,this.l=f,this.S=m||1,this.V=new bs(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new EE}function EE(){this.i=null,this.g="",this.h=!1}var IE={},ff={};function pf(a,d,f){a.M=1,a.A=qc(_n(d)),a.u=f,a.R=!0,wE(a,null)}function wE(a,d){a.F=Date.now(),zc(a),a.B=_n(a.A);var f=a.B,m=a.S;Array.isArray(m)||(m=[String(m)]),kE(f.i,"t",m),a.C=0,f=a.j.L,a.h=new EE,a.g=XE(a.j,f?d:null,!a.u),a.P>0&&(a.O=new cR(l(a.Y,a,a.g),a.P)),d=a.V,f=a.g,m=a.ba;var D="readystatechange";Array.isArray(D)||(D&&(lE[0]=D.toString()),D=lE);for(let b=0;b<D.length;b++){let k=iE(f,D[b],m||d.handleEvent,!1,d.h||d);if(!k)break;d.g[k.key]=k}d=a.J?tE(a.J):{},a.u?(a.v||(a.v="POST"),d["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.B,a.v,a.u,d)):(a.v="GET",a.g.ea(a.B,a.v,null,d)),As(),dR(a.i,a.v,a.B,a.l,a.S,a.u)}mr.prototype.ba=function(a){a=a.target;let d=this.O;d&&vr(a)==3?d.j():this.Y(a)},mr.prototype.Y=function(a){try{if(a==this.g)e:{let ie=vr(this.g),$e=this.g.ya(),be=this.g.ca();if(!(ie<3)&&(ie!=3||this.g&&(this.h.h||this.g.la()||$E(this.g)))){this.K||ie!=4||$e==7||($e==8||be<=0?As(3):As(2)),mf(this);var d=this.g.ca();this.X=d;var f=gR(this);if(this.o=d==200,hR(this.i,this.v,this.B,this.l,this.S,ie,d),this.o){if(this.U&&!this.L){t:{if(this.g){var m,D=this.g;if((m=D.g?D.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(m)){var b=m;break t}}b=null}if(a=b)oo(this.i,this.l,a,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,gf(this,a);else{this.o=!1,this.m=3,ht(12),oi(this),xs(this);break e}}if(this.R){a=!0;let Ke;for(;!this.K&&this.C<f.length;)if(Ke=yR(this,f),Ke==ff){ie==4&&(this.m=4,ht(14),a=!1),oo(this.i,this.l,null,"[Incomplete Response]");break}else if(Ke==IE){this.m=4,ht(15),oo(this.i,this.l,f,"[Invalid Chunk]"),a=!1;break}else oo(this.i,this.l,Ke,null),gf(this,Ke);if(TE(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ie!=4||f.length!=0||this.h.h||(this.m=1,ht(16),a=!1),this.o=this.o&&a,!a)oo(this.i,this.l,f,"[Invalid Chunked Response]"),oi(this),xs(this);else if(f.length>0&&!this.W){this.W=!0;var k=this.j;k.g==this&&k.aa&&!k.P&&(k.j.info("Great, no buffering proxy detected. Bytes received: "+f.length),Tf(k),k.P=!0,ht(11))}}else oo(this.i,this.l,f,null),gf(this,f);ie==4&&oi(this),this.o&&!this.K&&(ie==4?QE(this.j,this):(this.o=!1,zc(this)))}else MR(this.g),d==400&&f.indexOf("Unknown SID")>0?(this.m=3,ht(12)):(this.m=0,ht(13)),oi(this),xs(this)}}}catch{}finally{}};function gR(a){if(!TE(a))return a.g.la();let d=$E(a.g);if(d==="")return"";let f="",m=d.length,D=vr(a.g)==4;if(!a.h.i){if(typeof TextDecoder>"u")return oi(a),xs(a),"";a.h.i=new s.TextDecoder}for(let b=0;b<m;b++)a.h.h=!0,f+=a.h.i.decode(d[b],{stream:!(D&&b==m-1)});return d.length=0,a.h.g+=f,a.C=0,a.h.g}function TE(a){return a.g?a.v=="GET"&&a.M!=2&&a.j.Aa:!1}function yR(a,d){var f=a.C,m=d.indexOf(`
`,f);return m==-1?ff:(f=Number(d.substring(f,m)),isNaN(f)?IE:(m+=1,m+f>d.length?ff:(d=d.slice(m,m+f),a.C=m+f,d)))}mr.prototype.cancel=function(){this.K=!0,oi(this)};function zc(a){a.T=Date.now()+a.H,DE(a,a.H)}function DE(a,d){if(a.D!=null)throw Error("WatchDog timer not null");a.D=Rs(l(a.aa,a),d)}function mf(a){a.D&&(s.clearTimeout(a.D),a.D=null)}mr.prototype.aa=function(){this.D=null;let a=Date.now();a-this.T>=0?(fR(this.i,this.B),this.M!=2&&(As(),ht(17)),oi(this),this.m=2,xs(this)):DE(this,this.T-a)};function xs(a){a.j.I==0||a.K||QE(a.j,a)}function oi(a){mf(a);var d=a.O;d&&typeof d.dispose=="function"&&d.dispose(),a.O=null,dE(a.V),a.g&&(d=a.g,a.g=null,d.abort(),d.dispose())}function gf(a,d){try{var f=a.j;if(f.I!=0&&(f.g==a||yf(f.h,a))){if(!a.L&&yf(f.h,a)&&f.I==3){try{var m=f.Ba.g.parse(d)}catch{m=null}if(Array.isArray(m)&&m.length==3){var D=m;if(D[0]==0){e:if(!f.v){if(f.g)if(f.g.F+3e3<a.F)Jc(f),Qc(f);else break e;wf(f),ht(18)}}else f.xa=D[1],0<f.xa-f.K&&D[2]<37500&&f.F&&f.A==0&&!f.C&&(f.C=Rs(l(f.Va,f),6e3));SE(f.h)<=1&&f.ta&&(f.ta=void 0)}else ai(f,11)}else if((a.L||f.g==a)&&Jc(f),!_(d))for(D=f.Ba.g.parse(d),d=0;d<D.length;d++){let be=D[d],Ke=be[0];if(!(Ke<=f.K))if(f.K=Ke,be=be[1],f.I==2)if(be[0]=="c"){f.M=be[1],f.ba=be[2];let En=be[3];En!=null&&(f.ka=En,f.j.info("VER="+f.ka));let ci=be[4];ci!=null&&(f.za=ci,f.j.info("SVER="+f.za));let _r=be[5];_r!=null&&typeof _r=="number"&&_r>0&&(m=1.5*_r,f.O=m,f.j.info("backChannelRequestTimeoutMs_="+m)),m=f;let Er=a.g;if(Er){let Xc=Er.g?Er.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Xc){var b=m.h;b.g||Xc.indexOf("spdy")==-1&&Xc.indexOf("quic")==-1&&Xc.indexOf("h2")==-1||(b.j=b.l,b.g=new Set,b.h&&(vf(b,b.h),b.h=null))}if(m.G){let Df=Er.g?Er.g.getResponseHeader("X-HTTP-Session-Id"):null;Df&&(m.wa=Df,Se(m.J,m.G,Df))}}f.I=3,f.l&&f.l.ra(),f.aa&&(f.T=Date.now()-a.F,f.j.info("Handshake RTT: "+f.T+"ms")),m=f;var k=a;if(m.na=ZE(m,m.L?m.ba:null,m.W),k.L){AE(m.h,k);var ie=k,$e=m.O;$e&&(ie.H=$e),ie.D&&(mf(ie),zc(ie)),m.g=k}else WE(m);f.i.length>0&&Yc(f)}else be[0]!="stop"&&be[0]!="close"||ai(f,7);else f.I==3&&(be[0]=="stop"||be[0]=="close"?be[0]=="stop"?ai(f,7):If(f):be[0]!="noop"&&f.l&&f.l.qa(be),f.A=0)}}As(4)}catch{}}var vR=class{constructor(a,d){this.g=a,this.map=d}};function CE(a){this.l=a||10,s.PerformanceNavigationTiming?(a=s.performance.getEntriesByType("navigation"),a=a.length>0&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function bE(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function SE(a){return a.h?1:a.g?a.g.size:0}function yf(a,d){return a.h?a.h==d:a.g?a.g.has(d):!1}function vf(a,d){a.g?a.g.add(d):a.h=d}function AE(a,d){a.h&&a.h==d?a.h=null:a.g&&a.g.has(d)&&a.g.delete(d)}CE.prototype.cancel=function(){if(this.i=RE(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let a of this.g.values())a.cancel();this.g.clear()}};function RE(a){if(a.h!=null)return a.i.concat(a.h.G);if(a.g!=null&&a.g.size!==0){let d=a.i;for(let f of a.g.values())d=d.concat(f.G);return d}return y(a.i)}var NE=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function _R(a,d){if(a){a=a.split("&");for(let f=0;f<a.length;f++){let m=a[f].indexOf("="),D,b=null;m>=0?(D=a[f].substring(0,m),b=a[f].substring(m+1)):D=a[f],d(D,b?decodeURIComponent(b.replace(/\+/g," ")):"")}}}function gr(a){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let d;a instanceof gr?(this.l=a.l,Ps(this,a.j),this.o=a.o,this.g=a.g,Os(this,a.u),this.h=a.h,_f(this,LE(a.i)),this.m=a.m):a&&(d=String(a).match(NE))?(this.l=!1,Ps(this,d[1]||"",!0),this.o=ks(d[2]||""),this.g=ks(d[3]||"",!0),Os(this,d[4]),this.h=ks(d[5]||"",!0),_f(this,d[6]||"",!0),this.m=ks(d[7]||"")):(this.l=!1,this.i=new Fs(null,this.l))}gr.prototype.toString=function(){let a=[];var d=this.j;d&&a.push(Ls(d,ME,!0),":");var f=this.g;return(f||d=="file")&&(a.push("//"),(d=this.o)&&a.push(Ls(d,ME,!0),"@"),a.push(Ms(f).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.u,f!=null&&a.push(":",String(f))),(f=this.h)&&(this.g&&f.charAt(0)!="/"&&a.push("/"),a.push(Ls(f,f.charAt(0)=="/"?wR:IR,!0))),(f=this.i.toString())&&a.push("?",f),(f=this.m)&&a.push("#",Ls(f,DR)),a.join("")},gr.prototype.resolve=function(a){let d=_n(this),f=!!a.j;f?Ps(d,a.j):f=!!a.o,f?d.o=a.o:f=!!a.g,f?d.g=a.g:f=a.u!=null;var m=a.h;if(f)Os(d,a.u);else if(f=!!a.h){if(m.charAt(0)!="/")if(this.g&&!this.h)m="/"+m;else{var D=d.h.lastIndexOf("/");D!=-1&&(m=d.h.slice(0,D+1)+m)}if(D=m,D==".."||D==".")m="";else if(D.indexOf("./")!=-1||D.indexOf("/.")!=-1){m=D.lastIndexOf("/",0)==0,D=D.split("/");let b=[];for(let k=0;k<D.length;){let ie=D[k++];ie=="."?m&&k==D.length&&b.push(""):ie==".."?((b.length>1||b.length==1&&b[0]!="")&&b.pop(),m&&k==D.length&&b.push("")):(b.push(ie),m=!0)}m=b.join("/")}else m=D}return f?d.h=m:f=a.i.toString()!=="",f?_f(d,LE(a.i)):f=!!a.m,f&&(d.m=a.m),d};function _n(a){return new gr(a)}function Ps(a,d,f){a.j=f?ks(d,!0):d,a.j&&(a.j=a.j.replace(/:$/,""))}function Os(a,d){if(d){if(d=Number(d),isNaN(d)||d<0)throw Error("Bad port number "+d);a.u=d}else a.u=null}function _f(a,d,f){d instanceof Fs?(a.i=d,CR(a.i,a.l)):(f||(d=Ls(d,TR)),a.i=new Fs(d,a.l))}function Se(a,d,f){a.i.set(d,f)}function qc(a){return Se(a,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),a}function ks(a,d){return a?d?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Ls(a,d,f){return typeof a=="string"?(a=encodeURI(a).replace(d,ER),f&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function ER(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var ME=/[#\/\?@]/g,IR=/[#\?:]/g,wR=/[#\?]/g,TR=/[#\?@]/g,DR=/#/g;function Fs(a,d){this.h=this.g=null,this.i=a||null,this.j=!!d}function si(a){a.g||(a.g=new Map,a.h=0,a.i&&_R(a.i,function(d,f){a.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=Fs.prototype,t.add=function(a,d){si(this),this.i=null,a=so(this,a);let f=this.g.get(a);return f||this.g.set(a,f=[]),f.push(d),this.h+=1,this};function xE(a,d){si(a),d=so(a,d),a.g.has(d)&&(a.i=null,a.h-=a.g.get(d).length,a.g.delete(d))}function PE(a,d){return si(a),d=so(a,d),a.g.has(d)}t.forEach=function(a,d){si(this),this.g.forEach(function(f,m){f.forEach(function(D){a.call(d,D,m,this)},this)},this)};function OE(a,d){si(a);let f=[];if(typeof d=="string")PE(a,d)&&(f=f.concat(a.g.get(so(a,d))));else for(a=Array.from(a.g.values()),d=0;d<a.length;d++)f=f.concat(a[d]);return f}t.set=function(a,d){return si(this),this.i=null,a=so(this,a),PE(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[d]),this.h+=1,this},t.get=function(a,d){return a?(a=OE(this,a),a.length>0?String(a[0]):d):d};function kE(a,d,f){xE(a,d),f.length>0&&(a.i=null,a.g.set(so(a,d),y(f)),a.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let a=[],d=Array.from(this.g.keys());for(let m=0;m<d.length;m++){var f=d[m];let D=Ms(f);f=OE(this,f);for(let b=0;b<f.length;b++){let k=D;f[b]!==""&&(k+="="+Ms(f[b])),a.push(k)}}return this.i=a.join("&")};function LE(a){let d=new Fs;return d.i=a.i,a.g&&(d.g=new Map(a.g),d.h=a.h),d}function so(a,d){return d=String(d),a.j&&(d=d.toLowerCase()),d}function CR(a,d){d&&!a.j&&(si(a),a.i=null,a.g.forEach(function(f,m){let D=m.toLowerCase();m!=D&&(xE(this,m),kE(this,D,f))},a)),a.j=d}function bR(a,d){let f=new Ns;if(s.Image){let m=new Image;m.onload=h(yr,f,"TestLoadImage: loaded",!0,d,m),m.onerror=h(yr,f,"TestLoadImage: error",!1,d,m),m.onabort=h(yr,f,"TestLoadImage: abort",!1,d,m),m.ontimeout=h(yr,f,"TestLoadImage: timeout",!1,d,m),s.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=a}else d(!1)}function SR(a,d){let f=new Ns,m=new AbortController,D=setTimeout(()=>{m.abort(),yr(f,"TestPingServer: timeout",!1,d)},1e4);fetch(a,{signal:m.signal}).then(b=>{clearTimeout(D),b.ok?yr(f,"TestPingServer: ok",!0,d):yr(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(D),yr(f,"TestPingServer: error",!1,d)})}function yr(a,d,f,m,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),m(f)}catch{}}function AR(){this.g=new lR}function Gc(a){this.i=a.Sb||null,this.h=a.ab||!1}p(Gc,hE),Gc.prototype.g=function(){return new Wc(this.i,this.h)};function Wc(a,d){ot.call(this),this.H=a,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(Wc,ot),t=Wc.prototype,t.open=function(a,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=a,this.D=d,this.readyState=1,js(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;let d={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};a&&(d.body=a),(this.H||s).fetch(new Request(this.D,d)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Vs(this)),this.readyState=0},t.Pa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,js(this)),this.g&&(this.readyState=3,js(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof s.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;FE(this)}else a.text().then(this.Oa.bind(this),this.ga.bind(this))};function FE(a){a.j.read().then(a.Ma.bind(a)).catch(a.ga.bind(a))}t.Ma=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var d=a.value?a.value:new Uint8Array(0);(d=this.B.decode(d,{stream:!a.done}))&&(this.response=this.responseText+=d)}a.done?Vs(this):js(this),this.readyState==3&&FE(this)}},t.Oa=function(a){this.g&&(this.response=this.responseText=a,Vs(this))},t.Na=function(a){this.g&&(this.response=a,Vs(this))},t.ga=function(){this.g&&Vs(this)};function Vs(a){a.readyState=4,a.l=null,a.j=null,a.B=null,js(a)}t.setRequestHeader=function(a,d){this.A.append(a,d)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let a=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,a.push(f[0]+": "+f[1]),f=d.next();return a.join(`\r
`)};function js(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Wc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function VE(a){let d="";return jc(a,function(f,m){d+=m,d+=":",d+=f,d+=`\r
`}),d}function Ef(a,d,f){e:{for(m in f){var m=!1;break e}m=!0}m||(f=VE(f),typeof a=="string"?f!=null&&Ms(f):Se(a,d,f))}function xe(a){ot.call(this),this.headers=new Map,this.L=a||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(xe,ot);var RR=/^https?$/i,NR=["POST","PUT"];t=xe.prototype,t.Fa=function(a){this.H=a},t.ea=function(a,d,f,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);d=d?d.toUpperCase():"GET",this.D=a,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():_E.g(),this.g.onreadystatechange=g(l(this.Ca,this));try{this.B=!0,this.g.open(d,String(a),!0),this.B=!1}catch(b){jE(this,b);return}if(a=f||"",f=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var D in m)f.set(D,m[D]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(let b of m.keys())f.set(b,m.get(b));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(f.keys()).find(b=>b.toLowerCase()=="content-type"),D=s.FormData&&a instanceof s.FormData,!(Array.prototype.indexOf.call(NR,d,void 0)>=0)||m||D||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[b,k]of f)this.g.setRequestHeader(b,k);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(a),this.v=!1}catch(b){jE(this,b)}};function jE(a,d){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=d,a.o=5,UE(a),Kc(a)}function UE(a){a.A||(a.A=!0,dt(a,"complete"),dt(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=a||7,dt(this,"complete"),dt(this,"abort"),Kc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Kc(this,!0)),xe.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?BE(this):this.Xa())},t.Xa=function(){BE(this)};function BE(a){if(a.h&&typeof o<"u"){if(a.v&&vr(a)==4)setTimeout(a.Ca.bind(a),0);else if(dt(a,"readystatechange"),vr(a)==4){a.h=!1;try{let b=a.ca();e:switch(b){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var m;if(m=b===0){let k=String(a.D).match(NE)[1]||null;!k&&s.self&&s.self.location&&(k=s.self.location.protocol.slice(0,-1)),m=!RR.test(k?k.toLowerCase():"")}f=m}if(f)dt(a,"complete"),dt(a,"success");else{a.o=6;try{var D=vr(a)>2?a.g.statusText:""}catch{D=""}a.l=D+" ["+a.ca()+"]",UE(a)}}finally{Kc(a)}}}}function Kc(a,d){if(a.g){a.m&&(clearTimeout(a.m),a.m=null);let f=a.g;a.g=null,d||dt(a,"ready");try{f.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function vr(a){return a.g?a.g.readyState:0}t.ca=function(){try{return vr(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(a){if(this.g){var d=this.g.responseText;return a&&d.indexOf(a)==0&&(d=d.substring(a.length)),uR(d)}};function $E(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.F){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function MR(a){let d={};a=(a.g&&vr(a)>=2&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<a.length;m++){if(_(a[m]))continue;var f=mR(a[m]);let D=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let b=d[D]||[];d[D]=b,b.push(f)}iR(d,function(m){return m.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Us(a,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[a]||d}function HE(a){this.za=0,this.i=[],this.j=new Ns,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Us("failFast",!1,a),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Us("baseRetryDelayMs",5e3,a),this.Za=Us("retryDelaySeedMs",1e4,a),this.Ta=Us("forwardChannelMaxRetries",2,a),this.va=Us("forwardChannelRequestTimeoutMs",2e4,a),this.ma=a&&a.xmlHttpFactory||void 0,this.Ua=a&&a.Rb||void 0,this.Aa=a&&a.useFetchStreams||!1,this.O=void 0,this.L=a&&a.supportsCrossDomainXhr||!1,this.M="",this.h=new CE(a&&a.concurrentRequestLimit),this.Ba=new AR,this.S=a&&a.fastHandshake||!1,this.R=a&&a.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=a&&a.Pb||!1,a&&a.ua&&this.j.ua(),a&&a.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&a&&a.detectBufferingProxy||!1,this.ia=void 0,a&&a.longPollingTimeout&&a.longPollingTimeout>0&&(this.ia=a.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=HE.prototype,t.ka=8,t.I=1,t.connect=function(a,d,f,m){ht(0),this.W=a,this.H=d||{},f&&m!==void 0&&(this.H.OSID=f,this.H.OAID=m),this.F=this.X,this.J=ZE(this,null,this.W),Yc(this)};function If(a){if(zE(a),a.I==3){var d=a.V++,f=_n(a.J);if(Se(f,"SID",a.M),Se(f,"RID",d),Se(f,"TYPE","terminate"),Bs(a,f),d=new mr(a,a.j,d),d.M=2,d.A=qc(_n(f)),f=!1,s.navigator&&s.navigator.sendBeacon)try{f=s.navigator.sendBeacon(d.A.toString(),"")}catch{}!f&&s.Image&&(new Image().src=d.A,f=!0),f||(d.g=XE(d.j,null),d.g.ea(d.A)),d.F=Date.now(),zc(d)}JE(a)}function Qc(a){a.g&&(Tf(a),a.g.cancel(),a.g=null)}function zE(a){Qc(a),a.v&&(s.clearTimeout(a.v),a.v=null),Jc(a),a.h.cancel(),a.m&&(typeof a.m=="number"&&s.clearTimeout(a.m),a.m=null)}function Yc(a){if(!bE(a.h)&&!a.m){a.m=!0;var d=a.Ea;_t||v(),We||(_t(),We=!0),w.add(d,a),a.D=0}}function xR(a,d){return SE(a.h)>=a.h.j-(a.m?1:0)?!1:a.m?(a.i=d.G.concat(a.i),!0):a.I==1||a.I==2||a.D>=(a.Sa?0:a.Ta)?!1:(a.m=Rs(l(a.Ea,a,d),YE(a,a.D)),a.D++,!0)}t.Ea=function(a){if(this.m)if(this.m=null,this.I==1){if(!a){this.V=Math.floor(Math.random()*1e5),a=this.V++;let D=new mr(this,this.j,a),b=this.o;if(this.U&&(b?(b=tE(b),rE(b,this.U)):b=this.U),this.u!==null||this.R||(D.J=b,b=null),this.S)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var m=this.i[f];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(d+=m,d>4096){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=GE(this,D,d),f=_n(this.J),Se(f,"RID",a),Se(f,"CVER",22),this.G&&Se(f,"X-HTTP-Session-Id",this.G),Bs(this,f),b&&(this.R?d="headers="+Ms(VE(b))+"&"+d:this.u&&Ef(f,this.u,b)),vf(this.h,D),this.Ra&&Se(f,"TYPE","init"),this.S?(Se(f,"$req",d),Se(f,"SID","null"),D.U=!0,pf(D,f,null)):pf(D,f,d),this.I=2}}else this.I==3&&(a?qE(this,a):this.i.length==0||bE(this.h)||qE(this))};function qE(a,d){var f;d?f=d.l:f=a.V++;let m=_n(a.J);Se(m,"SID",a.M),Se(m,"RID",f),Se(m,"AID",a.K),Bs(a,m),a.u&&a.o&&Ef(m,a.u,a.o),f=new mr(a,a.j,f,a.D+1),a.u===null&&(f.J=a.o),d&&(a.i=d.G.concat(a.i)),d=GE(a,f,1e3),f.H=Math.round(a.va*.5)+Math.round(a.va*.5*Math.random()),vf(a.h,f),pf(f,m,d)}function Bs(a,d){a.H&&jc(a.H,function(f,m){Se(d,m,f)}),a.l&&jc({},function(f,m){Se(d,m,f)})}function GE(a,d,f){f=Math.min(a.i.length,f);let m=a.l?l(a.l.Ka,a.l,a):null;e:{var D=a.i;let ie=-1;for(;;){let $e=["count="+f];ie==-1?f>0?(ie=D[0].g,$e.push("ofs="+ie)):ie=0:$e.push("ofs="+ie);let be=!0;for(let Ke=0;Ke<f;Ke++){var b=D[Ke].g;let En=D[Ke].map;if(b-=ie,b<0)ie=Math.max(0,D[Ke].g-100),be=!1;else try{b="req"+b+"_"||"";try{var k=En instanceof Map?En:Object.entries(En);for(let[ci,_r]of k){let Er=_r;c(_r)&&(Er=uf(_r)),$e.push(b+ci+"="+encodeURIComponent(Er))}}catch(ci){throw $e.push(b+"type="+encodeURIComponent("_badmap")),ci}}catch{m&&m(En)}}if(be){k=$e.join("&");break e}}k=void 0}return a=a.i.splice(0,f),d.G=a,k}function WE(a){if(!a.g&&!a.v){a.Y=1;var d=a.Da;_t||v(),We||(_t(),We=!0),w.add(d,a),a.A=0}}function wf(a){return a.g||a.v||a.A>=3?!1:(a.Y++,a.v=Rs(l(a.Da,a),YE(a,a.A)),a.A++,!0)}t.Da=function(){if(this.v=null,KE(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var a=4*this.T;this.j.info("BP detection timer enabled: "+a),this.B=Rs(l(this.Wa,this),a)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,ht(10),Qc(this),KE(this))};function Tf(a){a.B!=null&&(s.clearTimeout(a.B),a.B=null)}function KE(a){a.g=new mr(a,a.j,"rpc",a.Y),a.u===null&&(a.g.J=a.o),a.g.P=0;var d=_n(a.na);Se(d,"RID","rpc"),Se(d,"SID",a.M),Se(d,"AID",a.K),Se(d,"CI",a.F?"0":"1"),!a.F&&a.ia&&Se(d,"TO",a.ia),Se(d,"TYPE","xmlhttp"),Bs(a,d),a.u&&a.o&&Ef(d,a.u,a.o),a.O&&(a.g.H=a.O);var f=a.g;a=a.ba,f.M=1,f.A=qc(_n(d)),f.u=null,f.R=!0,wE(f,a)}t.Va=function(){this.C!=null&&(this.C=null,Qc(this),wf(this),ht(19))};function Jc(a){a.C!=null&&(s.clearTimeout(a.C),a.C=null)}function QE(a,d){var f=null;if(a.g==d){Jc(a),Tf(a),a.g=null;var m=2}else if(yf(a.h,d))f=d.G,AE(a.h,d),m=1;else return;if(a.I!=0){if(d.o)if(m==1){f=d.u?d.u.length:0,d=Date.now()-d.F;var D=a.D;m=$c(),dt(m,new yE(m,f)),Yc(a)}else WE(a);else if(D=d.m,D==3||D==0&&d.X>0||!(m==1&&xR(a,d)||m==2&&wf(a)))switch(f&&f.length>0&&(d=a.h,d.i=d.i.concat(f)),D){case 1:ai(a,5);break;case 4:ai(a,10);break;case 3:ai(a,6);break;default:ai(a,2)}}}function YE(a,d){let f=a.Qa+Math.floor(Math.random()*a.Za);return a.isActive()||(f*=2),f*d}function ai(a,d){if(a.j.info("Error code "+d),d==2){var f=l(a.bb,a),m=a.Ua;let D=!m;m=new gr(m||"//www.google.com/images/cleardot.gif"),s.location&&s.location.protocol=="http"||Ps(m,"https"),qc(m),D?bR(m.toString(),f):SR(m.toString(),f)}else ht(2);a.I=0,a.l&&a.l.pa(d),JE(a),zE(a)}t.bb=function(a){a?(this.j.info("Successfully pinged google.com"),ht(2)):(this.j.info("Failed to ping google.com"),ht(1))};function JE(a){if(a.I=0,a.ja=[],a.l){let d=RE(a.h);(d.length!=0||a.i.length!=0)&&(S(a.ja,d),S(a.ja,a.i),a.h.i.length=0,y(a.i),a.i.length=0),a.l.oa()}}function ZE(a,d,f){var m=f instanceof gr?_n(f):new gr(f);if(m.g!="")d&&(m.g=d+"."+m.g),Os(m,m.u);else{var D=s.location;m=D.protocol,d=d?d+"."+D.hostname:D.hostname,D=+D.port;let b=new gr(null);m&&Ps(b,m),d&&(b.g=d),D&&Os(b,D),f&&(b.h=f),m=b}return f=a.G,d=a.wa,f&&d&&Se(m,f,d),Se(m,"VER",a.ka),Bs(a,m),m}function XE(a,d,f){if(d&&!a.L)throw Error("Can't create secondary domain capable XhrIo object.");return d=a.Aa&&!a.ma?new xe(new Gc({ab:f})):new xe(a.ma),d.Fa(a.L),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function eI(){}t=eI.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Zc(){}Zc.prototype.g=function(a,d){return new bt(a,d)};function bt(a,d){ot.call(this),this.g=new HE(d),this.l=a,this.h=d&&d.messageUrlParams||null,a=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(a?a["X-WebChannel-Content-Type"]=d.messageContentType:a={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.sa&&(a?a["X-WebChannel-Client-Profile"]=d.sa:a={"X-WebChannel-Client-Profile":d.sa}),this.g.U=a,(a=d&&d.Qb)&&!_(a)&&(this.g.u=a),this.A=d&&d.supportsCrossDomainXhr||!1,this.v=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!_(d)&&(this.g.G=d,a=this.h,a!==null&&d in a&&(a=this.h,d in a&&delete a[d])),this.j=new ao(this)}p(bt,ot),bt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},bt.prototype.close=function(){If(this.g)},bt.prototype.o=function(a){var d=this.g;if(typeof a=="string"){var f={};f.__data__=a,a=f}else this.v&&(f={},f.__data__=uf(a),a=f);d.i.push(new vR(d.Ya++,a)),d.I==3&&Yc(d)},bt.prototype.N=function(){this.g.l=null,delete this.j,If(this.g),delete this.g,bt.Z.N.call(this)};function tI(a){lf.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var d=a.__sm__;if(d){e:{for(let f in d){a=f;break e}a=void 0}(this.i=a)&&(a=this.i,d=d!==null&&a in d?d[a]:void 0),this.data=d}else this.data=a}p(tI,lf);function nI(){df.call(this),this.status=1}p(nI,df);function ao(a){this.g=a}p(ao,eI),ao.prototype.ra=function(){dt(this.g,"a")},ao.prototype.qa=function(a){dt(this.g,new tI(a))},ao.prototype.pa=function(a){dt(this.g,new nI)},ao.prototype.oa=function(){dt(this.g,"b")},Zc.prototype.createWebChannel=Zc.prototype.g,bt.prototype.send=bt.prototype.o,bt.prototype.open=bt.prototype.m,bt.prototype.close=bt.prototype.close,Uy=sr.createWebChannelTransport=function(){return new Zc},jy=sr.getStatEventTarget=function(){return $c()},Vy=sr.Event=ii,Zd=sr.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Hc.NO_ERROR=0,Hc.TIMEOUT=8,Hc.HTTP_ERROR=6,lc=sr.ErrorCode=Hc,vE.COMPLETE="complete",Fy=sr.EventType=vE,fE.EventType=Ss,Ss.OPEN="a",Ss.CLOSE="b",Ss.ERROR="c",Ss.MESSAGE="d",ot.prototype.listen=ot.prototype.J,Yo=sr.WebChannel=fE,GV=sr.FetchXmlHttpFactory=Gc,xe.prototype.listenOnce=xe.prototype.K,xe.prototype.getLastError=xe.prototype.Ha,xe.prototype.getLastErrorCode=xe.prototype.ya,xe.prototype.getStatus=xe.prototype.ca,xe.prototype.getResponseJson=xe.prototype.La,xe.prototype.getResponseText=xe.prototype.la,xe.prototype.send=xe.prototype.ea,xe.prototype.setWithCredentials=xe.prototype.Fa,Ly=sr.XhrIo=xe}).apply(typeof Jd<"u"?Jd:typeof self<"u"?self:typeof window<"u"?window:{});var MS="@firebase/firestore",xS="4.9.3";var et=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};et.UNAUTHENTICATED=new et(null),et.GOOGLE_CREDENTIALS=new et("google-credentials-uid"),et.FIRST_PARTY=new et("first-party-uid"),et.MOCK_USER=new et("mock-user");var Es="12.7.0";var Ji=new Ur("@firebase/firestore");function Jo(){return Ji.logLevel}function V(t,...e){if(Ji.logLevel<=ue.DEBUG){let n=e.map(N_);Ji.debug(`Firestore (${Es}): ${t}`,...n)}}function ur(t,...e){if(Ji.logLevel<=ue.ERROR){let n=e.map(N_);Ji.error(`Firestore (${Es}): ${t}`,...n)}}function os(t,...e){if(Ji.logLevel<=ue.WARN){let n=e.map(N_);Ji.warn(`Firestore (${Es}): ${t}`,...n)}}function N_(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function H(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,v0(t,r,n)}function v0(t,e,n){let r=`FIRESTORE (${Es}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw ur(r),new Error(r)}function ve(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||v0(e,i,r)}function Z(t,e){return t}var N={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},j=class extends kt{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var vn=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var oh=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},qy=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(et.UNAUTHENTICATED))}shutdown(){}},Gy=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},Wy=class{constructor(e){this.t=e,this.currentUser=et.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ve(this.o===void 0,42304);let r=this.i,i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve(),o=new vn;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new vn,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},c=u=>{V("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?c(u):(V("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new vn)}},0),s()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(V("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ve(typeof r.accessToken=="string",31837,{l:r}),new oh(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return ve(e===null||typeof e=="string",2055,{h:e}),new et(e)}},Ky=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=et.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},Qy=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new Ky(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(et.FIRST_PARTY))}shutdown(){}invalidateToken(){}},sh=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Yy=class{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Lt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ve(this.o===void 0,3512);let r=o=>{o.error!=null&&V("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,V("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{V("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):V("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new sh(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ve(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new sh(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function WV(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var vc=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=WV(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%62))}return r}};function de(t,e){return t<e?-1:t>e?1:0}function Jy(t,e){let n=Math.min(t.length,e.length);for(let r=0;r<n;r++){let i=t.charAt(r),o=e.charAt(r);if(i!==o)return By(i)===By(o)?de(i,o):By(i)?1:-1}return de(t.length,e.length)}var KV=55296,QV=57343;function By(t){let e=t.charCodeAt(0);return e>=KV&&e<=QV}function ss(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var PS="__name__",ah=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&H(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&H(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let o=t.compareSegments(e.get(i),n.get(i));if(o!==0)return o}return de(e.length,n.length)}static compareSegments(e,n){let r=t.isNumericId(e),i=t.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?t.extractNumericId(e).compare(t.extractNumericId(n)):Jy(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return or.fromString(e.substring(4,e.length-2))}},Me=class t extends ah{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new j(N.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},YV=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Ft=class t extends ah{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return YV.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===PS}static keyField(){return new t([PS])}static fromServerFormat(e){let n=[],r="",i=0,o=()=>{if(r.length===0)throw new j(N.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},s=!1;for(;i<e.length;){let c=e[i];if(c==="\\"){if(i+1===e.length)throw new j(N.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new j(N.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else c==="`"?(s=!s,i++):c!=="."||s?(r+=c,i++):(o(),i++)}if(o(),s)throw new j(N.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var q=class t{constructor(e){this.path=e}static fromPath(e){return new t(Me.fromString(e))}static fromName(e){return new t(Me.fromString(e).popFirst(5))}static empty(){return new t(Me.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Me.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Me.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Me(e.slice()))}};function JV(t,e,n){if(!n)throw new j(N.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function ZV(t,e,n,r){if(e===!0&&r===!0)throw new j(N.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function OS(t){if(!q.isDocumentKey(t))throw new j(N.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function _0(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function M_(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":H(12329,{type:typeof t})}function ar(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new j(N.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=M_(t);throw new j(N.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function Ue(t,e){let n={typeString:t};return e&&(n.value=e),n}function xc(t,e){if(!_0(t))throw new j(N.INVALID_ARGUMENT,"JSON must be an object");let n;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}let s=t[r];if(i&&typeof s!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){n=`Expected '${r}' field to equal '${o.value}'`;break}}if(n)throw new j(N.INVALID_ARGUMENT,n);return!0}var kS=-62135596800,LS=1e6,Be=class t{static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*LS);return new t(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new j(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new j(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<kS)throw new j(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new j(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/LS}_compareTo(e){return this.seconds===e.seconds?de(this.nanoseconds,e.nanoseconds):de(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:t._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(xc(e,t._jsonSchema))return new t(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-kS;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};Be._jsonSchemaVersion="firestore/timestamp/1.0",Be._jsonSchema={type:Ue("string",Be._jsonSchemaVersion),seconds:Ue("number"),nanoseconds:Ue("number")};var Q=class t{static fromTimestamp(e){return new t(e)}static min(){return new t(new Be(0,0))}static max(){return new t(new Be(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var _c=-1,Zy=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};Zy.UNKNOWN_ID=-1;function XV(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Q.fromTimestamp(r===1e9?new Be(n+1,0):new Be(n,r));return new Zi(i,q.empty(),e)}function e2(t){return new Zi(t.readTime,t.key,_c)}var Zi=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(Q.min(),q.empty(),_c)}static max(){return new t(Q.max(),q.empty(),_c)}};function t2(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=q.comparator(t.documentKey,e.documentKey),n!==0?n:de(t.largestBatchId,e.largestBatchId))}var n2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Xy=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};async function Is(t){if(t.code!==N.FAILED_PRECONDITION||t.message!==n2)throw t;V("LocalStore","Unexpectedly lost primary lease")}var x=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&H(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,o=0,s=!1;e.forEach(c=>{++i,c.next(()=>{++o,s&&o===i&&n()},u=>r(u))}),s=!0,o===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let o=e.length,s=new Array(o),c=0;for(let u=0;u<o;u++){let l=u;n(e[l]).next(h=>{s[l]=h,++c,c===o&&r(s)},h=>i(h))}})}static doWhile(e,n){return new t((r,i)=>{let o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}};function r2(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ws(t){return t.name==="IndexedDbTransactionError"}var x_=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>r.writeSequenceNumber(i))}ae(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.ue&&this.ue(n),n}}t.ce=-1;return t})(),P_=-1;function Pc(t){return t==null}function Ec(t){return t===0&&1/t==-1/0}function i2(t){return typeof t=="number"&&Number.isInteger(t)&&!Ec(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var E0="";function o2(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=FS(e)),e=s2(t.get(n),e);return FS(e)}function s2(t,e){let n=e,r=t.length;for(let i=0;i<r;i++){let o=t.charAt(i);switch(o){case"\0":n+="";break;case E0:n+="";break;default:n+=o}}return n}function FS(t){return t+E0+""}var a2="remoteDocuments",I0="owner";var w0="mutationQueues";var T0="mutations";var D0="documentMutations",c2="remoteDocumentsV14";var C0="remoteDocumentGlobal";var b0="targets";var S0="targetDocuments";var A0="targetGlobal",R0="collectionParents";var N0="clientMetadata";var M0="bundles";var x0="namedQueries";var u2="indexConfiguration";var l2="indexState";var d2="indexEntries";var P0="documentOverlays";var h2="globals";var f2=[w0,T0,D0,a2,b0,I0,A0,S0,N0,C0,R0,M0,x0],_X=[...f2,P0],p2=[w0,T0,D0,c2,b0,I0,A0,S0,N0,C0,R0,M0,x0,P0],m2=p2,g2=[...m2,u2,l2,d2];var EX=[...g2,h2];function VS(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ri(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function O0(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Oe=class t{constructor(e,n){this.comparator=e,this.root=n||Ln.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ln.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ln.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ts(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ts(this.root,e,this.comparator,!1)}getReverseIterator(){return new ts(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ts(this.root,e,this.comparator,!0)}},ts=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Ln=class t{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new t(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw H(43730,{key:this.key,value:this.value});if(this.right.isRed())throw H(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw H(27949);return e+(this.isRed()?0:1)}};Ln.EMPTY=null,Ln.RED=!0,Ln.BLACK=!1;Ln.EMPTY=new class{constructor(){this.size=0}get key(){throw H(57766)}get value(){throw H(16141)}get color(){throw H(16727)}get left(){throw H(29726)}get right(){throw H(36894)}copy(e,n,r,i,o){return this}insert(e,n,r){return new Ln(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var tt=class t{constructor(e){this.comparator=e,this.data=new Oe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new ch(this.data.getIterator())}getIteratorFrom(e){return new ch(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},ch=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Zt=class t{constructor(e){this.fields=e,e.sort(Ft.comparator)}static empty(){return new t([])}unionWith(e){let n=new tt(Ft.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ss(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var uh=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var ut=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new uh("Invalid base64 string: "+o):o}})(e);return new t(n)}static fromUint8Array(e){let n=(function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o})(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return de(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};ut.EMPTY_BYTE_STRING=new ut("");var y2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function lr(t){if(ve(!!t,39018),typeof t=="string"){let e=0,n=y2.exec(t);if(ve(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ne(t.seconds),nanos:Ne(t.nanos)}}function Ne(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function dr(t){return typeof t=="string"?ut.fromBase64String(t):ut.fromUint8Array(t)}var k0="server_timestamp",L0="__type__",F0="__previous_value__",V0="__local_write_time__";function O_(t){return(t?.mapValue?.fields||{})[L0]?.stringValue===k0}function Uh(t){let e=t.mapValue.fields[F0];return O_(e)?Uh(e):e}function Ic(t){let e=lr(t.mapValue.fields[V0].timestampValue);return new Be(e.seconds,e.nanos)}var ev=class{constructor(e,n,r,i,o,s,c,u,l,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=l,this.isUsingEmulator=h}},lh="(default)",dh=class t{constructor(e,n){this.projectId=e,this.database=n||lh}static empty(){return new t("","")}get isDefaultDatabase(){return this.database===lh}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var k_="__type__",j0="__max__",Xd={mapValue:{fields:{__type__:{stringValue:j0}}}},L_="__vector__",as="value";function Xr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?O_(t)?4:B0(t)?9007199254740991:U0(t)?10:11:H(28295,{value:t})}function Vn(t,e){if(t===e)return!0;let n=Xr(t);if(n!==Xr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ic(t).isEqual(Ic(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=lr(i.timestampValue),c=lr(o.timestampValue);return s.seconds===c.seconds&&s.nanos===c.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,o){return dr(i.bytesValue).isEqual(dr(o.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,o){return Ne(i.geoPointValue.latitude)===Ne(o.geoPointValue.latitude)&&Ne(i.geoPointValue.longitude)===Ne(o.geoPointValue.longitude)})(t,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return Ne(i.integerValue)===Ne(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Ne(i.doubleValue),c=Ne(o.doubleValue);return s===c?Ec(s)===Ec(c):isNaN(s)&&isNaN(c)}return!1})(t,e);case 9:return ss(t.arrayValue.values||[],e.arrayValue.values||[],Vn);case 10:case 11:return(function(i,o){let s=i.mapValue.fields||{},c=o.mapValue.fields||{};if(VS(s)!==VS(c))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(c[u]===void 0||!Vn(s[u],c[u])))return!1;return!0})(t,e);default:return H(52216,{left:t})}}function wc(t,e){return(t.values||[]).find(n=>Vn(n,e))!==void 0}function cs(t,e){if(t===e)return 0;let n=Xr(t),r=Xr(e);if(n!==r)return de(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return de(t.booleanValue,e.booleanValue);case 2:return(function(o,s){let c=Ne(o.integerValue||o.doubleValue),u=Ne(s.integerValue||s.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1})(t,e);case 3:return jS(t.timestampValue,e.timestampValue);case 4:return jS(Ic(t),Ic(e));case 5:return Jy(t.stringValue,e.stringValue);case 6:return(function(o,s){let c=dr(o),u=dr(s);return c.compareTo(u)})(t.bytesValue,e.bytesValue);case 7:return(function(o,s){let c=o.split("/"),u=s.split("/");for(let l=0;l<c.length&&l<u.length;l++){let h=de(c[l],u[l]);if(h!==0)return h}return de(c.length,u.length)})(t.referenceValue,e.referenceValue);case 8:return(function(o,s){let c=de(Ne(o.latitude),Ne(s.latitude));return c!==0?c:de(Ne(o.longitude),Ne(s.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return US(t.arrayValue,e.arrayValue);case 10:return(function(o,s){let c=o.fields||{},u=s.fields||{},l=c[as]?.arrayValue,h=u[as]?.arrayValue,p=de(l?.values?.length||0,h?.values?.length||0);return p!==0?p:US(l,h)})(t.mapValue,e.mapValue);case 11:return(function(o,s){if(o===Xd.mapValue&&s===Xd.mapValue)return 0;if(o===Xd.mapValue)return 1;if(s===Xd.mapValue)return-1;let c=o.fields||{},u=Object.keys(c),l=s.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let g=Jy(u[p],h[p]);if(g!==0)return g;let y=cs(c[u[p]],l[h[p]]);if(y!==0)return y}return de(u.length,h.length)})(t.mapValue,e.mapValue);default:throw H(23264,{he:n})}}function jS(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return de(t,e);let n=lr(t),r=lr(e),i=de(n.seconds,r.seconds);return i!==0?i:de(n.nanos,r.nanos)}function US(t,e){let n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){let o=cs(n[i],r[i]);if(o)return o}return de(n.length,r.length)}function us(t){return tv(t)}function tv(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){let r=lr(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return dr(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return q.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",i=!0;for(let o of n.values||[])i?i=!1:r+=",",r+=tv(o);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){let r=Object.keys(n.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${tv(n.fields[s])}`;return i+"}"})(t.mapValue):H(61005,{value:t})}function nh(t){switch(Xr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=Uh(t);return e?16+nh(e):16;case 5:return 2*t.stringValue.length;case 6:return dr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,o)=>i+nh(o),0)})(t.arrayValue);case 10:case 11:return(function(r){let i=0;return ri(r.fields,(o,s)=>{i+=o.length+nh(s)}),i})(t.mapValue);default:throw H(13486,{value:t})}}function nv(t){return!!t&&"integerValue"in t}function F_(t){return!!t&&"arrayValue"in t}function BS(t){return!!t&&"nullValue"in t}function $S(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function rh(t){return!!t&&"mapValue"in t}function U0(t){return(t?.mapValue?.fields||{})[k_]?.stringValue===L_}function fc(t){if(t.geoPointValue)return{geoPointValue:P({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:P({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return ri(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=fc(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=fc(t.arrayValue.values[n]);return e}return P({},t)}function B0(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===j0}var wX={mapValue:{fields:{[k_]:{stringValue:L_},[as]:{arrayValue:{}}}}};var Ct=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!rh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=fc(n)}setAll(e){let n=Ft.emptyPath(),r={},i=[];e.forEach((s,c)=>{if(!n.isImmediateParentOf(c)){let u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=c.popLast()}s?r[c.lastSegment()]=fc(s):i.push(c.lastSegment())});let o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){let n=this.field(e.popLast());rh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Vn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];rh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){ri(n,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new t(fc(this.value))}};function $0(t){let e=[];return ri(t.fields,(n,r)=>{let i=new Ft([n]);if(rh(r)){let o=$0(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Zt(e)}var jt=class t{constructor(e,n,r,i,o,s,c){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=c}static newInvalidDocument(e){return new t(e,0,Q.min(),Q.min(),Q.min(),Ct.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,Q.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,Q.min(),Q.min(),Ct.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,Q.min(),Q.min(),Ct.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Q.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ct.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ct.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Q.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var ls=class{constructor(e,n){this.position=e,this.inclusive=n}};function HS(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let o=e[i],s=t.position[i];if(o.field.isKeyField()?r=q.comparator(q.fromName(s.referenceValue),n.key):r=cs(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function zS(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Vn(t.position[n],e.position[n]))return!1;return!0}var ds=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function v2(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var hh=class{},Ge=class t extends hh{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new iv(e,n,r):n==="array-contains"?new av(e,r):n==="in"?new cv(e,r):n==="not-in"?new uv(e,r):n==="array-contains-any"?new lv(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new ov(e,r):new sv(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(cs(n,this.value)):n!==null&&Xr(this.value)===Xr(n)&&this.matchesComparison(cs(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return H(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},jn=class t extends hh{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new t(e,n)}matches(e){return H0(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}};function H0(t){return t.op==="and"}function z0(t){return _2(t)&&H0(t)}function _2(t){for(let e of t.filters)if(e instanceof jn)return!1;return!0}function rv(t){if(t instanceof Ge)return t.field.canonicalString()+t.op.toString()+us(t.value);if(z0(t))return t.filters.map(e=>rv(e)).join(",");{let e=t.filters.map(n=>rv(n)).join(",");return`${t.op}(${e})`}}function q0(t,e){return t instanceof Ge?(function(r,i){return i instanceof Ge&&r.op===i.op&&r.field.isEqual(i.field)&&Vn(r.value,i.value)})(t,e):t instanceof jn?(function(r,i){return i instanceof jn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,c)=>o&&q0(s,i.filters[c]),!0):!1})(t,e):void H(19439)}function G0(t){return t instanceof Ge?(function(n){return`${n.field.canonicalString()} ${n.op} ${us(n.value)}`})(t):t instanceof jn?(function(n){return n.op.toString()+" {"+n.getFilters().map(G0).join(" ,")+"}"})(t):"Filter"}var iv=class extends Ge{constructor(e,n,r){super(e,n,r),this.key=q.fromName(r.referenceValue)}matches(e){let n=q.comparator(e.key,this.key);return this.matchesComparison(n)}},ov=class extends Ge{constructor(e,n){super(e,"in",n),this.keys=W0("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},sv=class extends Ge{constructor(e,n){super(e,"not-in",n),this.keys=W0("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function W0(t,e){return(e.arrayValue?.values||[]).map(n=>q.fromName(n.referenceValue))}var av=class extends Ge{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return F_(n)&&wc(n.arrayValue,this.value)}},cv=class extends Ge{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&wc(this.value.arrayValue,n)}},uv=class extends Ge{constructor(e,n){super(e,"not-in",n)}matches(e){if(wc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!wc(this.value.arrayValue,n)}},lv=class extends Ge{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!F_(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>wc(this.value.arrayValue,r))}};var dv=class{constructor(e,n=null,r=[],i=[],o=null,s=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=c,this.Te=null}};function qS(t,e=null,n=[],r=[],i=null,o=null,s=null){return new dv(t,e,n,r,i,o,s)}function V_(t){let e=Z(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>rv(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>(function(o){return o.field.canonicalString()+o.dir})(r)).join(","),Pc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>us(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>us(r)).join(",")),e.Te=n}return e.Te}function j_(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!v2(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!q0(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!zS(t.startAt,e.startAt)&&zS(t.endAt,e.endAt)}function hv(t){return q.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var hs=class{constructor(e,n=null,r=[],i=[],o=null,s="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=c,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}};function E2(t,e,n,r,i,o,s,c){return new hs(t,e,n,r,i,o,s,c)}function Bh(t){return new hs(t)}function GS(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function I2(t){return t.collectionGroup!==null}function pc(t){let e=Z(t);if(e.Ie===null){e.Ie=[];let n=new Set;for(let o of e.explicitOrderBy)e.Ie.push(o),n.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let c=new tt(Ft.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(c=c.add(l.field))})}),c})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new ds(o,r))}),n.has(Ft.keyField().canonicalString())||e.Ie.push(new ds(Ft.keyField(),r))}return e.Ie}function Fn(t){let e=Z(t);return e.Ee||(e.Ee=w2(e,pc(t))),e.Ee}function w2(t,e){if(t.limitType==="F")return qS(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new ds(i.field,o)});let n=t.endAt?new ls(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new ls(t.startAt.position,t.startAt.inclusive):null;return qS(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function fv(t,e,n){return new hs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function $h(t,e){return j_(Fn(t),Fn(e))&&t.limitType===e.limitType}function K0(t){return`${V_(Fn(t))}|lt:${t.limitType}`}function Zo(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>G0(i)).join(", ")}]`),Pc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>us(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>us(i)).join(",")),`Target(${r})`})(Fn(t))}; limitType=${t.limitType})`}function Hh(t,e){return e.isFoundDocument()&&(function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):q.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(t,e)&&(function(r,i){for(let o of pc(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(t,e)&&(function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0})(t,e)&&(function(r,i){return!(r.startAt&&!(function(s,c,u){let l=HS(s,c,u);return s.inclusive?l<=0:l<0})(r.startAt,pc(r),i)||r.endAt&&!(function(s,c,u){let l=HS(s,c,u);return s.inclusive?l>=0:l>0})(r.endAt,pc(r),i))})(t,e)}function T2(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Q0(t){return(e,n)=>{let r=!1;for(let i of pc(t)){let o=D2(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function D2(t,e,n){let r=t.field.isKeyField()?q.comparator(e.key,n.key):(function(o,s,c){let u=s.data.field(o),l=c.data.field(o);return u!==null&&l!==null?cs(u,l):H(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return H(19790,{direction:t.dir})}}var hr=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ri(this.inner,(n,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return O0(this.inner)}size(){return this.innerSize}};var C2=new Oe(q.comparator);function fr(){return C2}var Y0=new Oe(q.comparator);function dc(...t){let e=Y0;for(let n of t)e=e.insert(n.key,n);return e}function J0(t){let e=Y0;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Qi(){return mc()}function Z0(){return mc()}function mc(){return new hr(t=>t.toString(),(t,e)=>t.isEqual(e))}var b2=new Oe(q.comparator),S2=new tt(q.comparator);function he(...t){let e=S2;for(let n of t)e=e.add(n);return e}var A2=new tt(de);function R2(){return A2}function U_(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ec(e)?"-0":e}}function X0(t){return{integerValue:""+t}}function N2(t,e){return i2(e)?X0(e):U_(t,e)}var fs=class{constructor(){this._=void 0}};function M2(t,e,n){return t instanceof Xi?(function(i,o){let s={fields:{[L0]:{stringValue:k0},[V0]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&O_(o)&&(o=Uh(o)),o&&(s.fields[F0]=o),{mapValue:s}})(n,e):t instanceof eo?tA(t,e):t instanceof to?nA(t,e):(function(i,o){let s=eA(i,o),c=WS(s)+WS(i.Ae);return nv(s)&&nv(i.Ae)?X0(c):U_(i.serializer,c)})(t,e)}function x2(t,e,n){return t instanceof eo?tA(t,e):t instanceof to?nA(t,e):n}function eA(t,e){return t instanceof ps?(function(r){return nv(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}var Xi=class extends fs{},eo=class extends fs{constructor(e){super(),this.elements=e}};function tA(t,e){let n=rA(e);for(let r of t.elements)n.some(i=>Vn(i,r))||n.push(r);return{arrayValue:{values:n}}}var to=class extends fs{constructor(e){super(),this.elements=e}};function nA(t,e){let n=rA(e);for(let r of t.elements)n=n.filter(i=>!Vn(i,r));return{arrayValue:{values:n}}}var ps=class extends fs{constructor(e,n){super(),this.serializer=e,this.Ae=n}};function WS(t){return Ne(t.integerValue||t.doubleValue)}function rA(t){return F_(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var pv=class{constructor(e,n){this.field=e,this.transform=n}};function P2(t,e){return t.field.isEqual(e.field)&&(function(r,i){return r instanceof eo&&i instanceof eo||r instanceof to&&i instanceof to?ss(r.elements,i.elements,Vn):r instanceof ps&&i instanceof ps?Vn(r.Ae,i.Ae):r instanceof Xi&&i instanceof Xi})(t.transform,e.transform)}var mv=class{constructor(e,n){this.version=e,this.transformResults=n}},Jt=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function ih(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var ms=class{};function iA(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Tc(t.key,Jt.none()):new no(t.key,t.data,Jt.none());{let n=t.data,r=Ct.empty(),i=new tt(Ft.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Un(t.key,r,new Zt(i.toArray()),Jt.none())}}function O2(t,e,n){t instanceof no?(function(i,o,s){let c=i.value.clone(),u=QS(i.fieldTransforms,o,s.transformResults);c.setAll(u),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()})(t,e,n):t instanceof Un?(function(i,o,s){if(!ih(i.precondition,o))return void o.convertToUnknownDocument(s.version);let c=QS(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(oA(i)),u.setAll(c),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()})(t,e,n):(function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,n)}function gc(t,e,n,r){return t instanceof no?(function(o,s,c,u){if(!ih(o.precondition,s))return c;let l=o.value.clone(),h=YS(o.fieldTransforms,u,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null})(t,e,n,r):t instanceof Un?(function(o,s,c,u){if(!ih(o.precondition,s))return c;let l=YS(o.fieldTransforms,u,s),h=s.data;return h.setAll(oA(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))})(t,e,n,r):(function(o,s,c){return ih(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):c})(t,e,n)}function k2(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),o=eA(r.transform,i||null);o!=null&&(n===null&&(n=Ct.empty()),n.set(r.field,o))}return n||null}function KS(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ss(r,i,(o,s)=>P2(o,s))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var no=class extends ms{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Un=class extends ms{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function oA(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function QS(t,e,n){let r=new Map;ve(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){let o=t[i],s=o.transform,c=e.data.field(o.field);r.set(o.field,x2(s,c,n[i]))}return r}function YS(t,e,n){let r=new Map;for(let i of t){let o=i.transform,s=n.data.field(i.field);r.set(i.field,M2(o,s,e))}return r}var Tc=class extends ms{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},fh=class extends ms{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var gv=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&O2(o,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=gc(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=gc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=Z0();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,c=this.applyToLocalView(s,o.mutatedFields);c=n.has(i.key)?null:c;let u=iA(s,c);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(Q.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),he())}isEqual(e){return this.batchId===e.batchId&&ss(this.mutations,e.mutations,(n,r)=>KS(n,r))&&ss(this.baseMutations,e.baseMutations,(n,r)=>KS(n,r))}},yv=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){ve(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return b2})(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)}};var vv=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var _v=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var Ve,ye;function sA(t){switch(t){case N.OK:return H(64938);case N.CANCELLED:case N.UNKNOWN:case N.DEADLINE_EXCEEDED:case N.RESOURCE_EXHAUSTED:case N.INTERNAL:case N.UNAVAILABLE:case N.UNAUTHENTICATED:return!1;case N.INVALID_ARGUMENT:case N.NOT_FOUND:case N.ALREADY_EXISTS:case N.PERMISSION_DENIED:case N.FAILED_PRECONDITION:case N.ABORTED:case N.OUT_OF_RANGE:case N.UNIMPLEMENTED:case N.DATA_LOSS:return!0;default:return H(15467,{code:t})}}function aA(t){if(t===void 0)return ur("GRPC error has no .code"),N.UNKNOWN;switch(t){case Ve.OK:return N.OK;case Ve.CANCELLED:return N.CANCELLED;case Ve.UNKNOWN:return N.UNKNOWN;case Ve.DEADLINE_EXCEEDED:return N.DEADLINE_EXCEEDED;case Ve.RESOURCE_EXHAUSTED:return N.RESOURCE_EXHAUSTED;case Ve.INTERNAL:return N.INTERNAL;case Ve.UNAVAILABLE:return N.UNAVAILABLE;case Ve.UNAUTHENTICATED:return N.UNAUTHENTICATED;case Ve.INVALID_ARGUMENT:return N.INVALID_ARGUMENT;case Ve.NOT_FOUND:return N.NOT_FOUND;case Ve.ALREADY_EXISTS:return N.ALREADY_EXISTS;case Ve.PERMISSION_DENIED:return N.PERMISSION_DENIED;case Ve.FAILED_PRECONDITION:return N.FAILED_PRECONDITION;case Ve.ABORTED:return N.ABORTED;case Ve.OUT_OF_RANGE:return N.OUT_OF_RANGE;case Ve.UNIMPLEMENTED:return N.UNIMPLEMENTED;case Ve.DATA_LOSS:return N.DATA_LOSS;default:return H(39323,{code:t})}}(ye=Ve||(Ve={}))[ye.OK=0]="OK",ye[ye.CANCELLED=1]="CANCELLED",ye[ye.UNKNOWN=2]="UNKNOWN",ye[ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ye[ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ye[ye.NOT_FOUND=5]="NOT_FOUND",ye[ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",ye[ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",ye[ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",ye[ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ye[ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ye[ye.ABORTED=10]="ABORTED",ye[ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",ye[ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",ye[ye.INTERNAL=13]="INTERNAL",ye[ye.UNAVAILABLE=14]="UNAVAILABLE",ye[ye.DATA_LOSS=15]="DATA_LOSS";var L2=null;function F2(){return new TextEncoder}var V2=new or([4294967295,4294967295],0);function JS(t){let e=F2().encode(t),n=new ky;return n.update(e),new Uint8Array(n.digest())}function ZS(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new or([n,r],0),new or([i,o],0)]}var Ev=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Yi(`Invalid padding: ${n}`);if(r<0)throw new Yi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Yi(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Yi(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=or.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(or.fromNumber(r)));return i.compare(V2)===1&&(i=new or([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;let n=JS(e),[r,i]=ZS(n);for(let o=0;o<this.hashCount;o++){let s=this.ye(r,i,o);if(!this.we(s))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new t(o,i,n);return r.forEach(c=>s.insert(c)),s}insert(e){if(this.ge===0)return;let n=JS(e),[r,i]=ZS(n);for(let o=0;o<this.hashCount;o++){let s=this.ye(r,i,o);this.Se(s)}}Se(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},Yi=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var ph=class t{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,Dc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(Q.min(),i,new Oe(de),fr(),he())}},Dc=class t{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,he(),he(),he())}};var ns=class{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}},mh=class{constructor(e,n){this.targetId=e,this.Ce=n}},gh=class{constructor(e,n,r=ut.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},yh=class{constructor(){this.ve=0,this.Fe=XS(),this.Me=ut.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=he(),n=he(),r=he();return this.Fe.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:H(38017,{changeType:o})}}),new Dc(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=XS()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ve(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}},Iv=class{constructor(e){this.Ge=e,this.ze=new Map,this.je=fr(),this.Je=eh(),this.He=eh(),this.Ye=new Oe(de)}Ze(e){for(let n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(let n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{let r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:H(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,i)=>{this.rt(i)&&n(i)})}st(e){let n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){let o=i.target;if(hv(o))if(r===0){let s=new q(o.path);this.et(n,s,jt.newNoDocument(s,Q.min()))}else ve(r===1,20013,{expectedCount:r});else{let s=this._t(n);if(s!==r){let c=this.ut(e),u=c?this.ct(c,e,s):1;if(u!==0){this.it(n);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,l)}L2?.lt((function(h,p,g,y,S){let R={localCacheCount:h,existenceFilterCount:p.count,databaseId:g.database,projectId:g.projectId},A=p.unchangedNames;return A&&(R.bloomFilter={applied:S===0,hashCount:A?.hashCount??0,bitmapLength:A?.bits?.bitmap?.length??0,padding:A?.bits?.padding??0,mightContain:L=>y?.mightContain(L)??!1}),R})(s,e.Ce,this.Ge.ht(),c,u))}}}}ut(e){let n=e.Ce.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n,s,c;try{s=dr(r).toUint8Array()}catch(u){if(u instanceof uh)return os("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new Ev(s,i,o)}catch(u){return os(u instanceof Yi?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.ge===0?null:c}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){let r=this.Ge.getRemoteKeysForTarget(n),i=0;return r.forEach(o=>{let s=this.Ge.ht(),c=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(c)||(this.et(n,o,null),i++)}),i}Tt(e){let n=new Map;this.ze.forEach((o,s)=>{let c=this.ot(s);if(c){if(o.current&&hv(c.target)){let u=new q(c.target.path);this.It(u).has(s)||this.Et(s,u)||this.et(s,u,jt.newNoDocument(u,e))}o.Be&&(n.set(s,o.ke()),o.qe())}});let r=he();this.He.forEach((o,s)=>{let c=!0;s.forEachWhile(u=>{let l=this.ot(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(o))}),this.je.forEach((o,s)=>s.setReadTime(e));let i=new ph(e,n,this.Ye,this.je,r);return this.je=fr(),this.Je=eh(),this.He=eh(),this.Ye=new Oe(de),i}Xe(e,n){if(!this.rt(e))return;let r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;let i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){let n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new yh,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new tt(de),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new tt(de),this.Je=this.Je.insert(e,n)),n}rt(e){let n=this.ot(e)!==null;return n||V("WatchChangeAggregator","Detected inactive target",e),n}ot(e){let n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new yh),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}};function eh(){return new Oe(q.comparator)}function XS(){return new Oe(q.comparator)}var j2={asc:"ASCENDING",desc:"DESCENDING"},U2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},B2={and:"AND",or:"OR"},wv=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function Tv(t,e){return t.useProto3Json||Pc(e)?e:{value:e}}function vh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function cA(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function $2(t,e){return vh(t,e.toTimestamp())}function Vt(t){return ve(!!t,49232),Q.fromTimestamp((function(n){let r=lr(n);return new Be(r.seconds,r.nanos)})(t))}function B_(t,e){return Dv(t,e).canonicalString()}function Dv(t,e){let n=(function(i){return new Me(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?n:n.child(e)}function uA(t){let e=Me.fromString(t);return ve(mA(e),10190,{key:e.toString()}),e}function _h(t,e){return B_(t.databaseId,e.path)}function yc(t,e){let n=uA(e);if(n.get(1)!==t.databaseId.projectId)throw new j(N.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new j(N.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new q(dA(n))}function lA(t,e){return B_(t.databaseId,e)}function H2(t){let e=uA(t);return e.length===4?Me.emptyPath():dA(e)}function Cv(t){return new Me(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function dA(t){return ve(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function e0(t,e,n){return{name:_h(t,e),fields:n.value.mapValue.fields}}function z2(t,e){return"found"in e?(function(r,i){ve(!!i.found,43571),i.found.name,i.found.updateTime;let o=yc(r,i.found.name),s=Vt(i.found.updateTime),c=i.found.createTime?Vt(i.found.createTime):Q.min(),u=new Ct({mapValue:{fields:i.found.fields}});return jt.newFoundDocument(o,s,c,u)})(t,e):"missing"in e?(function(r,i){ve(!!i.missing,3894),ve(!!i.readTime,22933);let o=yc(r,i.missing),s=Vt(i.readTime);return jt.newNoDocument(o,s)})(t,e):H(7234,{result:e})}function q2(t,e){let n;if("targetChange"in e){e.targetChange;let r=(function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:H(39313,{state:l})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(l,h){return l.useProto3Json?(ve(h===void 0||typeof h=="string",58123),ut.fromBase64String(h||"")):(ve(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),ut.fromUint8Array(h||new Uint8Array))})(t,e.targetChange.resumeToken),s=e.targetChange.cause,c=s&&(function(l){let h=l.code===void 0?N.UNKNOWN:aA(l.code);return new j(h,l.message||"")})(s);n=new gh(r,i,o,c||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=yc(t,r.document.name),o=Vt(r.document.updateTime),s=r.document.createTime?Vt(r.document.createTime):Q.min(),c=new Ct({mapValue:{fields:r.document.fields}}),u=jt.newFoundDocument(i,o,s,c),l=r.targetIds||[],h=r.removedTargetIds||[];n=new ns(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=yc(t,r.document),o=r.readTime?Vt(r.readTime):Q.min(),s=jt.newNoDocument(i,o),c=r.removedTargetIds||[];n=new ns([],c,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=yc(t,r.document),o=r.removedTargetIds||[];n=new ns([],o,i,null)}else{if(!("filter"in e))return H(11601,{Rt:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new _v(i,o),c=r.targetId;n=new mh(c,s)}}return n}function hA(t,e){let n;if(e instanceof no)n={update:e0(t,e.key,e.value)};else if(e instanceof Tc)n={delete:_h(t,e.key)};else if(e instanceof Un)n={update:e0(t,e.key,e.data),updateMask:ej(e.fieldMask)};else{if(!(e instanceof fh))return H(16599,{Vt:e.type});n={verify:_h(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>(function(o,s){let c=s.transform;if(c instanceof Xi)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof eo)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof to)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof ps)return{fieldPath:s.field.canonicalString(),increment:c.Ae};throw H(20930,{transform:s.transform})})(0,r))),e.precondition.isNone||(n.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:$2(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:H(27497)})(t,e.precondition)),n}function G2(t,e){return t&&t.length>0?(ve(e!==void 0,14353),t.map(n=>(function(i,o){let s=i.updateTime?Vt(i.updateTime):Vt(o);return s.isEqual(Q.min())&&(s=Vt(o)),new mv(s,i.transformResults||[])})(n,e))):[]}function W2(t,e){return{documents:[lA(t,e.path)]}}function K2(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=lA(t,i);let o=(function(l){if(l.length!==0)return pA(jn.create(l,"and"))})(e.filters);o&&(n.structuredQuery.where=o);let s=(function(l){if(l.length!==0)return l.map(h=>(function(g){return{field:Xo(g.field),direction:J2(g.dir)}})(h))})(e.orderBy);s&&(n.structuredQuery.orderBy=s);let c=Tv(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=(function(l){return{before:l.inclusive,values:l.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(l){return{before:!l.inclusive,values:l.position}})(e.endAt)),{ft:n,parent:i}}function Q2(t){let e=H2(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){ve(r===1,65062);let h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];n.where&&(o=(function(p){let g=fA(p);return g instanceof jn&&z0(g)?g.getFilters():[g]})(n.where));let s=[];n.orderBy&&(s=(function(p){return p.map(g=>(function(S){return new ds(es(S.field),(function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(S.direction))})(g))})(n.orderBy));let c=null;n.limit&&(c=(function(p){let g;return g=typeof p=="object"?p.value:p,Pc(g)?null:g})(n.limit));let u=null;n.startAt&&(u=(function(p){let g=!!p.before,y=p.values||[];return new ls(y,g)})(n.startAt));let l=null;return n.endAt&&(l=(function(p){let g=!p.before,y=p.values||[];return new ls(y,g)})(n.endAt)),E2(e,i,s,o,c,"F",u,l)}function Y2(t,e){let n=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return H(28987,{purpose:i})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function fA(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=es(n.unaryFilter.field);return Ge.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=es(n.unaryFilter.field);return Ge.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=es(n.unaryFilter.field);return Ge.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=es(n.unaryFilter.field);return Ge.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return H(61313);default:return H(60726)}})(t):t.fieldFilter!==void 0?(function(n){return Ge.create(es(n.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return H(58110);default:return H(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return jn.create(n.compositeFilter.filters.map(r=>fA(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return H(1026)}})(n.compositeFilter.op))})(t):H(30097,{filter:t})}function J2(t){return j2[t]}function Z2(t){return U2[t]}function X2(t){return B2[t]}function Xo(t){return{fieldPath:t.canonicalString()}}function es(t){return Ft.fromServerFormat(t.fieldPath)}function pA(t){return t instanceof Ge?(function(n){if(n.op==="=="){if($S(n.value))return{unaryFilter:{field:Xo(n.field),op:"IS_NAN"}};if(BS(n.value))return{unaryFilter:{field:Xo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if($S(n.value))return{unaryFilter:{field:Xo(n.field),op:"IS_NOT_NAN"}};if(BS(n.value))return{unaryFilter:{field:Xo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Xo(n.field),op:Z2(n.op),value:n.value}}})(t):t instanceof jn?(function(n){let r=n.getFilters().map(i=>pA(i));return r.length===1?r[0]:{compositeFilter:{op:X2(n.op),filters:r}}})(t):H(54877,{filter:t})}function ej(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function mA(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var Cc=class t{constructor(e,n,r,i,o=Q.min(),s=Q.min(),c=ut.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var bv=class{constructor(e){this.yt=e}};function tj(t){let e=Q2({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?fv(e,e.limit,"L"):e}var Eh=class{constructor(){}Dt(e,n){this.Ct(e,n),n.vt()}Ct(e,n){if("nullValue"in e)this.Ft(n,5);else if("booleanValue"in e)this.Ft(n,10),n.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(n,15),n.Mt(Ne(e.integerValue));else if("doubleValue"in e){let r=Ne(e.doubleValue);isNaN(r)?this.Ft(n,13):(this.Ft(n,15),Ec(r)?n.Mt(0):n.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(n,20),typeof r=="string"&&(r=lr(r)),n.xt(`${r.seconds||""}`),n.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,n),this.Nt(n);else if("bytesValue"in e)this.Ft(n,30),n.Bt(dr(e.bytesValue)),this.Nt(n);else if("referenceValue"in e)this.Lt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ft(n,45),n.Mt(r.latitude||0),n.Mt(r.longitude||0)}else"mapValue"in e?B0(e)?this.Ft(n,Number.MAX_SAFE_INTEGER):U0(e)?this.kt(e.mapValue,n):(this.qt(e.mapValue,n),this.Nt(n)):"arrayValue"in e?(this.Qt(e.arrayValue,n),this.Nt(n)):H(19022,{$t:e})}Ot(e,n){this.Ft(n,25),this.Ut(e,n)}Ut(e,n){n.xt(e)}qt(e,n){let r=e.fields||{};this.Ft(n,55);for(let i of Object.keys(r))this.Ot(i,n),this.Ct(r[i],n)}kt(e,n){let r=e.fields||{};this.Ft(n,53);let i=as,o=r[i].arrayValue?.values?.length||0;this.Ft(n,15),n.Mt(Ne(o)),this.Ot(i,n),this.Ct(r[i],n)}Qt(e,n){let r=e.values||[];this.Ft(n,50);for(let i of r)this.Ct(i,n)}Lt(e,n){this.Ft(n,37),q.fromName(e).path.forEach(r=>{this.Ft(n,60),this.Ut(r,n)})}Ft(e,n){e.Mt(n)}Nt(e){e.Mt(2)}};Eh.Kt=new Eh;var Sv=class{constructor(){this.Cn=new Av}addToCollectionParentIndex(e,n){return this.Cn.add(n),x.resolve()}getCollectionParents(e,n){return x.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return x.resolve()}deleteFieldIndex(e,n){return x.resolve()}deleteAllFieldIndexes(e){return x.resolve()}createTargetIndexes(e,n){return x.resolve()}getDocumentsMatchingTarget(e,n){return x.resolve(null)}getIndexType(e,n){return x.resolve(0)}getFieldIndexes(e,n){return x.resolve([])}getNextCollectionGroupToUpdate(e){return x.resolve(null)}getMinOffset(e,n){return x.resolve(Zi.min())}getMinOffsetFromCollectionGroup(e,n){return x.resolve(Zi.min())}updateCollectionGroup(e,n,r){return x.resolve()}updateIndexEntries(e,n){return x.resolve()}},Av=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new tt(Me.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new tt(Me.comparator)).toArray()}};var TX=new Uint8Array(0);var t0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},gA=41943040,Yt=class t{static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}};Yt.DEFAULT_COLLECTION_PERCENTILE=10,Yt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Yt.DEFAULT=new Yt(gA,Yt.DEFAULT_COLLECTION_PERCENTILE,Yt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Yt.DISABLED=new Yt(-1,0,0);var bc=class t{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new t(0)}static cr(){return new t(-1)}};var n0="LruGarbageCollector",nj=1048576;function r0([t,e],[n,r]){let i=de(t,n);return i===0?de(e,r):i}var Rv=class{constructor(e){this.Ir=e,this.buffer=new tt(r0),this.Er=0}dr(){return++this.Er}Ar(e){let n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{let r=this.buffer.last();r0(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}},Nv=class{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){V(n0,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ws(n)?V(n0,"Ignoring IndexedDB error during garbage collection: ",n):await Is(n)}await this.Vr(3e5)})}},Mv=class{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return x.resolve(x_.ce);let r=new Rv(n);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(V("LruGarbageCollector","Garbage collection skipped; disabled"),x.resolve(t0)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(V("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),t0):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,o,s,c,u,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(V("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,c=Date.now(),this.removeTargets(e,r,n))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),Jo()<=ue.DEBUG&&V("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(c-s)+`ms
	Removed ${o} targets in `+(u-c)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-h}ms`),x.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function rj(t,e){return new Mv(t,e)}var xv=class{constructor(){this.changes=new hr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,jt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?x.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Pv=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var Ov=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&gc(r.mutation,i,Zt.empty(),Be.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,he()).next(()=>r))}getLocalViewOfDocuments(e,n,r=he()){let i=Qi();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=dc();return o.forEach((c,u)=>{s=s.insert(c,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){let r=Qi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,he()))}populateOverlays(e,n,r){let i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,c)=>{n.set(s,c)})})}computeViews(e,n,r,i){let o=fr(),s=mc(),c=(function(){return mc()})();return n.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof Un)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),gc(h.mutation,l,h.mutation.getFieldMask(),Be.now())):s.set(l.key,Zt.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,h)=>s.set(l,h)),n.forEach((l,h)=>c.set(l,new Pv(h,s.get(l)??null))),c))}recalculateAndSaveOverlays(e,n){let r=mc(),i=new Oe((s,c)=>s-c),o=he();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(let c of s)c.keys().forEach(u=>{let l=n.get(u);if(l===null)return;let h=r.get(u)||Zt.empty();h=c.applyToLocalView(l,h),r.set(u,h);let p=(i.get(c.batchId)||he()).add(u);i=i.insert(c.batchId,p)})}).next(()=>{let s=[],c=i.getReverseIterator();for(;c.hasNext();){let u=c.getNext(),l=u.key,h=u.value,p=Z0();h.forEach(g=>{if(!o.has(g)){let y=iA(n.get(g),r.get(g));y!==null&&p.set(g,y),o=o.add(g)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return x.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return(function(s){return q.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):I2(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):x.resolve(Qi()),c=_c,u=o;return s.next(l=>x.forEach(l,(h,p)=>(c<p.largestBatchId&&(c=p.largestBatchId),o.get(h)?x.resolve():this.remoteDocumentCache.getEntry(e,h).next(g=>{u=u.insert(h,g)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,he())).next(h=>({batchId:c,changes:J0(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new q(n)).next(r=>{let i=dc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let o=n.collectionGroup,s=dc();return this.indexManager.getCollectionParents(e,o).next(c=>x.forEach(c,u=>{let l=(function(p,g){return new hs(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(n,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,g)=>{s=s.insert(p,g)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((u,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,jt.newInvalidDocument(h)))});let c=dc();return s.forEach((u,l)=>{let h=o.get(u);h!==void 0&&gc(h.mutation,l,Zt.empty(),Be.now()),Hh(n,l)&&(c=c.insert(u,l))}),c})}};var kv=class{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return x.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(i){return{id:i.id,version:i.version,createTime:Vt(i.createTime)}})(n)),x.resolve()}getNamedQuery(e,n){return x.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(i){return{name:i.name,query:tj(i.bundledQuery),readTime:Vt(i.readTime)}})(n)),x.resolve()}};var Lv=class{constructor(){this.overlays=new Oe(q.comparator),this.qr=new Map}getOverlay(e,n){return x.resolve(this.overlays.get(n))}getOverlays(e,n){let r=Qi();return x.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.St(e,n,o)}),x.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.qr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.qr.delete(r)),x.resolve()}getOverlaysForCollection(e,n,r){let i=Qi(),o=n.length+1,s=new q(n.child("")),c=this.overlays.getIteratorFrom(s);for(;c.hasNext();){let u=c.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return x.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new Oe((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=Qi(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let c=Qi(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>c.set(l,h)),!(c.size()>=i)););return x.resolve(c)}St(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new vv(n,r));let o=this.qr.get(n);o===void 0&&(o=he(),this.qr.set(n,o)),this.qr.set(n,o.add(r.key))}};var Fv=class{constructor(){this.sessionToken=ut.EMPTY_BYTE_STRING}getSessionToken(e){return x.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,x.resolve()}};var Sc=class{constructor(){this.Qr=new tt(je.$r),this.Ur=new tt(je.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){let r=new je(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new je(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){let n=new q(new Me([])),r=new je(n,e),i=new je(n,e+1),o=[];return this.Ur.forEachInRange([r,i],s=>{this.Gr(s),o.push(s.key)}),o}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){let n=new q(new Me([])),r=new je(n,e),i=new je(n,e+1),o=he();return this.Ur.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let n=new je(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},je=class{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return q.comparator(e.key,n.key)||de(e.Yr,n.Yr)}static Kr(e,n){return de(e.Yr,n.Yr)||q.comparator(e.key,n.key)}};var Vv=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new tt(je.$r)}checkEmpty(e){return x.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new gv(o,n,r,i);this.mutationQueue.push(s);for(let c of i)this.Zr=this.Zr.add(new je(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return x.resolve(s)}lookupMutationBatch(e,n){return x.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.ei(r),o=i<0?0:i;return x.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return x.resolve(this.mutationQueue.length===0?P_:this.tr-1)}getAllMutationBatches(e){return x.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new je(n,0),i=new je(n,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([r,i],s=>{let c=this.Xr(s.Yr);o.push(c)}),x.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new tt(de);return n.forEach(i=>{let o=new je(i,0),s=new je(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,s],c=>{r=r.add(c.Yr)})}),x.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=r;q.isDocumentKey(o)||(o=o.child(""));let s=new je(new q(o),0),c=new tt(de);return this.Zr.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(c=c.add(u.Yr)),!0)},s),x.resolve(this.ti(c))}ti(e){let n=[];return e.forEach(r=>{let i=this.Xr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){ve(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return x.forEach(n.mutations,i=>{let o=new je(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){let r=new je(n,0),i=this.Zr.firstAfterOrEqual(r);return x.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,x.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){let n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var jv=class{constructor(e){this.ri=e,this.docs=(function(){return new Oe(q.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return x.resolve(r?r.document.mutableCopy():jt.newInvalidDocument(n))}getEntries(e,n){let r=fr();return n.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():jt.newInvalidDocument(i))}),x.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=fr(),s=n.path,c=new q(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||t2(e2(h),r)<=0||(i.has(h.key)||Hh(n,h))&&(o=o.insert(h.key,h.mutableCopy()))}return x.resolve(o)}getAllFromCollectionGroup(e,n,r,i){H(9500)}ii(e,n){return x.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Uv(this)}getSize(e){return x.resolve(this.size)}},Uv=class extends xv{constructor(e){super(),this.Nr=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),x.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}};var Bv=class{constructor(e){this.persistence=e,this.si=new hr(n=>V_(n),j_),this.lastRemoteSnapshotVersion=Q.min(),this.highestTargetId=0,this.oi=0,this._i=new Sc,this.targetCount=0,this.ai=bc.ur()}forEachTarget(e,n){return this.si.forEach((r,i)=>n(i)),x.resolve()}getLastRemoteSnapshotVersion(e){return x.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return x.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),x.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),x.resolve()}Pr(e){this.si.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.ai=new bc(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,x.resolve()}updateTargetData(e,n){return this.Pr(n),x.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,x.resolve()}removeTargets(e,n,r){let i=0,o=[];return this.si.forEach((s,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.si.delete(s),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),x.waitFor(o).next(()=>i)}getTargetCount(e){return x.resolve(this.targetCount)}getTargetData(e,n){let r=this.si.get(n)||null;return x.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),x.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);let i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),x.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),x.resolve()}getMatchingKeysForTargetId(e,n){let r=this._i.Hr(n);return x.resolve(r)}containsKey(e,n){return x.resolve(this._i.containsKey(n))}};var Ih=class{constructor(e,n){this.ui={},this.overlays={},this.ci=new x_(0),this.li=!1,this.li=!0,this.hi=new Fv,this.referenceDelegate=e(this),this.Pi=new Bv(this),this.indexManager=new Sv,this.remoteDocumentCache=(function(i){return new jv(i)})(r=>this.referenceDelegate.Ti(r)),this.serializer=new bv(n),this.Ii=new kv(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Lv,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new Vv(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){V("MemoryPersistence","Starting transaction:",e);let i=new $v(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ai(e,n){return x.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}},$v=class extends Xy{constructor(e){super(),this.currentSequenceNumber=e}},Hv=class t{constructor(e){this.persistence=e,this.Ri=new Sc,this.Vi=null}static mi(e){return new t(e)}get fi(){if(this.Vi)return this.Vi;throw H(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),x.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),x.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),x.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(i=>this.fi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.fi.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return x.forEach(this.fi,r=>{let i=q.fromPath(r);return this.gi(e,i).next(o=>{o||n.removeEntry(i,Q.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return x.or([()=>x.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}},wh=class t{constructor(e,n){this.persistence=e,this.pi=new hr(r=>o2(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=rj(this,n)}static mi(e,n){return new t(e,n)}Ei(){}di(e){return x.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){let n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return x.forEach(this.pi,(r,i)=>this.br(e,r,i).next(o=>o?x.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ii(e,s=>this.br(e,s,n).next(c=>{c||(r++,o.removeEntry(s,Q.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),x.resolve()}removeTarget(e,n){let r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),x.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),x.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),x.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=nh(e.data.value)),n}br(e,n,r){return x.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{let i=this.pi.get(n);return x.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var zv=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=he(),i=he();for(let o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new t(e,n.fromCache,r,i)}};var qv=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Gv=class{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return vb()?8:r2(Xe())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){let o={result:null};return this.ys(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ws(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new qv;return this.Ss(e,n,s).next(c=>{if(o.result=c,this.Vs)return this.bs(e,n,s,c.size)})}).next(()=>o.result)}bs(e,n,r,i){return r.documentReadCount<this.fs?(Jo()<=ue.DEBUG&&V("QueryEngine","SDK will not create cache indexes for query:",Zo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),x.resolve()):(Jo()<=ue.DEBUG&&V("QueryEngine","Query:",Zo(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(Jo()<=ue.DEBUG&&V("QueryEngine","The SDK decides to create cache indexes for query:",Zo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Fn(n))):x.resolve())}ys(e,n){if(GS(n))return x.resolve(null);let r=Fn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=fv(n,null,"F"),r=Fn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=he(...o);return this.ps.getDocuments(e,s).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.Ds(n,c);return this.Cs(n,l,s,u.readTime)?this.ys(e,fv(n,null,"F")):this.vs(e,l,n,u)}))})))}ws(e,n,r,i){return GS(n)||i.isEqual(Q.min())?x.resolve(null):this.ps.getDocuments(e,r).next(o=>{let s=this.Ds(n,o);return this.Cs(n,s,r,i)?x.resolve(null):(Jo()<=ue.DEBUG&&V("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Zo(n)),this.vs(e,s,n,XV(i,_c)).next(c=>c))})}Ds(e,n){let r=new tt(Q0(e));return n.forEach((i,o)=>{Hh(e,o)&&(r=r.add(o))}),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ss(e,n,r){return Jo()<=ue.DEBUG&&V("QueryEngine","Using full collection scan to execute query:",Zo(n)),this.ps.getDocumentsMatchingQuery(e,n,Zi.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}};var $_="LocalStore",ij=3e8,Wv=class{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new Oe(de),this.xs=new hr(o=>V_(o),j_),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Ov(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}};function oj(t,e,n,r){return new Wv(t,e,n,r)}async function yA(t,e){let n=Z(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],c=[],u=he();for(let l of i){s.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of o){c.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(l=>({Ls:l,removedBatchIds:s,addedBatchIds:c}))})})}function sj(t,e){let n=Z(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(c,u,l,h){let p=l.batch,g=p.keys(),y=x.resolve();return g.forEach(S=>{y=y.next(()=>h.getEntry(u,S)).next(R=>{let A=l.docVersions.get(S);ve(A!==null,48541),R.version.compareTo(A)<0&&(p.applyToRemoteDocument(R,l),R.isValidDocument()&&(R.setReadTime(l.commitVersion),h.addEntry(R)))})}),y.next(()=>c.mutationQueue.removeMutationBatch(u,p))})(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(c){let u=he();for(let l=0;l<c.mutationResults.length;++l)c.mutationResults[l].transformResults.length>0&&(u=u.add(c.batch.mutations[l].key));return u})(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function vA(t){let e=Z(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function aj(t,e){let n=Z(t),r=e.snapshotVersion,i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;let c=[];e.targetChanges.forEach((h,p)=>{let g=i.get(p);if(!g)return;c.push(n.Pi.removeMatchingKeys(o,h.removedDocuments,p).next(()=>n.Pi.addMatchingKeys(o,h.addedDocuments,p)));let y=g.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(ut.EMPTY_BYTE_STRING,Q.min()).withLastLimboFreeSnapshotVersion(Q.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(p,y),(function(R,A,L){return R.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=ij?!0:L.addedDocuments.size+L.modifiedDocuments.size+L.removedDocuments.size>0})(g,y,h)&&c.push(n.Pi.updateTargetData(o,y))});let u=fr(),l=he();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(o,h))}),c.push(cj(o,s,e.documentUpdates).next(h=>{u=h.ks,l=h.qs})),!r.isEqual(Q.min())){let h=n.Pi.getLastRemoteSnapshotVersion(o).next(p=>n.Pi.setTargetsMetadata(o,o.currentSequenceNumber,r));c.push(h)}return x.waitFor(c).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(n.Ms=i,o))}function cj(t,e,n){let r=he(),i=he();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=fr();return n.forEach((c,u)=>{let l=o.get(c);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(c)),u.isNoDocument()&&u.version.isEqual(Q.min())?(e.removeEntry(c,u.readTime),s=s.insert(c,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(c,u)):V($_,"Ignoring outdated watch update for ",c,". Current version:",l.version," Watch version:",u.version)}),{ks:s,qs:i}})}function uj(t,e){let n=Z(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=P_),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function lj(t,e){let n=Z(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Pi.getTargetData(r,e).next(o=>o?(i=o,x.resolve(i)):n.Pi.allocateTargetId(r).next(s=>(i=new Cc(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function Kv(t,e,n){let r=Z(t),i=r.Ms.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!ws(s))throw s;V($_,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function i0(t,e,n){let r=Z(t),i=Q.min(),o=he();return r.persistence.runTransaction("Execute query","readwrite",s=>(function(u,l,h){let p=Z(u),g=p.xs.get(h);return g!==void 0?x.resolve(p.Ms.get(g)):p.Pi.getTargetData(l,h)})(r,s,Fn(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(s,c.targetId).next(u=>{o=u})}).next(()=>r.Fs.getDocumentsMatchingQuery(s,e,n?i:Q.min(),n?o:he())).next(c=>(dj(r,T2(e),c),{documents:c,Qs:o})))}function dj(t,e,n){let r=t.Os.get(e)||Q.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.Os.set(e,r)}var Th=class{constructor(){this.activeTargetIds=R2()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var Qv=class{constructor(){this.Mo=new Th,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Th,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Yv=class{Oo(e){}shutdown(){}};var o0="ConnectivityMonitor",Dh=class{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){V(o0,"Network connectivity changed: AVAILABLE");for(let e of this.qo)e(0)}ko(){V(o0,"Network connectivity changed: UNAVAILABLE");for(let e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var th=null;function Jv(){return th===null?th=(function(){return 268435456+Math.round(2147483648*Math.random())})():th++,"0x"+th.toString(16)}var $y="RestConnection",hj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},Zv=class{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===lh?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,o){let s=Jv(),c=this.zo(e,n.toUriEncodedString());V($y,`Sending RPC '${e}' ${s}:`,c,r);let u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,i,o);let{host:l}=new URL(c),h=jr(l);return this.Jo(e,c,u,r,h).then(p=>(V($y,`Received RPC '${e}' ${s}: `,p),p),p=>{throw os($y,`RPC '${e}' ${s} failed with error: `,p,"url: ",c,"request:",r),p})}Ho(e,n,r,i,o,s){return this.Go(e,n,r,i,o)}jo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Es})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}zo(e,n){let r=hj[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}};var Xv=class{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}};var ct="WebChannelConnection",e_=class extends Zv{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,o){let s=Jv();return new Promise((c,u)=>{let l=new Ly;l.setWithCredentials(!0),l.listenOnce(Fy.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case lc.NO_ERROR:let p=l.getResponseJson();V(ct,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),c(p);break;case lc.TIMEOUT:V(ct,`RPC '${e}' ${s} timed out`),u(new j(N.DEADLINE_EXCEEDED,"Request time out"));break;case lc.HTTP_ERROR:let g=l.getStatus();if(V(ct,`RPC '${e}' ${s} failed with status:`,g,"response text:",l.getResponseText()),g>0){let y=l.getResponseJson();Array.isArray(y)&&(y=y[0]);let S=y?.error;if(S&&S.status&&S.message){let R=(function(L){let X=L.toLowerCase().replace(/_/g,"-");return Object.values(N).indexOf(X)>=0?X:N.UNKNOWN})(S.status);u(new j(R,S.message))}else u(new j(N.UNKNOWN,"Server responded with status "+l.getStatus()))}else u(new j(N.UNAVAILABLE,"Connection failed."));break;default:H(9055,{l_:e,streamId:s,h_:l.getLastErrorCode(),P_:l.getLastError()})}}finally{V(ct,`RPC '${e}' ${s} completed.`)}});let h=JSON.stringify(i);V(ct,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",h,r,15)})}T_(e,n,r){let i=Jv(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Uy(),c=jy(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;let h=o.join("");V(ct,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=s.createWebChannel(h,u);this.I_(p);let g=!1,y=!1,S=new Xv({Yo:A=>{y?V(ct,`Not sending because RPC '${e}' stream ${i} is closed:`,A):(g||(V(ct,`Opening RPC '${e}' stream ${i} transport.`),p.open(),g=!0),V(ct,`RPC '${e}' stream ${i} sending:`,A),p.send(A))},Zo:()=>p.close()}),R=(A,L,X)=>{A.listen(L,le=>{try{X(le)}catch(lt){setTimeout(()=>{throw lt},0)}})};return R(p,Yo.EventType.OPEN,()=>{y||(V(ct,`RPC '${e}' stream ${i} transport opened.`),S.o_())}),R(p,Yo.EventType.CLOSE,()=>{y||(y=!0,V(ct,`RPC '${e}' stream ${i} transport closed`),S.a_(),this.E_(p))}),R(p,Yo.EventType.ERROR,A=>{y||(y=!0,os(ct,`RPC '${e}' stream ${i} transport errored. Name:`,A.name,"Message:",A.message),S.a_(new j(N.UNAVAILABLE,"The operation could not be completed")))}),R(p,Yo.EventType.MESSAGE,A=>{if(!y){let L=A.data[0];ve(!!L,16349);let X=L,le=X?.error||X[0]?.error;if(le){V(ct,`RPC '${e}' stream ${i} received error:`,le);let lt=le.status,_t=(function(v){let E=Ve[v];if(E!==void 0)return aA(E)})(lt),We=le.message;_t===void 0&&(_t=N.INTERNAL,We="Unknown error status: "+lt+" with message "+le.message),y=!0,S.a_(new j(_t,We)),p.close()}else V(ct,`RPC '${e}' stream ${i} received:`,L),S.u_(L)}}),R(c,Vy.STAT_EVENT,A=>{A.stat===Zd.PROXY?V(ct,`RPC '${e}' stream ${i} detected buffering proxy`):A.stat===Zd.NOPROXY&&V(ct,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{S.__()},0),S}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}};function Hy(){return typeof document<"u"?document:null}function zh(t){return new wv(t,!0)}var Ac=class{constructor(e,n,r=1e3,i=1.5,o=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();let n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&V("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}};var s0="PersistentStream",Ch=class{constructor(e,n,r,i,o,s,c,u){this.Mi=e,this.S_=r,this.b_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Ac(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===N.RESOURCE_EXHAUSTED?(ur(n.toString()),ur("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===N.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;let e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===n&&this.G_(r,i)},r=>{e(()=>{let i=new j(N.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,n){let r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return V(s0,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(V(s0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},t_=class extends Ch{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();let n=q2(this.serializer,e),r=(function(o){if(!("targetChange"in o))return Q.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?Q.min():s.readTime?Vt(s.readTime):Q.min()})(e);return this.listener.H_(n,r)}Y_(e){let n={};n.database=Cv(this.serializer),n.addTarget=(function(o,s){let c,u=s.target;if(c=hv(u)?{documents:W2(o,u)}:{query:K2(o,u).ft},c.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){c.resumeToken=cA(o,s.resumeToken);let l=Tv(o,s.expectedCount);l!==null&&(c.expectedCount=l)}else if(s.snapshotVersion.compareTo(Q.min())>0){c.readTime=vh(o,s.snapshotVersion.toTimestamp());let l=Tv(o,s.expectedCount);l!==null&&(c.expectedCount=l)}return c})(this.serializer,e);let r=Y2(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){let n={};n.database=Cv(this.serializer),n.removeTarget=e,this.q_(n)}},n_=class extends Ch{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return ve(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ve(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ve(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();let n=G2(e.writeResults,e.commitTime),r=Vt(e.commitTime);return this.listener.na(r,n)}ra(){let e={};e.database=Cv(this.serializer),this.q_(e)}ea(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>hA(this.serializer,r))};this.q_(n)}};var r_=class{},i_=class extends r_{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new j(N.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Go(e,Dv(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new j(N.UNKNOWN,o.toString())})}Ho(e,n,r,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,c])=>this.connection.Ho(e,Dv(n,r),i,s,c,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new j(N.UNKNOWN,s.toString())})}terminate(){this.ia=!0,this.connection.terminate()}},o_=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ur(n),this.aa=!1):V("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}};var ro="RemoteStore",s_=class{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo(s=>{r.enqueueAndForget(async()=>{io(this)&&(V(ro,"Restarting streams for network reachability change."),await(async function(u){let l=Z(u);l.Ea.add(4),await Oc(l),l.Ra.set("Unknown"),l.Ea.delete(4),await qh(l)})(this))})}),this.Ra=new o_(r,i)}};async function qh(t){if(io(t))for(let e of t.da)await e(!0)}async function Oc(t){for(let e of t.da)await e(!1)}function _A(t,e){let n=Z(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),G_(n)?q_(n):Ts(n).O_()&&z_(n,e))}function H_(t,e){let n=Z(t),r=Ts(n);n.Ia.delete(e),r.O_()&&EA(n,e),n.Ia.size===0&&(r.O_()?r.L_():io(n)&&n.Ra.set("Unknown"))}function z_(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Q.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ts(t).Y_(e)}function EA(t,e){t.Va.Ue(e),Ts(t).Z_(e)}function q_(t){t.Va=new Iv({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Ts(t).start(),t.Ra.ua()}function G_(t){return io(t)&&!Ts(t).x_()&&t.Ia.size>0}function io(t){return Z(t).Ea.size===0}function IA(t){t.Va=void 0}async function fj(t){t.Ra.set("Online")}async function pj(t){t.Ia.forEach((e,n)=>{z_(t,e)})}async function mj(t,e){IA(t),G_(t)?(t.Ra.ha(e),q_(t)):t.Ra.set("Unknown")}async function gj(t,e,n){if(t.Ra.set("Online"),e instanceof gh&&e.state===2&&e.cause)try{await(async function(i,o){let s=o.cause;for(let c of o.targetIds)i.Ia.has(c)&&(await i.remoteSyncer.rejectListen(c,s),i.Ia.delete(c),i.Va.removeTarget(c))})(t,e)}catch(r){V(ro,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await bh(t,r)}else if(e instanceof ns?t.Va.Ze(e):e instanceof mh?t.Va.st(e):t.Va.tt(e),!n.isEqual(Q.min()))try{let r=await vA(t.localStore);n.compareTo(r)>=0&&await(function(o,s){let c=o.Va.Tt(s);return c.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=o.Ia.get(l);h&&o.Ia.set(l,h.withResumeToken(u.resumeToken,s))}}),c.targetMismatches.forEach((u,l)=>{let h=o.Ia.get(u);if(!h)return;o.Ia.set(u,h.withResumeToken(ut.EMPTY_BYTE_STRING,h.snapshotVersion)),EA(o,u);let p=new Cc(h.target,u,l,h.sequenceNumber);z_(o,p)}),o.remoteSyncer.applyRemoteEvent(c)})(t,n)}catch(r){V(ro,"Failed to raise snapshot:",r),await bh(t,r)}}async function bh(t,e,n){if(!ws(e))throw e;t.Ea.add(1),await Oc(t),t.Ra.set("Offline"),n||(n=()=>vA(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{V(ro,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await qh(t)})}function wA(t,e){return e().catch(n=>bh(t,n,e))}async function Gh(t){let e=Z(t),n=ei(e),r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:P_;for(;yj(e);)try{let i=await uj(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,vj(e,i)}catch(i){await bh(e,i)}TA(e)&&DA(e)}function yj(t){return io(t)&&t.Ta.length<10}function vj(t,e){t.Ta.push(e);let n=ei(t);n.O_()&&n.X_&&n.ea(e.mutations)}function TA(t){return io(t)&&!ei(t).x_()&&t.Ta.length>0}function DA(t){ei(t).start()}async function _j(t){ei(t).ra()}async function Ej(t){let e=ei(t);for(let n of t.Ta)e.ea(n.mutations)}async function Ij(t,e,n){let r=t.Ta.shift(),i=yv.from(r,e,n);await wA(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Gh(t)}async function wj(t,e){e&&ei(t).X_&&await(async function(r,i){if((function(s){return sA(s)&&s!==N.ABORTED})(i.code)){let o=r.Ta.shift();ei(r).B_(),await wA(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await Gh(r)}})(t,e),TA(t)&&DA(t)}async function a0(t,e){let n=Z(t);n.asyncQueue.verifyOperationInProgress(),V(ro,"RemoteStore received new credentials");let r=io(n);n.Ea.add(3),await Oc(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await qh(n)}async function Tj(t,e){let n=Z(t);e?(n.Ea.delete(2),await qh(n)):e||(n.Ea.add(2),await Oc(n),n.Ra.set("Unknown"))}function Ts(t){return t.ma||(t.ma=(function(n,r,i){let o=Z(n);return o.sa(),new t_(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(t.datastore,t.asyncQueue,{Xo:fj.bind(null,t),t_:pj.bind(null,t),r_:mj.bind(null,t),H_:gj.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),G_(t)?q_(t):t.Ra.set("Unknown")):(await t.ma.stop(),IA(t))})),t.ma}function ei(t){return t.fa||(t.fa=(function(n,r,i){let o=Z(n);return o.sa(),new n_(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:_j.bind(null,t),r_:wj.bind(null,t),ta:Ej.bind(null,t),na:Ij.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Gh(t)):(await t.fa.stop(),t.Ta.length>0&&(V(ro,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}var a_=class t{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new vn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){let s=Date.now()+r,c=new t(e,n,s,i,o);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new j(N.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function W_(t,e){if(ur("AsyncQueue",`${e}: ${t}`),ws(t))return new j(N.UNAVAILABLE,`${e}: ${t}`);throw t}var Sh=class t{static emptySet(e){return new t(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||q.comparator(n.key,r.key):(n,r)=>q.comparator(n.key,r.key),this.keyedMap=dc(),this.sortedSet=new Oe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var Ah=class{constructor(){this.ga=new Oe(q.comparator)}track(e){let n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):H(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){let e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}},gs=class t{constructor(e,n,r,i,o,s,c,u,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,o){let s=[];return n.forEach(c=>{s.push({type:0,doc:c})}),new t(e,n,Sh.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&$h(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var c_=class{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}},u_=class{constructor(){this.queries=c0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){let i=Z(n),o=i.queries;i.queries=c0(),o.forEach((s,c)=>{for(let u of c.Sa)u.onError(r)})})(this,new j(N.ABORTED,"Firestore shutting down"))}};function c0(){return new hr(t=>K0(t),$h)}async function CA(t,e){let n=Z(t),r=3,i=e.query,o=n.queries.get(i);o?!o.ba()&&e.Da()&&(r=2):(o=new c_,r=e.Da()?0:1);try{switch(r){case 0:o.wa=await n.onListen(i,!0);break;case 1:o.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(s){let c=W_(s,`Initialization of query '${Zo(e.query)}' failed`);return void e.onError(c)}n.queries.set(i,o),o.Sa.push(e),e.va(n.onlineState),o.wa&&e.Fa(o.wa)&&K_(n)}async function bA(t,e){let n=Z(t),r=e.query,i=3,o=n.queries.get(r);if(o){let s=o.Sa.indexOf(e);s>=0&&(o.Sa.splice(s,1),o.Sa.length===0?i=e.Da()?0:1:!o.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Dj(t,e){let n=Z(t),r=!1;for(let i of e){let o=i.query,s=n.queries.get(o);if(s){for(let c of s.Sa)c.Fa(i)&&(r=!0);s.wa=i}}r&&K_(n)}function Cj(t,e,n){let r=Z(t),i=r.queries.get(e);if(i)for(let o of i.Sa)o.onError(n);r.queries.delete(e)}function K_(t){t.Ca.forEach(e=>{e.next()})}var l_,u0;(u0=l_||(l_={})).Ma="default",u0.Cache="cache";var Rh=class{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new gs(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;let r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;let n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=gs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==l_.Cache}};var Nh=class{constructor(e){this.key=e}},Mh=class{constructor(e){this.key=e}},d_=class{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=he(),this.mutatedKeys=he(),this.eu=Q0(e),this.tu=new Sh(this.eu)}get nu(){return this.Ya}ru(e,n){let r=n?n.iu:new Ah,i=n?n.tu:this.tu,o=n?n.mutatedKeys:this.mutatedKeys,s=i,c=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let g=i.get(h),y=Hh(this.query,p)?p:null,S=!!g&&this.mutatedKeys.has(g.key),R=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),A=!1;g&&y?g.data.isEqual(y.data)?S!==R&&(r.track({type:3,doc:y}),A=!0):this.su(g,y)||(r.track({type:2,doc:y}),A=!0,(u&&this.eu(y,u)>0||l&&this.eu(y,l)<0)&&(c=!0)):!g&&y?(r.track({type:0,doc:y}),A=!0):g&&!y&&(r.track({type:1,doc:g}),A=!0,(u||l)&&(c=!0)),A&&(y?(s=s.add(y),o=R?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{tu:s,iu:r,Cs:c,mutatedKeys:o}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;let s=e.iu.ya();s.sort((h,p)=>(function(y,S){let R=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return H(20277,{Rt:A})}};return R(y)-R(S)})(h.type,p.type)||this.eu(h.doc,p.doc)),this.ou(r),i=i??!1;let c=n&&!i?this._u():[],u=this.Xa.size===0&&this.current&&!i?1:0,l=u!==this.Za;return this.Za=u,s.length!==0||l?{snapshot:new gs(this.query,e.tu,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Ah,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];let e=this.Xa;this.Xa=he(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});let n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new Mh(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new Nh(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=he();let n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return gs.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}},Q_="SyncEngine",h_=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},f_=class{constructor(e){this.key=e,this.hu=!1}},p_=class{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new hr(c=>K0(c),$h),this.Iu=new Map,this.Eu=new Set,this.du=new Oe(q.comparator),this.Au=new Map,this.Ru=new Sc,this.Vu={},this.mu=new Map,this.fu=bc.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}};async function bj(t,e,n=!0){let r=xA(t),i,o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=await SA(r,e,n,!0),i}async function Sj(t,e){let n=xA(t);await SA(n,e,!0,!1)}async function SA(t,e,n,r){let i=await lj(t.localStore,Fn(e)),o=i.targetId,s=t.sharedClientState.addLocalQueryTarget(o,n),c;return r&&(c=await Aj(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&_A(t.remoteStore,i),c}async function Aj(t,e,n,r,i){t.pu=(p,g,y)=>(async function(R,A,L,X){let le=A.view.ru(L);le.Cs&&(le=await i0(R.localStore,A.query,!1).then(({documents:w})=>A.view.ru(w,le)));let lt=X&&X.targetChanges.get(A.targetId),_t=X&&X.targetMismatches.get(A.targetId)!=null,We=A.view.applyChanges(le,R.isPrimaryClient,lt,_t);return d0(R,A.targetId,We.au),We.snapshot})(t,p,g,y);let o=await i0(t.localStore,e,!0),s=new d_(e,o.Qs),c=s.ru(o.documents),u=Dc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=s.applyChanges(c,t.isPrimaryClient,u);d0(t,n,l.au);let h=new h_(e,n,s);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),l.snapshot}async function Rj(t,e,n){let r=Z(t),i=r.Tu.get(e),o=r.Iu.get(i.targetId);if(o.length>1)return r.Iu.set(i.targetId,o.filter(s=>!$h(s,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Kv(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&H_(r.remoteStore,i.targetId),m_(r,i.targetId)}).catch(Is)):(m_(r,i.targetId),await Kv(r.localStore,i.targetId,!0))}async function Nj(t,e){let n=Z(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),H_(n.remoteStore,r.targetId))}async function Mj(t,e,n){let r=Vj(t);try{let i=await(function(s,c){let u=Z(s),l=Be.now(),h=c.reduce((y,S)=>y.add(S.key),he()),p,g;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let S=fr(),R=he();return u.Ns.getEntries(y,h).next(A=>{S=A,S.forEach((L,X)=>{X.isValidDocument()||(R=R.add(L))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,S)).next(A=>{p=A;let L=[];for(let X of c){let le=k2(X,p.get(X.key).overlayedDocument);le!=null&&L.push(new Un(X.key,le,$0(le.value.mapValue),Jt.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,L,c)}).next(A=>{g=A;let L=A.applyToLocalDocumentSet(p,R);return u.documentOverlayCache.saveOverlays(y,A.batchId,L)})}).then(()=>({batchId:g.batchId,changes:J0(p)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(s,c,u){let l=s.Vu[s.currentUser.toKey()];l||(l=new Oe(de)),l=l.insert(c,u),s.Vu[s.currentUser.toKey()]=l})(r,i.batchId,n),await kc(r,i.changes),await Gh(r.remoteStore)}catch(i){let o=W_(i,"Failed to persist write");n.reject(o)}}async function AA(t,e){let n=Z(t);try{let r=await aj(n.localStore,e);e.targetChanges.forEach((i,o)=>{let s=n.Au.get(o);s&&(ve(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.hu=!0:i.modifiedDocuments.size>0?ve(s.hu,14607):i.removedDocuments.size>0&&(ve(s.hu,42227),s.hu=!1))}),await kc(n,r,e)}catch(r){await Is(r)}}function l0(t,e,n){let r=Z(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.Tu.forEach((o,s)=>{let c=s.view.va(e);c.snapshot&&i.push(c.snapshot)}),(function(s,c){let u=Z(s);u.onlineState=c;let l=!1;u.queries.forEach((h,p)=>{for(let g of p.Sa)g.va(c)&&(l=!0)}),l&&K_(u)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function xj(t,e,n){let r=Z(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Au.get(e),o=i&&i.key;if(o){let s=new Oe(q.comparator);s=s.insert(o,jt.newNoDocument(o,Q.min()));let c=he().add(o),u=new ph(Q.min(),new Map,new Oe(de),s,c);await AA(r,u),r.du=r.du.remove(o),r.Au.delete(e),Y_(r)}else await Kv(r.localStore,e,!1).then(()=>m_(r,e,n)).catch(Is)}async function Pj(t,e){let n=Z(t),r=e.batch.batchId;try{let i=await sj(n.localStore,e);NA(n,r,null),RA(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await kc(n,i)}catch(i){await Is(i)}}async function Oj(t,e,n){let r=Z(t);try{let i=await(function(s,c){let u=Z(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,c).next(p=>(ve(p!==null,37113),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})})(r.localStore,e);NA(r,e,n),RA(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await kc(r,i)}catch(i){await Is(i)}}function RA(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function NA(t,e,n){let r=Z(t),i=r.Vu[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function m_(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||MA(t,r)})}function MA(t,e){t.Eu.delete(e.path.canonicalString());let n=t.du.get(e);n!==null&&(H_(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Y_(t))}function d0(t,e,n){for(let r of n)r instanceof Nh?(t.Ru.addReference(r.key,e),kj(t,r)):r instanceof Mh?(V(Q_,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||MA(t,r.key)):H(19791,{wu:r})}function kj(t,e){let n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(V(Q_,"New document in limbo: "+n),t.Eu.add(r),Y_(t))}function Y_(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){let e=t.Eu.values().next().value;t.Eu.delete(e);let n=new q(Me.fromString(e)),r=t.fu.next();t.Au.set(r,new f_(n)),t.du=t.du.insert(n,r),_A(t.remoteStore,new Cc(Fn(Bh(n.path)),r,"TargetPurposeLimboResolution",x_.ce))}}async function kc(t,e,n){let r=Z(t),i=[],o=[],s=[];r.Tu.isEmpty()||(r.Tu.forEach((c,u)=>{s.push(r.pu(u,e,n).then(l=>{if((l||n)&&r.isPrimaryClient){let h=l?!l.fromCache:n?.targetChanges.get(u.targetId)?.current;r.sharedClientState.updateQueryState(u.targetId,h?"current":"not-current")}if(l){i.push(l);let h=zv.As(u.targetId,l);o.push(h)}}))}),await Promise.all(s),r.Pu.H_(i),await(async function(u,l){let h=Z(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>x.forEach(l,g=>x.forEach(g.Es,y=>h.persistence.referenceDelegate.addReference(p,g.targetId,y)).next(()=>x.forEach(g.ds,y=>h.persistence.referenceDelegate.removeReference(p,g.targetId,y)))))}catch(p){if(!ws(p))throw p;V($_,"Failed to update sequence numbers: "+p)}for(let p of l){let g=p.targetId;if(!p.fromCache){let y=h.Ms.get(g),S=y.snapshotVersion,R=y.withLastLimboFreeSnapshotVersion(S);h.Ms=h.Ms.insert(g,R)}}})(r.localStore,o))}async function Lj(t,e){let n=Z(t);if(!n.currentUser.isEqual(e)){V(Q_,"User change. New user:",e.toKey());let r=await yA(n.localStore,e);n.currentUser=e,(function(o,s){o.mu.forEach(c=>{c.forEach(u=>{u.reject(new j(N.CANCELLED,s))})}),o.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await kc(n,r.Ls)}}function Fj(t,e){let n=Z(t),r=n.Au.get(e);if(r&&r.hu)return he().add(r.key);{let i=he(),o=n.Iu.get(e);if(!o)return i;for(let s of o){let c=n.Tu.get(s);i=i.unionWith(c.view.nu)}return i}}function xA(t){let e=Z(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=AA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Fj.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=xj.bind(null,e),e.Pu.H_=Dj.bind(null,e.eventManager),e.Pu.yu=Cj.bind(null,e.eventManager),e}function Vj(t){let e=Z(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Pj.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Oj.bind(null,e),e}var PA=(()=>{class t{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(n){this.serializer=zh(n.databaseInfo.databaseId),this.sharedClientState=this.Du(n),this.persistence=this.Cu(n),await this.persistence.start(),this.localStore=this.vu(n),this.gcScheduler=this.Fu(n,this.localStore),this.indexBackfillerScheduler=this.Mu(n,this.localStore)}Fu(n,r){return null}Mu(n,r){return null}vu(n){return oj(this.persistence,new Gv,n.initialUser,this.serializer)}Cu(n){return new Ih(Hv.mi,this.serializer)}Du(n){return new Qv}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}return t.provider={build:()=>new t},t})(),g_=class extends PA{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){ve(this.persistence.referenceDelegate instanceof wh,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new Nv(r,e.asyncQueue,n)}Cu(e){let n=this.cacheSizeBytes!==void 0?Yt.withCacheSize(this.cacheSizeBytes):Yt.DEFAULT;return new Ih(r=>wh.mi(r,n),this.serializer)}};var jj=(()=>{class t{async initialize(n,r){this.localStore||(this.localStore=n.localStore,this.sharedClientState=n.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!n.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>l0(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=Lj.bind(null,this.syncEngine),await Tj(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(n){return(function(){return new u_})()}createDatastore(n){let r=zh(n.databaseInfo.databaseId),i=(function(s){return new e_(s)})(n.databaseInfo);return(function(s,c,u,l){return new i_(s,c,u,l)})(n.authCredentials,n.appCheckCredentials,i,r)}createRemoteStore(n){return(function(i,o,s,c,u){return new s_(i,o,s,c,u)})(this.localStore,this.datastore,n.asyncQueue,r=>l0(this.syncEngine,r,0),(function(){return Dh.v()?new Dh:new Yv})())}createSyncEngine(n,r){return(function(o,s,c,u,l,h,p){let g=new p_(o,s,c,u,l,h);return p&&(g.gu=!0),g})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,r)}async terminate(){await(async function(r){let i=Z(r);V(ro,"RemoteStore shutting down."),i.Ea.add(5),await Oc(i),i.Aa.shutdown(),i.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}return t.provider={build:()=>new t},t})();var xh=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ur("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}};var y_=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new j(N.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let n=await(async function(i,o){let s=Z(i),c={documents:o.map(p=>_h(s.serializer,p))},u=await s.Ho("BatchGetDocuments",s.serializer.databaseId,Me.emptyPath(),c,o.length),l=new Map;u.forEach(p=>{let g=z2(s.serializer,p);l.set(g.key.toString(),g)});let h=[];return o.forEach(p=>{let g=l.get(p.toString());ve(!!g,55234,{key:p}),h.push(g)}),h})(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Tc(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{let i=q.fromPath(r);this.mutations.push(new fh(i,this.precondition(i)))}),await(async function(r,i){let o=Z(r),s={writes:i.map(c=>hA(o.serializer,c))};await o.Go("Commit",o.serializer.databaseId,Me.emptyPath(),s)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw H(50498,{Gu:e.constructor.name});n=Q.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new j(N.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){let n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(Q.min())?Jt.exists(!1):Jt.updateTime(n):Jt.none()}preconditionForUpdate(e){let n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(Q.min()))throw new j(N.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Jt.updateTime(n)}return Jt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var v_=class{constructor(e,n,r,i,o){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=o,this.zu=r.maxAttempts,this.M_=new Ac(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_(async()=>{let e=new y_(this.datastore),n=this.Hu(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.Yu(i)}))}).catch(r=>{this.Yu(r)})})}Hu(e){try{let n=this.updateFunction(e);return!Pc(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ju(),Promise.resolve()))):this.deferred.reject(e)}Zu(e){if(e?.name==="FirebaseError"){let n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!sA(n)}return!1}};var ti="FirestoreClient",__=class{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=et.UNAUTHENTICATED,this.clientId=vc.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async s=>{V(ti,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(V(ti,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new vn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=W_(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}};async function zy(t,e){t.asyncQueue.verifyOperationInProgress(),V(ti,"Initializing OfflineComponentProvider");let n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await yA(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function h0(t,e){t.asyncQueue.verifyOperationInProgress();let n=await Uj(t);V(ti,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>a0(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>a0(e.remoteStore,i)),t._onlineComponents=e}async function Uj(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){V(ti,"Using user provided OfflineComponentProvider");try{await zy(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!(function(i){return i.name==="FirebaseError"?i.code===N.FAILED_PRECONDITION||i.code===N.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(n))throw n;os("Error using user provided cache. Falling back to memory cache: "+n),await zy(t,new PA)}}else V(ti,"Using default OfflineComponentProvider"),await zy(t,new g_(void 0));return t._offlineComponents}async function J_(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(V(ti,"Using user provided OnlineComponentProvider"),await h0(t,t._uninitializedComponentsProvider._online)):(V(ti,"Using default OnlineComponentProvider"),await h0(t,new jj))),t._onlineComponents}function Bj(t){return J_(t).then(e=>e.syncEngine)}function $j(t){return J_(t).then(e=>e.datastore)}async function E_(t){let e=await J_(t),n=e.eventManager;return n.onListen=bj.bind(null,e.syncEngine),n.onUnlisten=Rj.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Sj.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Nj.bind(null,e.syncEngine),n}function Hj(t,e,n={}){let r=new vn;return t.asyncQueue.enqueueAndForget(async()=>(function(o,s,c,u,l){let h=new xh({next:g=>{h.Nu(),s.enqueueAndForget(()=>bA(o,p));let y=g.docs.has(c);!y&&g.fromCache?l.reject(new j(N.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&g.fromCache&&u&&u.source==="server"?l.reject(new j(N.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(g)},error:g=>l.reject(g)}),p=new Rh(Bh(c.path),h,{includeMetadataChanges:!0,qa:!0});return CA(o,p)})(await E_(t),t.asyncQueue,e,n,r)),r.promise}function OA(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var f0=new Map;var kA="firestore.googleapis.com",p0=!0,Ph=class{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new j(N.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=kA,this.ssl=p0}else this.host=e.host,this.ssl=e.ssl??p0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=gA;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<nj)throw new j(N.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}ZV("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=OA(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new j(N.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new j(N.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new j(N.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Rc=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ph({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new j(N.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new j(N.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ph(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new qy;switch(r.type){case"firstParty":return new Qy(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new j(N.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){let r=f0.get(n);r&&(V("ComponentProvider","Removing Datastore"),f0.delete(n),r.terminate())})(this),Promise.resolve()}};function zj(t,e,n,r={}){t=ar(t,Rc);let i=jr(e),o=t._getSettings(),s=ae(P({},o),{emulatorOptions:t._getEmulatorOptions()}),c=`${e}:${n}`;i&&(Td(`https://${c}`),Dd("Firestore",!0)),o.host!==kA&&o.host!==c&&os("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let u=ae(P({},o),{host:c,ssl:i,emulatorOptions:r});if(!Pn(u,s)&&(t._setSettings(u),r.mockUserToken)){let l,h;if(typeof r.mockUserToken=="string")l=r.mockUserToken,h=et.MOCK_USER;else{l=hb(r.mockUserToken,t._app?.options.projectId);let p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new j(N.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new et(p)}t._authCredentials=new Gy(new oh(l,h))}}var Oh=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},it=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Nc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}toJSON(){return{type:t._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(xc(n,t._jsonSchema))return new t(e,r||null,new q(Me.fromString(n.referencePath)))}};it._jsonSchemaVersion="firestore/documentReference/1.0",it._jsonSchema={type:Ue("string",it._jsonSchemaVersion),referencePath:Ue("string")};var Nc=class t extends Oh{constructor(e,n,r){super(e,n,Bh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new it(this.firestore,null,new q(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function LA(t,e,...n){if(t=Fe(t),arguments.length===1&&(e=vc.newId()),JV("doc","path",e),t instanceof Rc){let r=Me.fromString(e,...n);return OS(r),new it(t,null,new q(r))}{if(!(t instanceof it||t instanceof Nc))throw new j(N.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Me.fromString(e,...n));return OS(r),new it(t.firestore,t instanceof Nc?t.converter:null,new q(r))}}var m0="AsyncQueue",kh=class{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Ac(this,"async_queue_retry"),this._c=()=>{let r=Hy();r&&V(m0,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;let n=Hy();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;let n=Hy();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});let n=new vn;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ws(e))throw e;V(m0,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){let n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,ur("INTERNAL UNHANDLED ERROR: ",g0(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);let i=a_.createAndSchedule(this,e,n,r,o=>this.hc(o));return this.tc.push(i),i}uc(){this.nc&&H(47125,{Pc:g0(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(let n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){let n=this.tc.indexOf(e);this.tc.splice(n,1)}};function g0(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}function y0(t){return(function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1})(t,["next","error","complete"])}var ni=class extends Rc{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new kh,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new kh(e),this._firestoreClient=void 0,await e}}};function FA(t,e){let n=typeof t=="object"?t:Ad(),r=typeof t=="string"?t:e||lh,i=ic(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=db("firestore");o&&zj(i,...o)}return i}function Wh(t){if(t._terminated)throw new j(N.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||qj(t),t._firestoreClient}function qj(t){let e=t._freezeSettings(),n=(function(i,o,s,c){return new ev(i,o,s,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,OA(c.experimentalLongPollingOptions),c.useFetchStreams,c.isUsingEmulator)})(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new __(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(i){let o=i?._online.build();return{_offline:i?._offline.build(o),_online:o}})(t._componentsProvider))}var cr=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(ut.fromBase64String(e))}catch(n){throw new j(N.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(ut.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:t._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(xc(e,t._jsonSchema))return t.fromBase64String(e.bytes)}};cr._jsonSchemaVersion="firestore/bytes/1.0",cr._jsonSchema={type:Ue("string",cr._jsonSchemaVersion),bytes:Ue("string")};var ys=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new j(N.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ft(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var vs=class{constructor(e){this._methodName=e}};var Yr=class t{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new j(N.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new j(N.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return de(this._lat,e._lat)||de(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:t._jsonSchemaVersion}}static fromJSON(e){if(xc(e,t._jsonSchema))return new t(e.latitude,e.longitude)}};Yr._jsonSchemaVersion="firestore/geoPoint/1.0",Yr._jsonSchema={type:Ue("string",Yr._jsonSchemaVersion),latitude:Ue("number"),longitude:Ue("number")};var Jr=class t{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:t._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(xc(e,t._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new t(e.vectorValues);throw new j(N.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Jr._jsonSchemaVersion="firestore/vectorValue/1.0",Jr._jsonSchema={type:Ue("string",Jr._jsonSchemaVersion),vectorValues:Ue("object")};var Gj=/^__.*__$/,I_=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Un(e,this.data,this.fieldMask,n,this.fieldTransforms):new no(e,this.data,n,this.fieldTransforms)}},Lh=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Un(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function VA(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw H(40011,{Ac:t})}}var w_=class t{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new t(P(P({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){let n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){let n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Vh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(VA(this.Ac)&&Gj.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}},T_=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||zh(e)}Cc(e,n,r,i=!1){return new w_({Ac:e,methodName:n,Dc:r,path:Ft.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function jA(t){let e=t._freezeSettings(),n=zh(t._databaseId);return new T_(t._databaseId,!!e.ignoreUndefinedProperties,n)}function UA(t,e,n,r,i,o={}){let s=t.Cc(o.merge||o.mergeFields?2:0,e,n,i);Z_("Data must be an object, but it was:",s,r);let c=BA(r,s),u,l;if(o.merge)u=new Zt(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let g=C_(e,p,n);if(!s.contains(g))throw new j(N.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);HA(h,g)||h.push(g)}u=new Zt(h),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new I_(new Ct(c),u,l)}var Fh=class t extends vs{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};var D_=class t extends vs{_toFieldTransform(e){return new pv(e.path,new Xi)}isEqual(e){return e instanceof t}};function Wj(t,e,n,r){let i=t.Cc(1,e,n);Z_("Data must be an object, but it was:",i,r);let o=[],s=Ct.empty();ri(r,(u,l)=>{let h=X_(e,u,n);l=Fe(l);let p=i.yc(h);if(l instanceof Fh)o.push(h);else{let g=Kh(l,p);g!=null&&(o.push(h),s.set(h,g))}});let c=new Zt(o);return new Lh(s,c,i.fieldTransforms)}function Kj(t,e,n,r,i,o){let s=t.Cc(1,e,n),c=[C_(e,r,n)],u=[i];if(o.length%2!=0)throw new j(N.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<o.length;g+=2)c.push(C_(e,o[g])),u.push(o[g+1]);let l=[],h=Ct.empty();for(let g=c.length-1;g>=0;--g)if(!HA(l,c[g])){let y=c[g],S=u[g];S=Fe(S);let R=s.yc(y);if(S instanceof Fh)l.push(y);else{let A=Kh(S,R);A!=null&&(l.push(y),h.set(y,A))}}let p=new Zt(l);return new Lh(h,p,s.fieldTransforms)}function Kh(t,e){if($A(t=Fe(t)))return Z_("Unsupported field value:",e,t),BA(t,e);if(t instanceof vs)return(function(r,i){if(!VA(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){let o=[],s=0;for(let c of r){let u=Kh(c,i.wc(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}})(t,e)}return(function(r,i){if((r=Fe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return N2(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Be.fromDate(r);return{timestampValue:vh(i.serializer,o)}}if(r instanceof Be){let o=new Be(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:vh(i.serializer,o)}}if(r instanceof Yr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof cr)return{bytesValue:cA(i.serializer,r._byteString)};if(r instanceof it){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Sc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:B_(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Jr)return(function(s,c){return{mapValue:{fields:{[k_]:{stringValue:L_},[as]:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw c.Sc("VectorValues must only contain numeric values.");return U_(c.serializer,l)})}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${M_(r)}`)})(t,e)}function BA(t,e){let n={};return O0(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ri(t,(r,i)=>{let o=Kh(i,e.mc(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function $A(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Be||t instanceof Yr||t instanceof cr||t instanceof it||t instanceof vs||t instanceof Jr)}function Z_(t,e,n){if(!$A(n)||!_0(n)){let r=M_(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function C_(t,e,n){if((e=Fe(e))instanceof ys)return e._internalPath;if(typeof e=="string")return X_(t,e);throw Vh("Field path arguments must be of type string or ",t,!1,void 0,n)}var Qj=new RegExp("[~\\*/\\[\\]]");function X_(t,e,n){if(e.search(Qj)>=0)throw Vh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ys(...e.split("."))._internalPath}catch{throw Vh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Vh(t,e,n,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new j(N.INVALID_ARGUMENT,c+t+u)}function HA(t,e){return t.some(n=>n.isEqual(e))}var _s=class{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new it(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new b_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(zA("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},b_=class extends _s{data(){return super.data()}};function zA(t,e){return typeof e=="string"?X_(t,e):e instanceof ys?e._internalPath:e._delegate._internalPath}function Yj(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new j(N.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var jh=class{convertValue(e,n="none"){switch(Xr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ne(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(dr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw H(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return ri(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){let n=e.fields?.[as].arrayValue?.values?.map(r=>Ne(r.doubleValue));return new Jr(n)}convertGeoPoint(e){return new Yr(Ne(e.latitude),Ne(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=Uh(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ic(e));default:return null}}convertTimestamp(e){let n=lr(e);return new Be(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=Me.fromString(e);ve(mA(r),9688,{name:e});let i=new dh(r.get(1),r.get(3)),o=new q(r.popFirst(5));return i.isEqual(n)||ur(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};function qA(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var S_=class extends jh{constructor(e){super(),this.firestore=e}convertBytes(e){return new cr(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new it(this.firestore,null,n)}};var Qr=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Zr=class t extends _s{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new rs(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(zA("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new j(N.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,n={};return n.type=t._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}};Zr._jsonSchemaVersion="firestore/documentSnapshot/1.0",Zr._jsonSchema={type:Ue("string",Zr._jsonSchemaVersion),bundleSource:Ue("string","DocumentSnapshot"),bundleName:Ue("string"),bundle:Ue("string")};var rs=class extends Zr{data(e={}){return super.data(e)}},is=class t{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Qr(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new rs(this._firestore,this._userDataWriter,r.key,r,new Qr(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new j(N.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(c=>{let u=new rs(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Qr(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>o||c.type!==3).map(c=>{let u=new rs(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Qr(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return c.type!==0&&(l=s.indexOf(c.doc.key),s=s.delete(c.doc.key)),c.type!==1&&(s=s.add(c.doc),h=s.indexOf(c.doc.key)),{type:Jj(c.type),doc:u,oldIndex:l,newIndex:h}})}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new j(N.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=t._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=vc.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let n=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function Jj(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return H(61501,{type:t})}}function GA(t){t=ar(t,it);let e=ar(t.firestore,ni);return Hj(Wh(e),t._key).then(n=>QA(e,t,n))}is._jsonSchemaVersion="firestore/querySnapshot/1.0",is._jsonSchema={type:Ue("string",is._jsonSchemaVersion),bundleSource:Ue("string","QuerySnapshot"),bundleName:Ue("string"),bundle:Ue("string")};var Mc=class extends jh{constructor(e){super(),this.firestore=e}convertBytes(e){return new cr(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new it(this.firestore,null,n)}};function WA(t,e,n){t=ar(t,it);let r=ar(t.firestore,ni),i=qA(t.converter,e,n);return Zj(r,[UA(jA(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Jt.none())])}function KA(t,...e){t=Fe(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||y0(e[r])||(n=e[r++]);let i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(y0(e[r])){let u=e[r];e[r]=u.next?.bind(u),e[r+1]=u.error?.bind(u),e[r+2]=u.complete?.bind(u)}let o,s,c;if(t instanceof it)s=ar(t.firestore,ni),c=Bh(t._key.path),o={next:u=>{e[r]&&e[r](QA(s,t,u))},error:e[r+1],complete:e[r+2]};else{let u=ar(t,Oh);s=ar(u.firestore,ni),c=u._query;let l=new Mc(s);o={next:h=>{e[r]&&e[r](new is(s,l,u,h))},error:e[r+1],complete:e[r+2]},Yj(t._query)}return(function(l,h,p,g){let y=new xh(g),S=new Rh(h,y,p);return l.asyncQueue.enqueueAndForget(async()=>CA(await E_(l),S)),()=>{y.Nu(),l.asyncQueue.enqueueAndForget(async()=>bA(await E_(l),S))}})(Wh(s),c,i,o)}function Zj(t,e){return(function(r,i){let o=new vn;return r.asyncQueue.enqueueAndForget(async()=>Mj(await Bj(r),i,o)),o.promise})(Wh(t),e)}function QA(t,e,n){let r=n.docs.get(e._key),i=new Mc(t);return new Zr(t,i,e._key,r,new Qr(n.hasPendingWrites,n.fromCache),e.converter)}var Xj={maxAttempts:5};function hc(t,e){if((t=Fe(t)).firestore!==e)throw new j(N.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var A_=class{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=jA(e)}get(e){let n=hc(e,this._firestore),r=new S_(this._firestore);return this._transaction.lookup([n._key]).then(i=>{if(!i||i.length!==1)return H(24041);let o=i[0];if(o.isFoundDocument())return new _s(this._firestore,r,o.key,o,n.converter);if(o.isNoDocument())return new _s(this._firestore,r,n._key,null,n.converter);throw H(18433,{doc:o})})}set(e,n,r){let i=hc(e,this._firestore),o=qA(i.converter,n,r),s=UA(this._dataReader,"Transaction.set",i._key,o,i.converter!==null,r);return this._transaction.set(i._key,s),this}update(e,n,r,...i){let o=hc(e,this._firestore),s;return s=typeof(n=Fe(n))=="string"||n instanceof ys?Kj(this._dataReader,"Transaction.update",o._key,n,r,i):Wj(this._dataReader,"Transaction.update",o._key,n),this._transaction.update(o._key,s),this}delete(e){let n=hc(e,this._firestore);return this._transaction.delete(n._key),this}};var R_=class extends A_{constructor(e,n){super(e,n),this._firestore=e}get(e){let n=hc(e,this._firestore),r=new Mc(this._firestore);return super.get(e).then(i=>new Zr(this._firestore,r,n._key,i._document,new Qr(!1,!1),n.converter))}};function Qh(t,e,n){t=ar(t,ni);let r=P(P({},Xj),n);return(function(o){if(o.maxAttempts<1)throw new j(N.INVALID_ARGUMENT,"Max attempts must be at least 1")})(r),(function(o,s,c){let u=new vn;return o.asyncQueue.enqueueAndForget(async()=>{let l=await $j(o);new v_(o.asyncQueue,l,c,s,u).ju()}),u.promise})(Wh(t),i=>e(new R_(t,i)),r)}function Lc(){return new D_("serverTimestamp")}(function(e,n=!0){(function(i){Es=i})(Hr),$r(new Qt("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),c=new ni(new Wy(r.getProvider("auth-internal")),new Yy(s,r.getProvider("app-check-internal")),(function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new j(N.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new dh(l.options.projectId,h)})(s,i),s);return o=P({useFetchStreams:n},o),c._setSettings(o),c},"PUBLIC").setMultipleInstances(!0)),yn(MS,xS,e),yn(MS,xS,"esm2020")})();var eU={apiKey:"AIzaSyD1m1RhdiM9NtlEv9-lk-TT9bQhBUvC2d0",authDomain:"clouset-cs2.firebaseapp.com",projectId:"clouset-cs2",storageBucket:"clouset-cs2.firebasestorage.app",messagingSenderId:"129931894882",appId:"1:129931894882:web:a45936fa981264e8ee713b"},YA=oy(eU),Ds=Oy(YA),Fc=FA(YA);var Xt=class t{user$=new fe(e=>{let n=Kd(Ds,r=>e.next(r),r=>e.error(r));return()=>n()});async ensurePersistence(){await My(Ds,Qd)}async getUserOnce(){return await new Promise(e=>{let n=Kd(Ds,r=>{n(),e(r??null)})})}async isLoggedInOnce(){return!!await this.getUserOnce()}async loginWithCustomToken(e){return await this.ensurePersistence(),(await Ny(Ds,e)).user}async logout(){await xy(Ds)}static \u0275fac=function(n){return new(n||t)};static \u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"})};function tU(t,e){t&1&&(U(0,"p",2),O(1,"Procesando..."),B())}function nU(t,e){if(t&1&&(U(0,"p",3),O(1),B()),t&2){let n=$();F(),Ae(n.error)}}var Yh=class t{auth=M(Xt);route=M(xn);router=M(Kt);loading=!1;error="";async ngOnInit(){let e=this.route.snapshot.queryParamMap.get("token"),n=this.route.snapshot.queryParamMap.get("error");if(n&&(this.error=n),e){this.loading=!0;try{await this.auth.loginWithCustomToken(e),await this.router.navigateByUrl("/dashboard")}catch(r){this.error=r?.message??"Error al iniciar sesi\xF3n"}finally{this.loading=!1}}}loginSteam(){let e=`${window.location.origin}/login`,n=`/api/auth/steam/start?redirect=${encodeURIComponent(e)}`;window.location.href=n}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=fn({type:t,selectors:[["ng-component"]],decls:9,vars:2,consts:[[2,"max-width","420px","margin","40px auto","font-family","system-ui"],[2,"padding","10px 14px","cursor","pointer",3,"click"],[2,"margin-top","12px"],[2,"color","#b00020","margin-top","12px"]],template:function(n,r){n&1&&(U(0,"div",0)(1,"h1"),O(2,"Login"),B(),U(3,"p"),O(4,"Entr\xE1 con Steam para acceder al dashboard."),B(),U(5,"button",1),Vi("click",function(){return r.loginSteam()}),O(6," Login con Steam "),B(),me(7,tU,2,0,"p",2),me(8,nU,2,1,"p",3),B()),n&2&&(F(7),ge(r.loading?7:-1),F(),ge(r.error?8:-1))},dependencies:[Bl],encapsulation:2})};function eE(t){t||(t=M(un));let e=new fe(n=>{if(t.destroyed){n.next();return}return t.onDestroy(n.next.bind(n))});return n=>n.pipe(fi(e))}var rU=["matches","current"];function JA(){return{estado:"esperando_jugadores",map:null,team1:{name:"Team A",players:[]},team2:{name:"Team B",players:[]},queue:[],updatedAt:Lc()}}var Cs=class t{matchRef=LA(Fc,...rU);_match$=new He(null);match$=this._match$.asObservable();unsub=null;async ensureAndSubscribe(){(await GA(this.matchRef)).exists()||await WA(this.matchRef,JA(),{merge:!1}),this.unsub||(this.unsub=KA(this.matchRef,n=>{this._match$.next(n.data()??null)},n=>{console.error("Match onSnapshot error:",n),this._match$.next(null)}))}async joinQueue(e){e&&await Qh(Fc,async n=>{let r=await n.get(this.matchRef);if(!r.exists()){n.set(this.matchRef,JA(),{merge:!1});return}let i=r.data();if(i.estado!=="esperando_jugadores")throw new Error(`No se puede unirse: estado actual = ${i.estado}`);let o=Array.isArray(i.queue)?[...i.queue]:[];if(!o.includes(e)){if(o.length>=10)throw new Error("La queue ya est\xE1 completa (10 jugadores).");o.push(e),n.update(this.matchRef,{queue:o,updatedAt:Lc()})}})}async leaveQueue(e){e&&await Qh(Fc,async n=>{let r=await n.get(this.matchRef);if(!r.exists())return;let i=r.data();if(i.estado!=="esperando_jugadores")return;let s=(Array.isArray(i.queue)?[...i.queue]:[]).filter(c=>c!==e);n.update(this.matchRef,{queue:s,updatedAt:Lc()})})}async pickPlayer(e,n){!e||!n||await Qh(Fc,async r=>{let i=await r.get(this.matchRef);if(!i.exists())throw new Error("Match no existe.");let o=i.data();if(o.estado!=="armando_equipos")throw new Error(`No se puede pickear: estado = ${o.estado}`);let s=o.team1?.players?[...o.team1.players]:[],c=o.team2?.players?[...o.team2.players]:[],u=s[0]??null,l=c[0]??null;if(!u||!l)throw new Error("No hay l\xEDderes definidos todav\xEDa.");let h=o.turn||"team1";if(h==="team1"){if(e!==u)throw new Error("No sos el l\xEDder de Team A o no es tu turno.")}else if(e!==l)throw new Error("No sos el l\xEDder de Team B o no es tu turno.");let p=Array.isArray(o.unassigned)?[...o.unassigned]:Array.isArray(o.queue)?[...o.queue]:[];if(!p.includes(n))throw new Error("Ese jugador ya no est\xE1 disponible para pick.");if(n===u||n===l)throw new Error("No pod\xE9s pickear a un l\xEDder.");if(s.includes(n)||c.includes(n))throw new Error("Ese jugador ya est\xE1 en un equipo.");if(h==="team1"&&s.length>=5)throw new Error("Team A ya est\xE1 completo.");if(h==="team2"&&c.length>=5)throw new Error("Team B ya est\xE1 completo.");let g=p.filter(X=>X!==n),y=s,S=c;h==="team1"?y=[...s,n]:S=[...c,n];let R=h==="team1"?"team2":"team1",A=y.length===5&&S.length===5,L={team1:ae(P({},o.team1??{name:"Team A"}),{players:y}),team2:ae(P({},o.team2??{name:"Team B"}),{players:S}),unassigned:g,turn:R,updatedAt:Lc()};A&&(L.estado="seleccionando_mapa",L.queue=[],L.unassigned=[]),r.update(this.matchRef,L)})}dispose(){this.unsub&&this.unsub(),this.unsub=null,this._match$.next(null)}static \u0275fac=function(n){return new(n||t)};static \u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"})};var iU=()=>["de_inferno","de_mirage","de_nuke","de_overpass","de_ancient","de_vertigo","de_anubis"];function oU(t,e){if(t&1&&(U(0,"span"),O(1,"Mapa: "),U(2,"b"),O(3),B()()),t&2){let n=$();F(3),Ae(n.match.map)}}function sU(t,e){if(t&1&&(U(0,"span"),O(1,"Turno: "),U(2,"b"),O(3),B()()),t&2){let n=$();F(3),Ae(n.turn==="team1"?(n.match.team1==null?null:n.match.team1.name)??"Team A":(n.match.team2==null?null:n.match.team2.name)??"Team B")}}function aU(t,e){t&1&&(U(0,"div",4),O(1," Est\xE1s fuera. Activ\xE1 "),U(2,"b"),O(3,"Ver match"),B(),O(4," para ver el detalle. "),B())}function cU(t,e){if(t&1&&(Rn(0,"img",14),U(1,"div",13),O(2),B()),t&2){let n=e,r=$().$implicit,i=$(2);kr("leaderAvatar",i.isLeaderA(r)),Yn("src",n.avatar,An),F(2),Ae(n.personaName)}}function uU(t,e){if(t&1&&(U(0,"div",13),O(1),B()),t&2){let n=$().$implicit;F(),Ae(n)}}function lU(t,e){if(t&1&&(U(0,"div",12),me(1,cU,3,4)(2,uU,2,1,"div",13),B()),t&2){let n,r=e.$implicit,i=$(2);kr("leader",i.isLeaderA(r)),Mr("title",i.titleFor(r)),F(),ge((n=i.profileOf(r))?1:2,n)}}function dU(t,e){t&1&&(U(0,"div",10),O(1,"Vac\xEDo"),B())}function hU(t,e){if(t&1&&(Rn(0,"img",14),U(1,"div",18),O(2),B()),t&2){let n=e;Yn("src",n.avatar,An),F(2),Ae(n.personaName)}}function fU(t,e){if(t&1&&(U(0,"div",18),O(1),B()),t&2){let n=$().$implicit;F(),Ae(n)}}function pU(t,e){if(t&1&&(U(0,"div",17),me(1,hU,3,2)(2,fU,2,1,"div",18),B()),t&2){let n,r=e.$implicit,i=$(3);Mr("title",i.titleFor(r)),F(),ge((n=i.profileOf(r))?1:2,n)}}function mU(t,e){t&1&&(U(0,"div",10),O(1,"No hay nadie todav\xEDa"),B())}function gU(t,e){if(t&1&&(U(0,"div",15),O(1,"Jugadores en cola"),B(),U(2,"div",16),Pr(3,pU,3,2,"div",17,xr),me(5,mU,2,0,"div",10),B()),t&2){let n=$(2);F(3),Or(n.queue),F(2),ge(n.queue.length===0?5:-1)}}function yU(t,e){if(t&1&&(Rn(0,"img",14),U(1,"div",18),O(2),B()),t&2){let n=e;Yn("src",n.avatar,An),F(2),Ae(n.personaName)}}function vU(t,e){if(t&1&&(U(0,"div",18),O(1),B()),t&2){let n=$().$implicit;F(),Ae(n)}}function _U(t,e){if(t&1&&(U(0,"div",17),me(1,yU,3,2)(2,vU,2,1,"div",18),B()),t&2){let n,r=e.$implicit,i=$(3);Mr("title",i.titleFor(r)),F(),ge((n=i.profileOf(r))?1:2,n)}}function EU(t,e){if(t&1&&(U(0,"div",15),O(1,"Seleccionando l\xEDderes\u2026"),B(),U(2,"div",10),O(3,"En unos segundos se asignan 2 l\xEDderes y pasan a los equipos."),B(),U(4,"div",16),Pr(5,_U,3,2,"div",17,xr),B()),t&2){let n=$(2);F(5),Or(n.queue)}}function IU(t,e){t&1&&(U(0,"div",10),O(1,"Es tu turno. Eleg\xED un jugador y apret\xE1 Pickear."),B())}function wU(t,e){t&1&&(U(0,"div",10),O(1,"Solo el l\xEDder del turno puede pickear."),B())}function TU(t,e){if(t&1&&(Rn(0,"img",14),U(1,"div",18),O(2),B()),t&2){let n=e;Yn("src",n.avatar,An),F(2),Ae(n.personaName)}}function DU(t,e){if(t&1&&(U(0,"div",18),O(1),B()),t&2){let n=$().$implicit;F(),Ae(n)}}function CU(t,e){if(t&1){let n=pn();U(0,"div",23),Vi("click",function(){let i=qt(n).$implicit,o=$(3);return Gt(o.onSelect(i))}),me(1,TU,3,2)(2,DU,2,1,"div",18),B()}if(t&2){let n,r=e.$implicit,i=$(3);kr("selected",i.selectedId===r),Mr("title",i.titleFor(r)),F(),ge((n=i.profileOf(r))?1:2,n)}}function bU(t,e){t&1&&(U(0,"div",10),O(1,"No hay disponibles"),B())}function SU(t,e){if(t&1&&(U(0,"div",20),O(1),B()),t&2){let n=$(3);F(),Mt(" ",n.pickErr," ")}}function AU(t,e){if(t&1){let n=pn();U(0,"div",15),O(1,"Jugadores disponibles"),B(),me(2,IU,2,0,"div",10)(3,wU,2,0,"div",10),U(4,"div",16),Pr(5,CU,3,4,"div",19,xr),me(7,bU,2,0,"div",10),B(),me(8,SU,2,1,"div",20),U(9,"div",21)(10,"button",22),Vi("click",function(){qt(n);let i=$(2);return Gt(i.onPick())}),O(11),B()()}if(t&2){let n=$(2);F(2),ge(n.canPick?2:3),F(3),Or(n.availableIds),F(2),ge(n.availableIds.length===0?7:-1),F(),ge(n.pickErr?8:-1),F(2),Yn("disabled",!n.canPick||!n.selectedId||n.busyPick),F(),Mt(" ",n.busyPick?"Pickeando\u2026":"Pickear"," ")}}function RU(t,e){if(t&1&&(U(0,"div",25),Rn(1,"div",26),U(2,"div",27),O(3),B(),U(4,"button",28),O(5,"Ban"),B()()),t&2){let n=e.$implicit;F(3),Ae(n)}}function NU(t,e){t&1&&(U(0,"div",15),O(1,"Baneo de mapas"),B(),U(2,"div",10),O(3,"Ac\xE1 listamos 7 mapas. (Bans vienen despu\xE9s)"),B(),U(4,"div",24),Pr(5,RU,6,1,"div",25,xr),B()),t&2&&(F(5),Or(Xm(0,iU)))}function MU(t,e){if(t&1&&(U(0,"div",15),O(1,"Match en curso"),B(),U(2,"div",29),Rn(3,"div",30),U(4,"div",31),O(5),B(),U(6,"button",32),O(7," Acceder a partida "),B()()),t&2){let n=$(2);F(5),Ae(n.match.map??"Mapa no definido")}}function xU(t,e){if(t&1&&(Rn(0,"img",14),U(1,"div",13),O(2),B()),t&2){let n=e,r=$().$implicit,i=$(2);kr("leaderAvatar",i.isLeaderB(r)),Yn("src",n.avatar,An),F(2),Ae(n.personaName)}}function PU(t,e){if(t&1&&(U(0,"div",13),O(1),B()),t&2){let n=$().$implicit;F(),Ae(n)}}function OU(t,e){if(t&1&&(U(0,"div",12),me(1,xU,3,4)(2,PU,2,1,"div",13),B()),t&2){let n,r=e.$implicit,i=$(2);kr("leader",i.isLeaderB(r)),Mr("title",i.titleFor(r)),F(),ge((n=i.profileOf(r))?1:2,n)}}function kU(t,e){t&1&&(U(0,"div",10),O(1,"Vac\xEDo"),B())}function LU(t,e){if(t&1&&(U(0,"div",5)(1,"section",6)(2,"div",7),O(3),B(),U(4,"div",8),Pr(5,lU,3,4,"div",9,xr),me(7,dU,2,0,"div",10),B()(),U(8,"section",11),me(9,gU,6,1)(10,EU,7,0)(11,AU,12,5)(12,NU,7,1)(13,MU,8,1),B(),U(14,"section",6)(15,"div",7),O(16),B(),U(17,"div",8),Pr(18,OU,3,4,"div",9,xr),me(20,kU,2,0,"div",10),B()()()),t&2){let n,r=$();F(3),Ae((r.match.team1==null?null:r.match.team1.name)??"Team A"),F(2),Or(r.teamA),F(2),ge(r.teamA.length===0?7:-1),F(2),ge((n=r.match.estado)==="esperando_jugadores"?9:n==="seleccionando_lideres"?10:n==="armando_equipos"?11:n==="seleccionando_mapa"?12:n==="en_curso"?13:-1),F(7),Ae((r.match.team2==null?null:r.match.team2.name)??"Team B"),F(2),Or(r.teamB),F(2),ge(r.teamB.length===0?20:-1)}}var Jh=class t{matchSvc=M(Cs);match;showDetails=!0;profileOf;mySteamId=null;leaderA=null;leaderB=null;selectedId=null;busyPick=!1;pickErr="";get teamA(){return this.match?.team1?.players??[]}get teamB(){return this.match?.team2?.players??[]}get queue(){return this.match?.queue??[]}get unassigned(){let e=this.match;return Array.isArray(e.unassigned)?e.unassigned:[]}get leaderAId(){return this.leaderA??this.teamA[0]??null}get leaderBId(){return this.leaderB??this.teamB[0]??null}get turn(){return this.match?.turn==="team2"?"team2":"team1"}isLeaderA(e){return!!e&&e===this.leaderAId}isLeaderB(e){return!!e&&e===this.leaderBId}get canPick(){return this.match?.estado!=="armando_equipos"||!this.mySteamId?!1:this.turn==="team1"?this.mySteamId===this.leaderAId:this.mySteamId===this.leaderBId}get availableIds(){let e=this.unassigned.length?this.unassigned:this.queue,n=this.leaderAId,r=this.leaderBId;return e.filter(i=>i&&i!==n&&i!==r)}titleFor(e){return this.profileOf?.(e)?.personaName??e}onSelect(e){e&&this.match?.estado==="armando_equipos"&&(this.selectedId=this.selectedId===e?null:e,this.pickErr="")}async onPick(){if(this.canPick&&this.selectedId)try{this.busyPick=!0,this.pickErr="",await this.matchSvc.pickPlayer(this.mySteamId,this.selectedId),this.selectedId=null}catch(e){this.pickErr=e?.message??String(e)}finally{this.busyPick=!1}}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=fn({type:t,selectors:[["app-match-board"]],inputs:{match:"match",showDetails:"showDetails",profileOf:"profileOf",mySteamId:"mySteamId",leaderA:"leaderA",leaderB:"leaderB"},decls:16,vars:5,consts:[[1,"board"],[1,"board__header"],[1,"state"],[1,"meta"],[1,"board__locked"],[1,"board__grid"],[1,"col"],[1,"col__title"],[1,"stack"],[1,"player",3,"leader"],[1,"hint"],[1,"center"],[1,"player"],[1,"name"],["alt","avatar",1,"avatar",3,"src"],[1,"center__title"],[1,"centerGrid"],[1,"tile"],[1,"name","tiny"],[1,"tile","selectable",3,"selected"],[1,"err"],[2,"margin-top","12px","display","flex","gap","10px"],["type","button",1,"btn","primary",2,"width","100%",3,"click","disabled"],[1,"tile","selectable",3,"click"],[1,"mapList"],[1,"mapRow"],[1,"mapThumb"],[1,"mapName"],["type","button",1,"btn"],[1,"mapCard"],[1,"mapThumb","big"],[1,"mapName","big"],["type","button",1,"btn","primary"]],template:function(n,r){n&1&&(U(0,"div",0)(1,"div",1)(2,"div",2)(3,"span"),O(4,"Estado:"),B(),U(5,"b"),O(6),B()(),U(7,"div",3)(8,"span"),O(9,"Queue: "),U(10,"b"),O(11),B()(),me(12,oU,4,1,"span"),me(13,sU,4,1,"span"),B()(),me(14,aU,5,0,"div",4)(15,LU,21,5,"div",5),B()),n&2&&(F(6),Ae(r.match.estado),F(5),Mt("",r.queue.length,"/10"),F(),ge(r.match.map?12:-1),F(),ge(r.match.estado==="armando_equipos"?13:-1),F(),ge(r.showDetails?15:14))},styles:[".board[_ngcontent-%COMP%]{border:1px solid #e5e5e5;border-radius:14px;padding:12px}.board__header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:12px;padding-bottom:10px;border-bottom:1px solid #eee;margin-bottom:10px;font-size:13px}.meta[_ngcontent-%COMP%]{display:flex;gap:12px;opacity:.85;flex-wrap:wrap}.board__locked[_ngcontent-%COMP%]{padding:16px;font-size:13px;opacity:.75}.board__grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1.3fr 1fr;gap:12px;align-items:start}.col[_ngcontent-%COMP%], .center[_ngcontent-%COMP%]{border:1px solid #eee;border-radius:12px;padding:10px;min-height:360px}.col__title[_ngcontent-%COMP%], .center__title[_ngcontent-%COMP%]{font-weight:800;font-size:12px;margin-bottom:10px}.stack[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.player[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;border:1px solid #ddd;border-radius:12px;padding:6px 8px}.player.leader[_ngcontent-%COMP%]{border-style:solid;border-width:2px;border-color:#ff8a00}.avatar[_ngcontent-%COMP%]{width:26px;height:26px;border-radius:8px;object-fit:cover;flex:0 0 auto}.avatar.leaderAvatar[_ngcontent-%COMP%]{outline:2px solid #ff8a00;outline-offset:1px}.name[_ngcontent-%COMP%]{font-size:12px;font-weight:600;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.tiny[_ngcontent-%COMP%]{font-size:11px;font-weight:600}.hint[_ngcontent-%COMP%]{font-size:12px;opacity:.7;padding:6px 0}.centerGrid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:8px}.tile[_ngcontent-%COMP%]{border:1px solid #ddd;border-radius:12px;padding:8px;display:flex;gap:8px;align-items:center;min-height:44px}.selectable[_ngcontent-%COMP%]{cursor:pointer}.tile.selected[_ngcontent-%COMP%]{border-width:2px;border-color:#111}.err[_ngcontent-%COMP%]{margin-top:10px;padding:10px;border:1px solid #b00020;border-radius:12px;font-size:12px}.mapList[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.mapRow[_ngcontent-%COMP%]{display:grid;grid-template-columns:44px 1fr 70px;gap:10px;align-items:center;border:1px solid #ddd;border-radius:12px;padding:8px}.mapThumb[_ngcontent-%COMP%]{width:44px;height:28px;border-radius:8px;border:1px dashed #bbb}.mapThumb.big[_ngcontent-%COMP%]{width:100%;height:110px}.mapName[_ngcontent-%COMP%]{font-size:12px;font-weight:700}.mapName.big[_ngcontent-%COMP%]{text-align:center;font-size:14px;margin-top:8px}.mapCard[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;align-items:stretch}.btn[_ngcontent-%COMP%]{padding:8px 10px;border:1px solid #ddd;border-radius:12px;background:transparent;cursor:pointer;font-size:12px}.btn.primary[_ngcontent-%COMP%]{font-weight:800}.btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}"]})};function FU(t,e){if(t&1&&(Qn(0,"img",10),re(1,"div",11)(2,"div",12),O(3),se(),re(4,"div",13),O(5),se(),re(6,"a",14),O(7," Ver perfil "),se()()),t&2){let n=e;Po("src",n.avatar,An),F(3),Mt(" ",n.personaName," "),F(2),Ae(n.steamId),F(),Po("href",n.profileUrl,An)}}function VU(t,e){t&1&&(re(0,"div",4),O(1,"Cargando perfil Steam\u2026"),se())}function jU(t,e){t&1&&(re(0,"div",15),O(1," Estado: "),re(2,"b"),O(3,"En cola"),se()())}function UU(t,e){t&1&&(re(0,"div",15),O(1," Estado: "),re(2,"b"),O(3,"En match (Team A)"),se()())}function BU(t,e){t&1&&(re(0,"div",15),O(1," Estado: "),re(2,"b"),O(3,"En match (Team B)"),se()())}function $U(t,e){t&1&&(re(0,"div",15),O(1," Estado: "),re(2,"b"),O(3,"Fuera"),se()())}function HU(t,e){if(t&1&&me(0,jU,4,0,"div",15)(1,UU,4,0,"div",15)(2,BU,4,0,"div",15)(3,$U,4,0,"div",15),t&2){let n,r=$(),i=$(2);ge((n=i.myStatus(e,r))==="cola"?0:n==="team1"?1:n==="team2"?2:3)}}function zU(t,e){t&1&&(re(0,"div",4),O(1,"Cargando match\u2026"),se())}function qU(t,e){if(t&1){let n=pn();re(0,"button",7),Jn("click",function(){qt(n);let i=$(2),o=$(),s=$(2);return Gt(s.leave(i,o))}),O(1," Salir del match "),se()}}function GU(t,e){if(t&1){let n=pn();re(0,"button",7),Jn("click",function(){qt(n);let i=$(2),o=$(),s=$(2);return Gt(s.join(i,o))}),O(1," Ingresar al match "),se()}}function WU(t,e){if(t&1&&(re(0,"div",16),O(1),se(),me(2,qU,2,0,"button",17)(3,GU,2,0,"button",17)),t&2){let n=$(),r=$(),i=$(2);F(),Mt(" Esperando jugadores (",n.queue.length,"/10) "),F(),ge(i.myStatus(n,r)==="cola"?2:3)}}function KU(t,e){t&1&&(re(0,"div",19),O(1," Activ\xE1 \u201CVer match\u201D para ver el detalle del estado. "),se())}function QU(t,e){if(t&1){let n=pn();re(0,"button",7),Jn("click",function(){qt(n);let i=$(5);return Gt(i.toggleWatch())}),O(1),se(),me(2,KU,2,0,"div",19)}if(t&2){let n=$(5);F(),Mt(" ",n.watchMatch?"Dejar de ver":"Ver match"," "),F(),ge(n.watchMatch?-1:2)}}function YU(t,e){t&1&&(re(0,"div",18),O(1," Est\xE1s dentro. Vas a ver el estado completo a la derecha. "),se())}function JU(t,e){if(t&1&&(re(0,"div",16),O(1," Seleccionando l\xEDderes\u2026 "),se(),me(2,QU,3,2)(3,YU,2,0,"div",18)),t&2){let n=$(),r=$(),i=$(2);F(2),ge(i.myStatus(n,r)==="fuera"?2:3)}}function ZU(t,e){if(t&1){let n=pn();re(0,"button",7),Jn("click",function(){qt(n);let i=$(5);return Gt(i.toggleWatch())}),O(1),se()}if(t&2){let n=$(5);F(),Mt(" ",n.watchMatch?"Dejar de ver":"Ver match"," ")}}function XU(t,e){t&1&&(re(0,"div",18),O(1," (UI lista) Falta conectar la acci\xF3n \u201CPickear\u201D con una transacci\xF3n/endpoint. "),se())}function eB(t,e){if(t&1&&(re(0,"div",16),O(1," Armando equipos\u2026 "),se(),me(2,ZU,2,1,"button",17)(3,XU,2,0,"div",18)),t&2){let n=$(),r=$(),i=$(2);F(2),ge(i.myStatus(n,r)==="fuera"?2:3)}}function tB(t,e){if(t&1){let n=pn();re(0,"button",7),Jn("click",function(){qt(n);let i=$(5);return Gt(i.toggleWatch())}),O(1),se()}if(t&2){let n=$(5);F(),Mt(" ",n.watchMatch?"Dejar de ver":"Ver match"," ")}}function nB(t,e){t&1&&(re(0,"div",18),O(1," (UI lista) Falta conectar bans con l\xF3gica/endpoint. "),se())}function rB(t,e){if(t&1&&(re(0,"div",16),O(1," Baneando mapas\u2026 "),se(),me(2,tB,2,1,"button",17)(3,nB,2,0,"div",18)),t&2){let n=$(),r=$(),i=$(2);F(2),ge(i.myStatus(n,r)==="fuera"?2:3)}}function iB(t,e){t&1&&(re(0,"button",17),O(1," Espectear "),se())}function oB(t,e){t&1&&(re(0,"button",17),O(1," Ingresar a partida "),se())}function sB(t,e){if(t&1&&(re(0,"div",16),O(1," Match en curso "),se(),re(2,"div",20),O(3," Mapa: "),re(4,"b"),O(5),se()(),me(6,iB,2,0,"button",17)(7,oB,2,0,"button",17)),t&2){let n=$(),r=$(),i=$(2);F(5),Ae(n.map??"\u2014"),F(),ge(i.myStatus(n,r)==="fuera"?6:7)}}function aB(t,e){if(t&1&&me(0,WU,4,2)(1,JU,4,1)(2,eB,4,1)(3,rB,4,1)(4,sB,8,2),t&2){let n;ge((n=e.estado)==="esperando_jugadores"?0:n==="seleccionando_lideres"?1:n==="armando_equipos"?2:n==="seleccionando_mapa"?3:n==="en_curso"?4:-1)}}function cB(t,e){t&1&&(re(0,"div",4),O(1,"Cargando match\u2026"),se())}function uB(t,e){if(t&1&&Qn(0,"app-match-board",9),t&2){let n=e,r=$(),i=$(2);Po("match",n)("showDetails",i.myStatus(n,r)!=="fuera"||i.watchMatch)("profileOf",i.profileOf.bind(i))("leaderA",(n.team1==null||n.team1.players==null?null:n.team1.players[0])??null)("leaderB",(n.team2==null||n.team2.players==null?null:n.team2.players[0])??null)("mySteamId",r)}}function lB(t,e){if(t&1){let n=pn();re(0,"div",1)(1,"section",2)(2,"div",3),me(3,FU,8,4)(4,VU,2,0,"div",4),se(),re(5,"div",5),me(6,HU,4,1),Oo(7,"async"),Fi(8,zU,2,0,"div",4),se(),re(9,"div",6)(10,"button",7),Jn("click",function(){qt(n);let i=$(2);return Gt(i.logout())}),O(11," Logout "),se()()(),re(12,"section",2)(13,"h3",8),O(14,"Acciones"),se(),me(15,aB,5,1),Oo(16,"async"),Fi(17,cB,2,0,"div",4),se(),me(18,uB,1,6,"app-match-board",9),Oo(19,"async"),se()}if(t&2){let n,r,i,o,s=$(2);F(3),ge((n=s.profileOf(e))?3:4,n),F(3),ge((r=ko(7,4,s.match$))?6:8,r),F(9),ge((i=ko(16,6,s.match$))?15:17,i),F(3),ge((o=ko(19,8,s.match$))?18:-1,o)}}function dB(t,e){t&1&&(re(0,"div"),O(1,"UID inv\xE1lido (no es steam:...)"),se())}function hB(t,e){if(t&1&&me(0,lB,20,10,"div",1)(1,dB,2,0,"div"),t&2){let n,r=$();ge((n=r.steamIdFromUid(e.uid))?0:1,n)}}function fB(t,e){t&1&&(re(0,"p"),O(1,"Cargando sesi\xF3n\u2026"),se())}var Zh=class t{auth=M(Xt);matchSvc=M(Cs);router=M(Kt);destroyRef=M(un);watchMatch=!1;steamMe=null;steamErr="";profileCache=new Map;inflight=new Set;match$=this.matchSvc.match$;constructor(){this.matchSvc.ensureAndSubscribe().catch(e=>console.error("ensureAndSubscribe error",e)),this.matchSvc.match$.pipe(eE(this.destroyRef)).subscribe(e=>{if(!e)return;let n=new Set([...e.team1?.players??[],...e.team2?.players??[],...e.queue??[],...e.unassigned??[]]);for(let r of n)this.ensureProfile(r).catch(()=>{})}),this.auth.user$.pipe(eE(this.destroyRef)).subscribe(e=>{let n=this.steamIdFromUid(e?.uid??"");n&&this.ensureProfile(n).then(r=>this.steamMe=r).catch(()=>{})})}steamIdFromUid(e){return e?.startsWith("steam:")?e.slice(6):null}profileOf(e){return this.profileCache.get(e)??null}async ensureProfile(e){if(!e)return null;let n=this.profileCache.get(e);if(n)return n;if(this.inflight.has(e))return null;try{this.inflight.add(e);let r=await fetch(`/api/steam/me?steamId=${encodeURIComponent(e)}`);if(!r.ok){let o=await r.text().catch(()=>"");throw new Error(`SteamMe HTTP ${r.status} ${o}`.trim())}let i=await r.json();return this.profileCache.set(e,i),i}finally{this.inflight.delete(e)}}myStatus(e,n){return!e||!n?"fuera":(e.team1?.players??[]).includes(n)?"team1":(e.team2?.players??[]).includes(n)?"team2":(e.queue??[]).includes(n)?"cola":"fuera"}async join(e,n){!e||!n||await this.matchSvc.joinQueue(n)}async leave(e,n){!e||!n||await this.matchSvc.leaveQueue(n)}toggleWatch(){this.watchMatch=!this.watchMatch}async logout(){await this.auth.logout(),await this.router.navigateByUrl("/login")}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=fn({type:t,selectors:[["app-dashboard"]],decls:4,vars:3,consts:[[2,"padding","16px","font-family","system-ui"],[2,"display","grid","grid-template-columns","1fr 1.2fr 1fr","gap","16px","align-items","start"],[2,"border","1px solid #e5e5e5","border-radius","12px","padding","12px"],[2,"display","flex","gap","12px","align-items","center"],[2,"font-size","13px","opacity",".8"],[2,"margin-top","12px","border-top","1px solid #eee","padding-top","12px"],[2,"margin-top","12px"],[2,"padding","10px 14px","cursor","pointer","width","100%",3,"click"],[2,"margin","0 0 8px 0"],[3,"match","showDetails","profileOf","leaderA","leaderB","mySteamId"],["width","56","height","56","alt","avatar",2,"border-radius","12px","object-fit","cover",3,"src"],[2,"min-width","0"],[2,"font-weight","800","white-space","nowrap","overflow","hidden","text-overflow","ellipsis"],[2,"font-size","12px","opacity",".7"],["target","_blank","rel","noreferrer",2,"font-size","12px",3,"href"],[2,"font-size","13px"],[2,"font-size","13px","opacity",".8","margin-bottom","10px"],[2,"padding","10px 14px","cursor","pointer","width","100%"],[2,"font-size","13px","opacity",".7"],[2,"margin-top","10px","font-size","13px","opacity",".7"],[2,"font-size","13px","margin-bottom","10px"]],template:function(n,r){if(n&1&&(re(0,"div",0),me(1,hB,2,1),Oo(2,"async"),Fi(3,fB,2,0,"p"),se()),n&2){let i;F(),ge((i=ko(2,1,r.auth.user$))?1:3,i)}},dependencies:[Jh,og],encapsulation:2})};var ZA=async()=>{let t=M(Xt),e=M(Kt);return await t.isLoggedInOnce()?!0:(e.navigateByUrl("/login"),!1)};var XA=async()=>{let t=M(Xt),e=M(Kt);return await t.isLoggedInOnce()?(e.navigateByUrl("/dashboard"),!1):!0};var eR=[{path:"",pathMatch:"full",redirectTo:"dashboard"},{path:"login",component:Yh,canActivate:[XA]},{path:"dashboard",component:Zh,canActivate:[ZA]},{path:"**",redirectTo:"dashboard"}];var tR={providers:[Jp(),Fg(eR)]};var Xh=class t{auth=M(Xt);title=Kn("myapp");async ngOnInit(){await this.auth.ensurePersistence()}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=fn({type:t,selectors:[["app-root"]],decls:1,vars:0,template:function(n,r){n&1&&Qn(0,"router-outlet")},dependencies:[Ya],encapsulation:2})};pg(Xh,tR).catch(t=>console.error(t));
